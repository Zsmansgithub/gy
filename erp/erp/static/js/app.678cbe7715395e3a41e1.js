webpackJsonp([1],{"+A2g":function(t,e){},"+fKP":function(t,e){},"+fiI":function(t,e){},"+ll8":function(t,e){},"/D1D":function(t,e){},"/IOf":function(t,e){},"/owe":function(t,e){},"02c0":function(t,e){},"06db":function(t,e){},"09By":function(t,e){},"0MUR":function(t,e){},"1IhE":function(t,e){},"1K+r":function(t,e){},"1MnF":function(t,e){},"2+sE":function(t,e){},"2/Bh":function(t,e){},"2Iwg":function(t,e){},"2NUA":function(t,e){},"2Qbm":function(t,e){},"2ZRn":function(t,e){},"2ZXC":function(t,e){},"2wU1":function(t,e){},"3Ukr":function(t,e){},"4CjO":function(t,e){},"4NS/":function(t,e){},"4bYa":function(t,e){},"4zvb":function(t,e){},"5AaT":function(t,e){},"5Tij":function(t,e){},"5XIg":function(t,e){},"5hMg":function(t,e){},"5y6W":function(t,e){},"61lf":function(t,e){},"6DX5":function(t,e){t.exports="data:image/png;base64,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"},"6I0K":function(t,e){},"6RIa":function(t,e,a){"use strict";var s=a("xd7I");e.a=new s.default},"772b":function(t,e){},"8CeB":function(t,e){},"8fSM":function(t,e){},"8iw+":function(t,e){},"9C6k":function(t,e){},"9Ut7":function(t,e){},"9WIN":function(t,e){},A0YG:function(t,e){},ACv7:function(t,e){},As1V:function(t,e){},BFjx:function(t,e){},Bcgp:function(t,e){},BoZZ:function(t,e){},C1AH:function(t,e){},Csqc:function(t,e){},D6pq:function(t,e){},DiLR:function(t,e){},EKfq:function(t,e){},ELCf:function(t,e){},FFhV:function(t,e){},FTzB:function(t,e){},FZ8Y:function(t,e){},FeOl:function(t,e,a){"use strict";var s={name:"gyMenuItem",components:{menuItem:l},props:{menuData:Array,menuIndex:{type:String,default:""}},data:function(){return{}},created:function(){},methods:{goPage:function(t){this.$router.push(t)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu"},[t._l(t.menuData,function(e){return[e.resourceAccessList&&e.resourceAccessList.length>0?a("el-submenu",{key:e.name,attrs:{index:e.name}},[a("template",{slot:"title"},[e.icon?a("i",{class:[e.icon]}):"店铺管理"===e.name?a("i",{staticClass:"noIcon"}):t._e(),t._v(" "),"基础数据"===e.name?a("span",{staticClass:"zhiYun",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]):a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])]),t._v(" "),a("gy-menu-item",{attrs:{"menu-data":e.resourceAccessList}})],2):a("el-menu-item",{key:e.name,attrs:{link:e.frontUrl,index:e.frontUrl}},[e.icon?a("i",{class:[e.icon]}):t._e(),t._v("  "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))])])]})],2)},staticRenderFns:[]};var n=a("C7Lr")(s,i,!1,function(t){a("RXSA")},"data-v-34a13950",null),l=e.a=n.exports},FoBu:function(t,e){},FvBd:function(t,e){},"G+9g":function(t,e){},"G/do":function(t,e){},GDz2:function(t,e){t.exports="data:image/png;base64,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"},HCut:function(t,e){},HLRQ:function(t,e){},HU4n:function(t,e){},HfN3:function(t,e){},HoLx:function(t,e){},Hr1n:function(t,e){},I9h7:function(t,e){},IXHs:function(t,e){},IYtc:function(t,e){},J3Za:function(t,e){},JCbQ:function(t,e){},JGKY:function(t,e){},JNao:function(t,e){},JT8k:function(t,e){},KEGd:function(t,e){},KIBe:function(t,e){},KSM6:function(t,e){},Kcuv:function(t,e){},Kf8Q:function(t,e){},KjDu:function(t,e){},Kp53:function(t,e){},LHc5:function(t,e){},LQGf:function(t,e){},LStA:function(t,e){},LtkA:function(t,e){},Lvhq:function(t,e){},M77l:function(t,e){},MLOM:function(t,e){},MNYE:function(t,e){},MhzA:function(t,e){},N1wJ:function(t,e){},N26N:function(t,e){t.exports="data:image/jpeg;base64,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"},Nrsb:function(t,e){},"O/NC":function(t,e){},OFIx:function(t,e){},"P/DX":function(t,e){},PPOd:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABGdBTUEAALGPC/xhBQAABT9JREFUeAHtW02IHEUUrurMYqLxByXKLuISMP4EzCpMJGISEpBcJBfxoqjgTZJDRIyHiFEGFWMuwcSD3hRJBFHUg+LMrLs4P2xgDtuz7urBkIOSxYgT0ehO0j39/F7vTNvM9vR09fasM93Th92a915V1/e9V69+uluIhF/SjT9f1HdZQhwWRGnIR926GJQXhZQVTYjjj+ycKLTwOARki/oR/HidiBxZyyhW/6WEj8Ur+3ZOvMm4bLCTpepui2iahDAEyaPrN6Q+3J3euhgn4N9VFkbrS+YzQlIGuFKIhD0cCSkG2SB6EWEPMrSj+3ZtOxYn4C0sTYceyxaqEFlvWVIeRqEAInAtj3nBnrd/x/iPg7GJeZmAZsKLW9h7+dGF0U7yLQK8bBMhGxKQCDf7gBxGgA85iVANIyARbvYBOYwAH3ISoRpGQCLc7APS3g366EOppmb0201DvE2C9nADUsjp1Ih4ae+OiV9CNdjDSpEPAQZvmEIH+CfQb95wjHKZZazrIZZQTUdOAHse2+ubV/QGMlu3QvH/CiInoBX2XrD8dF72ayGLnIC16LT7HpXKhWvdv1XLkRPACa9TJ/x0ner4yRn8paXfTvjZdNNFTgBnexw/11bcGDJbt0IRXlBbuvgqDjkfDd8CTkFXU9mrLk91IykxAW+fgZ5Plhe5zLIop8H8zNw2nOK+QCTGcpVzN3r1JYisJ+uAJtAng3QgjA2eXWj5UvU9HOMv979++V60MxOmrcgjIEwnVOtMlqvPgYQdTj0pmYBQ18ARwA84AN5+quMgJtrqlBULPRkCin1QMq8vGe+gQtuYp2REQK40h4xPj7czhodaoSNgYIaAruvXCWq82w7e/i3FeLn88wZPXRfhwBBw8S/xGqa8cU88mBX+Fr/f46nrIhwIAqZK8/djg/W8LxZLC5UH+p4AnvMNy/hvzu/EQsiZoO8JyJfmDgDzg51wO3Ip4hcB2eKPYySsNxyQPgWsCkPNBH0dAVJcOSlI3OCD21FJojsrFRpxBAELfUvAZEHfj/H/WEAc4Emk/jAXtgS1b9n1dCU4NT+/0ayZn+DlG0OT4vRN12z6Mp0e+6d1807/ec7HtHeKUalc1DA5Dyyo1OkZAfmzP9xiXrryNTBsZyAWif04vLicLc5+vk5op7WH78vtldL06uyvf8oMatzhpfOTYRhwHvjUz6Zd15MhwKe/dPVqAQuX7e4b4kxwI8h4qkHWV0ZRvwAyTmFb+5DbJleefQDgD7llQctYEivPBJFHQP7s7F2mQVk4fbxLxzeBjIMWWQezBf08hsgZ0uTHCJX3sd5f16Wup5qk+q4w0ghg71mGZM93A98GgDbjPcUj1LCqSHz8lmqoS5K8mxdOKpWVjP0a5pctyRLTWLLe6mfXSx2G2Ppvy99vVrlHJATwlGVZ9A1COtCcrdJBVVuSDaU8sGoCsqXZpy1BnzH7qp3tiT1pSivCVRGA5HUI4+4DJLzIk2lYcpBU1yYCssVqBtn6BJKO/cJ12A5HXo/U9gTKnuMsmy9WTxJZvEvru0sqnhArDQHebAD8RxjvfQmevQEHXa/yGD4wAfwcrlavfgHw/Ny/r6+GGfx0KNAQYM/X6jofSG7B6x4/9TV67pwUtwXtYyAC0mlpoMFngzY6SHaBh8AggVLp65AAFbbiaDuMgKZX7U/k+MlrHL3sxuTCaGNejgB8UclG9nd1busYlh2MTcz2NAgWjuM7On7ymuHv6uL/4aS0GDP719nI5Er6yzjJyWAtGe+84PXpbCvSk/jxdAt7Yv//Cywe7+/eqivfAAAAAElFTkSuQmCC"},PUqj:function(t,e){},"Q2H+":function(t,e,a){"use strict";(function(t){var s=a("rVsN"),i=a.n(s),n=a("6RIa"),l=a("FeOl"),o=a("84iU"),r=a.n(o);e.a={data:function(){return{menuDefault:null,msgTimer:null,msgCountVal:0,axiosInstance:null,showList:!0}},components:{gyMenuItem:l.a},props:{menuData:{type:Array,default:function(){var t=JSON.parse(localStorage.getItem("userInfo"));return!(!t.menuList[0]||!t.menuList[0].resourceAccessList[0])&&("home"===t.menuList[0].resourceAccessList[0].url&&t.menuList[0].resourceAccessList.splice(0,1),t.menuList[0].resourceAccessList)}}},methods:{setNewId:function(t,e){var a=this;return e.forEach(function(e,s,i){var n=t+"-"+(s+1);e.resourceAccessList&&e.resourceAccessList.length>0&&a.setNewId(n,e.resourceAccessList),e.newId=n.slice(1)}),e},handleOpen:function(t,e){},handleClose:function(t,e){},handleSelect:function(t,e,a){"home"===t&&(this.isShowList(),this.menuDefault=t),this.$router.push({name:t})},countLastMsgList:function(){var t=this;null==this.axiosInstance&&(this.axiosInstance=r.a.create()),this.axiosInstance.post(this.$api.workbench.countWbMsgList,{}).then(function(e){0===e.data.code&&(t.msgCountVal=e.data.data.total)}).catch(function(t){console.log("请求失败："+t.status+","+t.statusText)})},isShowList:function(){var t=this;this.showList=!1,i.a.resolve().then(function(){t.showList=!0})}},created:function(){var t=this.menuData.list;if(t&&t.length>0){var e=this.setNewId("",t);this.menuData.list=e}},mounted:function(){var e=this,a=this;n.a.$on("setMenu",function(){a.menuDefault="0-1",e.$router.push({name:"contEssList"})}),this.countLastMsgList();var s=null;t&&Object({NODE_ENV:"production",ENV_CONFIG:"prod",API_ROOT_MAIN:"http://192.168.10.132:8095"})&&(s="production"),"development"!==s&&"testing"!==s&&(this.msgTimer=setInterval(this.countLastMsgList,1e4))},beforeDestroy:function(){this.msgTimer&&clearInterval(this.msgTimer)}}}).call(e,a("V0EG"))},Q8Ra:function(t,e){},QlMj:function(t,e){},QnwB:function(t,e){},QoEK:function(t,e){},R1N6:function(t,e){},R6eJ:function(t,e){},"R8T+":function(t,e){},R9NS:function(t,e){},"RD+b":function(t,e){},RDab:function(t,e){},RXSA:function(t,e){},RbfU:function(t,e){},RvHm:function(t,e){},Ry9t:function(t,e){},SKOf:function(t,e){},SZYT:function(t,e){},Sco6:function(t,e){},ShVN:function(t,e){},Slex:function(t,e,a){"use strict";(function(t){var s=a("84iU"),i=a.n(s);e.a={data:function(){return{todoCount:0,doneCount:0,todoList:[],msgList:[],noTodoDesc:"",noMsgDesc:"",tabs:[],msgTabs:[],warningMsgObj:{deliveryAlarmingCount:0,collectionPaymentCount:0,stockCount:0,receiptPayments:[],delivery:[],inventory:[]},speedyList:[{id:0,value:"新建合同要素",iconfont:"icon-createOrder",linkTo:"createEss"},{id:2,value:"台账",iconfont:"icon-standingBook",linkTo:"transactionStanding"},{id:3,value:"交易管控表",iconfont:"icon-control",linkTo:"control"}],activeId:0,msgActiveId:0,speedyActiveId:null,msgTimer:null,axiosInstance:null}},methods:{jumpAlarm:function(t){this.$router.push({name:"homeMoreAlarmList",query:{activeId:t}})},goToLink:function(t){this.$router.push({name:t})},moreTodoListClick:function(){this.$router.push({name:"homeMoreTodoList",query:{activeId:this.activeId}})},moreMsgListClick:function(){this.$router.push({name:"homeMoreMsgList",query:{activeId:this.msgActiveId}})},moreAlarmListClick:function(){this.$router.push({name:"homeMoreAlarmList"})},tabClick:function(t){this.activeId=t,this.todoList=this.tabs[t],0===t&&0===this.todoList.length&&(this.noTodoDesc="暂无待办事项"),1===t&&0===this.todoList.length&&(this.noTodoDesc="暂无已办事项")},msgtabClick:function(t){this.msgActiveId=t,0!==this.msgTabs.length&&(this.msgList=this.msgTabs[t],0===t&&0===this.msgList.length&&(this.noMsgDesc="暂无提醒消息"),1===t&&0===this.msgList.length&&(this.noMsgDesc="暂无抄送消息"))},speedytabClick:function(t){this.speedyList[t]&&(this.speedyActiveId=this.speedyList[t].id)},msgGoPage:function(t){40===t.targetBizType||41===t.targetBizType?this.$alert(t.message,"库存报警"):42===t.targetBizType||43===t.targetBizType?this.$router.push({name:"deliveryDetail",query:{homeFromFlg:1,id:t.contEssId,saleOrderId:t.saleOrderId,purchaseOrderId:t.purchaseOrderId}}):44===t.targetBizType&&this.$router.push({name:"paymentDetail",query:{homeFromFlg:1,id:t.contEssId,sellerOrderId:t.saleOrderId,purchaseOrderId:t.purchaseOrderId}})},gotoBizPage:function(t,e){var a=t.id,s=t.targetBizId,i=t.targetBizType,n=t.contEssId,l=t.saleOrderId,o=t.purchaseOrderId,r=t.doneFlg,c=t.companyId,d=t.actTaskId;if(null!==t.subSysType&&void 0!==t.subSysType&&0!==t.subSysType||0===t.subSysType&&30===i)return this.$router.push({name:"apprCreate",query:{homeFromFlg:1,bizId:s,bizType:i,subSysType:t.subSysType,doneFlg:r,todoId:a,companyId:c,actTaskId:d}}),!1;if(t.frontPageUrlName)return t.homeFromFlg=1,t.todoId=t.id,this.$router.push({name:t.frontPageUrlName,query:t}),!1;var u=1;2===e&&(u=2,4===t.msgType&&(u=4));var p={homeFromFlg:u,homeBizType:i,doneFlg:r,actTaskId:d,todoId:a};1===i?(p.id=n,this.$router.push({name:"contEssDetail",query:p})):2===i||19===i?(p.id=n,this.$router.push({name:"contractDetail",query:p})):16===i&&0===this.activeId?(p.id=s,4===u?this.$router.push({name:"contEssDetail",query:p}):this.$router.push({name:"createContract",query:p})):16===i&&1===this.activeId?(p.id=s,this.$router.push({name:"contractDetail",query:p})):3===i||13===i||27===i||28===i?(27===i||28===i?p.multiPayId=s:p.payId=s,2===u&&(p.doneFlg=1),p.contEssId=n,p.purchaseOrderId=o,this.$router.push({name:"paymentBuy",query:p})):4===i||11===i||17===i?(p.id=n,p.saleOrderId=l,p.purchaseOrderId=o,p.invoiceId=s,this.$router.push({name:"auditOperation",query:p})):8===i||22===i?(p.dlvItemId=s,p.contEssId=n,this.$router.push({name:"deliverySalesView",query:p})):5===i||12===i?(p.collId=s,p.contEssId=n,this.$router.push({name:"paymentSell",query:p})):6===i||14===i?(p.id=n,p.saleOrderId=l,p.purchaseOrderId=o,this.$router.push({name:"financialConfirmation",query:p})):45===i?(p.id=n,p.sellerOrderId=l,p.purchaseOrderId=o,this.$router.push({name:"paymentDetail",query:p})):1===u&&25===i?(p.id=n,this.$router.push({name:"executionAllocation",query:p})):2!==u&&4!==u||25!==i?7===i||26===i?(p.dlvItemId=s,p.contEssId=n,this.$router.push({name:"deliveryPurchaseView",query:p})):31===i||30===i?(p.id=s,this.$router.push({name:"stampApproval",query:p})):23!==i&&29!==i||(p.id=a,p.contEssId=n,p.targetBizId=s,this.$router.push({name:"settlementDetailBuy",query:p})):(p.id=n,this.$router.push({name:"contEssDetail",query:p}))},retrieveWorkbenchInformation:function(){var t=this;this.getLastMsgList(1);var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e=e.getTime();var a=new Date;a.setHours(23),a.setMinutes(59),a.setSeconds(59),a.setMilliseconds(0);var s={pageNo:1,pageSize:3,msgType:3,targetBizType:2,staDate:e,endDate:a=a.getTime()};this.$http.post(this.$api.workbench.getWbMsgList,s).then(function(e){0===e.data.code&&(t.warningMsgObj.receiptPayments=e.data.data.rows,t.warningMsgObj.collectionPaymentCount=e.data.data.total)}),s={pageNo:1,pageSize:3,msgType:3,targetBizType:1,staDate:e,endDate:a},this.$http.post(this.$api.workbench.getWbMsgList,s).then(function(e){0===e.data.code&&(t.warningMsgObj.delivery=e.data.data.rows,t.warningMsgObj.deliveryAlarmingCount=e.data.data.total)}),s={pageNo:1,pageSize:3,msgType:3,targetBizType:3,staDate:e,endDate:a},this.$http.post(this.$api.workbench.getWbMsgList,s).then(function(e){0===e.data.code&&(t.warningMsgObj.inventory=e.data.data.rows,t.warningMsgObj.stockCount=e.data.data.total)})},getLastMsgList:function(t){var e=this;null==e.axiosInstance&&(e.axiosInstance=i.a.create());var a={pageNo:1,pageSize:10,doneFlg:0};e.axiosInstance.post(this.$api.workbench.getWbTodoList,a).then(function(a){0===a.data.code&&(e.tabs[0]=a.data.data.rows,e.todoCount=a.data.data.total,0===e.activeId&&(e.todoList=e.tabs[e.activeId]),t&&e.tabClick(0))}),a={pageNo:1,pageSize:10,doneFlg:1},e.axiosInstance.post(this.$api.workbench.getWbTodoList,a).then(function(t){0===t.data.code&&(e.tabs[1]=t.data.data.rows,e.doneCount=t.data.data.total,1===e.activeId&&(e.todoList=e.tabs[e.activeId]))}),a={pageNo:1,pageSize:5,msgType:1},e.axiosInstance.post(this.$api.workbench.getWbMsgList,a).then(function(a){0===a.data.code&&(e.msgTabs[0]=a.data.data.rows,0===e.msgActiveId&&(e.msgList=e.msgTabs[e.msgActiveId]),t&&e.msgtabClick(0))}),a={pageNo:1,pageSize:5,msgType:2},e.axiosInstance.post(this.$api.workbench.getWbMsgList,a).then(function(t){0===t.data.code&&(e.msgTabs[1]=t.data.data.rows,1===e.msgActiveId&&(e.msgList=e.msgTabs[e.msgActiveId]))})}},mounted:function(){this.retrieveWorkbenchInformation();var e=null;t&&Object({NODE_ENV:"production",ENV_CONFIG:"prod",API_ROOT_MAIN:"http://192.168.10.132:8095"})&&(e="production"),"development"!==e&&"testing"!==e&&(this.msgTimer=setInterval(this.getLastMsgList,1e4))},beforeDestroy:function(){this.msgTimer&&clearInterval(this.msgTimer)}}}).call(e,a("V0EG"))},"T+cj":function(t,e){},T2uo:function(t,e){},T7Ue:function(t,e){},"Td+A":function(t,e){},TpmO:function(t,e){},V25x:function(t,e){},Vfgn:function(t,e){t.exports="data:image/png;base64,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"},Vh2p:function(t,e){},Vjus:function(t,e){},"WRv+":function(t,e){},WvWV:function(t,e){},XKpp:function(t,e){},XNG9:function(t,e){},XYsR:function(t,e){},XlmN:function(t,e){},Y7X4:function(t,e){},YMuj:function(t,e){},Z9mV:function(t,e){},ZAMU:function(t,e){},ZugI:function(t,e){},a1aq:function(t,e){},alHQ:function(t,e){},bAuX:function(t,e){},bh8r:function(t,e){},"cA+u":function(t,e){},dbpe:function(t,e){},dtmi:function(t,e){},dwwL:function(t,e){},"e+lL":function(t,e){},eDnr:function(t,e){},"eKH/":function(t,e){},fzCH:function(t,e){},ghcj:function(t,e){},ghu7:function(t,e){},"h/cL":function(t,e){},hDXJ:function(t,e){},hvnI:function(t,e){},iIrO:function(t,e){},iSY5:function(t,e){},iSwL:function(t,e){},iTlG:function(t,e){},in3q:function(t,e){},"iwh+":function(t,e){},"j+hV":function(t,e){},j3Um:function(t,e){},j4Xg:function(t,e){},jSQi:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("ZLEe"),i=a.n(s),n=a("xd7I"),l=a("briU"),o=a.n(l),r=(a("772b"),a("Vh2p"),a("DXWb")),c=a.n(r),d=(a("pkXS"),a("6HkW")),u=a.n(d),p=(a("R1N6"),a("Kns1")),v=a.n(p),m=(a("dwwL"),a("gANz")),h=a.n(m),y=(a("JGKY"),a("vzKS")),f=a.n(y),_=(a("D6pq"),a("LngF")),g=a.n(_),C=(a("T7Ue"),a("A1Xu")),b=a.n(C),w=(a("qkjf"),a("2NGc")),I=a.n(w),k=(a("+ll8"),a("KUPU")),x=a.n(k),D=(a("HfN3"),a("O4rh")),S=a.n(D),T=(a("HCut"),a("69rw")),F=a.n(T),N=(a("R6eJ"),a("U/NU")),L=a.n(N),P=(a("FFhV"),a("c7SY")),A=a.n(P),$=(a("bAuX"),a("amgX")),O=a.n($),E=(a("V25x"),a("CaVz")),B=a.n(E),M=(a("9Ut7"),a("bFga")),R=a.n(M),U=(a("8fSM"),a("BSLp")),z=a.n(U),V=(a("qBNC"),a("4C3X")),Q=a.n(V),j=(a("1IhE"),a("kMfv")),q=a.n(j),W=(a("XKpp"),a("r4l+")),H=a.n(W),K=(a("zfRy"),a("in5F")),X=a.n(K),J=(a("4bYa"),a("kSyf")),G=a.n(J),Z=(a("HLRQ"),a("DPgH")),Y=a.n(Z),tt=(a("Y7X4"),a("8pHr")),et=a.n(tt),at=(a("in3q"),a("m/BP")),st=a.n(at),it=(a("Z9mV"),a("9TuG")),nt=a.n(it),lt=(a("EKfq"),a("u715")),ot=a.n(lt),rt=(a("tY/5"),a("BN0i")),ct=a.n(rt),dt=(a("bh8r"),a("t2Ph")),ut=a.n(dt),pt=(a("4CjO"),a("mnkl")),vt=a.n(pt),mt=(a("tEOF"),a("1rbW")),ht=a.n(mt),yt=(a("KjDu"),a("Fj5f")),ft=a.n(yt),_t=(a("Sco6"),a("PFqO")),gt=a.n(_t),Ct=(a("Q8Ra"),a("2H0s")),bt=a.n(Ct),wt=(a("iwh+"),a("gObi")),It=a.n(wt),kt=(a("z/hq"),a("/i4k")),xt=a.n(kt),Dt=(a("ghu7"),a("Smky")),St=a.n(Dt),Tt=(a("q5Ai"),a("05m7")),Ft=a.n(Tt),Nt=(a("wuaR"),a("IZc5")),Lt=a.n(Nt),Pt=(a("HoLx"),a("TBQ/")),At=a.n(Pt),$t=(a("oEJ1"),a("DNEB")),Ot=a.n($t),Et=(a("Kp53"),a("79xb")),Bt=a.n(Et),Mt=(a("8CeB"),a("PLMu")),Rt=a.n(Mt),Ut=(a("BFjx"),a("vshP")),zt=a.n(Ut),Vt=(a("XlmN"),a("9sXv")),Qt=a.n(Vt),jt=(a("ACv7"),a("wCbq")),qt=a.n(jt),Wt=(a("iSY5"),a("byzU")),Ht=a.n(Wt),Kt=(a("LHc5"),a("y/8f")),Xt=a.n(Kt),Jt=(a("02c0"),a("jovA")),Gt=a.n(Jt);n.default.component(Gt.a.name,Gt.a),n.default.component(Xt.a.name,Xt.a),n.default.component(Ht.a.name,Ht.a),n.default.component(qt.a.name,qt.a),n.default.component(Qt.a.name,Qt.a),n.default.component(zt.a.name,zt.a),n.default.component(Rt.a.name,Rt.a),n.default.component(Bt.a.name,Bt.a),n.default.component(Ot.a.name,Ot.a),n.default.component(At.a.name,At.a),n.default.component(Lt.a.name,Lt.a),n.default.component(Ft.a.name,Ft.a),n.default.component(St.a.name,St.a),n.default.component(xt.a.name,xt.a),n.default.component(It.a.name,It.a),n.default.component(bt.a.name,bt.a),n.default.component(gt.a.name,gt.a),n.default.component(ft.a.name,ft.a),n.default.component(ht.a.name,ht.a),n.default.component(vt.a.name,vt.a),n.default.component(ut.a.name,ut.a),n.default.component(ct.a.name,ct.a),n.default.component(ot.a.name,ot.a),n.default.component(nt.a.name,nt.a),n.default.component(st.a.name,st.a),n.default.component(et.a.name,et.a),n.default.component(Y.a.name,Y.a),n.default.component(G.a.name,G.a),n.default.component(X.a.name,X.a),n.default.component(H.a.name,H.a),n.default.component(q.a.name,q.a),n.default.component(Q.a.name,Q.a),n.default.component(z.a.name,z.a),n.default.component(R.a.name,R.a),n.default.component(B.a.name,B.a),n.default.component(z.a.name,z.a),n.default.component(O.a.name,O.a),n.default.component(A.a.name,A.a),n.default.component(L.a.name,L.a),n.default.component(F.a.name,F.a),n.default.component(S.a.name,S.a),n.default.component(x.a.name,x.a),n.default.component(I.a.name,I.a),n.default.component(b.a.name,b.a),n.default.component(g.a.name,g.a),n.default.component(f.a.name,f.a),n.default.component(h.a.name,h.a),n.default.component(v.a.name,v.a),n.default.component(u.a.name,u.a),n.default.use(c.a),n.default.prototype.$message=Gt.a,n.default.prototype.$radio=Xt.a,n.default.prototype.$row=Ht.a,n.default.prototype.$col=qt.a,n.default.prototype.$menu=Qt.a,n.default.prototype.$submenu=zt.a,n.default.prototype.$menuitem=Rt.a,n.default.prototype.$menuitemgroup=Bt.a,n.default.prototype.$container=Ot.a,n.default.prototype.$header=At.a,n.default.prototype.$aside=Lt.a,n.default.prototype.$main=Ft.a,n.default.prototype.$footer=St.a,n.default.prototype.$breadcrumb=xt.a,n.default.prototype.$breadcrumbItem=It.a,n.default.prototype.$form=bt.a,n.default.prototype.$formItem=gt.a,n.default.prototype.$input=ft.a,n.default.prototype.$inputnumber=ht.a,n.default.prototype.$select=vt.a,n.default.prototype.$option=ot.a,n.default.prototype.$optiongroup=nt.a,n.default.prototype.$checkbox=st.a,n.default.prototype.$checkboxbutton=et.a,n.default.prototype.$checkboxgroup=Y.a,n.default.prototype.$datepicker=G.a,n.default.prototype.$timepicker=X.a,n.default.prototype.$radiogroup=H.a,n.default.prototype.$button=q.a,n.default.prototype.$buttongroup=Q.a,n.default.prototype.$pagination=z.a,n.default.prototype.$messagebox=R.a,n.default.prototype.$confirm=R.a.confirm,n.default.prototype.$tree=B.a,n.default.prototype.$alert=R.a.alert,n.default.prototype.$upload=O.a,n.default.prototype.$table=L.a,n.default.prototype.$tablecolumn=F.a,n.default.prototype.$tag=S.a,n.default.prototype.$tabs=b.a,n.default.prototype.tabpane=g.a,n.default.prototype.$tooltip=I.a,n.default.prototype.$step=f.a,n.default.prototype.$steps=h.a,n.default.prototype.$switch=v.a,n.default.prototype.$autocomplete=u.a;var Zt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading"},[e("span",[e("i",{staticClass:"icon icon-loading"})])])}]};var Yt=a("C7Lr")({data:function(){return{}}},Zt,!1,function(t){a("Bcgp")},"data-v-751fdfec",null).exports,te=a("2bvH"),ee={data:function(){return{}},components:{gyLoading:Yt},computed:Object(te.b)(["showLoading"])},ae={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid"},[e("router-view",{attrs:{"keep-alive":"",transition:"","transition-mode":"out-in"}}),this._v(" "),e("transition",{attrs:{name:"fade"}},[e("gy-loading",{directives:[{name:"show",rawName:"v-show",value:this.showLoading,expression:"showLoading"}]})],1)],1)},staticRenderFns:[]};var se=a("C7Lr")(ee,ae,!1,function(t){a("WvWV")},null,null).exports,ie=a("7LQH"),ne={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view")],1)},staticRenderFns:[]},le=a("C7Lr")(null,ne,!1,null,null,null).exports,oe={data:function(){return{userInfo:null}},created:function(){this.init()},methods:{init:function(){this.userInfo=JSON.parse(localStorage.getItem("userInfo"))},modify:function(){this.$router.push({name:"changePassword"})},logout:function(){var t=this;this.$confirm("确定退出登录吗？","提示",{cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(){t.$http.post(t.$api.login.logout).then(function(e){if(0===e.data.code)return localStorage.removeItem("userInfo"),void t.$router.push({name:"login"});t.$alert(e.data.message,"出错了")})})}}},re={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[t._m(0),t._v(" "),a("div",{staticClass:"info"},[a("i",{staticClass:"iconfont icon-user"}),t._v(" "),a("span",[t._v(t._s(t.userInfo.companyName)+",  "+t._s(t.userInfo.username))]),t._v("   \n        "),t._m(1),t._v(" "),a("span",{on:{click:t.modify}},[t._v("修改密码")]),t._v(" "),a("span",{on:{click:function(e){return t.logout()}}},[a("i",{staticClass:"iconfont icon-remove"}),t._v(" 退出")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"log"},[e("img",{attrs:{src:a("Vfgn")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"iconfont icon-iconRemind"})])}]};var ce=a("C7Lr")(oe,re,!1,function(t){a("G+9g"),a("zPsg")},"data-v-292739c3",null).exports,de={data:function(){return{breadcrumbData:[]}},computed:Object(te.b)(["breadcrumb"]),watch:{breadcrumb:function(t,e){this.breadcrumbFilter(t)}},created:function(){this.breadcrumbFilter(this.breadcrumb)},methods:{breadcrumbFilter:function(t){this.getName(yr,t,0,"")},getName:function(t,e,a,s){var i=this;a++,t&&t.length>0&&t.map(function(t,n){t.name===e?(s+=","+n,i.setBreadcrumb(s,a)):t.children&&t.children.length>0&&i.getName(t.children,e,a,s+","+n)})},setBreadcrumb:function(t){var e=t.split(","),a=[],s=yr;e.shift();for(var i=0;i<e.length;i++)(s=0===i?s[e[i]]:s.children[e[i]])&&s.meta&&s.meta.title&&a.push(s.meta.title);this.breadcrumbData=a}}},ue={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-breadcrumb",{staticClass:"breadcrumb-box",attrs:{"separator-class":"el-icon-arrow-right"}},[t.breadcrumb?a("div",t._l(t.breadcrumbData,function(e,s){return a("el-breadcrumb-item",{key:s},[t._v(t._s(e))])}),1):t._e()])},staticRenderFns:[]};var pe=a("C7Lr")(de,ue,!1,function(t){a("FZ8Y")},"data-v-6c6e4a71",null).exports,ve=a("Q2H+"),me={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showList?a("div",{staticClass:"gy-menu"},[a("el-menu",{ref:"elementMenu",staticClass:"navMenu-body",attrs:{"default-active":t.menuDefault,"unique-opened":!0},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"home",link:"home"}},[a("i",{staticClass:"iconfont icon-workbench"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("工作台"),t.msgCountVal>0?a("span",{staticClass:"msg-count-color"},[t._v(" ("+t._s(t.msgCountVal)+")")]):t._e()])]),t._v(" "),a("gy-menu-item",{attrs:{"menu-data":t.menuData}})],1)],1):t._e()},staticRenderFns:[]};var he=function(t){a("KSM6")},ye={name:"layout",components:{top:ce,gyBreadcrumb:pe,gyMenu:a("C7Lr")(ve.a,me,!1,he,null,null).exports},data:function(){return{}},methods:{}},fe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"layout"},[a("el-header",[a("top")],1),t._v(" "),a("el-container",{staticClass:"wrap-main"},[a("el-aside",{attrs:{width:"240px"}},[a("gy-menu")],1),t._v(" "),a("el-container",{staticStyle:{background:"#fff","margin-left":"7px"}},[a("el-main",{staticClass:"main-wrap"},[a("gy-breadcrumb"),t._v(" "),a("div",{staticClass:"root-router"},[a("keep-alive",[t.$route.meta.keepAlive?a("router-view",{key:t.$route.fullPath}):t._e()],1),t._v(" "),t.$route.meta.keepAlive?t._e():a("router-view",{key:t.$route.fullPath})],1)],1)],1)],1)],1)},staticRenderFns:[]};var _e=a("C7Lr")(ye,fe,!1,function(t){a("2ZRn")},"data-v-75748240",null).exports,ge=a("Slex"),Ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"erp-home"},[a("div",{staticClass:"page-bottom clearfix"},[a("div",{staticClass:"card matter card-big"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title l"},[t._v("事项管理")]),t._v(" "),a("div",{staticClass:"r"},[a("ul",{staticClass:"m-l"},[a("li",{class:{active:0===t.activeId},on:{click:function(e){return t.tabClick(0)}}},[a("span",[t._v("待办事项("+t._s(t.todoCount)+")")])]),t._v(" "),a("li",{class:{active:1===t.activeId},on:{click:function(e){return t.tabClick(1)}}},[a("span",[t._v("已办事项("+t._s(t.doneCount)+")")])])]),t._v(" "),a("div",{staticClass:"m-r",on:{click:function(e){return t.moreTodoListClick()}}},[t._v("更多")])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("ul",[t._l(t.todoList,function(e,s){return a("li",{key:s},[a("span",{staticClass:"l"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.gotoBizPage(e)}}},[1===e.targetBizType?a("i",{staticClass:"iconfont icon-element"}):2===e.targetBizType||16===e.targetBizType||19===e.targetBizType?a("i",{staticClass:"iconfont icon-contract"}):7===e.targetBizType||8===e.targetBizType?a("i",{staticClass:"iconfont icon-seledelivery"}):4===e.targetBizType||6===e.targetBizType||11===e.targetBizType||17===e.targetBizType||14===e.targetBizType?a("i",{staticClass:"iconfont icon-billing"}):3===e.targetBizType||5===e.targetBizType||12===e.targetBizType||13===e.targetBizType?a("i",{staticClass:"iconfont icon-receiptPayments1"}):30===e.targetBizType?a("i",{staticClass:"iconfont icon-yongyin"}):29===e.targetBizType?a("i",{staticClass:"iconfont icon-jiesuan"}):a("i",{staticClass:"iconfont icon-element"}),t._v("\n              "+t._s(0==t.activeId?e.todoMsg:e.doneMsg))])]),t._v(" "),a("span",{staticClass:"r"},[t._v(t._s(t._f("date")(e.createdDate,2)))])])}),t._v(" "),0==t.todoList.length?a("li",[a("span",{staticClass:"l"},[t._v(t._s(t.noTodoDesc))]),t._v(" "),a("span",{staticClass:"r"})]):t._e()],2)])]),t._v(" "),a("div",{staticClass:"card warningMsg card-big"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title l"},[t._v("预警消息")]),t._v(" "),a("div",{staticClass:"r"},[a("div",{staticClass:"m-r",on:{click:function(e){return t.moreAlarmListClick()}}},[t._v("更多")])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("ul",[a("li",[a("div",{staticClass:"min-title"},[a("i",{staticClass:"iconfont icon-receiptPayments"}),t._v("\n                            收款("+t._s(t.warningMsgObj.collectionPaymentCount)+")\n                        ")]),t._v(" "),a("div",{staticClass:"min-wrap"},[t._l(t.warningMsgObj.receiptPayments,function(e,s){return a("div",{key:s,staticClass:"min-item"},[a("span",{staticClass:"l"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.msgGoPage(e)}}},[t._v(t._s(e.message))])])])}),t._v(" "),0==t.warningMsgObj.receiptPayments.length?a("div",{staticClass:"min-item"},[a("span",{staticClass:"l"},[t._v("暂无收款预警消息")]),t._v(" "),a("span",{staticClass:"r"})]):t._e()],2)]),t._v(" "),a("li",[a("div",{staticClass:"min-title"},[a("i",{staticClass:"iconfont icon-goodsDelivery"}),t._v("\n                            货物交割("+t._s(t.warningMsgObj.deliveryAlarmingCount)+")\n                        ")]),t._v(" "),a("div",{staticClass:"min-wrap"},[t._l(t.warningMsgObj.delivery,function(e,s){return a("div",{key:s,staticClass:"min-item"},[a("span",{staticClass:"l"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.msgGoPage(e)}}},[t._v(t._s(e.message))])])])}),t._v(" "),0==t.warningMsgObj.delivery.length?a("div",{staticClass:"min-item"},[a("span",{staticClass:"l"},[t._v("暂无交割预警消息")]),t._v(" "),a("span",{staticClass:"r"})]):t._e()],2)]),t._v(" "),a("li",[a("div",{staticClass:"min-title"},[a("i",{staticClass:"iconfont icon-repertory"}),t._v("\n                            库存("+t._s(t.warningMsgObj.stockCount)+")\n                        ")]),t._v(" "),a("div",{staticClass:"min-wrap"},[t._l(t.warningMsgObj.inventory,function(e,s){return a("div",{key:s,staticClass:"min-item"},[a("span",{staticClass:"l"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.msgGoPage(e)}}},[t._v(t._s(e.message))])])])}),t._v(" "),0==t.warningMsgObj.inventory.length?a("div",{staticClass:"min-item"},[a("span",{staticClass:"l"},[t._v("暂无库存预警消息")]),t._v(" "),a("span",{staticClass:"r"})]):t._e()],2)])])])]),t._v(" "),a("div",{staticClass:"card msgTip card-small"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title l"},[t._v("提醒消息")]),t._v(" "),a("div",{staticClass:"r"},[a("ul",{staticClass:"m-l"},[a("li",{class:{active:0===t.msgActiveId},on:{click:function(e){return t.msgtabClick(0)}}},[a("span",[t._v("提醒消息")])]),t._v(" "),a("li",{class:{active:1===t.msgActiveId},on:{click:function(e){return t.msgtabClick(1)}}},[a("span",[t._v("抄送消息")])])]),t._v(" "),a("div",{staticClass:"m-r",on:{click:function(e){return t.moreMsgListClick()}}},[t._v("更多")])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("ul",[t._l(t.msgList,function(e,s){return a("li",{key:s},[a("span",{staticClass:"l"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.gotoBizPage(e,2)}}},[t._v(t._s(e.message))])]),t._v(" "),a("span",{staticClass:"r"},[t._v(t._s(t._f("date")(e.createdDate,2)))])])}),t._v(" "),0===t.msgList.length?a("li",[a("span",{staticClass:"l"},[t._v(t._s(t.noMsgDesc))]),t._v(" "),a("span",{staticClass:"r"})]):t._e()],2)])]),t._v(" "),a("div",{staticClass:"card speedy card-small"},[t._m(0),t._v(" "),a("div",{staticClass:"bottom"},[a("ul",[a("div",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_create_cont_ess",expression:"'to_create_cont_ess'"}],staticStyle:{"margin-bottom":"15px","margin-left":"5px"}},[a("li",[a("div",{on:{click:function(e){return t.goToLink(t.speedyList[0].linkTo)}}},[a("i",{staticClass:"iconfont",class:t.speedyList[0].iconfont}),t._v(" "),a("span",{staticClass:"text"},[t._v(t._s(t.speedyList[0].value))])])])]),t._v(" "),a("span",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"look_standingbook",expression:"'look_standingbook'"}],staticStyle:{"margin-left":"5px"}},[a("li",[a("div",{on:{click:function(e){return t.goToLink(t.speedyList[1].linkTo)}}},[a("i",{staticClass:"iconfont",class:t.speedyList[1].iconfont}),t._v(" "),a("span",{staticClass:"text"},[t._v(t._s(t.speedyList[1].value))])])])]),t._v(" "),a("span",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"look_control_report",expression:"'look_control_report'"}],staticStyle:{"margin-left":"5px"}},[a("li",[a("div",{on:{click:function(e){return t.goToLink(t.speedyList[2].linkTo)}}},[a("i",{staticClass:"iconfont",class:t.speedyList[2].iconfont}),t._v(" "),a("span",{staticClass:"text"},[t._v(t._s(t.speedyList[2].value))])])])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"top"},[e("div",{staticClass:"title l"},[this._v("快捷入口")])])}]};var be=function(t){a("/IOf")},we=a("C7Lr")(ge.a,Ce,!1,be,"data-v-92ba32d4",null).exports,Ie={name:"homeMoreTodoList",data:function(){return{hollowTabList:[],total:null,activeId:null,hollowMoreObj:{pageNo:1,pageSize:10,staDate:null,endDate:null,keywords:null,doneFlg:0}}},activated:function(){this.$route.meta.isBack||(this.hollowMoreObj={},this.hollowMoreClick(1)),this.$route.meta.isBack=!1},mounted:function(){this.activeId=Number(this.$route.query.activeId),this.hollowMoreObj.doneFlg=Number(this.$route.query.activeId)},methods:{hollowMoreClick:function(t){var e=this;this.hollowMoreObj.pageNo=t,this.$http.post(this.$api.workbench.getWbTodoList,this.hollowMoreObj).then(function(t){0===t.data.code&&(e.total=t.data.data.total,e.hollowTabList=t.data.data.rows)})},gotoBizPage:function(t){var e=t.id,a=t.targetBizId,s=t.targetBizType,i=t.contEssId,n=t.saleOrderId,l=t.purchaseOrderId,o=t.doneFlg,r=t.actTaskId;if(null!==t.subSysType&&void 0!==t.subSysType&&0!==t.subSysType||0===t.subSysType&&30===s)return this.$router.push({name:"apprCreate",query:{homeFromFlg:1,bizId:a,bizType:s,subSysType:t.subSysType,doneFlg:o,todoId:e,actTaskId:r}}),!1;if(t.frontPageUrlName)return t.homeFromFlg=1,t.todoId=t.id,this.$router.push({name:t.frontPageUrlName,query:t}),!1;var c={homeFromFlg:1,homeBizType:s,doneFlg:o,actTaskId:r,todoId:e};1===s?(c.id=i,this.$router.push({name:"contEssDetail",query:c})):2===s||19===s?(c.id=i,this.$router.push({name:"contractDetail",query:c})):16===s&&0===this.activeId?(c.id=a,this.$router.push({name:"createContract",query:c})):16===s&&1===this.activeId?(c.id=a,this.$router.push({name:"contractDetail",query:c})):3===s||13===s||27===s||28===s?(27===s||28===s?c.multiPayId=a:c.payId=a,c.contEssId=i,c.purchaseOrderId=l,this.$router.push({name:"paymentBuy",query:c})):4===s||11===s||17===s?(c.id=i,c.saleOrderId=n,c.purchaseOrderId=l,c.invoiceId=a,this.$router.push({name:"auditOperation",query:c})):8===s||22===s?(c.dlvItemId=a,c.contEssId=i,this.$router.push({name:"deliverySalesView",query:c})):5===s||12===s?(c.collId=a,c.contEssId=i,this.$router.push({name:"paymentSell",query:c})):6===s||14===s?(c.id=i,c.saleOrderId=n,c.purchaseOrderId=l,this.$router.push({name:"financialConfirmation",query:c})):25===s?(c.id=i,this.$router.push({name:"executionAllocation",query:c})):7===s||26===s?(c.dlvItemId=a,c.contEssId=i,this.$router.push({name:"deliveryPurchaseView",query:c})):31===s||30===s?(c.id=a,this.$router.push({name:"stampApproval",query:c})):29===s&&(c.id=e,c.contEssId=i,c.targetBizId=a,this.$router.push({name:"settlementDetailBuy",query:c}))}}},ke={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"0 16px"}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("时间")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d",staticStyle:{width:"45%",display:"inline-block"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"开始时间"},model:{value:t.hollowMoreObj.staDate,callback:function(e){t.$set(t.hollowMoreObj,"staDate",e)},expression:"hollowMoreObj.staDate"}})],1),t._v(" "),a("div",{staticClass:"c",staticStyle:{width:"5%",display:"inline-block"}},[t._v("至")]),t._v(" "),a("div",{staticClass:"d",staticStyle:{width:"45%",display:"inline-block"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"结束时间"},model:{value:t.hollowMoreObj.endDate,callback:function(e){t.$set(t.hollowMoreObj,"endDate",e)},expression:"hollowMoreObj.endDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("关键字")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.hollowMoreObj.keywords,expression:"hollowMoreObj.keywords"}],attrs:{type:"text",placeholder:"输入关键字"},domProps:{value:t.hollowMoreObj.keywords},on:{input:function(e){e.target.composing||t.$set(t.hollowMoreObj,"keywords",e.target.value)}}}),t._v(" "),a("span",{staticClass:"searchicon",on:{click:function(e){return t.hollowMoreClick(1)}}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("table",{staticClass:"gy-table"},[t._m(0),t._v(" "),t.hollowTabList.length>0?a("tbody",t._l(t.hollowTabList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.createdDate,2)))]),t._v(" "),a("td",[0===e.doneFlg?a("span",[t._v(t._s(e.todoMsg))]):t._e(),t._v(" "),1===e.doneFlg?a("span",[t._v(t._s(e.doneMsg))]):t._e()]),t._v(" "),a("td",[t._v(t._s(e.creatorName))]),t._v(" "),a("td",[0===e.doneFlg?a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.gotoBizPage(e)}}},[t._v("立即处理")]):t._e(),t._v(" "),1===e.doneFlg?a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.gotoBizPage(e)}}},[t._v("查看")]):t._e()])])}),0):a("tbody",[a("tr",[0===t.activeId?a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[t._v("没有新的待办事项")]):t._e(),t._v(" "),1===t.activeId?a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[t._v("没有新的已办事项")]):t._e()])])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.hollowMoreObj.pageNo,"page-size":t.hollowMoreObj.pageSize,total:t.total},on:{"update:currentPage":function(e){return t.$set(t.hollowMoreObj,"pageNo",e)},"update:current-page":function(e){return t.$set(t.hollowMoreObj,"pageNo",e)},"current-change":t.hollowMoreClick}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("No.")]),t._v(" "),a("th",[t._v("生成时间")]),t._v(" "),a("th",{staticStyle:{width:"600px"}},[t._v("事项内容")]),t._v(" "),a("th",[t._v("发起人")]),t._v(" "),a("th",[t._v("操作")])])])}]};var xe=a("C7Lr")(Ie,ke,!1,function(t){a("Ry9t")},"data-v-480e0ca9",null).exports,De={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"0 16px"}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("时间")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d",staticStyle:{width:"45%",display:"inline-block"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"开始时间"},model:{value:t.hollowMoreObj.staDate,callback:function(e){t.$set(t.hollowMoreObj,"staDate",e)},expression:"hollowMoreObj.staDate"}})],1),t._v(" "),a("div",{staticClass:"c",staticStyle:{width:"5%",display:"inline-block"}},[t._v("至")]),t._v(" "),a("div",{staticClass:"d",staticStyle:{width:"45%",display:"inline-block"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"结束时间"},model:{value:t.hollowMoreObj.endDate,callback:function(e){t.$set(t.hollowMoreObj,"endDate",e)},expression:"hollowMoreObj.endDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("关键字")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.hollowMoreObj.keywords,expression:"hollowMoreObj.keywords"}],attrs:{type:"text",placeholder:"输入关键字"},domProps:{value:t.hollowMoreObj.keywords},on:{input:function(e){e.target.composing||t.$set(t.hollowMoreObj,"keywords",e.target.value)}}}),t._v(" "),a("span",{staticClass:"searchicon",on:{click:function(e){return t.hollowMoreClick(1)}}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("table",{staticClass:"gy-table"},[t._m(0),t._v(" "),t.hollowTabList.length>0?a("tbody",t._l(t.hollowTabList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.createdDate,2)))]),t._v(" "),a("td",[t._v(t._s(e.message))]),t._v(" "),a("td",[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.gotoBizPage(e)}}},[t._v("查看")])])])}),0):a("tbody",[t._m(1)])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.hollowMoreObj.pageNo,"page-size":t.hollowMoreObj.pageSize,total:t.total},on:{"update:currentPage":function(e){return t.$set(t.hollowMoreObj,"pageNo",e)},"update:current-page":function(e){return t.$set(t.hollowMoreObj,"pageNo",e)},"current-change":t.hollowMoreClick}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("No.")]),this._v(" "),e("th",[this._v("生成时间")]),this._v(" "),e("th",[this._v("消息内容")]),this._v(" "),e("th",[this._v("操作")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"4"}},[this._v("没有新的消息")])])}]};var Se=a("C7Lr")({name:"homeMoreMsgList",data:function(){return{hollowTabList:[],total:null,activeId:null,hollowMoreObj:{pageNo:1,pageSize:10,staDate:null,endDate:null,keywords:null,msgType:null,targetType:null}}},activated:function(){this.$route.meta.isBack||(this.hollowMoreObj={},this.hollowMoreClick(1)),this.$route.meta.isBack=!1},mounted:function(){this.hollowMoreObj.msgType=this.$route.query.activeId+1},methods:{hollowMoreClick:function(t){var e=this;this.hollowMoreObj.pageNo=t,this.$http.post(this.$api.workbench.getWbMsgList,this.hollowMoreObj).then(function(t){0===t.data.code&&(e.total=t.data.data.total,e.hollowTabList=t.data.data.rows)})},gotoBizPage:function(t){var e=t.id,a=t.targetBizId,s=t.targetBizType,i=t.contEssId,n=t.saleOrderId,l=t.purchaseOrderId,o={homeFromFlg:2,homeBizType:s,todoId:e};4===t.msgType&&(o.homeFromFlg=4),1===s?(o.id=i,this.$router.push({name:"contEssDetail",query:o})):2===s?this.$router.push({name:"contractDetail",query:{id:i}}):16===s?4===o.homeFromFlg?(o.id=a,this.$router.push({name:"contEssDetail",query:o})):this.$router.push({name:"createContract",query:{id:a}}):3===s?this.$router.push({name:"paymentBuy",query:{homeFromFlg:2,homeBizType:s,payId:a,contEssId:i,purchaseOrderId:l,todoId:e}}):4===s?this.$router.push({name:"auditOperation",query:{homeFromFlg:2,homeBizType:s,id:i,saleOrderId:n,purchaseOrderId:l,todoId:e,invoiceId:a}}):8===s||22===s?this.$router.push({name:"deliverySalesView",query:{homeFromFlg:2,homeBizType:s,dlvItemId:a,contEssId:i,doneFlg:1}}):5===s?this.$router.push({name:"paymentSell",query:{homeFromFlg:2,homeBizType:s,id:i,collId:a}}):6===s?this.$router.push({name:"financialConfirmation",query:{homeFromFlg:2,homeBizType:s,id:i,saleOrderId:n,purchaseOrderId:l}}):45===s?this.$router.push({name:"paymentDetail",query:{homeFromFlg:2,id:i,sellerOrderId:n,purchaseOrderId:l}}):25===s?(o.id=i,this.$router.push({name:"contEssDetail",query:o})):7===s||26===s?(o.dlvItemId=a,o.contEssId=i,o.doneFlg=1,this.$router.push({name:"deliveryPurchaseView",query:o})):30===s||31===s?(o.id=a,this.$router.push({name:"stampApproval",query:o})):23!==s&&29!==s||(o.id=e,o.contEssId=i,o.targetBizId=a,this.$router.push({name:"settlementDetailBuy",query:o}))}}},De,!1,function(t){a("3Ukr")},"data-v-da326b88",null).exports,Te={name:"homeMoreAlarmList",data:function(){return{hollowTabList:[],total:null,activeId:null,hollowMoreObj:{pageNo:1,pageSize:10,staDate:null,endDate:null,keywords:null,msgType:3,targetType:null}}},activated:function(){this.$route.meta.isBack||(this.hollowMoreObj={},this.hollowMoreClick(1)),this.$route.meta.isBack=!1},mounted:function(){},methods:{hollowMoreClick:function(t){var e=this;this.hollowMoreObj.pageNo=t,this.hollowMoreObj.staDate=new Date,this.hollowMoreObj.staDate.setHours(0),this.hollowMoreObj.staDate.setMinutes(0),this.hollowMoreObj.staDate.setSeconds(0),this.hollowMoreObj.staDate.setMilliseconds(0),this.hollowMoreObj.endDate=new Date,this.hollowMoreObj.endDate.setHours(23),this.hollowMoreObj.endDate.setMinutes(59),this.hollowMoreObj.endDate.setSeconds(59),this.hollowMoreObj.endDate.setMilliseconds(0),this.$http.post(this.$api.workbench.getWbMsgList,this.hollowMoreObj).then(function(t){0===t.data.code&&(e.total=t.data.data.total,e.hollowTabList=t.data.data.rows)})},msgGoPage:function(t){40===t.targetBizType||41===t.targetBizType?this.$alert(t.message,"库存报警"):42===t.targetBizType||43===t.targetBizType?this.$router.push({name:"deliveryDetail",query:{homeFromFlg:1,id:t.contEssId,saleOrderId:t.saleOrderId,purchaseOrderId:t.purchaseOrderId}}):44===t.targetBizType&&this.$router.push({name:"paymentDetail",query:{homeFromFlg:1,id:t.contEssId,sellerOrderId:t.saleOrderId,purchaseOrderId:t.purchaseOrderId}})}}},Fe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"0 16px"}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("预警类型")]),t._v(" "),a("el-select",{model:{value:t.hollowMoreObj.targetBizType,callback:function(e){t.$set(t.hollowMoreObj,"targetBizType",e)},expression:"hollowMoreObj.targetBizType"}},t._l(t.$constant.alarmTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("关键字")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.hollowMoreObj.keywords,expression:"hollowMoreObj.keywords"}],attrs:{type:"text",placeholder:"输入关键字"},domProps:{value:t.hollowMoreObj.keywords},on:{input:function(e){e.target.composing||t.$set(t.hollowMoreObj,"keywords",e.target.value)}}}),t._v(" "),a("span",{staticClass:"searchicon",on:{click:function(e){return t.hollowMoreClick(1)}}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("table",{staticClass:"gy-table"},[t._m(0),t._v(" "),t.hollowTabList.length>0?a("tbody",t._l(t.hollowTabList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(t._f("alarmTypeList")(e.targetBizType)))]),t._v(" "),a("td",[t._v(t._s(e.message))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.createdDate)))]),t._v(" "),a("td",[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.msgGoPage(e)}}},[t._v("查看")])])])}),0):a("tbody",[t._m(1)])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.hollowMoreObj.pageNo,"page-size":t.hollowMoreObj.pageSize,total:t.total},on:{"update:currentPage":function(e){return t.$set(t.hollowMoreObj,"pageNo",e)},"update:current-page":function(e){return t.$set(t.hollowMoreObj,"pageNo",e)},"current-change":t.hollowMoreClick}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("No.")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("预警信息")]),t._v(" "),a("th",[t._v("计划交割日期")]),t._v(" "),a("th",[t._v("操作")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"4"}},[this._v("没有预警信息")])])}]};var Ne=a("C7Lr")(Te,Fe,!1,function(t){a("t+lM")},"data-v-8b41ff1e",null).exports,Le={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"changePassword"},[a("div",{staticClass:"title"},[t._v("修改密码")]),t._v(" "),a("div",{staticClass:"gy-form"},[a("div",{staticClass:"gy-form-group"},[t._m(0),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"gy-input",attrs:{type:"password",id:"password",placeholder:"请输入当前密码"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"gy-form-group cl"},[t._m(2),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.newPassword,expression:"form.newPassword"}],staticClass:"gy-input",attrs:{maxlength:"20",type:"password",id:"newPassword",placeholder:"请输入新密码"},domProps:{value:t.form.newPassword},on:{input:function(e){e.target.composing||t.$set(t.form,"newPassword",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group cl"},[t._m(3),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.newPassword2,expression:"form.newPassword2"}],staticClass:"gy-input",attrs:{maxlength:"20",type:"password",id:"newPassword2",placeholder:"请再次输入新密码"},domProps:{value:t.form.newPassword2},on:{input:function(e){e.target.composing||t.$set(t.form,"newPassword2",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"caoz"},[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.submit(t.form)}}},[t._v("保存")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"l",attrs:{for:"password"}},[e("strong",[this._v("*")]),this._v("当前密码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips"},[e("p",[this._v("密码必须包含大小写字母和数字，不能使用特殊字符，长度在 8-20 之间！")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"l",attrs:{for:"newPassword"}},[e("strong",[this._v("*")]),this._v("新密码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"l",attrs:{for:"newPassword2"}},[e("strong",[this._v("*")]),this._v("确认新密码")])}]};var Pe=a("C7Lr")({data:function(){return{form:{password:null,newPassword:null,newPassword2:null}}},methods:{submit:function(t){var e=this;return t.password?!!this.check(t.newPassword,"新")&&(t.password===t.newPassword?(this.$message.error("当前密码和新密码不可一致"),!1):!!this.check(t.newPassword2,"确认新")&&(t.newPassword!==t.newPassword2?(this.$message.error("两次输入的密码不一致"),!1):void this.$http.post(this.$api.user.modify,t).then(function(t){if(0===t.data.code)return e.$router.push({name:"login"}),e.$message.success(t.data.message),!1;e.$message.error(t.data.message)}))):(this.$message.error("请输入当前密码"),!1)},check:function(t,e){return t?!!/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])[a-zA-Z0-9]{8,20}$/.test(t)||(this.$message.error(e+"密码格式不正确"),!1):(this.$message.error("请输入"+e+"密码"),!1)}}},Le,!1,function(t){a("YMuj")},"data-v-6737e16e",null).exports,Ae={data:function(){return{tabs:[{cName:"cont1"},{cName:"cont2"},{cName:"cont4"},{cName:"cont3"}],orderObj:{name:"test"}}},mounted:function(){},methods:{submit:function(t){alert(this.orderObj.name)}}},$e={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"caoz"},[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.submit(t.form)}}},[t._v("保存")])])])},staticRenderFns:[]};var Oe=a("C7Lr")(Ae,$e,!1,function(t){a("OFIx")},"data-v-07b0e222",null).exports,Ee={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},Be=a("C7Lr")(null,Ee,!1,null,null,null).exports,Me={name:"listStatistics",data:function(){return{listUlIndex:1}},methods:{toggleTab:function(t){this.listUlIndex=t,this.$emit("toggleTabs",t)}},filters:{date1:function(t){if(!t)return"";var e=void 0;return(e=new Date(t)).getFullYear()+"-"+function(t){parseInt(t)<10&&(t="0"+t);return t}(e.getMonth()+1)}}},Re={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-statistics"},[a("div",{staticClass:"list-statistics-title"},[a("div",{staticClass:"list-statistics-date"},[t._v("统计周期: "),2===t.listUlIndex?[t._v(t._s(t._f("date1")(new Date))+"-01 至 ")]:t._e(),t._v(t._s(t._f("date")(new Date)))],2),t._v(" "),a("div",{staticClass:"list-ul-content"},[a("ul",[a("li",{class:{active:1===t.listUlIndex},on:{click:function(e){return t.toggleTab(1)}}},[t._v("今日统计")]),t._v(" "),a("li",{class:{active:2===t.listUlIndex},on:{click:function(e){return t.toggleTab(2)}}},[t._v("本月统计")])])])]),t._v(" "),a("div",{staticClass:"list-statistics-content"},[t._t("default")],2)])},staticRenderFns:[]};var Ue=a("C7Lr")(Me,Re,!1,function(t){a("MhzA")},"data-v-cb8b349c",null).exports,ze={data:function(){return{search:{contEssenceSn:null,payNumber:null,purchaseOrderNumber:null,sellerOrderNumber:null,collectionStatus:null,paymentStatus:null,buyerCompanyName:null,sellerCompanyName:null,paymentDateStart:null,paymentDateEnd:null,collectionDateStart:null,collectionDateEnd:null,businessOwnerName:null,pageNo:1,pageSize:10},isShowSearch:!1,list:[{id:null,buyerCompanyName:null,sellerCompanyName:null,shouldPaymentTotal:null,shouldCollectionTotal:null,hadPaymentTotal:null,hadCollectionTotal:null,needPaymentTotal:null,needCollectionTotal:null,paymentDate:null,collectionDate:null,paymentStateStr:null,collectionStateStr:null,paymentCreatedDate:null,collectionCreatedDate:null,sellerOrderNumber:null,sellerOrderId:null,purchaseOrderNumber:null,purchaseOrderId:null}],total:null,statisticsShow:{applyAmount:0,paidAmount:0,applyPayCount:0,paidCount:0,applyCollectAmount:0,collectedAmount:0,applyCollectCount:0,collectedCount:0}}},methods:{toggleTabs:function(t){var e=this;this.$http.get(this.$api.payment.collectionPaymentCount+"?countType="+t).then(function(t){0===t.data.code&&(e.statisticsShow=t.data.data)}).catch(function(t){console.log(t)})},getlist:function(){var t=this,e={};i()(this.search).forEach(function(a){e[a]=t.search[a]}),null!==e.paymentDateEnd&&""!==e.paymentDateEnd&&(e.paymentDateEnd=e.paymentDateEnd+864e5-1),null!==e.collectionDateEnd&&""!==e.collectionDateEnd&&(e.collectionDateEnd=e.collectionDateEnd+864e5-1),this.$http.post(this.$api.payment.getlist,e).then(function(e){0===e.data.code?(t.list=e.data.data.paymentAndCollectionDtos,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},turnPage:function(t){this.search.pageNo=t,this.getlist()},showDetail:function(t){var e={id:t.contractId,purchaseOrderId:t.purchaseOrderId,sellerOrderId:t.sellerOrderId};this.$router.push({name:"paymentDetail",query:e})}},activated:function(){this.$route.meta.isBack||(this.search={},this.getlist()),this.$route.meta.isBack=!1},created:function(){this.toggleTabs(1)},components:{listStatistics:Ue}},Ve={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"payment-list"},[s("div",{staticClass:"search-wrapper"},[s("div",{staticClass:"search-form",class:{"search-wrapper-open":!t.isShowSearch}},[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.essenceId,expression:"search.essenceId"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.search.essenceId},on:{input:function(e){e.target.composing||t.$set(t.search,"essenceId",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.prodName,expression:"search.prodName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.search.prodName},on:{input:function(e){e.target.composing||t.$set(t.search,"prodName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.buyerCompanyName,expression:"search.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.search.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"buyerCompanyName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.sellerCompanyName,expression:"search.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.search.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"sellerCompanyName",e.target.value)}}}),t._v(" "),t.isShowSearch?t._e():s("span",{staticClass:"searchicon",staticStyle:{right:"31px"},on:{click:t.getlist}},[s("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),t.isShowSearch?[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("付款日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.paymentDateStart,callback:function(e){t.$set(t.search,"paymentDateStart",e)},expression:"search.paymentDateStart"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.paymentDateEnd,callback:function(e){t.$set(t.search,"paymentDateEnd",e)},expression:"search.paymentDateEnd"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("收款日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.collectionDateStart,callback:function(e){t.$set(t.search,"collectionDateStart",e)},expression:"search.collectionDateStart"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.collectionDateEnd,callback:function(e){t.$set(t.search,"collectionDateEnd",e)},expression:"search.collectionDateEnd"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("申请付款日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.paymentCreatedDateStart,callback:function(e){t.$set(t.search,"paymentCreatedDateStart",e)},expression:"search.paymentCreatedDateStart"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.paymentCreatedDateEnd,callback:function(e){t.$set(t.search,"paymentCreatedDateEnd",e)},expression:"search.paymentCreatedDateEnd"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("申请收款日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.collectionCreatedDateStart,callback:function(e){t.$set(t.search,"collectionCreatedDateStart",e)},expression:"search.collectionCreatedDateStart"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.collectionCreatedDateEnd,callback:function(e){t.$set(t.search,"collectionCreatedDateEnd",e)},expression:"search.collectionCreatedDateEnd"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("付款状态")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.search.paymentStatus,callback:function(e){t.$set(t.search,"paymentStatus",e)},expression:"search.paymentStatus"}},t._l(t.$constant.paymentStatusBuy,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.status}})}),1)],1),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("收款状态")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.search.collectionStatus,callback:function(e){t.$set(t.search,"collectionStatus",e)},expression:"search.collectionStatus"}},t._l(t.$constant.paymentStatusSell,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.status}})}),1),t._v(" "),s("span",{staticClass:"searchicon",on:{click:t.getlist}},[s("i",{staticClass:"iconfont icon-search"})])],1)]:t._e(),t._v(" "),s("div",{staticClass:"clearfix"})],2),t._v(" "),s("span",{staticClass:"search-btn",on:{click:t.ShowSearch}},[t._v("高级搜索"),s("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),s("div",{staticStyle:{padding:"0 16px"}},[s("div",{staticClass:"gy-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[s("el-table-column",{attrs:{fixed:"",label:"ID\n产品名称",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"wid-overflow"},[s("span",[t._v(t._s(e.row.contractId))]),s("br"),t._v(" "),s("span",[t._v(t._s(e.row.prodName))])])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"类别",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?s("span",[t._v("采购"),s("br"),t._v("销售")]):t._e(),t._v(" "),2===e.row.contractType?s("span",[t._v("采购")]):t._e(),t._v(" "),3===e.row.contractType?s("span",[t._v("销售")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"上游公司\n下游公司",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tooltip",{attrs:{placement:"bottom","visible-arrow":"false"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.row.sellerCompanyName)),s("br"),t._v(t._s(e.row.buyerCompanyName))]),t._v(" "),s("div",{staticClass:"wid-overflow"},[s("span",[t._v(t._s(e.row.sellerCompanyName))]),e.row.sellerCompanyName?s("br"):t._e(),t._v(" "),s("span",[t._v(t._s(e.row.buyerCompanyName))])])])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.paymentStateStr))]),e.row.approvalRecords&&1===e.row.approvalRecords.length?s("span",{staticClass:"text-overflow payment-person"},[t._v(" "+t._s(e.row.approvalRecords[0].approverName))]):t._e(),t._v(" "),e.row.approvalRecords&&e.row.approvalRecords.length>1?[s("el-popover",{attrs:{placement:"bottom",title:"",width:"400",trigger:"click"}},[s("el-table",{attrs:{data:e.row.approvalRecords}},[s("el-table-column",{attrs:{label:"序号",width:"80",type:"index"}}),t._v(" "),s("el-table-column",{attrs:{label:"提交时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("date")(e.row.createdTime,1)))])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{label:"当前审批人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(e.row.approverName))])]}}],null,!0)})],1),t._v(" "),s("span",{staticClass:"popover-name text-overflow payment-person",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.approvalRecords[0].approverName)),s("i",{staticClass:"sort-caret descending"})])],1)]:t._e(),e.row.paymentStateStr?s("br"):t._e(),t._v(" "),s("span",[t._v(t._s(e.row.collectionStateStr))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"应付款(元)\n应收款(元)","class-name":"amount-right-el",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?[21===e.row.buySkuPriceType||22===e.row.buySkuPriceType?s("span",[t._v("公式计价")]):s("span",[t._v(t._s(t._f("numToCash")(e.row.shouldPaymentTotal)))]),s("br")]:t._e(),t._v(" "),e.row.sellerOrderId?[21===e.row.saleSkuPriceType||22===e.row.saleSkuPriceType?s("span",[t._v("公式计价")]):s("span",[t._v(t._s(t._f("numToCash")(e.row.shouldCollectionTotal)))])]:t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"待付款(元)\n待收款(元)","class-name":"amount-right-el",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?[21===e.row.buySkuPriceType||22===e.row.buySkuPriceType?s("span",[t._v("--")]):s("span",[t._v(t._s(t._f("numToCash")(e.row.needPaymentTotal)))]),s("br")]:t._e(),t._v(" "),e.row.sellerOrderId?[21===e.row.saleSkuPriceType||22===e.row.saleSkuPriceType?s("span",[t._v("--")]):s("span",[t._v(t._s(t._f("numToCash")(e.row.needCollectionTotal)))])]:t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"付款日期\n收款日期",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("date")(e.row.paymentDate)))]),e.row.paymentDate?s("br"):t._e(),t._v(" "),s("span",[t._v(t._s(t._f("date")(e.row.collectionDate)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"采购合同编号\n销售合同编号",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.purchaseCcontractCode))]),e.row.purchaseCcontractCode?s("br"):t._e(),t._v(" "),s("span",[t._v(t._s(e.row.sellerCcontractCode))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("date")(e.row.paymentCreatedDate,1)))]),e.row.paymentCreatedDate?s("br"):t._e(),t._v(" "),s("span",[t._v(t._s(t._f("date")(e.row.collectionCreatedDate,1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{fixed:"right","class-name":"operation-styles-el",label:"操作",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("button",{staticClass:"gy-button-view view",attrs:{type:"button"},on:{click:function(a){return t.showDetail(e.row)}}},[t._v("查看")]),t._v(" "),1===e.row.paymentAlarmSign||1===e.row.collectionAlarmSign?s("span",{},[s("img",{staticStyle:{"margin-bottom":"5px"},attrs:{src:a("N26N"),height:"19",width:"19"}})]):t._e()]}}])})],1)],1),t._v(" "),s("listStatistics",{on:{toggleTabs:t.toggleTabs}},[s("div",{staticClass:"list-statistics-item"},[s("div",[s("span",[t._v("申请付款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyAmount)))])]),t._v(" "),s("div",[s("span",[t._v("申请付款笔数(笔)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyPayCount)))])]),t._v(" "),s("div",[s("span",[t._v("申请收款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyCollectAmount)))])]),t._v(" "),s("div",[s("span",[t._v("申请收款笔数(单)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyCollectCount)))])]),t._v(" "),s("div",[s("span",[t._v("已付款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.paidAmount)))])]),t._v(" "),s("div",[s("span",[t._v("已付款笔数(笔)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.paidCount)))])]),t._v(" "),s("div",[s("span",[t._v("已收款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.collectedAmount)))])]),t._v(" "),s("div",[s("span",[t._v("已收款合同(单)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.collectedCount)))])])])])],1),t._v(" "),s("el-pagination",{staticStyle:{"margin-top":"40px"},attrs:{background:"",total:t.total,layout:"prev, pager, next"},on:{"current-change":t.turnPage}})],1)},staticRenderFns:[]};var Qe=a("C7Lr")(ze,Ve,!1,function(t){a("JNao"),a("Lvhq")},"data-v-8e35564a",null).exports,je={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-wrapper pay-detail essential-row-float"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同要素ID")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.id))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("执行操作人")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.executiveName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("span",[t._v(t._s(t._f("businessTradeType")(t.list.bizType))+"  "),1!==t.list.contractType?a("span",{staticClass:"contractType"},[t._v(t._s(t._f("contractTradeType")(t.list.contractType,t.list.bizType)))]):t._e()])])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("我方公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.targetCorpName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("产品名称")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.prodName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("交易类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("contractTransactionTypeList")(t.list.transactionType)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务操作人")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.businessManagerName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务组")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.organizationName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("创建时间")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("date")(t.list.createdDate,t.list.createdDate)))])]),t._v(" "),2!=t.list.contractType?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章销售合同")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[t.list.downstreamInfo.fileAttachCertifiedList&&0!==t.list.downstreamInfo.fileAttachCertifiedList.length?a("span",{on:{click:function(e){return t.showContFile4Obj(t.list.downstreamInfo.fileAttachCertifiedList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])])])]):t._e(),t._v(" "),3!=t.list.contractType?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章采购合同")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[t.list.upstreamInfo.fileAttachCertifiedList&&0!==t.list.upstreamInfo.fileAttachCertifiedList.length?a("span",{on:{click:function(e){return t.showContFile4Obj(t.list.upstreamInfo.fileAttachCertifiedList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])])])]):t._e()])},staticRenderFns:[]};var qe=a("C7Lr")({inject:["showImg"],props:{list:{default:null}},methods:{showContFile4Obj:function(t){var e=[];t.forEach(function(t){e.push(t.filepath)}),this.showImg(e)}}},je,!1,function(t){a("ni07")},"data-v-1b128e95",null).exports,We={data:function(){return{dialogVisible:!1,fileList:[]}},methods:{open:function(t){var e=this;if(this.$refs.myCarousel&&this.$refs.myCarousel.setActiveItem(0),null==t||void 0===t||0===t.length)return!1;this.fileList=[],this.dialogVisible=!0,t.forEach(function(t){t.fileTypeAlias=e.$tools.getFileTypeAlias(t.fileUrl)}),this.fileList=t},open4SingleFile:function(t){if(null==t||void 0===t||""===t)return!1;var e=[];e.push({fileUrl:t}),this.open(e)},open4MultiFile:function(t){var e=this;if(null==t||void 0===t||0===t.length)return!1;var a=[];t.forEach(function(t){var s={fileUrl:t};s.fileTypeAlias=e.$tools.getFileTypeAlias(t),a.push(s)}),this.open(a)},close:function(){this.dialogVisible=!1}}},He={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialogImg",attrs:{title:"图片预览",visible:t.dialogVisible,width:"1000px","custom-class":"dialog-erp-cont","before-close":t.close,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"block"},[a("el-carousel",{ref:"myCarousel",attrs:{trigger:"click","indicator-position":"none",autoplay:!1,loop:!1}},t._l(t.fileList,function(e,s){return a("el-carousel-item",{key:s},["img"===e.fileTypeAlias?a("img",{attrs:{src:e.fileUrl,alt:"",width:"100%",height:"auto"}}):t._e(),t._v(" "),"pdf"===e.fileTypeAlias?a("iframe",{staticStyle:{"min-height":"490px"},attrs:{src:e.fileUrl,frameborder:"0",width:"100%"}}):t._e(),t._v(" "),"word"===e.fileTypeAlias||"excel"===e.fileTypeAlias?a("iframe",{staticStyle:{"min-height":"490px"},attrs:{src:"https://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl,frameborder:"0",width:"100%"}}):t._e()])}),1)],1)])},staticRenderFns:[]};var Ke=a("C7Lr")(We,He,!1,function(t){a("BoZZ")},null,null).exports,Xe={data:function(){return{isFormula:!1,isFormulaPrice:!1,buys:[],sales:null,paymentAndCollection:{id:null,purchaseOrderId:null,sellerOrderId:null},order:{bizType:null,orderStatus:null,createdDate:null,businessManagerName:null},list:{id:null,contEssenceStatus:null,bizType:null,contractType:null,createdName:null,businessManagerId:null,businessManagerName:null,orderStatus:null,createdDate:null,planBuyDlvyDat:null,planSaleDlvyDate:null,downstreamInfo:{fileAttachCertifiedList:[]},upstreamInfo:{fileAttachCertifiedList:[]}},contractAmount:null,buys1:null}},created:function(){this.paymentAndCollection=this.$route.query;var t=Number(this.$route.query.activeType);2===t?this.getdetail():3===t?this.getdetailCollection():(this.getdetail(),this.getdetailCollection()),this.getdetailOrder()},methods:{getdetail:function(){var t=this,e={purchaseOrderId:t.paymentAndCollection.purchaseOrderId,paymentId:null};if(null==e.purchaseOrderId||void 0===e.purchaseOrderId||""===e.purchaseOrderId||"null"===e.purchaseOrderId)return console.log("收付款详情 采购订单ID为空 合同要素id="+t.paymentAndCollection.id),!1;this.$http.post(this.$api.payment.getDetail,e).then(function(e){0===e.data.code?t.sales=e.data.data:t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},getdetailCollection:function(){var t=this,e=t.paymentAndCollection.sellerOrderId;if(null==e||void 0===e||""===e||"null"===e)return console.log("收付款详情 销售订单ID为空 合同要素id="+t.paymentAndCollection.id),!1;this.$http.get(this.$api.payment.getDetailCollection+t.paymentAndCollection.sellerOrderId).then(function(e){0===e.data.code?(t.buys=e.data.data.erpCollectionModelList,t.buys1=e.data.data,t.contractAmount=e.data.data.contractAmount):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},getdetailOrder:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+t.paymentAndCollection.id).then(function(e){0===e.data.code?(t.list=e.data.data,21!==Number(t.list.upstreamInfo.skuPriceType)&&22!==Number(t.list.upstreamInfo.skuPriceType)||(t.isFormula=!0),21!==Number(t.list.downstreamInfo.skuPriceType)&&22!==Number(t.list.downstreamInfo.skuPriceType)||(t.isFormulaPrice=!0)):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},showImg:function(t){this.$refs.contFileView.open4MultiFile(t)},showImg4Obj:function(t){this.$refs.contFileView.open(t)},showRecord:function(t,e){2===e?this.$router.push({name:"paymentBuy",query:{payId:t.id,doneFlg:1,purchaseOrderId:this.paymentAndCollection.purchaseOrderId,contEssId:this.list.id}}):this.$router.push({name:"paymentSell",query:{todoId:t.todoId,collId:t.id,contEssId:this.list.id}})},exportExcel:function(t){var e={};e.paymentId=t.id,e.essenceId=this.list.id,e.purchaseOrderId=this.paymentAndCollection.purchaseOrderId;var a="付款申请单-"+this.$tools.parseDate(this.list.createdDate)+"-"+t.id+".xls";this.$tools.exporttoExcel(this,this.$api.payment.exportPaymentApplication,e,a)}},provide:function(){return{showImg:this.showImg}},components:{payCont:qe,gyFileView:Ke}},Je={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paydetail-wrapper my-payment-detail"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("pay-cont",{attrs:{list:t.list}})],1),t._v(" "),t.buys1?a("div",{staticClass:"receivables-information"},[a("p",{staticClass:"paydetail-title"},[t._v("收款信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("下游公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.buyerCompanyName))])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同金额(元)")]),t._v(" "),t.isFormulaPrice?a("div",{staticClass:"essential-text red"},[t._v("公式计价")]):a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.buys1.contractAmount)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("待收金额(元)")]),t._v(" "),t.isFormulaPrice?a("div",{staticClass:"essential-text"},[t._v("--")]):a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.buys1.needCollectionTotal)))])])])]),t._v(" "),a("div",{staticClass:"payment-elTable"},[a("p",{staticClass:"paydetail-title"},[t._v("收款记录")]),t._v(" "),a("div",{staticClass:"essential-wrapper approval-list"},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.buys}},[a("el-table-column",{attrs:{label:"编号",fixed:"",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}],null,!1,773642443)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(10===e.row.collectionStatus?"已创建":"已确认"))])]}}],null,!1,4290295734)}),t._v(" "),a("el-table-column",{attrs:{label:"收款凭证","class-name":"picture-styles-el",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!==e.row.erpCollectionFileModelList.length?a("span",{on:{click:function(a){return t.showImg4Obj(e.row.erpCollectionFileModelList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,855146911)}),t._v(" "),a("el-table-column",{attrs:{label:"下游付款凭证","class-name":"picture-styles-el",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!==e.row.erpBuyerPaymentFileModelList.length?a("span",{on:{click:function(a){return t.showImg4Obj(e.row.erpBuyerPaymentFileModelList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,3083394335)}),t._v(" "),a("el-table-column",{attrs:{label:"收款金额(元)","class-name":"amount-right-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.collectionAmount)))])]}}],null,!1,2769065265)}),t._v(" "),a("el-table-column",{attrs:{label:"付款用途",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.$constant.collectionType[e.row.collectionType]))])]}}],null,!1,959373812)}),t._v(" "),a("el-table-column",{attrs:{label:"到账日期",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.collectionDate)))])]}}],null,!1,1878055081)}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","class-name":"operation-styles-el",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view view",attrs:{type:"button"},on:{click:function(a){return t.showRecord(e.row,1)}}},[t._v("查看")])]}}],null,!1,1930312971)})],1)],1)])])]):t._e(),t._v(" "),t.sales?a("div",{staticClass:"payment-information"},[a("p",{staticClass:"paydetail-title"},[t._v("付款信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("上游公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.sellerCompanyName))])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同金额(元)")]),t._v(" "),t.isFormula?a("div",{staticClass:"essential-text red"},[t._v("公式计价")]):a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.sales.contractAmount)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("待付金额(元)")]),t._v(" "),t.isFormula?a("div",[t._v("--")]):a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.sales.needPaymentTotal)))])])])]),t._v(" "),a("div",{staticClass:"payment-elTable fk-list"},[a("p",{staticClass:"paydetail-title"},[t._v("付款记录")]),t._v(" "),a("div",{staticClass:"essential-wrapper approval-list"},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.sales.list}},[a("el-table-column",{attrs:{fixed:"",label:"编号",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}],null,!1,773642443)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.approveStatusStr))])]}}],null,!1,104695720)}),t._v(" "),a("el-table-column",{attrs:{label:"付款凭证","class-name":"picture-styles-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[3===e.row.payDesc&&1===e.row.approveType?a("span",[t._v("-")]):[e.row.paymentVoucher&&0!==e.row.paymentVoucher.length?a("span",{on:{click:function(a){t.showImg(e.row.paymentVoucher.split(","))}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]]}}],null,!1,3313104429)}),t._v(" "),a("el-table-column",{attrs:{label:"付款金额(元)","class-name":"amount-right-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.payTotalStr)))])]}}],null,!1,947783092)}),t._v(" "),21===t.list.upstreamInfo.skuPriceType||22===t.list.upstreamInfo.skuPriceType?a("el-table-column",{attrs:{label:"付款数量","class-name":"amount-right-el",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.applyQuantities))])]}}],null,!1,2068543727)}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"付款用途",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.payMethodStr))])]}}],null,!1,475888164)}),t._v(" "),a("el-table-column",{attrs:{label:"收款单位",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sellerCorpName))])]}}],null,!1,1171011886)}),t._v(" "),a("el-table-column",{attrs:{label:"开户行",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sellerDepositBank))])]}}],null,!1,2691540209)}),t._v(" "),a("el-table-column",{attrs:{label:"银行账号",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sellerAccount))])]}}],null,!1,1807225990)}),t._v(" "),a("el-table-column",{attrs:{label:"付款方式",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.tradeModeStr))])]}}],null,!1,1707020662)}),t._v(" "),a("el-table-column",{attrs:{label:"经办人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.createUserName))])]}}],null,!1,4065645204)}),t._v(" "),a("el-table-column",{attrs:{label:"申请日期",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.createdDate)))])]}}],null,!1,2941893791)}),t._v(" "),a("el-table-column",{attrs:{label:"出账日期",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[3===e.row.payDesc&&1===e.row.approveType?a("span",[t._v("-")]):[a("span",[t._v(t._s(t._f("date")(e.row.payTime)))])]]}}],null,!1,3066386406)}),t._v(" "),a("el-table-column",{attrs:{label:"付款说明",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.payDescStr)+"\n              "),a("el-popover",{attrs:{placement:"top-start",width:"360",trigger:"hover"}},[a("el-table",{staticClass:"payinfo-list",attrs:{data:e.row.payInfoList}},[a("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"申请金额(元)","class-name":"amount-right-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.payAmount)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"付款凭证","class-name":"amount-right-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.fileUrl&&0!==e.row.fileUrl.length?a("span",{on:{click:function(a){t.showImg(e.row.fileUrl.split(","))}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"出账日期","class-name":"amount-right-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.payTime)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{property:"description",label:"备注",width:"150"}})],1),t._v(" "),e.row.payInfoList&&e.row.payInfoList.length>0?a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("查看明细")]):t._e()],1)],1)]}}],null,!1,3680285380)}),t._v(" "),a("el-table-column",{attrs:{label:"备注",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-overflow"},[t._v(t._s(e.row.remarks))])]}}],null,!1,602362410)}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","class-name":"operation-styles-el",width:"105"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view view",attrs:{type:"button"},on:{click:function(a){return t.showRecord(e.row,2)}}},[t._v("查看")]),t._v(" "),a("button",{staticClass:"gy-button-view view",attrs:{type:"button"},on:{click:function(a){return t.exportExcel(e.row)}}},[t._v("下载")])]}}],null,!1,2950435467)})],1)],1)])])]):t._e(),t._v(" "),a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])]),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[]};var Ge=a("C7Lr")(Xe,Je,!1,function(t){a("tN1K"),a("PUqj")},"data-v-e50adce6",null).exports,Ze={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addbanks"},[a("el-dialog",{staticClass:"order-dialoged",attrs:{width:"500px",title:"新增银行账户信息",visible:t.addBank,"before-close":t.closeDlg,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addBank=e}}},[a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("账号名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatBank.accountName,expression:"creatBank.accountName"}],attrs:{type:"text",placeholder:"请输入账号名称"},domProps:{value:t.creatBank.accountName},on:{input:function(e){e.target.composing||t.$set(t.creatBank,"accountName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("银行名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatBank.bankName,expression:"creatBank.bankName"}],attrs:{type:"text",placeholder:"请输入银行名称"},domProps:{value:t.creatBank.bankName},on:{input:function(e){e.target.composing||t.$set(t.creatBank,"bankName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("开户行名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatBank.depositBank,expression:"creatBank.depositBank"}],attrs:{type:"text",placeholder:"请输入开户行名称"},domProps:{value:t.creatBank.depositBank},on:{input:function(e){e.target.composing||t.$set(t.creatBank,"depositBank",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("银行账号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatBank.companyAccount,expression:"creatBank.companyAccount"}],attrs:{type:"text",placeholder:"请输入银行账号"},domProps:{value:t.creatBank.companyAccount},on:{input:function(e){e.target.composing||t.$set(t.creatBank,"companyAccount",e.target.value)}}})]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"gy-button",staticStyle:{"padding-right":"30px","padding-bottom":"30px","padding-top":"19px"}},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.closeDlg()}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.saveBankAcc()}}},[t._v("保存")])])])],1)},staticRenderFns:[]};var Ye=a("C7Lr")({name:"bankAcc",data:function(){return{addBank:!1,creatBank:{companyId:null,accountName:null,bankName:null,companyAccount:null,depositBank:null}}},methods:{saveBankAcc:function(){var t=this;this.$http.post(this.$api.payment.addBankInfo,this.creatBank).then(function(e){if(0===e.data.code){t.addBank=!1,t.creatBank.id=e.data.data.id;var a=e.data.data;t.$emit("onSaveAccInfo",a),t.creatBank.id=null,t.creatBank.companyId=null,t.creatBank.accountName=null,t.creatBank.bankName=null,t.creatBank.companyAccount=null,t.creatBank.depositBank=null}else t.$alert(e.data.code+" "+e.data.message)})},closeDlg:function(){this.addBank=!1,this.$emit("onSaveAccInfo",null),this.creatBank.companyId=null,this.creatBank.accountName=null,this.creatBank.bankName=null,this.creatBank.companyAccount=null,this.creatBank.depositBank=null}}},Ze,!1,function(t){a("iIrO")},null,null).exports,ta={name:"gyFileUpload",components:{gyFileView:Ke},data:function(){return{stopUpload:!1,boolUpload:!0,fileList:[]}},methods:{init:function(){this.stopUpload=!1,this.fileList=[]},elPlus:function(t){var e=[];e.push(t),this.$refs.uFileView.open(e)},deleteImg:function(t){if(this.stopUpload)return!1;this.fileList.splice(t,1),this.$emit("callbackFileUpload",this.fileList)},beforeAvatarUpload:function(t){if(this.isLt10M=t.size<10485760,!this.isLt10M)return this.$message.error("您上传的文件过大，请上传10M以下的文件"),this.isLt10M},onFileUpload:function(t){var e=this,a=new FormData;a.append("file",t.file),a.append("storage","platform-mgmt"),this.$http.post(this.url||this.$api.upload.imgUpload,a,{"Content-Type":"multipart/form-data"}).then(function(t){if(0===t.data.code){var a=t.data.data;a.fileTypeAlias=e.$tools.getFileTypeAlias(a.fileUrl),e.isLt10M&&e.fileList.push(a),e.$emit("callbackFileUpload",e.fileList)}else e.$alert(t.data.code+" "+t.data.message)})},endUpload:function(){this.stopUpload=!0}}},ea={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"file-upload"},[t._l(t.fileList,function(e,i){return[s("div",{key:i,staticClass:"contImgItem"},["img"===e.fileTypeAlias?s("img",{attrs:{src:e.fileUrl,width:"50",height:"50",alt:""}}):t._e(),t._v(" "),"pdf"===e.fileTypeAlias?s("img",{attrs:{src:a("lqqb"),height:"50",width:"50"}}):t._e(),t._v(" "),"word"===e.fileTypeAlias?s("img",{attrs:{src:a("qQEj"),height:"50",width:"50"}}):t._e(),t._v(" "),"excel"===e.fileTypeAlias?s("img",{attrs:{src:a("6DX5"),height:"50",width:"50"}}):t._e(),t._v(" "),s("div",[s("i",{staticClass:"el-icon-zoom-in plus",on:{click:function(a){return t.elPlus(e)}}}),t._v(" "),s("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.deleteImg(i)}}})])])]}),t._v(" "),s("el-upload",{staticClass:"upload-demo-tz",attrs:{action:"api","list-type":"picture-card",drag:t.boolUpload,multiple:"",disabled:t.stopUpload,"before-upload":t.beforeAvatarUpload,"show-file-list":!1,"http-request":t.onFileUpload}},[s("i",{staticClass:"el-icon-upload"}),t._v(" "),s("div",{staticClass:"el-upload__text"},[t._v("拖到此处，或"),s("em",[t._v("点击上传")])])]),t._v(" "),s("gy-file-view",{ref:"uFileView"})],2)},staticRenderFns:[]};var aa=a("C7Lr")(ta,ea,!1,function(t){a("MNYE"),a("dbpe")},"data-v-6d8626de",null).exports,sa={components:{gyFileView:Ke},props:{imgInfo:Object},data:function(){return{item:{}}},created:function(){this.item.fileTypeAlias=this.$tools.getFileTypeAlias(this.imgInfo.fileUrl)},methods:{previewPictures:function(t){this.$refs.uFileView.open4SingleFile(t)}}},ia={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"file-img-wrapper"},[s("span",{staticClass:"img_cursor",on:{click:function(e){return t.previewPictures(t.imgInfo.fileUrl)}}},["img"===t.item.fileTypeAlias?s("img",{attrs:{src:t.imgInfo.fileUrl,width:"40",height:"40",alt:""}}):t._e(),t._v(" "),"pdf"===t.item.fileTypeAlias?s("img",{attrs:{src:a("lqqb"),height:"40",width:"40"}}):t._e(),t._v(" "),"word"===t.item.fileTypeAlias?s("img",{attrs:{src:a("qQEj"),height:"40",width:"40"}}):t._e(),t._v(" "),"excel"===t.item.fileTypeAlias?s("img",{attrs:{src:a("6DX5"),height:"40",width:"40"}}):t._e()]),t._v(" "),s("gy-file-view",{ref:"uFileView"})],1)},staticRenderFns:[]};var na={name:"gyoperationHistoryComment",components:{gyFileImg:a("C7Lr")(sa,ia,!1,function(t){a("iSwL")},null,null).exports},data:function(){return{opHistory:[]}},methods:{display:function(t,e){var a=this,s=this;s.$http.post(t,e).then(function(t){0===t.data.code&&(s.opHistory=t.data.data,0===s.opHistory.length&&a.$emit("checkHistory"))}).catch(function(t){console.log(t)})}}},la={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.opHistory&&t.opHistory.length>0?a("div",{staticClass:"setpElementMain"},[t._m(0),t._v(" "),a("div",{staticClass:"setpElementCenter"},t._l(t.opHistory,function(e,s){return a("div",{key:s,staticClass:"setpElementCenterMain"},[a("div",{staticClass:"stepRadio"},[e.executeStatus>=2?a("div",{staticClass:"curr_big"}):1===e.executeStatus?a("div",{staticClass:"big"}):0===e.executeStatus?a("div",{staticClass:"small"}):a("div",{staticClass:"big"})]),t._v(" "),1===e.sceneType?a("div",{staticClass:"remarksComment"},[a("div",{staticClass:"all"},[a("span",{staticClass:"name"},[t._v(t._s(e.commentCreater))]),a("span",{staticClass:"agree"},[t._v("添加了评论")]),a("span",{staticClass:"time"},[t._v(t._s(t._f("date")(e.createdDate,2)))])]),t._v(" "),a("div",{staticClass:"comment my-input-box",domProps:{innerHTML:t._s(e.approveComment)}},[t._v(t._s(e.approveComment))]),t._v(" "),t._l(e.commentFiles,function(t,e){return a("gy-file-img",{key:e,attrs:{imgInfo:t}})})],2):a("div",{staticClass:"remarksComment"},[a("div",{staticClass:"all"},[a("span",{staticClass:"name"},[t._v(t._s(e.username))]),a("span",{staticClass:"agree"},[t._v(t._s(t._f("resultCode")(e.resultCode,e.executeStatus)))]),a("span",{staticClass:"time"},[t._v(t._s(t._f("date")(e.createdDate,2)))])]),t._v(" "),a("div",{staticClass:"comment",staticStyle:{color:"#999"}},[t._v(t._s(e.actionDesc))]),t._v(" "),null!==e.msg?a("div",{staticClass:"comment"},[t._v(t._s(e.msg))]):t._e()])])}),0)]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setpElementTop"},[e("span",[this._v("操作流程")])])}]};var oa=a("C7Lr")(na,la,!1,function(t){a("v6Z8"),a("RD+b")},"data-v-d0ca79ea",null).exports,ra={name:"gyComment",props:{dialog:Object,invoice:Object},components:{gyFileUpload:aa},data:function(){return{dialogStaff:{dialogVisibleStaff:!1},comment:"",commentValue:"",reminderStaffList:[],userIdLists:[],isIndeterminate:!1,checkModel:!1,checkModelAll:!1,commentObject:{todoItemId:null,comment:"",commentFiles:[]}}},mounted:function(){this.associatedPersonnel(),this.$route.query.todoId&&(this.commentObject.todoItemId=Number(this.$route.query.todoId)),this.$route.query.homeFromFlg&&(this.commentObject.homeFromFlg=Number(this.$route.query.homeFromFlg)),this.invoice.targetId&&(this.commentObject.targetId=Number(this.invoice.targetId)),this.invoice.targetType&&(this.commentObject.targetType=Number(this.invoice.targetType)),(this.invoice.subSysType||0===this.invoice.subSysType)&&(this.commentObject.subSysType=Number(this.invoice.subSysType))},methods:{remarkFocus:function(){},ceshi:function(){},uploadImg:function(){},onCallbackSaleFileUpload:function(t){this.commentObject.commentFiles=t},close:function(){this.dialog.dialogVisibleRemark=!1,this.reminderStaffUser()},reminderStaffUser:function(t){console.log(t)},remindFollow:function(){this.dialogStaff.dialogVisibleStaff=!0,this.userIdLists=[]},commentSublime:function(){for(var t=this,e=this,a=document.getElementById("testim"),s=document.getElementById("testim").getElementsByTagName("input"),i=[],n=0;n<s.length;n++)for(var l=0;l<this.reminderStaffList.length;l++)s[n].name===this.reminderStaffList[l].userName&&i.push(this.reminderStaffList[l].userId);e.commentObject.comment=a.innerHTML,e.commentObject.userIdList=i,e.$http.post(e.$api.commentsRematk.add,e.commentObject).then(function(a){0===a.data.code?(e.dialog.dialogVisibleRemark=!1,e.$message({message:"发送成功",type:"success"}),e.invoice.refFunc(t.$api.contract.approve1History,t.invoice.refParam)):e.$message({message:a.data.message,type:"error"})})},associatedPersonnel:function(){var t=this;t.$http.post(t.$api.commentsRematk.staff,t.invoice).then(function(e){0===e.data.code&&(t.reminderStaffList=e.data.data)})},closeStaff:function(){this.dialogStaff.dialogVisibleStaff=!1},staffSublime:function(){if(0!==this.userIdLists.length){this.dialogStaff.dialogVisibleStaff=!1;for(var t=0;t<this.reminderStaffList.length;t++)for(var e=0;e<this.userIdLists.length;e++)if(this.reminderStaffList[t].userId===this.userIdLists[e]){var a=document.getElementById("testim"),s="<input type='text' class='testimsd' disabled='true' style='vertical-align: initial;color:#4A90E2;width:80px;border:none' name= "+this.reminderStaffList[t].userName+" value='@"+this.reminderStaffList[t].userName+"'/>";a.innerHTML=a.innerHTML+s,console.log(a.innerHTML)}}else this.$message({message:"请选择指定提醒人员",type:"warning"})},selectionOfficer:function(t,e){!0===t&&this.userIdLists.push(e.userId)},allElection:function(t){console.log(t),this.checkModel=!!t,console.log(this.checkModel)}},watch:{userIdLists:{handler:function(){this.checkModelAll=this.userIdLists.length===this.reminderStaffList.length},deep:!0},comment:function(t){console.log(t),t.length>2500&&this.$message({message:"审批备注最多可填写2500字",type:"warning"}),this.commentObject.comment=this.comment.substr(0,2500)}}},ca={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.dialog.dialogVisibleRemark?a("el-dialog",{staticClass:"gyCommentRemark",attrs:{title:"评论",visible:t.dialog.dialogVisibleRemark,"close-on-click-modal":!1,width:"800px","append-to-body":""},on:{"update:visible":function(e){return t.$set(t.dialog,"dialogVisibleRemark",e)}}},[a("div",{staticClass:"remark"},[a("div",{staticStyle:{resize:"none",width:"100%",height:"230px",padding:"8px",background:"#F9F9F9"},attrs:{id:"testim",contenteditable:"true",placeholder:"请输入评论..."},on:{focus:function(e){return t.remarkFocus()}}})]),t._v(" "),a("div",{staticClass:"remind"},[a("button",{staticClass:"gy-button-views-comment",on:{click:function(e){return t.remindFollow()}}},[t._v("@提醒谁关注")])]),t._v(" "),a("div",{staticClass:"upload"},[a("i",{staticClass:"el-icon-circle-plus-outline"}),t._v(" "),a("span",{on:{click:function(e){return t.uploadImg()}}},[t._v("上传文件")]),t._v(" "),a("gy-file-upload",{ref:"sFileUpload",on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1),t._v(" "),a("div",{staticClass:"sublime"},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"4px"},on:{click:function(e){return t.close()}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.commentSublime()}}},[t._v("发送")])])]):t._e(),t._v(" "),t.dialogStaff.dialogVisibleStaff?a("el-dialog",{staticClass:"gyReminderStaff",attrs:{title:"指定提醒人员",visible:t.dialogStaff.dialogVisibleStaff,"close-on-click-modal":!1,width:"800px","append-to-body":""},on:{"update:visible":function(e){return t.$set(t.dialogStaff,"dialogVisibleStaff",e)}}},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("姓名")]),t._v(" "),a("th",[t._v("岗位")]),t._v(" "),a("th",[t._v("所属岗位")])])]),t._v(" "),t.reminderStaffList&&0!=t.reminderStaffList.length?a("tbody",t._l(t.reminderStaffList,function(e,s){return a("tr",{key:s},[a("td",[a("el-checkbox",{attrs:{checked:t.checkModel},on:{change:function(a){return t.selectionOfficer(a,e)}}})],1),t._v(" "),a("td",[t._v(t._s(e.userName))]),t._v(" "),a("td",[t._v(t._s(t.$constant.roleName))]),t._v(" "),a("td",[t._v(t._s(e.orgName))])])}),0):a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"10"}},[t._v("暂无数据")])])])]),t._v(" "),a("div",{staticClass:"sublime"},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"4px"},on:{click:function(e){return t.closeStaff()}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.staffSublime()}}},[t._v("确定")])])]):t._e()],1)},staticRenderFns:[]};var da=a("C7Lr")(ra,ca,!1,function(t){a("Kf8Q")},null,null).exports,ua={components:{payCont:qe,gyFileView:Ke,bankAcc:Ye,gyFileUpload:aa,gyOperationHistory:oa,gyCommentRemark:da},data:function(){return{isFormula:!1,skuQuantity:null,tempPrice:null,applyQuantities:null,fileModelList:[],isShowFpmx:!1,indexPc:null,batchesList:[],list:{id:null,contEssenceStatus:null,bizType:null,contractType:null,createdName:null,businessManagerId:null,businessManagerName:null,orderStatus:null,createdDate:null,planBuyDlvyDat:null,planSaleDlvyDate:null,downstreamInfo:{orderSn:null,fileAttachCertifiedList:[]},upstreamInfo:{orderSn:null,fileAttachCertifiedList:[]}},flag:1,flag1:0,createPaymentForm:{contEssId:null,appalyPaymentTime:(new Date).getTime(),planPayTime:new Date,sellerAccount:null,sellerDepositBankId:null,sellerDepositBank:null,payMethod:null,sellerCorpName:null,payTotal:null,tradeMode:null,handlerUserName:null,payDesc:null,approveType:null,payInfoList:[{payAmount:null,description:null}],remarks:null},showPayDesc:!0,payDescRet:null,defalultPayDesc:null,defaultPayInfoList:[{payAmount:null,description:null},{payAmount:null,description:null}],sales:{sellerCorpName:null,tracontractAmount:null,payTotal:null,payMethodStr:null,createdDate:null,payTime:null,sellerDepositBank:null,sellerAccount:null,tradeMode:null,tradeModeStr:null,shouldPaymentTotal:null,hadPaymentTotal:null,needPaymentTotal:null,createUserName:null,approveStatusStr:null,approveStatus:null,paymentVoucher:null,remarks:null,payDescStr:null,payNumber:null,uploadFileStatus:null},remarks:null,payRemarks:null,ContImg:[],isPass:!1,isUpdate:!1,isUpdated:!1,isDefault:!1,newBank:[],payingBankInfo:{buyerDepositBank:null},paymentAmount:{},appalyPaymentTime:(new Date).getTime(),commentDiog:{dialogVisibleRemark:!1},commentParam:{targetType:3,subSysType:0,refFunc:{},refParam:{targetId:this.$route.query.payId,targetType:3}},fromFlg:null,doneFlg:null,paymemtDtos:null,permiseCreate:null,paymentTblTitle:"已付款明细"}},created:function(){},mounted:function(){this.getdetailOrder(),this.getdetail(),null==this.$route.query.homeFromFlg||void 0===this.$route.query.homeFromFlg?this.fromFlg=0:this.fromFlg=Number(this.$route.query.homeFromFlg),this.doneFlg=Number(this.$route.query.doneFlg)},watch:{remarks:function(t){t.length>2500&&(this.$message.error("审批备注最多可填写2500字"),this.remarks=this.remarks.substr(0,2500))},payRemarks:function(t){t.length>2500&&(this.$message.error("付款备注最多可填写2500字"),this.payRemarks=this.payRemarks.substr(0,2500))},applyQuantities:function(t,e){null!=t&&void 0!==t&&1===this.permiseCreate&&this.isFormula&&1===Number(this.paymentAmount.payMethodAmount)&&this.tempPrice&&(this.createPaymentForm.payTotal=this.$tools.toFixedFn(Number(t)*Number(this.tempPrice),2))},tempPrice:function(t,e){null!=t&&void 0!==t&&1===this.permiseCreate&&this.isFormula&&1===Number(this.paymentAmount.payMethodAmount)&&this.applyQuantities&&(this.createPaymentForm.payTotal=this.$tools.toFixedFn(Number(this.applyQuantities)*Number(t),2))}},methods:{itemBankChange:function(t,e,a,s){if(0===e)return this.$refs.bankAcc.addBank=!0,this.indexPc=s,void(1===this.flag1?(this.$refs.bankAcc.creatBank.companyId=this.list.sellerCompanyId,this.$refs.bankAcc.creatBank.accountName=this.list.sellerCompanyName):(this.$refs.bankAcc.creatBank.companyId=this.list.targetCorpId,this.$refs.bankAcc.creatBank.accountName=this.list.targetCorpName));var i={};this.newBank.find(function(t){t.bankAccId===e&&(i=t)}),t.buyerAccount=i.bankAccount,t.buyerDepositBank=i.depositBankName,t.buyerDepositBankId=i.bankAccId},updateSubmit:function(){for(var t=this,e=0;e<this.batchesList.length;e++){if(!this.batchesList[e].payTime)return this.$message({message:"请选择出账日期",type:"error"}),!1;if(!this.batchesList[e].buyerDepositBankId)return this.$message({message:"请选择付款银行",type:"error"}),!1;if(!this.batchesList[e].fileUrl)return this.$message({message:"请上传付款凭证",type:"error"}),!1}var a={paymentId:this.sales.id,multiPayId:Number(this.$route.query.multiPayId),contEssId:this.$route.query.contEssId,purchaseOrderId:Number(this.$route.query.purchaseOrderId),todoId:this.$route.query.todoId,payInfoList:this.batchesList};this.$http.post(this.$api.payment.updateErpPaymentInfo,a).then(function(e){0===e.data.code?(t.$message.success("操作成功"),t.$router.go(-1)):t.$message.error(e.data.code+" "+e.data.message)})},onCallbackSaleFileUpload:function(t,e){var a=this;this.fileModelList=[],t.forEach(function(t){a.fileModelList.push(t.fileUrl)}),e.fileUrl=this.fileModelList.join()},resetSub:function(){var t=this;i()(this.createPaymentForm).forEach(function(e){t.createPaymentForm[e]=t.sales[e]}),this.createPaymentForm.contEssId=this.$route.query.contEssId,this.createPaymentForm.appalyPaymentTime=this.sales.createdDate,this.createPaymentForm.handlerUserName=this.sales.createUserName,this.createPaymentForm.sellerDepositBankId=this.sales.sellerBankId,console.log(this.createPaymentForm),this.newPaymentBankAssembly(this.list.sellerCompanyId),this.getpaymentApplicationAmount(),this.flag1=1,this.flag=1,this.isDefault=!1,this.showPayDesc=!1},cancelResubmit:function(){this.flag1=0,this.flag=2,this.isDefault=!0,this.showPayDesc=!0},getpaymentApplicationAmount:function(t){var e=this;this.$http.get(this.$api.payment.paymentApplicationAmount+"/"+this.list.purchaseOrderId).then(function(t){0===t.data.code&&(e.paymentAmount=t.data.data)})},addClick:function(){this.createPaymentForm.payInfoList.push({payAmount:null,description:null})},delectClick:function(t){this.createPaymentForm.payInfoList.splice(t,1),0===this.createPaymentForm.payInfoList.length&&(this.createPaymentForm.payDesc=null)},newPaymentBankAssembly:function(t,e,a){var s=this;this.$http.post(this.$api.payment.newBank,{companyId:t}).then(function(t){if(0===t.data.code&&(s.newBank=t.data.data,"y"===a)){var i={};s.newBank.find(function(t){e.bankName===t.bankName&&(i=t)}),s.batchesList[s.indexPc].buyerAccount=i.bankAccount,s.batchesList[s.indexPc].buyerDepositBank=i.depositBankName,s.batchesList[s.indexPc].buyerDepositBankId=i.bankAccId,s.batchesList[s.indexPc].bankAccId=i.bankAccId}})},changeBlank:function(t){if(0===t)return this.$refs.bankAcc.addBank=!0,void(1===this.flag1?(this.$refs.bankAcc.creatBank.companyId=this.list.sellerCompanyId,this.$refs.bankAcc.creatBank.accountName=this.list.sellerCompanyName):(this.$refs.bankAcc.creatBank.companyId=this.list.targetCorpId,this.$refs.bankAcc.creatBank.accountName=this.list.targetCorpName));var e=this.newBank.filter(function(e){return e.bankAccId===t});1===this.flag1?(this.createPaymentForm.sellerAccount=e[0].bankAccount,this.createPaymentForm.sellerBankId=e[0].bankAccId,this.createPaymentForm.sellerDepositBank=e[0].depositBankName):(this.payingBankInfo.buyerDepositBankId=e[0].bankAccId,this.payingBankInfo.buyerDepositBank=e[0].depositBankName)},popupPaySubmission:function(t){if(!t)return this.createPaymentForm.sellerAccount=null,this.createPaymentForm.sellerBankId=null,this.createPaymentForm.sellerDepositBank=null,void(this.payingBankInfo.buyerDepositBank=null);1===this.flag1?(this.createPaymentForm.sellerAccount=t.companyAccount,this.createPaymentForm.sellerBankId=t.id,this.createPaymentForm.sellerDepositBank=t.depositBank,this.newPaymentBankAssembly(this.list.sellerCompanyId)):(this.payingBankInfo.buyerDepositBankId=t.id,this.payingBankInfo.buyerDepositBank=t.depositBank,this.newPaymentBankAssembly(this.list.targetCorpId,t,"y"))},getdetail:function(){var t=this,e=this,a={purchaseOrderId:this.$route.query.purchaseOrderId,paymentId:this.$route.query.payId,multiPayId:this.$route.query.multiPayId};e.$http.post(e.$api.payment.getDetail,a).then(function(a){if(0===a.data.code){if(null==a.data.data.list)return void t.$message.error("数据错误，缺少付款信息。");e.paymemtDtos=a.data.data,e.sales=a.data.data.list[0],console.log("that.sales",e.sales),e.applyQuantities=e.sales.applyQuantities,e.tempPrice=e.sales.tempPrice,e.batchesList=e.paymemtDtos.todoPaylist,e.batchesList&&e.batchesList.forEach(function(t){t.payTime=new Date}),e.defalultPayDesc=e.sales.payDesc,e.sales.payDescRet=e.sales.payDesc,e.payRemarks=e.sales.remarks,e.isUpdated=1===e.sales.approveStatus&&1===e.sales.uploadFileStatus,2===e.sales.approveStatus&&4===e.fromFlg&&(e.flag=2),50===e.sales.payStatus&&(e.isDefault=!0),e.permiseCreate=1,3===e.sales.payDesc&&1===e.sales.approveType&&(e.permiseCreate=2),1===e.doneFlg&&(e.paymemtDtos.multiPaylist=e.paymemtDtos.allPaylist,e.batchesList=null,e.paymentTblTitle="分批付款明细"),e.getVoucherJurisdiction(),e.approve1History()}else e.$alert(a.data.code+" "+a.data.message)}).catch(function(t){console.log(t)})},getdetailOrder:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+this.$route.query.contEssId).then(function(e){0===e.data.code?(t.list=e.data.data,t.list.upstreamInfo&&(21!==Number(t.list.upstreamInfo.skuPriceType)&&22!==Number(t.list.upstreamInfo.skuPriceType)||(t.isFormula=!0),t.skuQuantity=t.list.upstreamInfo.skuQuantity),t.approveJurisdiction(),t.newPaymentBankAssembly(t.list.targetCorpId)):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},getVoucherJurisdiction:function(){this.$tools.hasBizAuth("cashier_payment")&&1===this.sales.approveStatus&&0===this.sales.uploadFileStatus&&1===this.fromFlg&&(this.isUpdate=!0)},approveJurisdiction:function(){var t=this,e={targetId:this.$route.query.payId,targetType:3};this.$http.post(this.$api.apprProc.hasApproveAuth,e).then(function(e){0===e.data.code?3===t.sales.approveStatus?t.isPass=!0:t.isDefault=!0:(t.isPass=!1,t.isDefault=!0)}).catch(function(t){console.log(t)})},approveSub:function(t){var e=this,a={todoId:this.$route.query.todoId,id:this.$route.query.payId,contEssId:this.$route.query.contEssId,operaType:t,remarks:this.remarks};this.$http.post(this.$api.payment.buy,a).then(function(t){0===t.data.code?(e.$message.success("操作成功"),e.$router.go(-1)):e.$message.error(t.data.code+" "+t.data.message)}).catch(function(t){console.log(t)})},approve1History:function(){var t={targetId:this.sales.id,targetType:3};this.$refs.operationHis.display(this.$api.contract.approve1History,t)},onCallbackBuyFileUpload:function(t){var e=this;this.ContImg=[],t.forEach(function(t){e.ContImg.push(t.fileUrl)})},submit:function(){var t=this;if(0!==this.ContImg.length)if(this.payingBankInfo.buyerDepositBank)if(null!==this.appalyPaymentTime){var e={todoId:this.$route.query.todoId,appalyPaymentTime:this.appalyPaymentTime,purchaseOrderId:this.$route.query.purchaseOrderId,contEssId:this.$route.query.contEssId,paymentId:this.$route.query.payId,paymentVoucher:"",allowedFunctionsId:36};i()(this.ContImg).forEach(function(a){e.paymentVoucher+=t.ContImg[a]+","}),e.paymentVoucher=e.paymentVoucher.substr(0,e.paymentVoucher.length-1),e.contEssId=this.$route.query.contEssId,e.buyerAccount=this.payingBankInfo.buyerAccount,e.buyerDepositBankId=this.payingBankInfo.buyerDepositBankId,e.buyerDepositBank=this.payingBankInfo.buyerDepositBank,this.$http.post(this.$api.payment.voucher,e).then(function(e){0===e.data.code?(t.$message.success("保存成功"),t.$router.go(-1)):t.$message.error(e.data.code+" "+e.data.message)})}else this.$message.error("请选择申请日期");else this.$message.error("请先选择付款银行");else this.$message.error("请先上传付款凭证")},reject:function(){var t=this;this.$confirm("确认驳回?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.approveSub(2)})},deleteImg:function(t){this.ContImg.splice(t,1)},showImg:function(t){this.$refs.contFileView.open4MultiFile(t)},submitRet:function(){var t=this;if(console.log(this.createPaymentForm),this.createPaymentForm.appalyPaymentTime)if(this.createPaymentForm.planPayTime)if(this.createPaymentForm.sellerDepositBank)if(this.createPaymentForm.payTotal)if(/^0\.\d+$|^[1-9]?\d+(\.\d+)?$/.test(this.createPaymentForm.payTotal))if(0!==this.createPaymentForm.payTotal&&"0"!==this.createPaymentForm.payTotal){if(this.isFormula&&1===Number(this.paymentAmount.payMethodAmount)){if(Number(this.paymentAmount.leftPayQuantities)<=0)return void this.$message.error("申请付款数量已超出合同数量，不可再申请付款");if(!this.applyQuantities||this.applyQuantities<=0)return void this.$message({message:"申请付款数量不能为空且不能小于等于0",type:"error"});if(!this.tempPrice||this.tempPrice<=0)return void this.$message({message:"暂定价不能为空且不能小于等于0",type:"error"})}if(1===this.createPaymentForm.payMethod){if(this.list.upstreamInfo.totalAmount-this.paymentAmount.leftAmount+1*this.createPaymentForm.payTotal>=1.05*this.list.upstreamInfo.totalAmount)return void this.$message.error("抱歉，申请金额核算已超出合同金额的5%，无法提交申请")}if(3===this.createPaymentForm.payDesc){if(this.createPaymentForm.payInfoList.length<2)return void this.$message.error("需要分批，至少分两批以上");for(var e=0,a=0;a<this.createPaymentForm.payInfoList.length;a++){if(e+=Number(this.createPaymentForm.payInfoList[a].payAmount),!this.createPaymentForm.payInfoList[a].payAmount)return void this.$message.error("请填写付款金额")}if(e!==1*this.createPaymentForm.payTotal)return void this.$message.error("分批金额总和，应该等于申请金额")}this.createPaymentForm.purchaseOrderId=this.$route.query.purchaseOrderId,this.createPaymentForm.orderType=3,this.$http.post(this.$api.order.newPayment,this.createPaymentForm).then(function(e){0===e.data.code?(t.$message.success(e.data.message),t.flag=1,t.flag1=0,t.rejectPayment()):t.$message.error(e.data.code+" "+e.data.message)})}else this.$message({message:"申请金额不能为0",type:"error"});else this.$message.error("请输入大于零申请金额");else this.$message.error("请输入申请金额");else this.$message.error("请输入收款开户行");else this.$message.error("请选择计划付款日期");else this.$message.error("请选择申请日期")},rejectPayment:function(){var t=this;this.$http.post(this.$api.payment.rejectPayment,{alarmingId:this.$route.query.todoId}).then(function(e){0===e.data.code&&t.$router.go(-1)}).catch(function(t){console.log(t)})},comment:function(){this.$route.query.payId?this.commentParam.refParam.targetId=Number(this.$route.query.payId):this.commentParam.refParam.targetId=this.sales.id,this.commentParam.targetId=this.commentParam.refParam.targetId,this.commentParam.refParam.targetType=3,this.commentParam.refFunc=this.$refs.operationHis.display,this.commentDiog.dialogVisibleRemark=!0}},provide:function(){return{showImg:this.showImg}}},pa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paydetail-wrapper my-payment"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("pay-cont",{attrs:{list:t.list}})],1),t._v(" "),a("div",{staticClass:"receivables-information"},[a("p",{staticClass:"paydetail-title"},[t._v("付款信息")]),t._v(" "),0===t.flag1?a("div",{staticClass:"essential-wrapper pay-detail essential-row-float"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("申请金额(元)")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.sales.payTotal)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("申请日期")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("date")(t.sales.createdDate)))])]),t._v(" "),t.isFormula&&3!==t.sales.payMethod?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("申请付款数量(吨)")]),t._v(" "),a("div",{staticClass:"essential-text",class:{red:t.isFormula}},[t._v(t._s(t._f("numToQuantity")(t.applyQuantities)))])]):t._e(),t._v(" "),t.isFormula&&3!==t.sales.payMethod?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同数量(吨)")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToQuantity")(t.skuQuantity)))])]):t._e(),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同金额(元)")]),t._v(" "),3==t.sales.payMethod&&2==t.sales.payBillType?[21===Number(t.list.downstreamInfo.skuPriceType)||22===Number(t.list.downstreamInfo.skuPriceType)?a("div",{staticClass:"essential-text red"},[t._v("公式计价")]):a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.list.downstreamInfo.totalAmount)))])]:[t.isFormula?a("div",{staticClass:"essential-text red"},[t._v("公式计价")]):a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.list.upstreamInfo.totalAmount)))])]],2),t._v(" "),t.isFormula&&3!==t.sales.payMethod&&t.sales.allAppliedQty>t.skuQuantity?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("申请付款总量(吨)")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToQuantity")(t.sales.allAppliedQty))),a("span",{staticClass:"red"},[t._v("  (申请总量已超出合同约定)")])])]):t._e(),t._v(" "),t.isFormula&&3!==t.sales.payMethod?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("暂定价(元/吨)")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.tempPrice,!0)))])]):t._e(),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("付款单位")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.targetCorpName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("计划付款时间")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("date")(t.sales.planPayTime)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("收款单位")]),t._v(" "),3==t.sales.payMethod&&2==t.sales.payBillType?a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.buyerCompanyName))]):a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.sellerCompanyName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("开户行")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.sales.sellerDepositBank))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("付款用途")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.sales.payMethodStr))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("银行账号")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.sales.sellerAccount))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("经办人")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.sales.createUserName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("付款方式")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.sales.tradeModeStr))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("付款单编号")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.sales.payNumber))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("付款说明")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("payDescStr")(t.sales.payDesc)))])]),t._v(" "),3===t.sales.payDesc?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("审批类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("approveType")(t.sales.approveType)))])]):t._e(),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("状态")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.sales.approveStatusStr))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("备注")]),t._v(" "),a("div",{staticClass:"essential-text text-overflow",staticStyle:{"line-height":"30px"}},[t._v(t._s(t.sales.remarks||"-"))])]),t._v(" "),t.isUpdated&&1===t.permiseCreate?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("付款银行")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.sales.buyerDepositBank))])]):t._e(),t._v(" "),t.isUpdate&&1===t.permiseCreate?a("div",{staticClass:"essential-item"},[t._m(0),t._v(" "),a("el-select",{staticClass:"input-date",attrs:{placeholder:"请选择"},on:{change:t.changeBlank},model:{value:t.payingBankInfo.buyerDepositBank,callback:function(e){t.$set(t.payingBankInfo,"buyerDepositBank",e)},expression:"payingBankInfo.buyerDepositBank"}},t._l(t.newBank,function(t){return a("el-option",{key:t.bankAccId,attrs:{label:t.depositBankName,value:t.bankAccId}})}),1)],1):t._e(),t._v(" "),t.isUpdated&&1===t.permiseCreate?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("出账日期")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("date")(t.sales.payTime)))])]):t._e(),t._v(" "),t.isUpdate&&1===t.permiseCreate?a("div",{staticClass:"essential-item"},[t._m(1),t._v(" "),a("div",{staticClass:"essential-text"},[a("gy-file-upload",{ref:"pFileUpload",on:{callbackFileUpload:t.onCallbackBuyFileUpload}})],1)]):t._e(),t._v(" "),t.isUpdate&&1===t.permiseCreate?a("div",{staticClass:"essential-item",staticStyle:{height:"50px"}},[a("div",{staticClass:"essential-title"},[t._v("出账日期")]),t._v(" "),a("div",[a("el-date-picker",{staticClass:"input-date",attrs:{type:"date","value-format":"timestamp",placeholder:"日期"},model:{value:t.appalyPaymentTime,callback:function(e){t.appalyPaymentTime=e},expression:"appalyPaymentTime"}})],1)]):t._e(),t._v(" "),t.isUpdated&&1===t.permiseCreate?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("付款凭证")]),t._v(" "),a("div",{staticClass:"essential-text"},[t.sales.paymentVoucher&&0!==t.sales.paymentVoucher.length?a("span",{on:{click:function(e){t.showImg(t.sales.paymentVoucher.split(","))}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])])]):t._e()]):a("div",{staticClass:"essential-wrapper pay-detail essential-row-float"},[a("div",{staticClass:"essential-item"},[t._m(2),t._v(" "),a("div",{staticClass:"essential-text input-date"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"申请日期"},model:{value:t.createPaymentForm.appalyPaymentTime,callback:function(e){t.$set(t.createPaymentForm,"appalyPaymentTime",e)},expression:"createPaymentForm.appalyPaymentTime"}})],1)]),t._v(" "),a("div",{staticClass:"essential-item"},[t._m(3),t._v(" "),a("div",{staticClass:"essential-text"},[t._v("\n                    "+t._s(t.sales.buyerCorpName)+"\n                ")])]),t._v(" "),a("div",{staticClass:"essential-item cl"},[t._m(4),t._v(" "),a("div",{staticClass:"essential-text input-date"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"计划付款日期"},model:{value:t.createPaymentForm.planPayTime,callback:function(e){t.$set(t.createPaymentForm,"planPayTime",e)},expression:"createPaymentForm.planPayTime"}})],1)]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("收款单位")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.sales.sellerCorpName))])]),t._v(" "),a("div",{staticClass:"essential-item cl"},[t._m(5),t._v(" "),a("div",{staticClass:"essential-text input-date"},[a("el-select",{attrs:{placeholder:"请选择收款银行账户"},on:{change:t.changeBlank},model:{value:t.createPaymentForm.sellerDepositBankId,callback:function(e){t.$set(t.createPaymentForm,"sellerDepositBankId",e)},expression:"createPaymentForm.sellerDepositBankId"}},t._l(t.newBank,function(t){return a("el-option",{key:t.bankAccId,attrs:{label:t.depositBankName,value:t.bankAccId}})}),1)],1)]),t._v(" "),a("div",{staticClass:"essential-item"},[t._m(6),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.sellerAccount,expression:"createPaymentForm.sellerAccount"}],attrs:{type:"text",readonly:""},domProps:{value:t.createPaymentForm.sellerAccount},on:{input:function(e){e.target.composing||t.$set(t.createPaymentForm,"sellerAccount",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同金额(元)")]),t._v(" "),t.isFormula?a("div",{staticClass:"essential-text red"},[t._v("公式计价")]):a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.list.upstreamInfo.totalAmount)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[t._m(7),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.tradeMode,expression:"createPaymentForm.tradeMode"}],attrs:{type:"radio",value:"22"},domProps:{checked:t._q(t.createPaymentForm.tradeMode,"22")},on:{change:function(e){return t.$set(t.createPaymentForm,"tradeMode","22")}}}),t._v("银行电汇")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.tradeMode,expression:"createPaymentForm.tradeMode"}],attrs:{type:"radio",value:"26"},domProps:{checked:t._q(t.createPaymentForm.tradeMode,"26")},on:{change:function(e){return t.$set(t.createPaymentForm,"tradeMode","26")}}}),t._v("承兑汇票")])])]),t._v(" "),t.isFormula?a("div",{staticClass:"gy-form-group"},[t._m(8),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyQuantities,expression:"applyQuantities"}],staticClass:"gy-input",attrs:{type:"number",min:"0",placeholder:"请输入申请付款数量"},domProps:{value:t.applyQuantities},on:{input:function(e){e.target.composing||(t.applyQuantities=e.target.value)}}})]):t._e(),t._v(" "),a("div",{staticClass:"essential-item"},[t._m(9),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticStyle:{display:"inline-block"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.payMethod,expression:"createPaymentForm.payMethod"}],attrs:{type:"radio",value:"1",disabled:"true"},domProps:{checked:t._q(t.createPaymentForm.payMethod,"1")},on:{change:function(e){return t.$set(t.createPaymentForm,"payMethod","1")}}}),t._v("货款\n                    ")]),t._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.payMethod,expression:"createPaymentForm.payMethod"}],attrs:{type:"radio",disabled:"true",value:"2"},domProps:{checked:t._q(t.createPaymentForm.payMethod,"2")},on:{change:function(e){return t.$set(t.createPaymentForm,"payMethod","2")}}}),t._v("保证金\n                    ")]),t._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.payMethod,expression:"createPaymentForm.payMethod"}],attrs:{type:"radio",disabled:"true",value:"5"},domProps:{checked:t._q(t.createPaymentForm.payMethod,"5")},on:{change:function(e){return t.$set(t.createPaymentForm,"payMethod","5")}}}),t._v("追加保证金\n                    ")])])]),t._v(" "),t.isFormula?a("div",{staticClass:"gy-form-group cl"},[t._m(10),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempPrice,expression:"tempPrice"}],staticClass:"gy-input",attrs:{type:"number",placeholder:"请输入暂定价"},domProps:{value:t.tempPrice},on:{input:function(e){e.target.composing||(t.tempPrice=e.target.value)}}})]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{float:"right",height:"90px",padding:"8px 30px 8px 131px"}},[t._m(11),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.payDesc,expression:"createPaymentForm.payDesc"}],attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.createPaymentForm.payDesc,"1")},on:{change:function(e){return t.$set(t.createPaymentForm,"payDesc","1")}}}),t._v("本笔资金支出为正常交割，我司需垫资"),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.payDesc,expression:"createPaymentForm.payDesc"}],attrs:{type:"radio",value:"2"},domProps:{checked:t._q(t.createPaymentForm.payDesc,"2")},on:{change:function(e){return t.$set(t.createPaymentForm,"payDesc","2")}}}),t._v("本笔资金支出需先收到下家款项，我司无需垫资"),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.payDesc,expression:"createPaymentForm.payDesc"}],attrs:{type:"radio",value:"3"},domProps:{checked:t._q(t.createPaymentForm.payDesc,"3")},on:{change:function(e){return t.$set(t.createPaymentForm,"payDesc","3")}}}),t._v("分批付款，以付款明细表为准\n          ")]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(12),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.payTotal,expression:"createPaymentForm.payTotal"}],attrs:{type:"text",placeholder:"请输入申请金额"},domProps:{value:t.createPaymentForm.payTotal},on:{input:function(e){e.target.composing||t.$set(t.createPaymentForm,"payTotal",e.target.value)}}})]),t._v(" "),3==t.createPaymentForm.payDesc?a("div",{staticClass:"gy-form-group",staticStyle:{padding:"8px 30px 8px 131px"}},[t._m(13),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.approveType,expression:"createPaymentForm.approveType"}],attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.createPaymentForm.approveType,"1")},on:{change:function(e){return t.$set(t.createPaymentForm,"approveType","1")}}}),t._v("一次审批\n              "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.approveType,expression:"createPaymentForm.approveType"}],attrs:{type:"radio",value:"2"},domProps:{checked:t._q(t.createPaymentForm.approveType,"2")},on:{change:function(e){return t.$set(t.createPaymentForm,"approveType","2")}}}),t._v("批次审批\n          ")]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[t._v("经办人")]),t._v(" "),a("div",[t._v(t._s(t.sales.createUserName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.createPaymentForm.remarks,expression:"createPaymentForm.remarks"}],staticClass:"gy-textarea",attrs:{cols:"30",rows:"10"},domProps:{value:t.createPaymentForm.remarks},on:{input:function(e){e.target.composing||t.$set(t.createPaymentForm,"remarks",e.target.value)}}})])])]),t._v(" "),2!==t.fromFlg||"3"!==t.createPaymentForm.payDesc&&3!==t.createPaymentForm.payDesc?t._e():a("div",{staticClass:"paybuy-fpfkmx",staticStyle:{"margin-bottom":"20px"}},[a("p",{staticClass:"paydetail-title",staticStyle:{"padding-left":"0px","margin-bottom":"10px"}},[t._v("分批付款明细")]),t._v(" "),a("table",{staticClass:"gy-table"},[t._m(14),t._v(" "),a("tbody",t._l(t.createPaymentForm.payInfoList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.payAmount,expression:"item.payAmount"}],attrs:{type:"text",placeholder:"请输入付款金额"},domProps:{value:e.payAmount},on:{input:function(a){a.target.composing||t.$set(e,"payAmount",a.target.value)}}})]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"item.description"}],attrs:{type:"text",placeholder:"请输入备注"},domProps:{value:e.description},on:{input:function(a){a.target.composing||t.$set(e,"description",a.target.value)}}})]),t._v(" "),a("td",[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.addClick()}}},[t._v("+")]),a("br"),t._v(" "),t.createPaymentForm.payInfoList.length>1?a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.delectClick(s)}}},[t._v("-")]):t._e()])])}),0)])]),t._v(" "),t.paymemtDtos&&t.paymemtDtos.multiPaylist&&!t.isPass?a("div",{staticClass:"payment-elTable my-table"},[a("p",{staticClass:"paydetail-title"},[t._v(t._s(t.paymentTblTitle))]),t._v(" "),a("div",{staticClass:"essential-wrapper approval-list"},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.paymemtDtos.multiPaylist}},[a("el-table-column",{attrs:{"class-name":"text-r",label:"付款金额(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.payAmount)))])]}}],null,!1,3981276143)}),t._v(" "),a("el-table-column",{attrs:{label:"付款银行"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.buyerDepositBank))])]}}],null,!1,3191117097)}),t._v(" "),a("el-table-column",{attrs:{label:"出账日期",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.payTime)))])]}}],null,!1,2468391766)}),t._v(" "),a("el-table-column",{attrs:{label:"付款凭证","class-name":"picture-styles-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.fileUrl?a("span",{on:{click:function(a){t.showImg(e.row.fileUrl.split(","))}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,305303764)}),t._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-overflow"},[t._v(t._s(e.row.description))])]}}],null,!1,1368002397)})],1)],1)])]):t._e(),t._v(" "),t.batchesList&&1===Number(t.$route.query.homeFromFlg)?a("div",{staticClass:"essential-information my-form-l"},[a("div",{staticClass:"essential-wrapper"},[a("p",{staticClass:"paydetail-title"},[t._v("分批付款明细")]),t._v(" "),t._l(t.batchesList,function(e,s){return a("div",{key:s},[a("div",{staticClass:"min-title-2"},[t._v("付款明细"+t._s(s+1))]),t._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"gy-form-group"},[a("label",{staticClass:"l"},[t._v("付款金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(e.payAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(15,!0),t._v(" "),a("el-date-picker",{staticClass:"input-date",attrs:{type:"date","value-format":"timestamp"},model:{value:e.payTime,callback:function(a){t.$set(e,"payTime",a)},expression:"item.payTime"}})],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(16,!0),t._v(" "),a("el-select",{attrs:{placeholder:"请选择付款银行"},on:{change:function(a){return t.itemBankChange(e,e.bankAccId,e.buyerDepositBank,s)}},model:{value:e.bankAccId,callback:function(a){t.$set(e,"bankAccId",a)},expression:"item.bankAccId"}},t._l(t.newBank,function(t){return a("el-option",{key:t.bankAccId,attrs:{label:t.depositBankName,value:t.bankAccId}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(17,!0),t._v(" "),a("gy-file-upload",{ref:"sFileUpload",refInFor:!0,staticStyle:{display:"inline-block"},on:{callbackFileUpload:function(a){return t.onCallbackSaleFileUpload(a,e)}}})],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("label",{staticClass:"l"},[t._v("备注")]),t._v(" "),a("span",[t._v(t._s(e.description))])])])])})],2)]):t._e()]),t._v(" "),t.isPass?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("审批备注")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"gy-textarea",attrs:{name:"",placeholder:"请填写审批备注",id:"",cols:"30",rows:"10"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])])])]):t._e(),t._v(" "),a("div",{staticClass:"foot",class:{"mt-20":"3"===t.sales.payDesc}},[t.isDefault?[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])]:t._e(),t._v(" "),t.isPass?[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),1===t.$route.query.homeFromFlg||"1"===t.$route.query.homeFromFlg?[a("button",{staticClass:"gy-button-normal",on:{click:t.reject}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",on:{click:function(e){return t.approveSub("1")}}},[t._v("通过")])]:t._e()]:t._e(),t._v(" "),t.isUpdate&&!t.isUpdated&&0===t.doneFlg?[t.batchesList?t._e():a("button",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"cashier_payment",expression:"'cashier_payment'"}],staticClass:"gy-button-extra confirmations",on:{click:t.submit}},[t._v("保存")]),t._v(" "),t.batchesList?a("button",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"cashier_payment",expression:"'cashier_payment'"}],staticClass:"gy-button-extra confirmations",on:{click:t.updateSubmit}},[t._v("保存")]):t._e()]:t._e(),t._v(" "),1===t.flag1?[a("button",{staticClass:"gy-button-normal",on:{click:t.cancelResubmit}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",on:{click:t.submitRet}},[t._v("提交")])]:t._e(),t._v(" "),1===t.fromFlg||2===t.fromFlg?a("div",{staticClass:"button-wrap"},[a("button",{staticClass:"gy-button-extra comment-button",on:{click:function(e){return t.comment()}}},[t._v("评论")])]):t._e()],2),t._v(" "),a("gy-operation-history",{ref:"operationHis"}),t._v(" "),!0===t.commentDiog.dialogVisibleRemark?a("gy-comment-remark",{attrs:{dialog:t.commentDiog,invoice:t.commentParam}}):t._e(),t._v(" "),a("bank-acc",{ref:"bankAcc",on:{onSaveAccInfo:t.popupPaySubmission}}),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("付款银行")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("付款凭证")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("i",{staticClass:"isMust"},[this._v("*")]),this._v("申请日期1")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("i",{staticClass:"isMust"},[this._v("*")]),this._v("付款单位")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("i",{staticClass:"isMust"},[this._v("*")]),this._v("计划付款日期")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("i",{staticClass:"isMust"},[this._v("*")]),this._v("收款开户行")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("i",{staticClass:"isMust"},[this._v("*")]),this._v("收款银行账号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("i",{staticClass:"isMust"},[this._v("*")]),this._v("付款方式")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("i",[this._v("*")]),this._v("申请付款数量(吨)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("i",{staticClass:"isMust"},[this._v("*")]),this._v("用途")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("i",[this._v("*")]),this._v("暂定价(元/吨)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l",staticStyle:{width:"120px"}},[e("strong",[this._v("*")]),this._v("付款说明")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("申请金额(元)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l",staticStyle:{width:"120px"}},[e("strong",[this._v("*")]),this._v("审批类型")])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("#")]),this._v(" "),e("th",[this._v("付款金额(元)")]),this._v(" "),e("th",[this._v("备注")]),this._v(" "),e("th",[this._v("操作")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"l"},[e("i",[this._v("*")]),this._v("出账日期")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"l"},[e("i",[this._v("*")]),this._v("付款银行")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("付款凭证")])}]};var va=a("C7Lr")(ua,pa,!1,function(t){a("61lf"),a("e+lL")},"data-v-0e74c836",null).exports,ma={data:function(){return{params:{pageSize:10,pageNo:1},total:null,list:{id:null,contEssenceStatus:null,bizType:null,contractType:null,createdName:null,businessManagerId:null,businessManagerName:null,orderStatus:null,createdDate:null,planBuyDlvyDat:null,planSaleDlvyDate:null,downstreamInfo:{orderSn:null,fileAttachCertifiedList:[]},upstreamInfo:{orderSn:null,fileAttachCertifiedList:[]}},collectionDate:new Date,buys:{contractAmount:null,settlementTotal:null,collectionAmount:null,buyerCompanyName:null,collectionType:null,createdDate:null,collectionStatus:null,erpCollectionFileModelList:[]},isPass:!1,fileList:[],dayRecordList:[],isFormulaPrice:!1}},created:function(){this.getdetail(),this.getdetailOrder(),this.approveJurisdiction(),this.getDayRecord()},mounted:function(){this.approve1History()},methods:{handleCurrentChange:function(t){this.params.pageNum=t,this.getDayRecord()},getdetail:function(){var t=this;this.$http.get(this.$api.payment.getDetailCollectionById+this.$route.query.collId).then(function(e){0===e.data.code?t.buys=e.data.data:t.$message({type:"error",message:e.data.code+" "+e.data.message})}).catch(function(t){console.log(t)})},getdetailOrder:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+this.$route.query.contEssId).then(function(e){0===e.data.code?(t.list=e.data.data,21!==Number(t.list.downstreamInfo.skuPriceType)&&22!==Number(t.list.downstreamInfo.skuPriceType)||(t.isFormulaPrice=!0)):t.$message({type:"error",message:e.data.code+" "+e.data.message})}).catch(function(t){console.log(t)})},getDayRecord:function(){var t=this;this.$http.post(this.$api.payment.daliyCollections,this.params).then(function(e){0===e.data.code&&(t.dayRecordList=e.data.data.rows,t.total=e.data.data.total)})},approveJurisdiction:function(){this.$tools.hasBizAuth("cashier_coll_confirm")&&(this.isPass=!0)},onCallbackSaleFileUpload:function(t){var e=this;this.fileList=[],t.forEach(function(t){e.fileList.push({fileUrl:t.fileUrl})})},approveSub:function(){var t=this;if(null===this.collectionDate)return this.$message({message:"请选择到账日期",type:"error"}),!1;if(0===this.fileList.length)return this.$message({message:"请上传收款凭证",type:"error"}),!1;var e={id:this.$route.query.collId,todoId:this.$route.query.todoId,erpCollectionFileModelList:this.fileList,collectionDate:this.collectionDate,contractId:this.$route.query.contEssId,allowedFunctionsId:34};this.$http.post(this.$api.payment.sale,e).then(function(e){0===e.data.code?(t.$message({message:"操作成功",type:"success"}),t.$router.go(-1)):t.$message.error(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},showImg:function(t){this.$refs.contFileView.open4MultiFile(t)},showImg4Obj:function(t){this.$refs.contFileView.open(t)},approve1History:function(){var t={targetId:this.$route.query.collId,targetType:5};this.$refs.operationHis.display(this.$api.contract.approve1History,t)}},provide:function(){return{showImg:this.showImg}},components:{payCont:qe,gyFileView:Ke,gyFileUpload:aa,gyOperationHistory:oa}},ha={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paydetail-wrapper my-payment"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("pay-cont",{attrs:{list:t.list}})],1),t._v(" "),a("div",{staticClass:"receivables-information"},[a("p",{staticClass:"paydetail-title"},[t._v("收款信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper pay-detail essential-row-float"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同金额(元)")]),t._v(" "),3==t.buys.payMethod&&2==t.buys.payBillType?[21===Number(t.list.upstreamInfo.skuPriceType)||22===Number(t.list.upstreamInfo.skuPriceType)?a("div",{staticClass:"essential-text"},[a("span",{staticStyle:{color:"red"}},[t._v("公式计价")])]):a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.list.upstreamInfo.totalAmount)))])]:[t.isFormulaPrice?a("div",{staticClass:"essential-text"},[a("span",{staticStyle:{color:"red"}},[t._v("公式计价")])]):a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.list.downstreamInfo.totalAmount)))])]],2),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("待收金额(元)")]),t._v(" "),t.isFormulaPrice||3==t.buys.payMethod&&2==t.buys.payBillType?a("div",{staticClass:"essential-text"},[t._v("--")]):a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.buys.needCollectionAmount)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("付款公司")]),t._v(" "),3==t.buys.payMethod&&2==t.buys.payBillType?a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.sellerCompanyName))]):a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.buyerCompanyName))])]),t._v(" "),t.isFormulaPrice&&2!==t.buys.collectionType?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同数量(吨)")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToQuantity")(t.list.downstreamInfo.skuQuantity)))])]):t._e(),t._v(" "),t.isFormulaPrice&&2!==t.buys.collectionType?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("暂定价(元/吨)")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.buys.tempPrice,!0)))])]):t._e(),t._v(" "),t.isFormulaPrice&&2!==t.buys.collectionType?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("收款数量(吨)")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToQuantity")(t.buys.applyQuantities)))])]):t._e(),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("本次收款金额(元)")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("numToCash")(t.buys.collectionAmount)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("付款类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.$constant.collectionType[t.buys.collectionType]))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("收款单状态")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(10===t.buys.collectionStatus?"待确认":"已完成"))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("付款凭证")]),t._v(" "),a("div",{staticClass:"essential-text"},[t.buys.erpBuyerPaymentFileModelList&&0!==t.buys.erpBuyerPaymentFileModelList.length?a("span",{on:{click:function(e){return t.showImg4Obj(t.buys.erpBuyerPaymentFileModelList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[t._v("未上传")])])]),t._v(" "),a("div",{staticClass:"essential-item",staticStyle:{"min-height":"55px"}},[a("div",{staticClass:"essential-title"},[t._v("收款单编号")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.buys.payNumber))])]),t._v(" "),20===t.buys.collectionStatus?[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("到账日期")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("date")(t.buys.collectionDate)))])]),t._v(" "),a("div",{staticClass:"essential-item",class:{cl:t.isFormulaPrice},staticStyle:{"min-height":"52px"}},[a("div",{staticClass:"essential-title"},[t._v("创建时间")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("date")(t.buys.createdDate,1)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("收款凭证")]),t._v(" "),a("div",{staticClass:"essential-text"},[t.buys.erpCollectionFileModelList&&0!==t.buys.erpCollectionFileModelList.length?a("span",{on:{click:function(e){return t.showImg4Obj(t.buys.erpCollectionFileModelList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[t._v("未上传")])])])]:t._e(),t._v(" "),10===t.buys.collectionStatus&&t.isPass?[a("div",{staticClass:"essential-item"},[t._m(0),t._v(" "),a("div",{staticClass:"essential-text searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{staticClass:"input-date",attrs:{type:"date","value-format":"timestamp",placeholder:"日期"},model:{value:t.collectionDate,callback:function(e){t.collectionDate=e},expression:"collectionDate"}})],1)])]),t._v(" "),a("div",{staticClass:"essential-item",class:{cl:t.isFormulaPrice},staticStyle:{"min-height":"52px"}},[a("div",{staticClass:"essential-title"},[t._v("创建时间")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("date")(t.buys.createdDate,1)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[t._m(1),t._v(" "),a("gy-file-upload",{ref:"sFileUpload",on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1)]:t._e()],2)]),t._v(" "),a("div",{staticClass:"receivables-information"},[a("p",{staticClass:"paydetail-title"},[t._v("当日收款记录")]),t._v(" "),a("div",{staticClass:"approval-list"},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dayRecordList}},[a("el-table-column",{attrs:{label:"客户名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.buyerCompanyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"收款金额(元)","class-name":"amount-right-el",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.collectionAmount)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"日期",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.collectionDate)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合同要素ID",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.essenceId))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"销售合同编号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.saleContractCode))])]}}])})],1)],1)]),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,total:t.total,layout:"prev, pager, next"},on:{"update:currentPage":function(e){return t.$set(t.params,"pageNo",e)},"update:current-page":function(e){return t.$set(t.params,"pageNo",e)},"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),10===t.buys.collectionStatus&&t.isPass?a("button",{staticClass:"gy-button-extra",on:{click:t.approveSub}},[t._v("财务确认")]):t._e()]),t._v(" "),a("gy-operation-history",{ref:"operationHis"}),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"essential-title"},[e("em",[this._v("*")]),this._v("到账日期")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("em",[this._v("*")]),this._v("收款凭证")])}]};var ya=a("C7Lr")(ma,ha,!1,function(t){a("TpmO"),a("J3Za")},"data-v-6715455a",null).exports,fa={data:function(){return{isShowSearch:!1,search:{contEssenceSn:null,payNumber:null,purchaseOrderNumber:null,sellerOrderNumber:null,collectionStatus:null,paymentStatus:null,buyerCompanyName:null,sellerCompanyName:null,paymentDateStart:null,paymentDateEnd:null,collectionDateStart:null,collectionDateEnd:null,businessOwnerName:null,contractType:3,pageNo:1,pageSize:10},list:[{id:null,buyerCompanyName:null,sellerCompanyName:null,shouldPaymentTotal:null,shouldCollectionTotal:null,hadPaymentTotal:null,hadCollectionTotal:null,needPaymentTotal:null,needCollectionTotal:null,paymentDate:null,collectionDate:null,paymentStateStr:null,collectionStateStr:null,paymentCreatedDate:null,collectionCreatedDate:null,sellerOrderNumber:null,sellerOrderId:null,purchaseOrderNumber:null,purchaseOrderId:null}],total:null,statisticsShow:{applyAmount:0,paidAmount:0,applyPayCount:0,paidCount:0,applyCollectAmount:0,collectedAmount:0,applyCollectCount:0,collectedCount:0}}},methods:{toggleTabs:function(t){var e=this;this.$http.get(this.$api.payment.collectionPaymentCount+"?countType="+t).then(function(t){0===t.data.code&&(e.statisticsShow=t.data.data)}).catch(function(t){console.log(t)})},getlist:function(){var t=this,e={};i()(this.search).forEach(function(a){e[a]=t.search[a]}),null!==e.paymentDateEnd&&""!==e.paymentDateEnd&&(e.paymentDateEnd=e.paymentDateEnd+864e5-1),null!==e.collectionDateEnd&&""!==e.collectionDateEnd&&(e.collectionDateEnd=e.collectionDateEnd+864e5-1),this.$http.post(this.$api.payment.getlist,e).then(function(e){0===e.data.code?(t.list=e.data.data.paymentAndCollectionDtos,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},turnPage:function(t){this.search.pageNo=t,this.getlist()},showDetail:function(t){var e={id:t.contractId,purchaseOrderId:t.purchaseOrderId,sellerOrderId:t.sellerOrderId,activeType:3};this.$router.push({name:"paymentDetail",query:e})}},activated:function(){this.$route.meta.isBack||(this.search={contractType:3},this.getlist()),this.$route.meta.isBack=!1},created:function(){this.toggleTabs(1)},components:{listStatistics:Ue}},_a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"payment-list"},[s("div",{staticClass:"search-btn"},[s("span",{staticClass:"advancedSearch",on:{click:t.ShowSearch}},[t._v("高级搜索"),s("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),s("div",{staticClass:"search-wrapper"},[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.essenceId,expression:"search.essenceId"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.search.essenceId},on:{input:function(e){e.target.composing||t.$set(t.search,"essenceId",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.prodName,expression:"search.prodName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.search.prodName},on:{input:function(e){e.target.composing||t.$set(t.search,"prodName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.buyerCompanyName,expression:"search.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.search.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"buyerCompanyName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("申请付款日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.collectionCreatedDateStart,callback:function(e){t.$set(t.search,"collectionCreatedDateStart",e)},expression:"search.collectionCreatedDateStart"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.collectionCreatedDateEnd,callback:function(e){t.$set(t.search,"collectionCreatedDateEnd",e)},expression:"search.collectionCreatedDateEnd"}})],1),t._v(" "),t.isShowSearch?t._e():s("span",{staticClass:"searchicon",staticStyle:{right:"-15px",top:"8px"},on:{click:t.getlist}},[s("i",{staticClass:"iconfont icon-search"})])])]),t._v(" "),t.isShowSearch?[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("收款日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.collectionDateStart,callback:function(e){t.$set(t.search,"collectionDateStart",e)},expression:"search.collectionDateStart"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.collectionDateEnd,callback:function(e){t.$set(t.search,"collectionDateEnd",e)},expression:"search.collectionDateEnd"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("收款状态")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.search.collectionStatus,callback:function(e){t.$set(t.search,"collectionStatus",e)},expression:"search.collectionStatus"}},t._l(t.$constant.paymentStatusSell,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.status}})}),1),t._v(" "),t.isShowSearch?s("span",{staticClass:"searchicon",staticStyle:{right:"15px",top:"15px"},on:{click:t.getlist}},[s("i",{staticClass:"iconfont icon-search"})]):t._e()],1)]:t._e(),t._v(" "),s("div",{staticClass:"clearfix"})],2),t._v(" "),s("div",{staticStyle:{padding:"0 16px"}},[s("div",{staticClass:"gy-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[s("el-table-column",{attrs:{fixed:"",label:"ID",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.contractId))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"产品名称","show-overflow-tooltip":!0,width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"wid-overflow"},[s("span",[t._v(t._s(e.row.prodName))])])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"下游公司","show-overflow-tooltip":!0,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.buyerCompanyName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.collectionStateStr))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"应收款(元)","class-name":"amount-right-el",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.sellerOrderId?[21===e.row.saleSkuPriceType||22===e.row.saleSkuPriceType?s("span",[t._v("公式计价")]):s("span",[t._v(t._s(t._f("numToCash")(e.row.shouldCollectionTotal)))])]:t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"待收款(元)","class-name":"amount-right-el",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.sellerOrderId?[21===e.row.saleSkuPriceType||22===e.row.saleSkuPriceType?s("span",[t._v("--")]):s("span",[t._v(t._s(t._f("numToCash")(e.row.needCollectionTotal)))])]:t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"收款日期",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("date")(e.row.collectionDate)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"销售合同编号",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.sellerCcontractCode))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("date")(e.row.collectionCreatedDate,1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{fixed:"right","class-name":"operation-styles-el",label:"操作",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("button",{staticClass:"gy-button-view view",attrs:{type:"button"},on:{click:function(a){return t.showDetail(e.row)}}},[t._v("查看")]),t._v(" "),1===e.row.paymentAlarmSign||1===e.row.collectionAlarmSign?s("span",{},[s("img",{staticStyle:{"margin-bottom":"5px"},attrs:{src:a("N26N"),height:"19",width:"19"}})]):t._e()]}}])})],1)],1),t._v(" "),s("listStatistics",{on:{toggleTabs:t.toggleTabs}},[s("div",{staticClass:"list-statistics-item"},[s("div",[s("span",[t._v("申请付款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyAmount)))])]),t._v(" "),s("div",[s("span",[t._v("申请付款笔数(笔)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyPayCount)))])]),t._v(" "),s("div",[s("span",[t._v("申请收款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyCollectAmount)))])]),t._v(" "),s("div",[s("span",[t._v("申请收款笔数(单)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyCollectCount)))])]),t._v(" "),s("div",[s("span",[t._v("已付款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.paidAmount)))])]),t._v(" "),s("div",[s("span",[t._v("已付款笔数(笔)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.paidCount)))])]),t._v(" "),s("div",[s("span",[t._v("已收款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.collectedAmount)))])]),t._v(" "),s("div",[s("span",[t._v("已收款合同(单)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.collectedCount)))])])])])],1),t._v(" "),s("el-pagination",{staticStyle:{"margin-top":"40px"},attrs:{background:"",total:t.total,layout:"prev, pager, next"},on:{"current-change":t.turnPage}})],1)},staticRenderFns:[]};var ga=a("C7Lr")(fa,_a,!1,function(t){a("XNG9"),a("ZAMU")},"data-v-11ba8731",null).exports,Ca={data:function(){return{isShowSearch:!1,search:{contEssenceSn:null,payNumber:null,purchaseOrderNumber:null,sellerOrderNumber:null,collectionStatus:null,paymentStatus:null,buyerCompanyName:null,sellerCompanyName:null,paymentDateStart:null,paymentDateEnd:null,collectionDateStart:null,collectionDateEnd:null,businessOwnerName:null,contractType:2,pageNo:1,pageSize:10},list:[{id:null,buyerCompanyName:null,sellerCompanyName:null,shouldPaymentTotal:null,shouldCollectionTotal:null,hadPaymentTotal:null,hadCollectionTotal:null,needPaymentTotal:null,needCollectionTotal:null,paymentDate:null,collectionDate:null,paymentStateStr:null,collectionStateStr:null,paymentCreatedDate:null,collectionCreatedDate:null,sellerOrderNumber:null,sellerOrderId:null,purchaseOrderNumber:null,purchaseOrderId:null}],total:null,statisticsShow:{applyAmount:0,paidAmount:0,applyPayCount:0,paidCount:0,applyCollectAmount:0,collectedAmount:0,applyCollectCount:0,collectedCount:0}}},methods:{toggleTabs:function(t){var e=this;this.$http.get(this.$api.payment.collectionPaymentCount+"?countType="+t).then(function(t){0===t.data.code&&(e.statisticsShow=t.data.data)}).catch(function(t){console.log(t)})},getlist:function(){var t=this,e={};i()(this.search).forEach(function(a){e[a]=t.search[a]}),null!==e.paymentDateEnd&&""!==e.paymentDateEnd&&(e.paymentDateEnd=e.paymentDateEnd+864e5-1),null!==e.collectionDateEnd&&""!==e.collectionDateEnd&&(e.collectionDateEnd=e.collectionDateEnd+864e5-1),this.$http.post(this.$api.payment.getlist,e).then(function(e){0===e.data.code?(t.list=e.data.data.paymentAndCollectionDtos,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},turnPage:function(t){this.search.pageNo=t,this.getlist()},showDetail:function(t){var e={id:t.contractId,purchaseOrderId:t.purchaseOrderId,sellerOrderId:t.sellerOrderId,activeType:2};this.$router.push({name:"paymentDetail",query:e})}},activated:function(){this.$route.meta.isBack||(this.search={contractType:2},this.getlist()),this.$route.meta.isBack=!1},created:function(){this.toggleTabs(1)},components:{listStatistics:Ue}},ba={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"payment-list"},[s("div",{staticClass:"search-btn"},[s("span",{staticClass:"advancedSearch",on:{click:t.ShowSearch}},[t._v("高级搜索"),s("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),s("div",{staticClass:"search-wrapper"},[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.essenceId,expression:"search.essenceId"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.search.essenceId},on:{input:function(e){e.target.composing||t.$set(t.search,"essenceId",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.prodName,expression:"search.prodName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.search.prodName},on:{input:function(e){e.target.composing||t.$set(t.search,"prodName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.sellerCompanyName,expression:"search.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.search.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"sellerCompanyName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("申请收款日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.paymentCreatedDateStart,callback:function(e){t.$set(t.search,"paymentCreatedDateStart",e)},expression:"search.paymentCreatedDateStart"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.paymentCreatedDateEnd,callback:function(e){t.$set(t.search,"paymentCreatedDateEnd",e)},expression:"search.paymentCreatedDateEnd"}})],1),t._v(" "),t.isShowSearch?t._e():s("span",{staticClass:"searchicon",staticStyle:{right:"-15px",top:"8px"},on:{click:t.getlist}},[s("i",{staticClass:"iconfont icon-search"})])])]),t._v(" "),t.isShowSearch?[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("付款日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.paymentDateStart,callback:function(e){t.$set(t.search,"paymentDateStart",e)},expression:"search.paymentDateStart"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.paymentDateEnd,callback:function(e){t.$set(t.search,"paymentDateEnd",e)},expression:"search.paymentDateEnd"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("付款状态")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.search.paymentStatus,callback:function(e){t.$set(t.search,"paymentStatus",e)},expression:"search.paymentStatus"}},t._l(t.$constant.paymentStatusBuy,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.status}})}),1),t._v(" "),t.isShowSearch?s("span",{staticClass:"searchicon",staticStyle:{right:"15px",top:"15px"},on:{click:t.getlist}},[s("i",{staticClass:"iconfont icon-search"})]):t._e()],1)]:t._e(),t._v(" "),s("div",{staticClass:"clearfix"})],2),t._v(" "),s("div",{staticStyle:{padding:"0 16px"}},[s("div",{staticClass:"gy-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[s("el-table-column",{attrs:{fixed:"",label:"ID",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.contractId))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"产品名称","show-overflow-tooltip":!0,width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"wid-overflow"},[s("span",[t._v(t._s(e.row.prodName))])])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"上游公司","show-overflow-tooltip":!0,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.sellerCompanyName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"状态",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.paymentStateStr))]),e.row.approvalRecords&&1===e.row.approvalRecords.length?s("span",{staticClass:"text-overflow payment-person"},[t._v(" "+t._s(e.row.approvalRecords[0].approverName))]):t._e(),t._v(" "),e.row.approvalRecords&&e.row.approvalRecords.length>1?[s("el-popover",{attrs:{placement:"bottom",title:"",width:"400",trigger:"click"}},[s("el-table",{attrs:{data:e.row.approvalRecords}},[s("el-table-column",{attrs:{label:"序号",width:"80",type:"index"}}),t._v(" "),s("el-table-column",{attrs:{label:"提交时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("date")(e.row.createdTime,1)))])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{label:"当前审批人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(e.row.approverName))])]}}],null,!0)})],1),t._v(" "),s("span",{staticClass:"popover-name text-overflow payment-person",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.approvalRecords[0].approverName)),s("i",{staticClass:"sort-caret descending"})])],1)]:t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"应付款(元)","class-name":"amount-right-el",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?[21===e.row.buySkuPriceType||22===e.row.buySkuPriceType?s("span",[t._v("公式计价")]):s("span",[t._v(t._s(t._f("numToCash")(e.row.shouldPaymentTotal)))])]:t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"待付款(元)","class-name":"amount-right-el",width:"125"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?[21===e.row.buySkuPriceType||22===e.row.buySkuPriceType?s("span",[t._v("--")]):s("span",[t._v(t._s(t._f("numToCash")(e.row.needPaymentTotal)))])]:t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"付款日期",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("date")(e.row.paymentDate)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"采购合同编号",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.purchaseCcontractCode))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("date")(e.row.paymentCreatedDate,1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{fixed:"right","class-name":"operation-styles-el",label:"操作",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("button",{staticClass:"gy-button-view view",attrs:{type:"button"},on:{click:function(a){return t.showDetail(e.row)}}},[t._v("查看")]),t._v(" "),1===e.row.paymentAlarmSign||1===e.row.collectionAlarmSign?s("span",{},[s("img",{staticStyle:{"margin-bottom":"5px"},attrs:{src:a("N26N"),height:"19",width:"19"}})]):t._e()]}}])})],1)],1),t._v(" "),s("listStatistics",{on:{toggleTabs:t.toggleTabs}},[s("div",{staticClass:"list-statistics-item"},[s("div",[s("span",[t._v("申请付款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyAmount)))])]),t._v(" "),s("div",[s("span",[t._v("申请付款笔数(笔)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyPayCount)))])]),t._v(" "),s("div",[s("span",[t._v("申请收款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyCollectAmount)))])]),t._v(" "),s("div",[s("span",[t._v("申请收款笔数(单)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyCollectCount)))])]),t._v(" "),s("div",[s("span",[t._v("已付款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.paidAmount)))])]),t._v(" "),s("div",[s("span",[t._v("已付款笔数(笔)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.paidCount)))])]),t._v(" "),s("div",[s("span",[t._v("已收款(元)")]),s("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.collectedAmount)))])]),t._v(" "),s("div",[s("span",[t._v("已收款合同(单)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.collectedCount)))])])])])],1),t._v(" "),s("el-pagination",{staticStyle:{"margin-top":"40px"},attrs:{background:"",total:t.total,layout:"prev, pager, next"},on:{"current-change":t.turnPage}})],1)},staticRenderFns:[]};var wa=a("C7Lr")(Ca,ba,!1,function(t){a("R9NS"),a("0MUR")},"data-v-8bb4fd6a",null).exports,Ia={data:function(){return{userId:null,isShowSearch:!1,search:{orderType:1,contractEssenceId:null,prdProductName:null,settleStatus:null,startDate:null,endDate:null,customerCompanyName:null,targetCorpName:null,launchName:null,businessManagerName:null,pageNo:1,pageSize:10},list:[{id:null,buyerCompanyName:null,sellerCompanyName:null,shouldPaymentTotal:null,shouldCollectionTotal:null,hadPaymentTotal:null,hadCollectionTotal:null,needPaymentTotal:null,needCollectionTotal:null,paymentDate:null,collectionDate:null,paymentStateStr:null,collectionStateStr:null,paymentCreatedDate:null,collectionCreatedDate:null,sellerOrderNumber:null,sellerOrderId:null,purchaseOrderNumber:null,purchaseOrderId:null}],total:null,targetCorpList:[]}},methods:{getlist:function(){var t=this;t.search.userId=t.userId,t.$http.post(t.$api.settlement.getSettleList,t.search).then(function(e){0===e.data.code?(t.list=e.data.data.rows,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},turnPage:function(t){this.search.pageNo=t,this.getlist()},showDetail:function(t){var e={contEssId:t.contractEssenceId,purchaseOrderId:t.purchaseOrderId,targetBizId:t.id};this.$router.push({name:"settlementDetailBuy",query:e})},getRelatedCompany:function(){var t=this;this.$http.get(this.$api.contract.getRelatedCompany).then(function(e){0===e.data.code&&(t.targetCorpList=e.data.data.targetCorpList)}).catch(function(t){console.log(t)})}},activated:function(){this.$route.meta.isBack||(this.search={orderType:1},this.getlist()),this.$route.meta.isBack=!1},mounted:function(){this.userId=JSON.parse(localStorage.getItem("userInfo")).id,this.getRelatedCompany(),this.getlist()}},ka={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment-list"},[a("div",{staticClass:"search-wrapper"},[a("div",{staticClass:"search-form",class:{"search-wrapper-open":!t.isShowSearch}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.contractEssenceId,expression:"search.contractEssenceId"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.search.contractEssenceId},on:{input:function(e){e.target.composing||t.$set(t.search,"contractEssenceId",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.prdProductName,expression:"search.prdProductName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.search.prdProductName},on:{input:function(e){e.target.composing||t.$set(t.search,"prdProductName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.search.settleStatus,callback:function(e){t.$set(t.search,"settleStatus",e)},expression:"search.settleStatus"}},t._l(t.$constant.odrSettlementStatus,function(t){return a("el-option",{key:t.status,attrs:{label:t.name,value:t.status}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("结算时间")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.startDate,callback:function(e){t.$set(t.search,"startDate",e)},expression:"search.startDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.endDate,callback:function(e){t.$set(t.search,"endDate",e)},expression:"search.endDate"}})],1)])]),t._v(" "),t.isShowSearch?[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("客户名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.customerCompanyName,expression:"search.customerCompanyName"}],attrs:{type:"text",placeholder:"请输入客户名称"},domProps:{value:t.search.customerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"customerCompanyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.search.targetCorpName,callback:function(e){t.$set(t.search,"targetCorpName",e)},expression:"search.targetCorpName"}},t._l(t.targetCorpList,function(t){return a("el-option",{key:t.targetCorpId,attrs:{label:t.targetCorpName,value:t.targetCorpId}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("结算发起人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.launchName,expression:"search.launchName"}],attrs:{type:"text",placeholder:"请输入结算发起人"},domProps:{value:t.search.launchName},on:{input:function(e){e.target.composing||t.$set(t.search,"launchName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.businessManagerName,expression:"search.businessManagerName"}],attrs:{type:"text",placeholder:"请输入业务操作人"},domProps:{value:t.search.businessManagerName},on:{input:function(e){e.target.composing||t.$set(t.search,"businessManagerName",e.target.value)}}})])]:t._e(),t._v(" "),a("span",{staticClass:"searchicon",on:{click:t.getlist}},[a("i",{staticClass:"iconfont icon-search"})]),t._v(" "),a("div",{staticClass:"clearfix"})],2),t._v(" "),a("span",{staticClass:"search-btn",on:{click:function(e){t.isShowSearch=!t.isShowSearch}}},[t._v("高级搜索\n            "),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticStyle:{padding:"0 16px"}},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{fixed:"",label:"ID",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.contractEssenceId))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品名称","show-overflow-tooltip":!0,width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.prodName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"客户名称","show-overflow-tooltip":!0,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sellerCompanyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"结算差额(元)","class-name":"amount-right-el",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.settleBalance)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合同金额(元)","class-name":"amount-right-el",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[21===e.row.skuPriceType||22===e.row.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(e.row.totalAmount)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已付款总额(元)","class-name":"amount-right-el",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.hadPayAmount)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"结算总金额(元)","class-name":"amount-right-el",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.settleTotalAmount)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合同数量(吨)","class-name":"amount-right-el",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToQuantity")(e.row.skuQuantity)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已交货(吨)","class-name":"amount-right-el",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToQuantity")(e.row.alreadyDeliveryQuantity)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":!0,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("orderSettlementStatus")(e.row.settleStatus))+" "+t._s(e.row.currentTodoUserName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.createdDate,1)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right","class-name":"operation-styles-el",label:"操作",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view view",attrs:{type:"button"},on:{click:function(a){return t.showDetail(e.row)}}},[t._v("查看")])]}}])})],1)],1)]),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"40px"},attrs:{background:"",total:t.total,layout:"prev, pager, next"},on:{"current-change":t.turnPage}})],1)},staticRenderFns:[]};var xa=a("C7Lr")(Ia,ka,!1,function(t){a("SZYT"),a("Kcuv")},"data-v-18b92bfa",null).exports,Da={data:function(){return{userId:null,isShowSearch:!1,search:{orderType:2,contractEssenceId:null,prdProductName:null,settleStatus:null,startDate:null,endDate:null,customerCompanyName:null,targetCorpName:null,launchName:null,businessManagerName:null,pageNo:1,pageSize:10},list:[{id:null,buyerCompanyName:null,sellerCompanyName:null,shouldPaymentTotal:null,shouldCollectionTotal:null,hadPaymentTotal:null,hadCollectionTotal:null,needPaymentTotal:null,needCollectionTotal:null,paymentDate:null,collectionDate:null,paymentStateStr:null,collectionStateStr:null,paymentCreatedDate:null,collectionCreatedDate:null,sellerOrderNumber:null,sellerOrderId:null,purchaseOrderNumber:null,purchaseOrderId:null}],total:null,targetCorpList:[]}},methods:{getlist:function(){var t=this;t.search.userId=t.userId,t.$http.post(t.$api.settlement.getSettleList,t.search).then(function(e){0===e.data.code?(t.list=e.data.data.rows,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},turnPage:function(t){this.search.pageNo=t,this.getlist()},showDetail:function(t){var e={contEssId:t.contractEssenceId,saleOrderId:t.saleOrderId,targetBizId:t.id};this.$router.push({name:"settlementDetailSell",query:e})},getRelatedCompany:function(){var t=this;this.$http.get(this.$api.contract.getRelatedCompany).then(function(e){0===e.data.code&&(t.targetCorpList=e.data.data.targetCorpList)}).catch(function(t){console.log(t)})}},activated:function(){this.$route.meta.isBack||(this.search={orderType:2},this.getlist()),this.$route.meta.isBack=!1},mounted:function(){this.userId=JSON.parse(localStorage.getItem("userInfo")).id,this.getRelatedCompany()}},Sa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment-list"},[a("div",{staticClass:"search-wrapper"},[a("div",{staticClass:"search-form",class:{"search-wrapper-open":!t.isShowSearch}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.contractEssenceId,expression:"search.contractEssenceId"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.search.contractEssenceId},on:{input:function(e){e.target.composing||t.$set(t.search,"contractEssenceId",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.prdProductName,expression:"search.prdProductName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.search.prdProductName},on:{input:function(e){e.target.composing||t.$set(t.search,"prdProductName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.search.settleStatus,callback:function(e){t.$set(t.search,"settleStatus",e)},expression:"search.settleStatus"}},t._l(t.$constant.odrSettlementStatus,function(t){return a("el-option",{key:t.status,attrs:{label:t.name,value:t.status}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("结算时间")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.startDate,callback:function(e){t.$set(t.search,"startDate",e)},expression:"search.startDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.endDate,callback:function(e){t.$set(t.search,"endDate",e)},expression:"search.endDate"}})],1)])]),t._v(" "),t.isShowSearch?[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("客户名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.customerCompanyName,expression:"search.customerCompanyName"}],attrs:{type:"text",placeholder:"请输入客户名称"},domProps:{value:t.search.customerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"customerCompanyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.search.targetCorpName,callback:function(e){t.$set(t.search,"targetCorpName",e)},expression:"search.targetCorpName"}},t._l(t.targetCorpList,function(t){return a("el-option",{key:t.targetCorpId,attrs:{label:t.targetCorpName,value:t.targetCorpId}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("结算发起人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.launchName,expression:"search.launchName"}],attrs:{type:"text",placeholder:"请输入结算发起人"},domProps:{value:t.search.launchName},on:{input:function(e){e.target.composing||t.$set(t.search,"launchName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.businessManagerName,expression:"search.businessManagerName"}],attrs:{type:"text",placeholder:"请输入业务操作人"},domProps:{value:t.search.businessManagerName},on:{input:function(e){e.target.composing||t.$set(t.search,"businessManagerName",e.target.value)}}})])]:t._e(),t._v(" "),a("span",{staticClass:"searchicon",on:{click:t.getlist}},[a("i",{staticClass:"iconfont icon-search"})]),t._v(" "),a("div",{staticClass:"clearfix"})],2),t._v(" "),a("span",{staticClass:"search-btn",on:{click:function(e){t.isShowSearch=!t.isShowSearch}}},[t._v("高级搜索\n            "),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticStyle:{padding:"0 16px"}},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{fixed:"",label:"ID",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.contractEssenceId))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品名称","show-overflow-tooltip":!0,width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.prodName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"客户名称","show-overflow-tooltip":!0,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.buyerCompanyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"结算差额(元)","class-name":"amount-right-el",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.settleBalance)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合同金额(元)","class-name":"amount-right-el",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[21===e.row.skuPriceType||22===e.row.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(e.row.totalAmount)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已付款总额(元)","class-name":"amount-right-el",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.hadPayAmount)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"结算总金额(元)","class-name":"amount-right-el",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.settleTotalAmount)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合同数量(吨)","class-name":"amount-right-el",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToQuantity")(e.row.skuQuantity)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已交货(吨)","class-name":"amount-right-el",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToQuantity")(e.row.alreadyDeliveryQuantity)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":!0,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("orderSettlementStatus")(e.row.settleStatus))+" "+t._s(e.row.currentTodoUserName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.createdDate,1)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right","class-name":"operation-styles-el",label:"操作",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view view",attrs:{type:"button"},on:{click:function(a){return t.showDetail(e.row)}}},[t._v("查看")])]}}])})],1)],1)]),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"40px"},attrs:{background:"",total:t.total,layout:"prev, pager, next"},on:{"current-change":t.turnPage}})],1)},staticRenderFns:[]};var Ta=a("C7Lr")(Da,Sa,!1,function(t){a("lg2u"),a("2Iwg")},"data-v-76b9cdca",null).exports,Fa={name:"stepElement",props:{elStepList:Array},data:function(){return{showProcStep:!1}},methods:{operationProcessClick:function(){this.showProcStep=!this.showProcStep}}},Na={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setpElementMain"},[t._m(0),t._v(" "),a("el-steps",{staticClass:"setpElementCenter",attrs:{direction:"vertical",active:1}},t._l(t.elStepList,function(e,s){return a("el-step",{key:s,attrs:{title:e.username}},[a("template",{slot:"description"},[a("div",[t._v(t._s(e.actionDesc))])])],2)}),1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setpElementTop"},[e("span",[this._v("操作流程")])])}]};var La=a("C7Lr")(Fa,Na,!1,function(t){a("m+e/"),a("hDXJ")},"data-v-2a3f25ca",null).exports,Pa={name:"settleMoney",props:{contEssData:Object,orderItem:Object,settleData:Object,settleDilog:Object},components:{gyFileUpload:aa,bankAcc:Ye,operationProcess:La},data:function(){return{isSubmit2:!0,stepArr2:[],paymentRecelice:!1,collectionMoney:!1,isSubmit:!0,stepArr:[],settleText:null,refundText:null,companyId:null,settleBalance:null,newReceiptsList:{erpBuyerPaymentFileModelList:null},creatPaymentForm:{payTotal:null,contEssId:null,tradeMode:null,paytime:new Date,planPayTime:new Date,buyerDepositBank:null,sellerAccount:null,payMethod:3,payBillType:0,sellerDepositBank:null,remarks:null,payDesc:1,orderType:3},newBank:[],settlelistDetail:{}}},mounted:function(){},methods:{initCollectionDialgData:function(t){this.creatPaymentForm.contEssId=this.contEssData.id,this.creatPaymentForm.buyerDepositBank=this.contEssData.targetCorpName,this.settleText=t,1===this.settleData.bizType?this.refundText="收款":this.refundText="付款",this.settleData.settleBalance<0?(this.settleBalance=-1*this.settleData.settleBalance,this.newReceiptsList.payBillType=2):(this.settleBalance=this.settleData.settleBalance,this.newReceiptsList.payBillType=1)},initSettleMoney:function(t){this.creatPaymentForm.contEssId=this.contEssData.id,this.creatPaymentForm.buyerDepositBank=this.contEssData.targetCorpName,this.settleText=t,this.refundText="发起退款"===t?"收款":"付款",1===this.settleData.bizType&&(this.companyId=this.contEssData.downstreamInfo.buyerCompanyId,this.creatPaymentForm.purchaseOrderId=this.contEssData.saleOrderId),2===this.settleData.bizType&&(this.companyId=this.contEssData.upstreamInfo.sellerCompanyId,this.creatPaymentForm.purchaseOrderId=this.contEssData.purchaseOrderId),this.newPaymentBankAssembly(this.companyId),this.settleData.settleBalance<0?(this.settleBalance=-1*this.settleData.settleBalance,this.creatPaymentForm.payBillType=2):(this.settleBalance=this.settleData.settleBalance,this.creatPaymentForm.payBillType=1)},onCallbackSaleFileUpload:function(t){var e=this;this.newReceiptsList.erpBuyerPaymentFileModelList=[],t.forEach(function(t){e.newReceiptsList.erpBuyerPaymentFileModelList.push({fileUrl:t.fileUrl})})},popupPaySubmission:function(t){if(null==t||void 0===t)return this.creatPaymentForm.sellerAccount=null,this.creatPaymentForm.sellerDepositBankId=null,void(this.creatPaymentForm.sellerDepositBank=null);this.creatPaymentForm.sellerDepositBank=t.depositBank,this.creatPaymentForm.sellerDepositBankId=t.id,this.creatPaymentForm.sellerAccount=t.companyAccount,this.newPaymentBankAssembly(this.companyId)},changeBlank:function(t){0===t&&(this.$refs.bankAcc.addBank=!0,1===this.settleData.bizType&&(this.$refs.bankAcc.creatBank.companyId=this.contEssData.downstreamInfo.buyerCompanyId,this.$refs.bankAcc.creatBank.accountName=this.contEssData.downstreamInfo.buyerCompanyName),2===this.settleData.bizType&&(this.$refs.bankAcc.creatBank.companyId=this.contEssData.upstreamInfo.sellerCompanyId,this.$refs.bankAcc.creatBank.accountName=this.contEssData.upstreamInfo.sellerCompanyName));for(var e=0;e<this.newBank.length;e++)t===this.newBank[e].bankAccId&&(this.creatPaymentForm.sellerAccount=this.newBank[e].bankAccount,this.creatPaymentForm.sellerDepositBankId=this.newBank[e].bankAccId,this.creatPaymentForm.sellerDepositBank=this.newBank[e].depositBankName)},newPaymentBankAssembly:function(t){var e=this;this.$http.post(this.$api.payment.newBank,{companyId:t}).then(function(t){0===t.data.code&&(e.newBank=t.data.data)})},goback:function(t){this.settleDilog[t]=!1,this.$router.go(-1)},closeBack:function(){this.collectionMoney||this.paymentRecelice?this.$router.go(-1):(this.settleDilog.collectionDialog=!1,this.settleDilog.paymentDialog=!1,this.$refs.sFileUpload&&this.$refs.sFileUpload.init(),this.creatPaymentForm.sellerDepositBank=null,this.creatPaymentForm.sellerAccount=null,this.creatPaymentForm.tradeMode=null,this.creatPaymentForm.remarks=null)},createPayment:function(){var t=this;if(!this.check())return!1;var e=this;e.creatPaymentForm.payTotal=e.settleBalance,console.log(this.creatPaymentForm),e.$http.post(e.$api.order.newPayment,e.creatPaymentForm).then(function(a){if(0===a.data.code){e.$message({message:a.data.message,type:"success"});var s={targetId:a.data.data.targetId,targetType:3};t.isSubmit2=!1,t.paymentRecelice=!0,e.$http.post(e.$api.contract.approve1History,s).then(function(t){0===t.data.code&&(e.stepArr2=t.data.data,e.stepArr2.forEach(function(t,e){t.step=e}))}),s={paymentId:a.data.data.targetId,id:e.$route.query.targetBizId,todoItemId:e.$route.query.id},e.$http.post(t.$api.settlement.updateSettleInfo,s).then(function(t){0!==t.data.code&&e.$message({message:t.data.message,type:"error"})})}else e.$message({message:a.data.message,type:"error"})})},createBillCollection:function(){var t=this,e=this;0!==e.settleData.settleBalance?(e.newReceiptsList.contractId=e.contEssData.id,e.newReceiptsList.collectionType=3,e.newReceiptsList.collectionAmount=e.settleBalance,1===e.settleData.bizType?e.newReceiptsList.orderId=e.contEssData.saleOrderId:2===e.settleData.bizType&&(e.newReceiptsList.orderId=e.contEssData.purchaseOrderId),e.$http.post(e.$api.order.createReceipts,e.newReceiptsList).then(function(a){if(0===a.data.code){e.$message({message:a.data.message,type:"success"}),e.$refs.sFileUpload&&e.$refs.sFileUpload.endUpload();var s={targetId:a.data.data,targetType:5};t.isSubmit=!1,t.collectionMoney=!0,e.$http.post(t.$api.contract.approve1History,s).then(function(t){0===t.data.code&&(e.stepArr=t.data.data,e.stepArr.forEach(function(t,e){t.step=e}))}),s={collectionId:a.data.data,id:e.$route.query.targetBizId,todoItemId:e.$route.query.id},e.$http.post(t.$api.settlement.updateSettleInfo,s).then(function(t){0!==t.data.code&&e.$message({message:t.data.message,type:"error"})})}else e.$message({message:a.data.message,type:"error"})})):e.$message({message:"已无待收金额，无需提交",type:"error"})},check:function(){return this.creatPaymentForm.sellerDepositBank?null!==this.creatPaymentForm.tradeMode||(this.$message({message:"请选择付款方式",type:"error"}),!1):(this.$message({message:"请输入收款开户行",type:"error"}),!1)}}},Aa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settleMoney"},[a("el-dialog",{staticClass:"order-dialog",attrs:{width:"800px","close-on-click-modal":!1,"close-on-press-escape":!1,title:t.settleText,visible:t.settleDilog.collectionDialog},on:{close:t.closeBack,"update:visible":function(e){return t.$set(t.settleDilog,"collectionDialog",e)}}},[a("div",{staticClass:"gy-form"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),1===t.settleData.bizType&&t.contEssData.downstreamInfo?a("span",[t._v(t._s(t.contEssData.downstreamInfo.buyerCompanyName))]):t._e(),t._v(" "),2===t.settleData.bizType&&t.contEssData.upstreamInfo?a("span",[t._v(t._s(t.contEssData.upstreamInfo.sellerCompanyName))]):t._e()]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("span",[t._v(t._s(t.contEssData.prodName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("付款方式")]),t._v(" "),1===t.settleData.bizType&&t.contEssData.downstreamInfo?a("span",[t._v(t._s(t._f("paymentType")(t.contEssData.downstreamInfo.paymentType,t.contEssData.downstreamInfo.payChannel)))]):t._e(),t._v(" "),2===t.settleData.bizType&&t.contEssData.upstreamInfo?a("span",[t._v(t._s(t._f("paymentType")(t.contEssData.upstreamInfo.paymentType,t.contEssData.upstreamInfo.payChannel)))]):t._e()]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("收款类型")]),t._v(" "),a("span",[t._v("结算款")])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("已"+t._s(t.refundText)+"总额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.settleData.hadPayAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同金额(元)")]),t._v(" "),21===t.orderItem.skuPriceType||22===t.orderItem.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.orderItem.skuTotalAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("结算总金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.settleData.settleTotalAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("本次收款金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.settleBalance)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("付款凭证")]),t._v(" "),a("gy-file-upload",{ref:"sFileUpload",on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("备注")]),t._v(" "),a("input",{staticClass:"gy-input",attrs:{type:"text"}})])]),t._v(" "),t.isSubmit?t._e():a("div",[a("operation-process",{attrs:{elStepList:t.stepArr}})],1),t._v(" "),a("div",{staticStyle:{"margin-bottom":"30px","margin-right":"30px","text-align":"right"}},[t.collectionMoney?a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){return t.goback("collectionDialog")}}},[t._v("关闭")]):t._e(),t._v(" "),t.collectionMoney?t._e():a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){t.settleDilog.collectionDialog=!1}}},[t._v("取消")]),t._v(" "),t.collectionMoney?t._e():a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.createBillCollection()}}},[t._v("提交")])])]),t._v(" "),a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1000px","close-on-click-modal":!1,"close-on-press-escape":!1,title:t.settleText,visible:t.settleDilog.paymentDialog},on:{close:t.closeBack,"update:visible":function(e){return t.$set(t.settleDilog,"paymentDialog",e)}}},[a("div",{staticClass:"gy-form"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("span",[t._v(t._s(t.contEssData.prodName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("strong",[t._v("*")]),t._v("申请日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d input-date"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"申请日期"},model:{value:t.creatPaymentForm.paytime,callback:function(e){t.$set(t.creatPaymentForm,"paytime",e)},expression:"creatPaymentForm.paytime"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("付款单位")]),t._v(" "),a("span",[t._v(t._s(t.contEssData.targetCorpName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("strong",[t._v("*")]),t._v("计划付款日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d input-date"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"申请日期"},model:{value:t.creatPaymentForm.planPayTime,callback:function(e){t.$set(t.creatPaymentForm,"planPayTime",e)},expression:"creatPaymentForm.planPayTime"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("收款单位")]),t._v(" "),1===t.creatPaymentForm.payBillType?a("span",[t._v(t._s(t.contEssData.sellerCompanyName))]):t._e(),t._v(" "),2===t.creatPaymentForm.payBillType?a("span",[t._v(t._s(t.contEssData.buyerCompanyName))]):t._e()]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("strong",[t._v("*")]),t._v("收款开户行")]),t._v(" "),a("el-select",{staticClass:"input-date",attrs:{placeholder:"请选择收款银行账户"},on:{change:t.changeBlank},model:{value:t.creatPaymentForm.sellerDepositBank,callback:function(e){t.$set(t.creatPaymentForm,"sellerDepositBank",e)},expression:"creatPaymentForm.sellerDepositBank"}},t._l(t.newBank,function(t){return a("el-option",{key:t.bankAccId,attrs:{label:t.depositBankName,value:t.bankAccId}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同金额(元)")]),t._v(" "),21===t.orderItem.skuPriceType||22===t.orderItem.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.orderItem.skuTotalAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("strong",[t._v("*")]),t._v("收款银行账号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.sellerAccount,expression:"creatPaymentForm.sellerAccount"}],attrs:{type:"text",readonly:""},domProps:{value:t.creatPaymentForm.sellerAccount},on:{input:function(e){e.target.composing||t.$set(t.creatPaymentForm,"sellerAccount",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("用途")]),t._v(" "),a("span",[t._v("结算款")])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("strong",[t._v("*")]),t._v("付款方式")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.tradeMode,expression:"creatPaymentForm.tradeMode"}],attrs:{type:"radio",value:"22"},domProps:{checked:t._q(t.creatPaymentForm.tradeMode,"22")},on:{change:function(e){return t.$set(t.creatPaymentForm,"tradeMode","22")}}}),t._v("银行电汇\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.tradeMode,expression:"creatPaymentForm.tradeMode"}],attrs:{type:"radio",value:"26"},domProps:{checked:t._q(t.creatPaymentForm.tradeMode,"26")},on:{change:function(e){return t.$set(t.creatPaymentForm,"tradeMode","26")}}}),t._v("承兑汇票\n            ")]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("已"+t._s(t.refundText)+"总金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.settleData.hadPayAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("结算总金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.settleData.settleTotalAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请金额(元)")]),t._v(" "),a("span",{staticStyle:{color:"#E3070F"}},[t._v(t._s(t._f("numToCash")(t.settleBalance)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("备注")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.remarks,expression:"creatPaymentForm.remarks"}],staticClass:"gy-input",attrs:{type:"text"},domProps:{value:t.creatPaymentForm.remarks},on:{input:function(e){e.target.composing||t.$set(t.creatPaymentForm,"remarks",e.target.value)}}})])]),t._v(" "),t.isSubmit2?t._e():a("div",[a("operation-process",{attrs:{elStepList:t.stepArr2}})],1),t._v(" "),a("div",{staticClass:"foot",staticStyle:{margin:"0 30px 30px 0"}},[t.paymentRecelice?a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){return t.goback("paymentDialog")}}},[t._v("关闭")]):t._e(),t._v(" "),t.paymentRecelice?t._e():a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.settleDilog.paymentDialog=!1}}},[t._v("取消")]),t._v(" "),t.paymentRecelice?t._e():a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.createPayment()}}},[t._v("提交")])])]),t._v(" "),a("bank-acc",{ref:"bankAcc",on:{onSaveAccInfo:t.popupPaySubmission}})],1)},staticRenderFns:[]};var $a={components:{gyOperationHistory:oa,gyCommentRemark:da,settleMoney:a("C7Lr")(Pa,Aa,!1,function(t){a("5hMg"),a("Vjus")},"data-v-7754fa29",null).exports},props:{typeName:String},data:function(){return{shouFuText:null,commentDiog:{dialogVisibleRemark:!1},contessDetailCommpany:{targetType:23,subSysType:0,todoItemId:this.$route.query.id,targetId:this.$route.query.targetBizId,refFunc:{},refParam:{targetId:this.$route.query.targetBizId,targetType:23,subSysType:0,affiliatedCompanyId:this.$route.query.companyId}},settleOrder:{},order:{},remarks:null,typeText:null,otherList:[],essenceData:{},settleDilog:{collectionDialog:!1,paymentDialog:!1},targetBizType:this.$route.query.targetBizType,homeFromFlg:Number(this.$route.query.homeFromFlg),contractEssenceId:null,orderSettleId:null,paymentList:[],collectionList:[]}},created:function(){},mounted:function(){this.init()},methods:{init:function(){this.contractEssenceId=this.$route.query.contEssId,this.orderSettleId=this.$route.query.targetBizId,this.$route.query.todoId=this.$route.query.id,this.approve1History(),this.getEssences(),this.getSettlementOrder()},getEssences:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+this.contractEssenceId).then(function(e){0!==e.data.code?t.$message({message:e.data.message,type:"error"}):t.essenceData=e.data.data})},getSettlementOrder:function(){var t=this,e={orderSettleId:this.orderSettleId,contractEssenceId:this.contractEssenceId};this.$http.post(this.$api.settlement.getSettlementOrder,e).then(function(e){if(0===e.data.code){var a=e.data.data;return t.settleOrder=a.settlementOrder,t.order=a.order,t.paymentList=a.paymentList,t.collectionList=a.collectionList,t.otherList=a.settleChargesList,t.typeText=t.paymentList?"付款":"收款",void(2===t.settleOrder.bizType?t.settleOrder.settleBalance>0?t.shouFuText="发起付款":t.shouFuText="发起收款":t.settleOrder.settleBalance>0?t.shouFuText="发起收款":t.shouFuText="发起退款")}t.$message({message:e.data.message,type:"error"})})},doApprove:function(t){var e=this,a={todoId:this.$route.query.id,operaType:t,remarks:this.remarks};this.$http.post(this.$api.apprProc.doApprove,a).then(function(t){if(0===t.data.code)return e.$message({message:"操作成功",type:"success"}),void e.$router.go(-1);e.$message({message:t.data.message,type:"error"})})},comment:function(){this.commentDiog.dialogVisibleRemark=!0,this.contessDetailCommpany.refFunc=this.$refs.operationHis.display},approve1History:function(){this.$refs.operationHis.display(this.$api.contract.approve1History,this.contessDetailCommpany.refParam)},gotoSeetle:function(t){"发起收款"===t?(this.$refs.settleMoney.initCollectionDialgData(t),this.settleDilog.collectionDialog=!0):(this.$refs.settleMoney.initSettleMoney(t),this.settleDilog.paymentDialog=!0)},goBack:function(){this.$route.query.tabsIndex?this.$router.push({name:"orderDetails",query:{id:this.$route.query.contEssId,saleOrderId:this.$route.query.tabsIndex,purchaseOrderId:this.$route.query.purchaseOrderId,tabsIndex:6}}):this.$router.go(-1)},downloadpay:function(){var t={};t.paymentId=this.settleOrder.paymentId,t.essenceId=this.$route.query.contEssId;var e="结算付款单-"+this.$tools.parseDate(this.essenceData.createdDate)+"-"+this.settleOrder.paymentId+".xls";this.$tools.exporttoExcel(this,this.$api.payment.downloadPayment,t,e)},lookSettle:function(){this.settleOrder.collectionId&&this.$router.push({name:"paymentSell",query:{contEssId:this.contractEssenceId,collId:this.settleOrder.collectionId}}),this.settleOrder.paymentId&&this.$router.push({name:"paymentBuy",query:{contEssId:this.contractEssenceId,payId:this.settleOrder.paymentId,purchaseOrderId:this.settleOrder.orderId}})}}},Oa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"settle-detail"},[a("div",{staticClass:"settle-title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"basic-information clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t.contractEssenceId))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("结算状态")]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t._f("orderSettlementStatus")(t.settleOrder.settleStatus)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t.essenceData.prodName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t.essenceData.targetCorpName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("结算发起人")]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t.settleOrder.launchName||"-"))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建时间")]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t._f("date")(t.essenceData.createdDate)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t.essenceData.businessManagerName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务组")]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t.essenceData.organizationName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t._f("businessTradeType")(t.essenceData.bizType)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交易类型")]),t._v(" "),a("div",{staticClass:"text"},[t._v(t._s(t._f("contractTransactionTypeList")(t.essenceData.transactionType)))])])]),t._v(" "),a("div",{staticClass:"settle-title"},[t._v("结算明细\n         "),t.settleOrder.paymentId||t.settleOrder.collectionId?a("span",{staticClass:"linkInvoice",attrs:{type:"text"},on:{click:t.lookSettle}},[t._v("查看结款详情")]):t._e(),t._v(" "),t.settleOrder.paymentId?a("span",{staticClass:"linkInvoice",staticStyle:{"margin-right":"20px"},attrs:{type:"text"},on:{click:t.downloadpay}},[t._v("下载付款详情")]):t._e()]),t._v(" "),a("div",{staticClass:"list"},[a("table",{staticClass:"gy-table"},[t._m(0),t._v(" "),t.settleOrder?a("tbody",[a("tr",[a("td",{staticStyle:{width:"20%"}},[t._v("合同信息")]),t._v(" "),a("td",{staticClass:"text-r",staticStyle:{width:"20%"}},[t._v(t._s(t._f("numToQuantity")(t.order.skuQuantity)))]),t._v(" "),a("td",{staticClass:"text-r",staticStyle:{width:"20%"}},[21===t.order.skuPriceType||22===t.order.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.order.skuPrice,!0)))])]),t._v(" "),a("td",{staticClass:"text-r",staticStyle:{width:"20%"}},[21===t.order.skuPriceType||22===t.order.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.order.skuTotalAmount)))])]),t._v(" "),a("td",{staticClass:"text-r",staticStyle:{width:"20%"}},[t._v(t._s(t._f("numToQuantity")(t.settleOrder.alreadyDeliveryQuantity)))])]),t._v(" "),a("tr",[a("td",[t._v("合同结算")]),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(t.settleOrder.settlementQuantity)))]),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(t.settleOrder.settlementPrice,!0)))]),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(t.settleOrder.settlementAmount)))]),t._v(" "),a("td",{staticClass:"text-r"},[t._v("-")])])]):a("tbody",[t._m(1)])])]),t._v(" "),a("div",{staticClass:"settle-title"},[t._v(t._s(t.typeText)+"明细")]),t._v(" "),a("div",{staticClass:"list"},[t.paymentList?a("table",{staticClass:"gy-table"},[t._m(2),t._v(" "),t.paymentList&&0!=t.paymentList.length?a("tbody",[t._l(t.paymentList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.payTime)))]),t._v(" "),a("td",{staticClass:"hover-td"},[a("span",{staticClass:"td"},[t._v(t._s(e.buyerDepositBank||"--"))]),t._v(" "),e.buyerDepositBank?a("span",{staticClass:"hover-td-suspend"},[t._v(t._s(e.buyerDepositBank)),a("i")]):t._e()]),t._v(" "),a("td",[t._v(t._s(t._f("tradeMode")(e.tradeMode)))]),t._v(" "),a("td",[t._v(t._s(e.creatorName))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.createdDate)))]),t._v(" "),21===t.order.skuPriceType||22===t.order.skuPriceType?a("td",{staticClass:"align-r"},[2==e.payMethod?a("span",[t._v("--")]):a("span",[t._v(t._s(t._f("numToCash")(e.tempPrice,!0)))])]):a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToCash")(t.order.skuPrice,!0)))]),t._v(" "),21===t.order.skuPriceType||22===t.order.skuPriceType?a("td",{staticClass:"align-r"},[2==e.payMethod?a("span",[t._v("--")]):a("span",[t._v(t._s(t._f("numToQuantity")(e.applyQuantities)))])]):a("td",{staticClass:"align-r"},[t._v("--")]),t._v(" "),a("td",[t._v(t._s(t._f("paymentBillStatus")(e.approveStatus,e)))]),t._v(" "),a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToCash")(e.payTotal)))])])}),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("实际付款总计")]),t._v(" "),a("td",{staticClass:"text-r red",staticStyle:{color:"red"},attrs:{colspan:"8"}},[t._v(t._s(t._f("numToCash")(t.settleOrder.hadPayAmount)))])])],2):a("tbody",[t._m(3)])]):t._e(),t._v(" "),t.collectionList?a("table",{staticClass:"gy-table"},[t._m(4),t._v(" "),t.collectionList&&0!=t.collectionList.length?a("tbody",[t._l(t.collectionList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.confirmDate)))]),t._v(" "),a("td",[t._v(t._s(e.creatorName))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.createdDate)))]),t._v(" "),21===t.order.skuPriceType||22===t.order.skuPriceType?a("td",{staticClass:"align-r"},[2==e.payMethod?a("span",[t._v("--")]):a("span",[t._v(t._s(t._f("numToCash")(e.tempPrice,!0)))])]):a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToCash")(t.order.skuPrice,!0)))]),t._v(" "),21===t.order.skuPriceType||22===t.order.skuPriceType?a("td",{staticClass:"align-r"},[2==e.payMethod?a("span",[t._v("--")]):a("span",[t._v(t._s(t._f("numToQuantity")(e.applyQuantities)))])]):a("td",{staticClass:"align-r"},[t._v("--")]),t._v(" "),a("td",[t._v(t._s(t._f("collectionBillStatus")(e.collectionStatus)))]),t._v(" "),a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToCash")(e.payTotal)))])])}),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("实际收款总计")]),t._v(" "),a("td",{staticClass:"text-r red",staticStyle:{color:"red"},attrs:{colspan:"6"}},[t._v(t._s(t._f("numToCash")(t.settleOrder.hadPayAmount)))])])],2):a("tbody",[t._m(5)])]):t._e()]),t._v(" "),a("div",{staticClass:"settle-title"},[t._v("其他费用")]),t._v(" "),a("div",{staticClass:"other"},[t.otherList&&0!==t.otherList.length?a("div",t._l(t.otherList,function(e,s){return a("div",{key:s,staticClass:"other-wrap"},[a("span",[t._v("费用名称   "+t._s(e.costItem||"-"))]),t._v(" "),a("span",[t._v("费用金额 (元)   "+t._s(t._f("numToCash")(e.costCharge)))]),t._v(" "),a("span",[t._v("费用承担方   "+t._s(e.bearerName||"-"))])])}),0):a("p",{staticClass:"null-tip"},[t._v("-")])]),t._v(" "),a("div",{staticClass:"settle-title"},[t._v("备注")]),t._v(" "),a("div",{staticClass:"remark"},[t._v(t._s(t.settleOrder.remark||"-"))]),t._v(" "),a("div",{staticClass:"settle-title"},[t._v("合计")]),t._v(" "),a("div",{staticClass:"total"},[a("p",[t._v("合同总金额(元)"),21===t.order.skuPriceType||22===t.order.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")("付款"===t.typeText?t.essenceData.buyTotal:t.essenceData.saleTotal)))])]),t._v(" "),a("p",[t._v("已"+t._s(t.typeText)+"总金额(元)"),a("span",[t._v(t._s(t._f("numToCash")(t.settleOrder.hadPayAmount)))])]),t._v(" "),a("p",[t._v("结算总金额(元)"),a("span",[t._v(t._s(t._f("numToCash")(t.settleOrder.settleTotalAmount)))])]),t._v(" "),a("p",[t._v("待"+t._s(t.typeText)+"(元)"),a("span",{staticClass:"red"},[t._v(t._s(t._f("numToCash")(t.settleOrder.settleBalance)))])])]),t._v(" "),"approval"===t.typeName&&0===Number(t.$route.query.doneFlg)&&23==t.targetBizType&&1==t.homeFromFlg?a("div",{staticClass:"settle-title"},[t._v("审批备注")]):t._e(),t._v(" "),"approval"===t.typeName&&0===Number(t.$route.query.doneFlg)&&23==t.targetBizType&&1==t.homeFromFlg?a("div",{staticClass:"approve-remark"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"gy-textarea",attrs:{disabled:1===Number(t.$route.query.doneFlg)},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})]):t._e(),t._v(" "),a("div",{staticClass:"buttons"},[a("button",{staticClass:"gy-button-normal",on:{click:t.goBack}},[t._v("返回")]),t._v(" "),"approval"===t.typeName&&0===Number(t.$route.query.doneFlg)&&23==t.targetBizType&&1==t.homeFromFlg?a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.doApprove(2)}}},[t._v("驳回")]):t._e(),t._v(" "),"approval"===t.typeName&&0===Number(t.$route.query.doneFlg)&&23==t.targetBizType&&1==t.homeFromFlg?a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.doApprove(1)}}},[t._v("通过")]):t._e(),t._v(" "),t.settleOrder.settleBalance>0&&0===Number(t.$route.query.doneFlg)&&29==t.targetBizType&&1==t.homeFromFlg?a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.gotoSeetle(t.shouFuText)}}},[t._v(t._s(t.shouFuText))]):t._e(),t._v(" "),t.settleOrder.settleBalance<0&&0===Number(t.$route.query.doneFlg)&&29==t.targetBizType&&1==t.homeFromFlg?a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.gotoSeetle(t.shouFuText)}}},[t._v(t._s(t.shouFuText))]):t._e()]),t._v(" "),"approval"===t.typeName&&1===t.homeFromFlg?a("div",{staticClass:"buttons pinl"},[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.comment()}}},[t._v("评论")])]):t._e(),t._v(" "),a("gy-operation-history",{ref:"operationHis"}),t._v(" "),a("gy-comment-remark",{attrs:{dialog:t.commentDiog,invoice:t.contessDetailCommpany}}),t._v(" "),a("settleMoney",{ref:"settleMoney",attrs:{"cont-ess-data":t.essenceData,settleDilog:t.settleDilog,"order-item":t.order,"settle-data":t.settleOrder},on:{"update:contEssData":function(e){t.essenceData=e},"update:cont-ess-data":function(e){t.essenceData=e},"update:orderItem":function(e){t.order=e},"update:order-item":function(e){t.order=e},"update:settleData":function(e){t.settleOrder=e},"update:settle-data":function(e){t.settleOrder=e}}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("类别")]),t._v(" "),a("th",[t._v("数量 (吨)")]),t._v(" "),a("th",[t._v("单价 (元/吨)")]),t._v(" "),a("th",[t._v("金额 (元)")]),t._v(" "),a("th",[t._v("采购交割 (吨)")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[this._v("暂无数据")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("付款单号")]),t._v(" "),a("th",[t._v("出账日期")]),t._v(" "),a("th",[t._v("付款银行")]),t._v(" "),a("th",[t._v("支付方式")]),t._v(" "),a("th",[t._v("经办人")]),t._v(" "),a("th",[t._v("操作时间")]),t._v(" "),a("th",[t._v("单价(元/吨)")]),t._v(" "),a("th",[t._v("付款数量(吨)")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("th",[t._v("付款金额(元)")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[this._v("暂无数据")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("收款单号")]),t._v(" "),a("th",[t._v("入账日期")]),t._v(" "),a("th",[t._v("经办人")]),t._v(" "),a("th",[t._v("操作时间")]),t._v(" "),a("th",[t._v("单价(元/吨)")]),t._v(" "),a("th",[t._v("收款数量(吨)")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("th",[t._v("收款金额(元)")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[this._v("暂无数据")])])}]};var Ea=a("C7Lr")($a,Oa,!1,function(t){a("1K+r")},"data-v-f68bdfd4",null).exports,Ba={components:{detailBase:Ea},data:function(){return{}},created:function(){},methods:{}},Ma={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("detail-base",{attrs:{typeText:"付款",typeName:"detail"}})],1)},staticRenderFns:[]};var Ra=a("C7Lr")(Ba,Ma,!1,function(t){a("+A2g")},"data-v-65f52a98",null).exports,Ua={components:{detailBase:Ea},data:function(){return{}},created:function(){},methods:{}},za={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("detail-base",{attrs:{typeText:"收款",typeName:"detail"}})],1)},staticRenderFns:[]};var Va=a("C7Lr")(Ua,za,!1,function(t){a("mDgW")},"data-v-76462ca4",null).exports,Qa={components:{detailBase:Ea},data:function(){return{}},created:function(){},mounted:function(){},methods:{}},ja={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("detail-base",{attrs:{typeName:"approval"}})],1)},staticRenderFns:[]};var qa=a("C7Lr")(Qa,ja,!1,function(t){a("rxZW")},"data-v-08ce8fd0",null).exports,Wa={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},Ha=a("C7Lr")(null,Wa,!1,null,null,null).exports,Ka={name:"invoicelist",data:function(){return{params:{pageNum:1,pageSize:10,invoiceQueryType:1},saleStatus:[{id:"",name:"全部"},{id:0,name:"未开票"},{id:1,name:"开票中"},{id:2,name:"已开票"}],sellerStatus:[{id:0,name:"全部"},{id:10,name:"待确认"},{id:20,name:"已确认"}],list:[],isShowSearch:!1,total:null,statisticsShow:{allPageSellCount:null,allPageBuyCount:null,applyReceiptAmount:null,receiptedAmount:null,applyReceiptCount:0,receiptedCount:0,applyIssueAmount:null,issuedAmount:null,applyIssueCount:0,issuedCount:0}}},activated:function(){this.$route.meta.isBack||(this.params={invoiceQueryType:1},this.invoiceList()),this.$route.meta.isBack=!1},mounted:function(){this.toggleTabs(1)},methods:{toggleTabs:function(t){var e=this,a=1===t?"day":"month";this.$http.get(this.$api.invoice.allPageStatusCount+"?countType="+a).then(function(t){0===t.data.code&&(e.statisticsShow=t.data.data)}).catch(function(t){console.log(t)})},check:function(t){this.$router.push({name:"invoiceDetail",query:{purchaseOrderId:t.purchaseOrderId,saleOrderId:t.salesOrderId,id:t.id,salesInvoiceStatusValue:t.salesInvoiceStatusValue,receiptInvoiceStatusValue:t.receiptInvoiceStatusValue}})},invoiceList:function(){var t=this;this.$http.post(this.$api.invoice.getlist,this.params).then(function(e){0===e.data.code?(t.list=e.data.data.list,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},search:function(){this.invoiceList()},handleCurrentChange:function(t){this.params.pageNum=t,this.invoiceList()}},components:{listStatistics:Ue}},Xa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invoiceInquiry"},[a("div",{staticClass:"search-btn"},[a("span",{staticClass:"advancedSearch",on:{click:t.ShowSearch}},[t._v("高级搜索"),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticClass:"invoiceSeachAll"},[a("div",{staticClass:"invoiceSeach clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.essenceId,expression:"params.essenceId"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.params.essenceId},on:{input:function(e){e.target.composing||t.$set(t.params,"essenceId",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.userName,expression:"params.userName"}],attrs:{type:"text",placeholder:"请输入业务操作人"},domProps:{value:t.params.userName},on:{input:function(e){e.target.composing||t.$set(t.params,"userName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.buyerName,expression:"params.buyerName"}],attrs:{type:"text",placeholder:"请输入下游公司"},domProps:{value:t.params.buyerName},on:{input:function(e){e.target.composing||t.$set(t.params,"buyerName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.sellerName,expression:"params.sellerName"}],attrs:{type:"text",placeholder:"请输入上游公司"},domProps:{value:t.params.sellerName},on:{input:function(e){e.target.composing||t.$set(t.params,"sellerName",e.target.value)}}}),t._v(" "),t.isShowSearch?t._e():a("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),t.isShowSearch?[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.prodName,expression:"params.prodName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.params.prodName},on:{input:function(e){e.target.composing||t.$set(t.params,"prodName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.targetCorpName,expression:"params.targetCorpName"}],attrs:{type:"text",placeholder:"请输入我方公司"},domProps:{value:t.params.targetCorpName},on:{input:function(e){e.target.composing||t.$set(t.params,"targetCorpName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请开票日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.invoiceStartDate,callback:function(e){t.$set(t.params,"invoiceStartDate",e)},expression:"params.invoiceStartDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.invoiceEndDate,callback:function(e){t.$set(t.params,"invoiceEndDate",e)},expression:"params.invoiceEndDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请收票日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.receiptStartDate,callback:function(e){t.$set(t.params,"receiptStartDate",e)},expression:"params.receiptStartDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.receiptEndDate,callback:function(e){t.$set(t.params,"receiptEndDate",e)},expression:"params.receiptEndDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("销售发票状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.saleInvoiceStatus,callback:function(e){t.$set(t.params,"saleInvoiceStatus",e)},expression:"params.saleInvoiceStatus"}},t._l(t.saleStatus,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("采购发票状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.poInvoiceStatus,callback:function(e){t.$set(t.params,"poInvoiceStatus",e)},expression:"params.poInvoiceStatus"}},t._l(t.sellerStatus,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)]:t._e(),t._v(" "),a("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[a("i",{staticClass:"iconfont icon-search"})])],2)]),t._v(" "),a("div",{staticClass:"deliver_padding_small"},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{fixed:"","show-overflow-tooltip":!0,label:"ID\n产品名称",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"wid-overflow"},[a("span",[t._v(t._s(e.row.id))]),a("br"),t._v(" "),a("span",[t._v(t._s(e.row.prodName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类别",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?a("span",[t._v("采购"),a("br"),t._v("销售")]):t._e(),t._v(" "),2===e.row.contractType?a("span",[t._v("采购")]):t._e(),t._v(" "),3===e.row.contractType?a("span",[t._v("销售")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上游公司\n下游公司",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"bottom","visible-arrow":"false"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.row.sellerCompanyName)),a("br"),t._v(t._s(e.row.buyerCompanyName))]),t._v(" "),a("div",{staticClass:"wid-overflow"},[a("span",[t._v(t._s(e.row.sellerCompanyName))]),e.row.sellerCompanyName?a("br"):t._e(),t._v(" "),a("span",[t._v(t._s(e.row.buyerCompanyName))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"收票状态\n开票状态",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.receiptInvoiceStatusValue))]),a("br"),t._v(" "),a("span",[t._v(t._s(e.row.salesInvoiceStatusValue))]),t._v(" "),e.row.toDoUserList&&1===e.row.toDoUserList.length?a("span",{staticClass:"text-overflow payment-person"},[t._v(" "+t._s(e.row.toDoUserList[0].username))]):t._e(),t._v(" "),e.row.toDoUserList&&e.row.toDoUserList.length>1?[a("el-popover",{attrs:{placement:"bottom",title:"",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.row.toDoUserList}},[a("el-table-column",{attrs:{label:"序号",width:"80",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"提交时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("date")(e.row.createdDate,1)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"当前审批人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.username))])]}}],null,!0)})],1),t._v(" "),a("span",{staticClass:"popover-name text-overflow payment-person",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.toDoUserList[0].username)),a("i",{staticClass:"sort-caret descending"})])],1)]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购合同金额(元)\n销售合同金额(元)","class-name":"amount-right-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?[21===e.row.buySkuPriceType||22===e.row.buySkuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(e.row.purchaseAmount)))]),a("br")]:t._e(),t._v(" "),e.row.salesOrderId?[21===e.row.saleSkuPriceType||22===e.row.saleSkuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(e.row.salesAmount)))])]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购发票总金额(元)\n销售发票总金额(元)","class-name":"amount-right-el",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.receiptInvoiceAmount?a("span",[t._v(t._s(t._f("numToCash")(e.row.receiptInvoiceAmount)))]):t._e(),a("br"),t._v(" "),e.row.salesInvoiceAmount?a("span",[t._v(t._s(t._f("numToCash")(e.row.salesInvoiceAmount)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"业务操作人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.businessManagerName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购合同编号\n销售合同编号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.purchaseContractCode))]),a("br"),t._v(" "),a("span",[t._v(t._s(e.row.salesContractCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.receiptInvoiceCreatedDate,1)))]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(t._f("date")(e.row.salesInvoiceCreatedDate,1)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"#fff"},on:{click:function(a){return t.check(e.row)}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),a("listStatistics",{on:{toggleTabs:t.toggleTabs}},[a("div",{staticClass:"list-statistics-item"},[a("div",[a("span",[t._v("申请收票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyReceiptAmount)))])]),t._v(" "),a("div",[a("span",[t._v("申请开票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyIssueCount)))])]),t._v(" "),a("div",[a("span",[t._v("申请开票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyIssueAmount)))])]),t._v(" "),a("div",[a("span",[t._v("申请收票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyReceiptCount)))])]),t._v(" "),a("div",[a("span",[t._v("已收票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.receiptedAmount)))])]),t._v(" "),a("div",[a("span",[t._v("已开票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.issuedCount)))])]),t._v(" "),a("div",[a("span",[t._v("已开票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.issuedAmount)))])]),t._v(" "),a("div",[a("span",[t._v("已收票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.receiptedCount)))])])])])],1),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","page-size":t.params.pageSize,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var Ja=a("C7Lr")(Ka,Xa,!1,function(t){a("FTzB"),a("SKOf")},"data-v-7052a570",null).exports,Ga={name:"invoicelist",data:function(){return{isShowSearch:!1,params:{pageNum:1,pageSize:10,invoiceQueryType:3,contractType:2},saleStatus:[{id:"",name:"全部"},{id:0,name:"未开票"},{id:1,name:"开票中"},{id:2,name:"已开票"}],sellerStatus:[{id:0,name:"全部"},{id:10,name:"待确认"},{id:20,name:"已确认"}],list:[],total:null,statisticsShow:{allPageSellCount:null,allPageBuyCount:null,applyReceiptAmount:null,receiptedAmount:null,applyReceiptCount:0,receiptedCount:0,applyIssueAmount:null,issuedAmount:null,applyIssueCount:0,issuedCount:0}}},activated:function(){this.$route.meta.isBack||(this.params={invoiceQueryType:3,contractType:2},this.invoiceList()),this.$route.meta.isBack=!1},mounted:function(){this.toggleTabs(1)},methods:{toggleTabs:function(t){var e=this,a=1===t?"day":"month";this.$http.get(this.$api.invoice.allPageStatusCount+"?countType="+a).then(function(t){0===t.data.code&&(e.statisticsShow=t.data.data)}).catch(function(t){console.log(t)})},check:function(t){this.$router.push({name:"invoiceDetail",query:{purchaseOrderId:t.purchaseOrderId,saleOrderId:t.salesOrderId,id:t.id,salesInvoiceStatusValue:t.salesInvoiceStatusValue,receiptInvoiceStatusValue:t.receiptInvoiceStatusValue,activeType:2}})},invoiceList:function(){var t=this;this.$http.post(this.$api.invoice.getlist,this.params).then(function(e){0===e.data.code?(t.list=e.data.data.list,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},handleCurrentChange:function(t){this.params.pageNum=t,this.invoiceList()}},components:{listStatistics:Ue}},Za={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invoiceInquiry"},[a("div",{staticClass:"search-btn"},[a("span",{staticClass:"advancedSearch",on:{click:t.ShowSearch}},[t._v("高级搜索"),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticClass:"invoiceSeachAll"},[a("div",{staticClass:"invoiceSeach clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.essenceId,expression:"params.essenceId"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.params.essenceId},on:{input:function(e){e.target.composing||t.$set(t.params,"essenceId",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.userName,expression:"params.userName"}],attrs:{type:"text",placeholder:"请输入业务操作人"},domProps:{value:t.params.userName},on:{input:function(e){e.target.composing||t.$set(t.params,"userName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.sellerName,expression:"params.sellerName"}],attrs:{type:"text",placeholder:"请输入上游公司"},domProps:{value:t.params.sellerName},on:{input:function(e){e.target.composing||t.$set(t.params,"sellerName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("采购发票状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.poInvoiceStatus,callback:function(e){t.$set(t.params,"poInvoiceStatus",e)},expression:"params.poInvoiceStatus"}},t._l(t.sellerStatus,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),t.isShowSearch?t._e():a("span",{staticClass:"search",on:{click:function(e){return t.invoiceList()}}},[a("i",{staticClass:"iconfont icon-search"})])],1),t._v(" "),t.isShowSearch?[a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.prodName,expression:"params.prodName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.params.prodName},on:{input:function(e){e.target.composing||t.$set(t.params,"prodName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.targetCorpName,expression:"params.targetCorpName"}],attrs:{type:"text",placeholder:"请输入我方公司"},domProps:{value:t.params.targetCorpName},on:{input:function(e){e.target.composing||t.$set(t.params,"targetCorpName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请收票日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.receiptStartDate,callback:function(e){t.$set(t.params,"receiptStartDate",e)},expression:"params.receiptStartDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.receiptEndDate,callback:function(e){t.$set(t.params,"receiptEndDate",e)},expression:"params.receiptEndDate"}})],1)]),t._v(" "),t.isShowSearch?a("span",{staticClass:"search",on:{click:function(e){return t.invoiceList()}}},[a("i",{staticClass:"iconfont icon-search"})]):t._e()])]:t._e()],2)]),t._v(" "),a("div",{staticClass:"deliver_padding_small"},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{fixed:"",label:"ID",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品名称","show-overflow-tooltip":!0,width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"wid-overflow"},[a("span",[t._v(t._s(e.row.prodName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上游公司","show-overflow-tooltip":!0,width:"120","class-name":"dh-over"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sellerCompanyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"收票状态",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.receiptInvoiceStatusValue))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购合同金额(元)","class-name":"amount-right-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?[21===e.row.buySkuPriceType||22===e.row.buySkuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(e.row.purchaseAmount)))])]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购发票总金额(元)","class-name":"amount-right-el",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.receiptInvoiceAmount?a("span",[t._v(t._s(t._f("numToCash")(e.row.receiptInvoiceAmount)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"业务操作人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.businessManagerName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购合同编号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.purchaseContractCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.receiptInvoiceCreatedDate,1)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"#fff"},on:{click:function(a){return t.check(e.row)}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),a("listStatistics",{on:{toggleTabs:t.toggleTabs}},[a("div",{staticClass:"list-statistics-item"},[a("div",[a("span",[t._v("申请收票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyReceiptAmount)))])]),t._v(" "),a("div",[a("span",[t._v("申请开票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyIssueCount)))])]),t._v(" "),a("div",[a("span",[t._v("申请开票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyIssueAmount)))])]),t._v(" "),a("div",[a("span",[t._v("申请收票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyReceiptCount)))])]),t._v(" "),a("div",[a("span",[t._v("已收票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.receiptedAmount)))])]),t._v(" "),a("div",[a("span",[t._v("已开票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.issuedCount)))])]),t._v(" "),a("div",[a("span",[t._v("已开票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.issuedAmount)))])]),t._v(" "),a("div",[a("span",[t._v("已收票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.receiptedCount)))])])])])],1),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","page-size":t.params.pageSize,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var Ya=a("C7Lr")(Ga,Za,!1,function(t){a("LtkA"),a("1MnF")},"data-v-07d2a514",null).exports,ts={name:"invoicelist",data:function(){return{isShowSearch:!1,params:{pageNum:1,pageSize:10,invoiceQueryType:2,contractType:3},saleStatus:[{id:"",name:"全部"},{id:0,name:"未开票"},{id:1,name:"开票中"},{id:2,name:"已开票"}],sellerStatus:[{id:0,name:"全部"},{id:10,name:"待确认"},{id:20,name:"已确认"}],list:[],total:null,statisticsShow:{allPageSellCount:null,allPageBuyCount:null,applyReceiptAmount:null,receiptedAmount:null,applyReceiptCount:0,receiptedCount:0,applyIssueAmount:null,issuedAmount:null,applyIssueCount:0,issuedCount:0}}},activated:function(){this.$route.meta.isBack||(this.params={invoiceQueryType:2,contractType:3},this.invoiceList()),this.$route.meta.isBack=!1},mounted:function(){this.toggleTabs(1)},methods:{toggleTabs:function(t){var e=this,a=1===t?"day":"month";this.$http.get(this.$api.invoice.allPageStatusCount+"?countType="+a).then(function(t){0===t.data.code&&(e.statisticsShow=t.data.data)}).catch(function(t){console.log(t)})},check:function(t){this.$router.push({name:"invoiceDetail",query:{purchaseOrderId:t.purchaseOrderId,saleOrderId:t.salesOrderId,id:t.id,salesInvoiceStatusValue:t.salesInvoiceStatusValue,receiptInvoiceStatusValue:t.receiptInvoiceStatusValue,activeType:3}})},invoiceList:function(){var t=this;this.$http.post(this.$api.invoice.getlist,this.params).then(function(e){0===e.data.code?(t.list=e.data.data.list,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},handleCurrentChange:function(t){this.params.pageNum=t,this.invoiceList()}},components:{listStatistics:Ue}},es={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invoiceInquiry"},[a("div",{staticClass:"search-btn"},[a("span",{staticClass:"advancedSearch",on:{click:t.ShowSearch}},[t._v("高级搜索"),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticClass:"invoiceSeachAll"},[a("div",{staticClass:"invoiceSeach clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.essenceId,expression:"params.essenceId"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.params.essenceId},on:{input:function(e){e.target.composing||t.$set(t.params,"essenceId",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.userName,expression:"params.userName"}],attrs:{type:"text",placeholder:"请输入业务操作人"},domProps:{value:t.params.userName},on:{input:function(e){e.target.composing||t.$set(t.params,"userName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.buyerName,expression:"params.buyerName"}],attrs:{type:"text",placeholder:"请输入下游公司"},domProps:{value:t.params.buyerName},on:{input:function(e){e.target.composing||t.$set(t.params,"buyerName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("销售发票状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.saleInvoiceStatus,callback:function(e){t.$set(t.params,"saleInvoiceStatus",e)},expression:"params.saleInvoiceStatus"}},t._l(t.saleStatus,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),t.isShowSearch?t._e():a("span",{staticClass:"search",on:{click:function(e){return t.invoiceList()}}},[a("i",{staticClass:"iconfont icon-search"})])],1),t._v(" "),t.isShowSearch?[a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.prodName,expression:"params.prodName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.params.prodName},on:{input:function(e){e.target.composing||t.$set(t.params,"prodName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.targetCorpName,expression:"params.targetCorpName"}],attrs:{type:"text",placeholder:"请输入我方公司"},domProps:{value:t.params.targetCorpName},on:{input:function(e){e.target.composing||t.$set(t.params,"targetCorpName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请开票日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.invoiceStartDate,callback:function(e){t.$set(t.params,"invoiceStartDate",e)},expression:"params.invoiceStartDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.invoiceEndDate,callback:function(e){t.$set(t.params,"invoiceEndDate",e)},expression:"params.invoiceEndDate"}})],1)]),t._v(" "),t.isShowSearch?a("span",{staticClass:"search",on:{click:function(e){return t.invoiceList()}}},[a("i",{staticClass:"iconfont icon-search"})]):t._e()])]:t._e()],2)]),t._v(" "),a("div",{staticClass:"deliver_padding_small"},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{fixed:"",label:"ID",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品名称","show-overflow-tooltip":!0,width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"wid-overflow"},[a("span",[t._v(t._s(e.row.prodName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"下游公司","show-overflow-tooltip":!0,width:"120","class-name":"dh-over"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.buyerCompanyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"开票状态",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.salesInvoiceStatusValue))]),t._v(" "),e.row.toDoUserList&&1===e.row.toDoUserList.length?a("span",{staticClass:"text-overflow payment-person"},[t._v(" "+t._s(e.row.toDoUserList[0].username))]):t._e(),t._v(" "),e.row.toDoUserList&&e.row.toDoUserList.length>1?[a("el-popover",{attrs:{placement:"bottom",title:"",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:e.row.toDoUserList}},[a("el-table-column",{attrs:{label:"序号",width:"80",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"提交时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("date")(e.row.createdDate,1)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"当前审批人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.username))])]}}],null,!0)})],1),t._v(" "),a("span",{staticClass:"popover-name text-overflow payment-person",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.toDoUserList[0].username)),a("i",{staticClass:"sort-caret descending"})])],1)]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"销售合同金额(元)","class-name":"amount-right-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.salesOrderId?[21===e.row.saleSkuPriceType||22===e.row.saleSkuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(e.row.salesAmount)))])]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"销售发票总金额(元)","class-name":"amount-right-el",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.salesInvoiceAmount?a("span",[t._v(t._s(t._f("numToCash")(e.row.salesInvoiceAmount)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"业务操作人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.businessManagerName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"销售合同编号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.salesContractCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.salesInvoiceCreatedDate,1)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"#fff"},on:{click:function(a){return t.check(e.row)}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),a("listStatistics",{on:{toggleTabs:t.toggleTabs}},[a("div",{staticClass:"list-statistics-item"},[a("div",[a("span",[t._v("申请收票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyReceiptAmount)))])]),t._v(" "),a("div",[a("span",[t._v("申请开票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyIssueCount)))])]),t._v(" "),a("div",[a("span",[t._v("申请开票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.applyIssueAmount)))])]),t._v(" "),a("div",[a("span",[t._v("申请收票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.applyReceiptCount)))])]),t._v(" "),a("div",[a("span",[t._v("已收票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.receiptedAmount)))])]),t._v(" "),a("div",[a("span",[t._v("已开票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.issuedCount)))])]),t._v(" "),a("div",[a("span",[t._v("已开票(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.statisticsShow.issuedAmount)))])]),t._v(" "),a("div",[a("span",[t._v("已收票笔数(笔)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.receiptedCount)))])])])])],1),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","page-size":t.params.pageSize,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var as=a("C7Lr")(ts,es,!1,function(t){a("I9h7"),a("/D1D")},"data-v-94f76ef0",null).exports,ss={name:"contractBasic",data:function(){return{}},props:{query:Object}},is={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clearfix"},[a("div",{staticClass:"title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("span",[t._v(t._s(t.query.id))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("执行操作人")]),t._v(" "),a("span",[t._v(t._s(t.query.executiveName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("span",[t._v(t._s(t._f("businessTradeType")(t.query.bizType))+"  "),1!==t.query.contractType?a("span",{staticClass:"contractType"},[t._v(t._s(t._f("contractTradeType")(t.query.contractType,t.query.bizType)))]):t._e()])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("span",[t._v(t._s(t.query.targetCorpName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("span",[t._v(t._s(t.query.prodName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交易类型")]),t._v(" "),a("span",[t._v(t._s(t._f("contractTransactionTypeList")(t.query.transactionType)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("span",[t._v(t._s(t.query.businessManagerName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务组")]),t._v(" "),a("span",[t._v(t._s(t.query.organizationName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建时间")]),t._v(" "),a("span",[t._v(t._s(t._f("date")(t.query.createdDate,1)))])])])},staticRenderFns:[]};var ns=a("C7Lr")(ss,is,!1,function(t){a("5y6W")},"data-v-daf8b0f8",null).exports,ls={name:"invoiceDetails",components:{gyContract:ns,gyFileView:Ke},data:function(){return{id:null,purchaseOrderId:null,saleOrderId:null,ticketInformations:null,ticketInformationsd:null,ticketInforInvoices:[],fileList:{},form:{downstreamInfo:{skuPriceType:null},upstreamInfo:{skuPriceType:null}},noInvoice:!1,noCollectTickets:!1,salesInvoiceStatusValue:"",receiptInvoiceStatusValue:""}},created:function(){this.id=this.$route.query.id,this.purchaseOrderId=this.$route.query.purchaseOrderId,this.salesOrderId=this.$route.query.saleOrderId,this.salesInvoiceStatusValue=this.$route.query.salesInvoiceStatusValue,this.receiptInvoiceStatusValue=this.$route.query.receiptInvoiceStatusValue;var t=Number(this.$route.query.activeType);2===t?this.ticketInformation():3===t?this.ticketInfor():(this.ticketInformation(),this.ticketInfor()),this.information()},methods:{information:function(){var t=this;t.$http.get(t.$api.order.orderDetail+"/"+this.id).then(function(e){0===e.data.code?t.form=e.data.data:t.$message(e.data.message)}).catch(function(e){t.$message(e.data.message)})},ticketInformation:function(){var t=this;if(t.ticketInformation=null,null==t.purchaseOrderId||void 0===t.purchaseOrderId||""===t.purchaseOrderId||"null"===t.purchaseOrderId)return console.log("发票详情 采购订单ID为空 合同要素id="+t.id),t.noCollectTickets=!0,!1;t.$http.get(t.$api.invoice.getDetail+"/"+t.purchaseOrderId).then(function(e){0===e.data.code&&(t.ticketInformations=e.data.data,null!=t.ticketInformations&&void 0!==t.ticketInformations||(t.ticketInformations={},t.noCollectTickets=!0))}).catch(function(e){t.$message(e)})},ticketInfor:function(){var t=this;if(t.ticketInformationsd=null,null==t.salesOrderId||void 0===t.salesOrderId||""===t.salesOrderId||"null"===t.salesOrderId)return console.log("发票详情 销售订单ID为空 合同要素id="+t.id),t.noInvoice=!0,!1;t.$http.get(t.$api.invoice.getDetails+"/"+t.salesOrderId).then(function(e){0===e.data.code&&(t.ticketInformationsd=e.data.data,t.ticketInforInvoices=e.data.data.invoices,null!=t.ticketInformationsd&&void 0!==t.ticketInformationsd||(t.ticketInformationsd={},t.noInvoice=!0),t.getInvoiceDeliveryCollection())}).catch(function(e){t.$message(e)})},showImgs:function(t){this.$refs.contFileView.open4MultiFile(t)},showImg:function(t,e){switch(t){case 1:case 2:case 3:case 4:this.fileList=e;break;default:this.fileList=[]}this.$refs.contFileView.open4MultiFile(this.fileList)},buyLinkInvoice:function(){this.$router.push({name:"financialConfirmation",query:{id:this.form.id,saleOrderId:this.salesOrderId,purchaseOrderId:this.purchaseOrderId,doneFlg:1}})},sellLinkInvoice:function(){this.$router.push({name:"auditOperation",query:{id:this.form.id,saleOrderId:this.salesOrderId,purchaseOrderId:this.purchaseOrderId,doneFlg:1}})},getInvoiceDeliveryCollection:function(){var t=this;this.$http.post(this.$api.invoice.getInvoiceDeliveryCollection,{salesOrderId:this.salesOrderId,purchaseOrderId:this.purchaseOrderId}).then(function(e){0===e.data.code&&(t.fileList=e.data.data)})},InvoiceCheck:function(t){this.$router.push({name:"auditOperation",query:{purchaseOrderId:this.$route.query.purchaseOrderId,salesOrderId:this.$route.query.salesOrderId,invoiceId:t.id,id:this.$route.query.id}})},exportExcel:function(t){var e={};e.contEssId=this.id,e.salesOrderId=this.salesOrderId,e.invoiceApplicationId=t.id;var a="开票申请单-"+this.$tools.parseDate(this.ticketInformationsd.date)+"-"+this.id+".xls";this.$tools.exporttoExcel(this,this.$api.invoice.exportInvoiceApplication,e,a)}}},os={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"financialConfirmation my-invoice invoic_details"},[a("gy-contract",{attrs:{query:t.form}}),t._v(" "),null!=t.ticketInformations?a("div",[a("div",{staticClass:"title"},[t._v("收票信息  "),t.noCollectTickets?t._e():a("span",{staticClass:"linkInvoice",staticStyle:{color:"#4a90e2",cursor:"pointer"},attrs:{type:"text"},on:{click:t.buyLinkInvoice}},[t._v("查看详情")])]),t._v(" "),t.noCollectTickets?t._e():a("div",{staticClass:"block-wrap clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("span",[t._v(t._s(t.ticketInformations.sellerName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("发票月份")]),t._v(" "),a("span",[t._v(t._s(t._f("invoiceMonthValue")(t.ticketInformations.provideInvoiceType,t.form.upstreamInfo)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("发票总金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.ticketInformations.amount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.ticketInformations.quantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("收票状态")]),t._v(" "),a("span",[t._v(t._s(t.receiptInvoiceStatusValue))])]),t._v(" "),a("div",{staticClass:"gy-form-group linkInvoice"},[a("span",{staticClass:"l"},[t._v("单价(元/吨)")]),t._v(" "),21===t.form.upstreamInfo.skuPriceType||22===t.form.upstreamInfo.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.ticketInformations.productUnitPrice,!0)))])]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[t._v("收票凭证")]),t._v(" "),t.ticketInformations.receiptInvoiceUrlList&&0!==t.ticketInformations.receiptInvoiceUrlList.length?a("span",{on:{click:function(e){return t.showImgs(t.ticketInformations.receiptInvoiceUrlList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])])]),t._v(" "),t.noCollectTickets?a("div",{staticClass:"noinvoiceStyle"},[t._v("还未收票，没有可显示的收票信息")]):t._e()]):t._e(),t._v(" "),null!=t.ticketInformationsd?a("div",[a("div",{staticClass:"title"},[t._v("开票信息")]),t._v(" "),t.noInvoice?t._e():a("div",{staticClass:"block-wrap clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("span",[t._v(t._s(t.ticketInformationsd.buyerName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("发票月份")]),t._v(" "),a("span",[t._v(t._s(t._f("invoiceMonthValue")(t.ticketInformationsd.provideInvoiceType,t.form.downstreamInfo)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t.ticketInformationsd.contractNumber))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同金额(元)")]),t._v(" "),21===t.form.downstreamInfo.skuPriceType||22===t.form.downstreamInfo.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.ticketInformationsd.contractAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[t._v("已开票金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.ticketInformationsd.makeOutInvoice)))])]),t._v(" "),a("div",{staticClass:"min-title min-titles"},[t._v("开票记录")]),t._v(" "),a("div",{staticClass:"min-title"},[a("el-table",{staticClass:"gy-table",staticStyle:{width:"100%"},attrs:{data:t.ticketInforInvoices}},[a("el-table-column",{attrs:{label:"编号",fixed:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.id))]}}],null,!1,1140461808)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.statusDesc))]}}],null,!1,3498627896)}),t._v(" "),a("el-table-column",{attrs:{label:"本次开票金额(元)","class-name":"amount-right-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToCash")(e.row.amount)))]}}],null,!1,2527730716)}),t._v(" "),a("el-table-column",{attrs:{label:"开票数量(吨)","class-name":"amount-right-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.quantity)))]}}],null,!1,2992436393)}),t._v(" "),a("el-table-column",{attrs:{label:"企业税号",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.buyerTaxCode))]}}],null,!1,3326248036)}),t._v(" "),a("el-table-column",{attrs:{label:"开户银行",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.buyerBankName))])]}}],null,!1,1534011710)}),t._v(" "),a("el-table-column",{attrs:{label:"银行账号",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.buyerBankAccount))]}}],null,!1,190194243)}),t._v(" "),a("el-table-column",{attrs:{"class-name":"amount-right-el",label:"转让货权总数量(吨)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.deliveredProductQuantity)))]}}],null,!1,154446374)}),t._v(" "),a("el-table-column",{attrs:{label:"商品税务编码",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.productTaxCode))]}}],null,!1,2353517654)}),t._v(" "),a("el-table-column",{attrs:{label:"进项票",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("entryTicket")(e.row.receiptInvoiceAmount,e.row.receiptInvoiceAmount)))]),t._v(" "),a("span",[t._v(t._s(t._f("entryTickets")(e.row.receiptInvoiceStatus,e.row.receiptInvoiceStatus)))])]}}],null,!1,3400912860)}),t._v(" "),a("el-table-column",{attrs:{label:"已收进项票(元)","class-name":"amount-right-el",width:"135"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToCash")(e.row.receiptInvoiceAmount)))]}}],null,!1,1407132593)}),t._v(" "),a("el-table-column",{attrs:{label:"开票凭证","class-name":"operation-styles-el",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.invoiceVoucherList&&0!==e.row.invoiceVoucherList.length?a("span",{staticStyle:{"padding-bottom":"-2px"},on:{click:function(a){return t.showImg(1,e.row.invoiceVoucherList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,917939443)}),t._v(" "),a("el-table-column",{attrs:{label:"收款凭证","class-name":"operation-styles-el",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.collectionFileList&&0!==e.row.collectionFileList.length?a("span",{staticStyle:{"padding-bottom":"-2px"},on:{click:function(a){return t.showImg(2,e.row.collectionFileList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,374064193)}),t._v(" "),a("el-table-column",{attrs:{label:"销售交割凭证","class-name":"operation-styles-el",width:"135"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.deliveredUrlList&&0!==e.row.deliveredUrlList.length?a("span",{staticStyle:{"padding-bottom":"-2px"},on:{click:function(a){return t.showImg(3,e.row.deliveredUrlList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,418169983)}),t._v(" "),a("el-table-column",{attrs:{label:"采购交割凭证","class-name":"operation-styles-el",width:"135"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.productSettlementBillList&&0!==e.row.productSettlementBillList.length?a("span",{staticStyle:{"padding-bottom":"-2px"},on:{click:function(a){return t.showImg(4,e.row.productSettlementBillList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,2137099834)}),t._v(" "),a("el-table-column",{attrs:{label:"快递单号",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.expressCode))]}}],null,!1,1692219818)}),t._v(" "),a("el-table-column",{attrs:{label:"经办人",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.operationUserName))]}}],null,!1,3306456606)}),t._v(" "),a("el-table-column",{attrs:{label:"备注",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-overflow"},[t._v(t._s(e.row.remark))])]}}],null,!1,171046041)}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.createdDate,1)))]}}],null,!1,1742701625)}),t._v(" "),a("el-table-column",{attrs:{"class-name":"operation-styles-el",label:"操作",fixed:"right",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.InvoiceCheck(e.row)}}},[t._v("查看")]),t._v(" "),a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.exportExcel(e.row)}}},[t._v("下载")])]}}],null,!1,3320435411)})],1)],1)]),t._v(" "),t.noInvoice?a("div",{staticClass:"noinvoiceStyle"},[t._v("还未开票，没有可显示的开票信息")]):t._e()]):t._e(),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[]};var rs=a("C7Lr")(ls,os,!1,function(t){a("5AaT"),a("j3Um")},"data-v-fd098166",null).exports,cs={components:{gyContract:ns,gyFileView:Ke,gyFileUpload:aa,gyOperationHistory:oa,gyCommentRemark:da,bankAcc:Ye},data:function(){return{ticketAuditInformationsd:{receiptVoucherList:[],invoiceVoucherUrlList:[]},saleOrderId:null,id:null,purchaseOrderId:null,isShow:null,approvedList:{},form:{},doneFlg:null,todoId:null,remarks:null,invoiceVoucherConfirmObj:{invoiceApplicationId:null,invoiceVoucherUrlList:[]},courierNumberObj:{expressCode:null,invoiceApplicationId:null},invoiceHistoryObj:{},invoiceHistory:null,erpCollectionFileModelList:[],fileList:{},params:{contEssId:null,showPageInfo:!0,homeFromFlg:1},applyList:{buyerBankId:null,hasReceiptInvoice:null,operationUserName:null,productTaxCode:null,productName:null,deliveredProductBillToFinance:0,buyerBankName:null,buyerBankAccount:null,buyerTaxCode:null,applicationDate:null,buyerName:null,payInfoList:[],productSettlementBill:[],receiptVoucher:[],receiptInvoiceStatus:null,remark:null},newBank:[],threadRunTag:!0,commodCode:[],entryoptions:[{id:0,label:"无进项票"},{id:1,label:"有进项票"}],entryoptionTwo:[],entryoptionTwoYes:[{id:0,label:"在途中"},{id:1,label:"已收到"}],entryoptionTwoNo:[{id:2,label:"先开销项发票"}],receiptInvoiceStatus:null,commentDiog:{dialogVisibleRemark:!1},invoiceCommpany:{targetType:4,subSysType:0,targetId:null},isDefault:!1,isCanSave:!1}},mounted:function(){this.id=this.$route.query.id,this.saleOrderId=this.$route.query.saleOrderId,this.purchaseOrderId=this.$route.query.purchaseOrderId,this.doneFlg=parseInt(this.$route.query.doneFlg),this.todoId=Number(this.$route.query.todoId),this.ticketInfor(),this.contrtactBase()},created:function(){this.params.contEssId=Number(this.$route.query.id),this.params.homeFromFlg=Number(this.$route.query.homeFromFlg)},methods:{entryTicket1:function(){this.applyList.receiptInvoiceStatus=this.receiptInvoiceStatus},entryTicket:function(){this.receiptInvoiceStatus=null,this.applyList.receiptInvoiceStatus=null,1===this.applyList.hasReceiptInvoice&&(this.entryoptionTwo=this.entryoptionTwoYes),0===this.applyList.hasReceiptInvoice&&(this.entryoptionTwo=this.entryoptionTwoNo)},comment:function(){this.commentDiog.dialogVisibleRemark=!0,this.invoiceCommpany.refFunc=this.$refs.operationHis.display,this.invoiceCommpany.refParam={targetId:this.ticketAuditInformationsd.invoiceApplicationId,targetType:4}},restSubmitEdit:function(){this.params.showPageInfo=!1,this.showUpdateData(),this.isDefault=!1,this.commodityTaxCode(this.form.downstreamInfo.prdSkuId)},cancleSubmit:function(){this.params.showPageInfo=!0,this.isDefault=!0},popupPaySubmission:function(t){if(null==t||void 0===t)return this.applyList.buyerBankId=null,this.applyList.buyerBankAccount=null,void(this.applyList.buyerBankName=null);this.applyList.buyerBankId=t.id,this.applyList.buyerBankName=t.bankName,this.applyList.buyerBankAccount=t.companyAccount,this.newPaymentBankAssembly(this.applyList)},changeBlank:function(t){0===t&&(this.$refs.bankAcc.addBank=!0,this.$refs.bankAcc.creatBank.companyId=this.applyList.buyerCompanyId,this.$refs.bankAcc.creatBank.accountName=this.applyList.buyerCompanyName);for(var e=0;e<this.newBank.length;e++)t===this.newBank[e].bankAccId&&(this.applyList.buyerBankId=this.newBank[e].bankAccId,this.applyList.buyerBankAccount=this.newBank[e].bankAccount,this.applyList.buyerBankName=this.newBank[e].depositBankName)},showImg:function(t){this.$refs.contFileView.open4MultiFile(t)},onCallbackBuyFileUpload:function(t){var e=this;this.invoiceVoucherConfirmObj.invoiceVoucherUrlList=[],t.forEach(function(t){e.invoiceVoucherConfirmObj.invoiceVoucherUrlList.push(t.fileUrl)})},uploadInvoiceClick:function(){var t=this;0!==this.invoiceVoucherConfirmObj.invoiceVoucherUrlList.length?(this.invoiceVoucherConfirmObj.invoiceApplicationId=this.ticketAuditInformationsd.invoiceApplicationId,this.invoiceVoucherConfirmObj.todoId=this.todoId,this.invoiceVoucherConfirmObj.contEssId=this.id,this.$http.post(this.$api.invoice.uploadInvoice,this.invoiceVoucherConfirmObj).then(function(e){0===e.data.code?(t.$message({message:e.data.message,type:"success"}),t.$router.go(-1)):t.$message({message:e.data.message,type:"error"})})):this.$message({message:"请上传发票凭证",type:"error"})},courierNumberClick:function(){var t=this;null!==this.courierNumberObj.expressCode&&""!==this.courierNumberObj.expressCode?(this.courierNumberObj.invoiceApplicationId=this.ticketAuditInformationsd.invoiceApplicationId,this.courierNumberObj.todoId=this.todoId,this.courierNumberObj.contEssId=this.id,this.courierNumberObj.allowedFunctionsId=39,this.$http.post(this.$api.invoice.courierNumber,this.courierNumberObj).then(function(e){0===e.data.code?(t.$message({message:e.data.message,type:"success"}),t.$router.go(-1)):t.$message({message:e.data.message,type:"error"})})):this.$message({message:"请填写快递单号",type:"error"})},commodityTaxCode:function(t){var e=this;this.$http.post(this.$api.invoice.commodityCode,{productId:t}).then(function(t){0===t.data.code&&(e.commodCode=t.data.data)})},ticketInfor:function(){var t=this;t.$http.get(t.$api.invoice.applyInvoices+"/"+t.$route.query.invoiceId).then(function(e){0===e.data.code&&(t.ticketAuditInformationsd=e.data.data,t.invoiceCommpany.targetId=t.ticketAuditInformationsd.invoiceApplicationId,t.init(),t.showClick(),t.invoiceHistoryClick(),50!==t.ticketAuditInformationsd.status&&60!==t.ticketAuditInformationsd.status||0!==t.doneFlg||(t.isCanSave=!0,t.isDefault=!1))}).catch(function(e){t.$message(e)})},showUpdateData:function(){this.applyList.buyerName=this.ticketAuditInformationsd.buyerName,this.applyList.applicationDate=this.ticketAuditInformationsd.date,this.applyList.skuQuantity=this.ticketAuditInformationsd.quantity,this.applyList.buyerTaxCode=this.ticketAuditInformationsd.productTaxCode,this.applyList.amount=this.ticketAuditInformationsd.amount,this.applyList.buyerBankId=this.ticketAuditInformationsd.buyerBankId,this.applyList.buyerCompanyId=this.ticketAuditInformationsd.buyerId,this.applyList.buyerCompanyName=this.ticketAuditInformationsd.buyerName,this.applyList.buyerBankName=this.ticketAuditInformationsd.buyerBankName,this.applyList.buyerBankAccount=this.ticketAuditInformationsd.buyerBankAccount,this.applyList.productTaxCode=this.ticketAuditInformationsd.productTaxCode,this.applyList.deliveredProductQuantity=this.ticketAuditInformationsd.deliveredProductQuantity,this.applyList.hasReceiptInvoice=this.ticketAuditInformationsd.hasReceiptInvoice,1===this.ticketAuditInformationsd.hasReceiptInvoice?this.entryoptionTwo=this.entryoptionTwoYes:this.entryoptionTwo=this.entryoptionTwoNo,this.receiptInvoiceStatus=this.ticketAuditInformationsd.receiptInvoiceStatus,this.applyList.receiptInvoiceStatus=this.ticketAuditInformationsd.receiptInvoiceStatus,this.applyList.receiptInvoiceAmount=this.ticketAuditInformationsd.receiptInvoiceAmount,this.applyList.operationUserName=this.ticketAuditInformationsd.operationUserName,this.applyList.remark=this.ticketAuditInformationsd.remark,this.applyList.productName=this.ticketAuditInformationsd.productName,this.applyList.contEssId=this.id,this.applyList.salesOrderId=this.saleOrderId,this.applyList.buyerId=this.ticketAuditInformationsd.buyerId,this.applyList.status=this.ticketAuditInformationsd.status,this.applyList.todoId=this.todoId,this.changeBlank()},init:function(){var t=this,e=this;e.$http.post(this.$api.invoice.getInvoiceDeliveryCollection,{salesOrderId:e.saleOrderId,purchaseOrderId:e.purchaseOrderId}).then(function(a){0===a.data.code&&(e.fileList=a.data.data,t.applyList.buyerTaxCode=t.fileList.corpTaxCode)})},showClick:function(){var t=this,e={targetId:this.ticketAuditInformationsd.invoiceApplicationId,targetType:4};this.$http.post(this.$api.apprProc.hasApproveAuth,e).then(function(e){0===e.data.code?1===t.params.homeFromFlg?(t.isShow=!0,t.isDefault=!1):(t.isShow=!1,t.isDefault=!0):(t.isShow=!1,t.isDefault=!0,50!==t.ticketAuditInformationsd.status&&60!==t.ticketAuditInformationsd.status||0!==t.doneFlg||(t.isDefault=!1))}).catch(function(t){console.log(t)})},approvedClick:function(t){50===this.ticketAuditInformationsd.status&&0===this.doneFlg?this.uploadInvoiceClick():60===this.ticketAuditInformationsd.status&&0===this.doneFlg?this.courierNumberClick():this.approvedSub(t)},approvedSub:function(t){var e=this;this.approvedList.todoId=this.todoId,this.approvedList.contEssId=this.id,this.approvedList.approved=t,this.approvedList.remark=this.remarks,this.approvedList.invoiceApplicationId=this.ticketAuditInformationsd.invoiceApplicationId,this.$http.post(this.$api.invoice.approveSure,this.approvedList).then(function(t){0===t.data.code?(e.$message({message:t.data.message,type:"success"}),e.$router.go(-1)):e.$message.error(t.data.code+" "+t.data.message)})},contrtactBase:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+this.id).then(function(e){0===e.data.code&&(t.form=e.data.data,t.newPaymentBankAssembly(t.form))})},reject:function(){var t=this;this.$confirm("确认驳回?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.approvedSub(2)})},invoiceHistoryClick:function(){this.invoiceHistoryObj.targetId=this.ticketAuditInformationsd.invoiceApplicationId,this.invoiceHistoryObj.targetType=4,this.$refs.operationHis.display(this.$api.contract.approve1History,this.invoiceHistoryObj)},newPaymentBankAssembly:function(t){var e=this;this.$http.post(this.$api.payment.newBank,{companyId:t.buyerCompanyId}).then(function(t){0===t.data.code&&(e.newBank=t.data.data,2===e.newBank.length&&(e.applyList.buyerBankName=e.newBank[0].depositBankName,e.applyList.buyerBankAccount=e.newBank[0].bankAccount))})},changeProdTaxCode:function(t){this.commodCode&&(this.applyList.productTaxCode=t)},applyTicket:function(){var t=this;this.applyList.buyerName?null!==this.applyList.applicationDate?null!==this.applyList.buyerTaxCode&&""!==this.applyList.buyerTaxCode?null!==this.applyList.buyerBankAccount&&""!==this.applyList.buyerBankAccount?null!==this.applyList.buyerBankName&&""!==this.applyList.buyerBankName?""!==this.applyList.quantity?""!==this.applyList.amount?""!==this.applyList.receiptInvoiceAmount?null!==this.applyList.productTaxCode?null!==this.applyList.operationUserName?null!==this.applyList.hasReceiptInvoice&&null!==this.applyList.receiptInvoiceStatus?this.threadRunTag&&(this.threadRunTag=!1,this.$http.post(this.$api.invoice.applyInvoice,this.applyList).then(function(e){0===e.data.code?(t.$message({message:e.data.message,type:"success"}),t.$router.push({path:"/home"}),t.isSubmit=!1,t.isSubmit=!1):t.$message({message:e.data.message,type:"error"}),t.threadRunTag=!0}).catch(function(e){t.$message({message:"网络异常",type:"error"}),t.threadRunTag=!0})):this.$message({message:"请选择进项票",type:"error"}):this.$message({message:"请输入经办人",type:"error"}):this.$message({message:"请输入商品税务编码",type:"error"}):this.$message({message:"请输入本笔业务已收到上游发票总金额",type:"error"}):this.$message({message:"请输入开票总金额",type:"error"}):this.$message({message:"请输入开票数量",type:"error"}):this.$message({message:"请输入开户银行",type:"error"}):this.$message({message:"请输入银行账号",type:"error"}):this.$message({message:"请输入税号",type:"error"}):this.$message({message:"请选择申请日期",type:"error"}):this.$message({message:"请输入开票单位",type:"error"})}},watch:{remarks:function(t){t.length>2500&&(this.$message({message:"审批备注最多可填写2500字",type:"warning"}),this.remarks=this.remarks.substr(0,2500))}}},ds={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"approve-invoice my-invoice"},[a("gy-contract",{attrs:{query:t.form}}),t._v(" "),a("div",{staticClass:"title"},[t._v("开票信息")]),t._v(" "),t.params.showPageInfo?a("div",{staticClass:"block-wrap clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("开票单位名称")]),t._v(" "),a("span",[t._v(t._s(t.ticketAuditInformationsd.buyerName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("品名")]),t._v(" "),a("span",[t._v(t._s(t.ticketAuditInformationsd.productName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请日期")]),t._v(" "),a("span",[t._v(t._s(t._f("date")(t.ticketAuditInformationsd.date)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("开票数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.ticketAuditInformationsd.quantity))+t._s(t.ticketAuditInformationsd.quantityUnitName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("税号")]),t._v(" "),a("span",[t._v(t._s(t.ticketAuditInformationsd.buyerTaxCode))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("开票总金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.ticketAuditInformationsd.amount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("开户银行")]),t._v(" "),a("span",[t._v(t._s(t.ticketAuditInformationsd.buyerBankName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("发票月份")]),t._v(" "),a("span",[t._v(t._s(t._f("invoiceMonthValue")(t.ticketAuditInformationsd.provideInvoiceType,t.ticketAuditInformationsd)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("银行账号")]),t._v(" "),a("span",[t._v(t._s(t.ticketAuditInformationsd.buyerBankAccount))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("品名")]),t._v(" "),a("span",[t._v(t._s(t.ticketAuditInformationsd.productName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("商品税务编号")]),t._v(" "),a("span",[t._v(t._s(t.ticketAuditInformationsd.productTaxCode))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("转让货权总数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.ticketAuditInformationsd.deliveredProductQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("进项票")]),t._v(" "),a("span",[t._v(t._s(t._f("incomeInvoice")(t.ticketAuditInformationsd.hasReceiptInvoice,t.ticketAuditInformationsd.receiptInvoiceStatus)))])]),t._v(" "),a("div",{staticClass:"gy-form-group my-group"},[a("span",{staticClass:"l"},[t._v("已收上游发票(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.ticketAuditInformationsd.receiptInvoiceAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("经办人")]),t._v(" "),a("span",[t._v(t._s(t.ticketAuditInformationsd.operationUserName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("收款凭证")]),t._v(" "),t.ticketAuditInformationsd.collectionFileList&&0!==t.ticketAuditInformationsd.collectionFileList.length?a("span",{on:{click:function(e){return t.showImg(t.ticketAuditInformationsd.collectionFileList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("销售交割凭证")]),t._v(" "),t.ticketAuditInformationsd.deliveredUrlList&&0!==t.ticketAuditInformationsd.deliveredUrlList.length?a("span",{on:{click:function(e){return t.showImg(t.ticketAuditInformationsd.deliveredUrlList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("采购交割凭证")]),t._v(" "),t.ticketAuditInformationsd.productSettlementBillList&&0!==t.ticketAuditInformationsd.productSettlementBillList.length?a("span",{on:{click:function(e){return t.showImg(t.ticketAuditInformationsd.productSettlementBillList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),70===t.ticketAuditInformationsd.status||60===t.ticketAuditInformationsd.status?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("开票凭证")]),t._v(" "),t.ticketAuditInformationsd.invoiceVoucherList&&0!==t.ticketAuditInformationsd.invoiceVoucherList.length?a("span",{on:{click:function(e){return t.showImg(t.ticketAuditInformationsd.invoiceVoucherList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("附件")]),t._v(" "),t.ticketAuditInformationsd.invoiceApplicationFiles&&0!==t.ticketAuditInformationsd.invoiceApplicationFiles.length?a("span",{on:{click:function(e){return t.showImg(t.ticketAuditInformationsd.invoiceApplicationFiles)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),70===t.ticketAuditInformationsd.status?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("快递单号")]),t._v(" "),a("span",[t._v(t._s(t.ticketAuditInformationsd.expressCode))])]):t._e(),t._v(" "),60===t.ticketAuditInformationsd.status&&0===t.doneFlg?a("div",{staticClass:"gy-form-group"},[t._m(0),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.courierNumberObj.expressCode,expression:"courierNumberObj.expressCode"}],attrs:{type:"text",placeholder:"请填写快递单号"},domProps:{value:t.courierNumberObj.expressCode},on:{input:function(e){e.target.composing||t.$set(t.courierNumberObj,"expressCode",e.target.value)}}})]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("状态")]),t._v(" "),a("div",{staticClass:"text-overflow"},[t._v(t._s(t.ticketAuditInformationsd.statusDesc))])]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{clear:"both"}},[a("span",{staticClass:"l"},[t._v("备注")]),t._v(" "),a("div",{staticClass:"text-overflow"},[t._v(t._s(t.ticketAuditInformationsd.remark))])])]):a("div",{staticClass:"block-wrap clearfix"},[a("div",{staticClass:"gy-form-group"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.buyerName,expression:"applyList.buyerName"}],attrs:{type:"text"},domProps:{value:t.applyList.buyerName},on:{input:function(e){e.target.composing||t.$set(t.applyList,"buyerName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(2),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{staticClass:"input-date",attrs:{type:"date","value-format":"timestamp"},model:{value:t.applyList.applicationDate,callback:function(e){t.$set(t.applyList,"applicationDate",e)},expression:"applyList.applicationDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(3),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.skuQuantity,expression:"applyList.skuQuantity"}],attrs:{type:"text",placeholder:"请输入开票数量"},domProps:{value:t.applyList.skuQuantity},on:{input:function(e){e.target.composing||t.$set(t.applyList,"skuQuantity",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(4),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.buyerTaxCode,expression:"applyList.buyerTaxCode"}],attrs:{type:"text",placeholder:"请输入税号"},domProps:{value:t.applyList.buyerTaxCode},on:{input:function(e){e.target.composing||t.$set(t.applyList,"buyerTaxCode",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{clear:"both"}},[t._m(5),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.amount,expression:"applyList.amount"}],attrs:{type:"text",placeholder:"请输入开票总金额"},domProps:{value:t.applyList.amount},on:{input:function(e){e.target.composing||t.$set(t.applyList,"amount",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(6),t._v(" "),a("el-select",{staticClass:"input-date",attrs:{placeholder:"请选择开户银行账户"},on:{change:t.changeBlank},model:{value:t.applyList.buyerBankName,callback:function(e){t.$set(t.applyList,"buyerBankName",e)},expression:"applyList.buyerBankName"}},t._l(t.newBank,function(t){return a("el-option",{key:t.bankAccId,attrs:{label:t.depositBankName,value:t.bankAccId}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{clear:"both"}},[t._m(7),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.buyerBankAccount,expression:"applyList.buyerBankAccount"}],attrs:{type:"text",readonly:""},domProps:{value:t.applyList.buyerBankAccount},on:{input:function(e){e.target.composing||t.$set(t.applyList,"buyerBankAccount",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(8),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.productName,expression:"applyList.productName"}],attrs:{type:"text"},domProps:{value:t.applyList.productName},on:{input:function(e){e.target.composing||t.$set(t.applyList,"productName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(9),t._v(" "),[a("el-select",{staticClass:"input-date",attrs:{placeholder:"请选择"},on:{change:t.changeProdTaxCode},model:{value:t.applyList.productTaxCode,callback:function(e){t.$set(t.applyList,"productTaxCode",e)},expression:"applyList.productTaxCode"}},t._l(t.commodCode,function(t){return a("el-option",{key:t.id,attrs:{label:t.taxCode,value:t.taxCode}})}),1)]],2),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(10),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.deliveredProductQuantity,expression:"applyList.deliveredProductQuantity"}],attrs:{type:"text",placeholder:"请输入转让货权总数量"},domProps:{value:t.applyList.deliveredProductQuantity},on:{input:function(e){e.target.composing||t.$set(t.applyList,"deliveredProductQuantity",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(11),t._v(" "),[a("el-select",{staticClass:"input-date",staticStyle:{width:"49%"},attrs:{placeholder:"请选择"},on:{change:function(e){return t.entryTicket()}},model:{value:t.applyList.hasReceiptInvoice,callback:function(e){t.$set(t.applyList,"hasReceiptInvoice",e)},expression:"applyList.hasReceiptInvoice"}},t._l(t.entryoptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}),1)],t._v(" "),[a("el-select",{staticClass:"input-date",staticStyle:{width:"49%"},attrs:{placeholder:"请选择"},on:{change:function(e){return t.entryTicket1()}},model:{value:t.receiptInvoiceStatus,callback:function(e){t.receiptInvoiceStatus=e},expression:"receiptInvoiceStatus"}},t._l(t.entryoptionTwo,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}),1)]],2),t._v(" "),a("div",{staticClass:"gy-form-group my-group"},[a("span",{staticClass:"l"},[t._v("已收上游发票(元)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.receiptInvoiceAmount,expression:"applyList.receiptInvoiceAmount"}],attrs:{type:"text",placeholder:"请输入本笔业务已收到上游发票总金额"},domProps:{value:t.applyList.receiptInvoiceAmount},on:{input:function(e){e.target.composing||t.$set(t.applyList,"receiptInvoiceAmount",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(12),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.operationUserName,expression:"applyList.operationUserName"}],attrs:{type:"text",placeholder:"请输入经办人"},domProps:{value:t.applyList.operationUserName},on:{input:function(e){e.target.composing||t.$set(t.applyList,"operationUserName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("收款凭证")]),t._v(" "),t.ticketAuditInformationsd.collectionFileList&&0!==t.ticketAuditInformationsd.collectionFileList.length?a("span",{on:{click:function(e){return t.showImg(t.ticketAuditInformationsd.collectionFileList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("销售交割凭证")]),t._v(" "),t.ticketAuditInformationsd.deliveredUrlList&&0!==t.ticketAuditInformationsd.deliveredUrlList.length?a("span",{on:{click:function(e){return t.showImg(t.ticketAuditInformationsd.deliveredUrlList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("采购交割凭证")]),t._v(" "),t.ticketAuditInformationsd.productSettlementBillList&&0!==t.ticketAuditInformationsd.productSettlementBillList.length?a("span",{on:{click:function(e){return t.showImg(t.ticketAuditInformationsd.productSettlementBillList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),70===t.ticketAuditInformationsd.status||60===t.ticketAuditInformationsd.status?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("开票凭证")]),t._v(" "),t.ticketAuditInformationsd.invoiceVoucherList&&0!==t.ticketAuditInformationsd.invoiceVoucherList.length?a("span",{on:{click:function(e){return t.showImg(t.ticketAuditInformationsd.invoiceVoucherList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("附件")]),t._v(" "),t.ticketAuditInformationsd.invoiceApplicationFiles&&0!==t.ticketAuditInformationsd.invoiceApplicationFiles.length?a("span",{on:{click:function(e){return t.showImg(t.ticketAuditInformationsd.invoiceApplicationFiles)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),70===t.ticketAuditInformationsd.status?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("快递单号")]),t._v(" "),a("span",[t._v(t._s(t.ticketAuditInformationsd.expressCode))])]):t._e(),t._v(" "),60===t.ticketAuditInformationsd.status&&0===t.doneFlg?a("div",{staticClass:"gy-form-group"},[t._m(13),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.courierNumberObj.expressCode,expression:"courierNumberObj.expressCode"}],attrs:{type:"text",placeholder:"请填写快递单号"},domProps:{value:t.courierNumberObj.expressCode},on:{input:function(e){e.target.composing||t.$set(t.courierNumberObj,"expressCode",e.target.value)}}})]):t._e(),t._v(" "),t.params.showPageInfo?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("状态")]),t._v(" "),a("div",{staticClass:"text-overflow"},[t._v(t._s(t.ticketAuditInformationsd.statusDesc))])]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{height:"auto"}},[a("span",{staticClass:"l"},[t._v("备注")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.applyList.remark,expression:"applyList.remark"}],staticClass:"gy-textarea",attrs:{rows:"3",maxlength:"100",placeholder:"请输入备注"},domProps:{value:t.applyList.remark},on:{input:function(e){e.target.composing||t.$set(t.applyList,"remark",e.target.value)}}})])]),t._v(" "),50===t.ticketAuditInformationsd.status&&0===t.doneFlg?a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[t._m(14),t._v(" "),a("gy-file-upload",{ref:"pFileUpload",on:{callbackFileUpload:t.onCallbackBuyFileUpload}})],1):t._e(),t._v(" "),t.isShow&&0===t.doneFlg?[a("div",{staticClass:"title"},[t._v("审批备注")]),t._v(" "),a("div",{staticClass:"block-wrap clearfix"},[a("div",{staticClass:"tex-wrapper"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"gy-textarea",domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])]:t._e(),t._v(" "),a("div",{staticClass:"foot",staticStyle:{"margin-top":"20px"}},[t.isDefault?[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])]:t._e(),t._v(" "),4!=t.params.homeFromFlg||t.params.showPageInfo?t._e():[a("button",{staticClass:"gy-button-normal",on:{click:t.cancleSubmit}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.applyTicket()}}},[t._v("提交")])],t._v(" "),t.ticketAuditInformationsd.status<50&&0===t.doneFlg?[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),a("button",{staticClass:"gy-button-normal",on:{click:t.reject}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.approvedClick(1)}}},[t._v("通过")])]:t._e(),t._v(" "),t.isCanSave?[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.approvedClick()}}},[t._v("保存")])]:t._e()],2),t._v(" "),1===t.params.homeFromFlg||2===t.params.homeFromFlg?a("div",{staticClass:"button-wrap"},[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.comment()}}},[t._v("评论")])]):t._e(),t._v(" "),a("bank-acc",{ref:"bankAcc",on:{onSaveAccInfo:t.popupPaySubmission}}),t._v(" "),a("gy-operation-history",{ref:"operationHis"}),t._v(" "),!0===t.commentDiog.dialogVisibleRemark?a("gy-comment-remark",{attrs:{dialog:t.commentDiog,invoice:t.invoiceCommpany}}):t._e(),t._v(" "),a("gy-file-view",{ref:"contFileView"})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("i",[this._v("*")]),this._v("快递单号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("开票单位名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("申请日期")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("开票数量(吨)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("税号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("开票总金额(元)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("开户银行")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("银行账号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("品名")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("商品税务编码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("span",[this._v("转让货权总数量(吨)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("进项票")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l spanLeft"},[e("i",[this._v("*")]),this._v("经办人")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("i",[this._v("*")]),this._v("快递单号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("i",{staticStyle:{color:"red"}},[this._v("*")]),this._v("发票凭证")])}]};var us=a("C7Lr")(cs,ds,!1,function(t){a("IYtc")},null,null).exports,ps={name:"financialConfirmation",components:{gyContract:ns,gyFileView:Ke,gyOperationHistory:oa},data:function(){return{ticketFinancialInformations:{receiptInvoiceUrlList:[]},saleOrderId:null,contEssId:null,purchaseOrderId:null,approvedList:{},basicInformationDeliveryList:[],skuQuantity:"",odrContactName:"",dtoParams:{},visible:!1,imgLists:[],invoiceHistory:[],invoiceHistoryObj:{},doneFlg:null,sellerInfo:{},buyerInfo:{},form:{}}},mounted:function(){this.contEssId=this.$route.query.id,this.saleOrderId=this.$route.query.saleOrderId,this.purchaseOrderId=this.$route.query.purchaseOrderId,this.doneFlg=this.$route.query.doneFlg,this.ticketInformation(),this.contrtactBase()},methods:{contrtactBase:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+this.contEssId).then(function(e){0===e.data.code&&(t.form=e.data.data)})},isShowImg:function(t){this.$refs.contFileView.open4MultiFile(t)},callBack:function(){this.$router.go(-1)},invoiceHistoryClick:function(){this.invoiceHistoryObj.targetId=this.ticketFinancialInformations.invoiceReceiptId,this.invoiceHistoryObj.targetType=6,this.$refs.operationHis.display(this.$api.contract.approve1History,this.invoiceHistoryObj)},ticketInformation:function(){var t=this;t.$http.get(t.$api.invoice.getDetail+"/"+t.purchaseOrderId).then(function(e){0===e.data.code&&(t.ticketFinancialInformations=e.data.data,t.invoiceHistoryClick())}).catch(function(e){t.$message(e)})},approvedClick:function(t){var e=this;this.approvedList.invoiceReceiptId=this.ticketFinancialInformations.invoiceReceiptId,this.approvedList.contEssId=this.contEssId,this.approvedList.todoId=this.$route.query.todoId,this.approvedList.allowedFunctionsId=38,this.$http.post(this.$api.invoice.financialSure,this.approvedList).then(function(t){0===t.data.code&&(e.$message({message:t.data.message,type:"success"}),e.$router.go(-1))})}}},vs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"financialConfirmation my-invoice financial_add"},[a("gy-contract",{attrs:{query:t.form}}),t._v(" "),a("div",{staticClass:"title"},[t._v("收票信息")]),t._v(" "),a("div",{staticClass:"block-wrap clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("span",[t._v(t._s(t.ticketFinancialInformations.sellerName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("发票月份")]),t._v(" "),a("span",[t._v(t._s(t._f("invoiceMonthValue")(t.ticketFinancialInformations.provideInvoiceType,t.ticketFinancialInformations)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("span",[t._v(t._s(t.ticketFinancialInformations.productName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.ticketFinancialInformations.quantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("发票总金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.ticketFinancialInformations.amount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("单价(元/吨)")]),t._v(" "),21===t.ticketFinancialInformations.skuPriceType||22===t.ticketFinancialInformations.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.ticketFinancialInformations.productUnitPrice,!0)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建日期")]),t._v(" "),a("span",[t._v(t._s(t._f("date")(t.ticketFinancialInformations.createdDate,1)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("收票凭证")]),t._v(" "),0!==t.ticketFinancialInformations.receiptInvoiceUrlList.length?a("span",[a("i",{staticClass:"iconfont icon-photo",on:{click:function(e){return t.isShowImg(t.ticketFinancialInformations.receiptInvoiceUrlList)}}})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建人")]),t._v(" "),a("span",[t._v(t._s(t.ticketFinancialInformations.createdName))])]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[t._v("采购合同")]),t._v(" "),a("span",[t.ticketFinancialInformations.purchaseContractUrl&&0!==t.ticketFinancialInformations.purchaseContractUrl.length?a("i",{staticClass:"iconfont icon-photo",on:{click:function(e){return t.isShowImg(t.ticketFinancialInformations.purchaseContractUrl)}}}):a("i",{staticClass:"iconfont icon-photo-null"})])])]),t._v(" "),a("div",{staticClass:"button-wrap"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.callBack()}}},[t._v("返回")]),t._v(" "),10!==t.ticketFinancialInformations.status||"0"!==t.doneFlg&&0!==t.doneFlg?t._e():a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.approvedClick(t.item=1)}}},[t._v("财务确认")])]),t._v(" "),a("gy-operation-history",{ref:"operationHis"}),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[]};var ms=a("C7Lr")(ps,vs,!1,function(t){a("QnwB"),a("h/cL")},"data-v-3413c1ac",null).exports,hs={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},ys=a("C7Lr")(null,hs,!1,null,null,null).exports,fs=a("aA9S"),_s=a.n(fs),gs=a("6RIa"),Cs={props:{compData:Object,orderData:Object},data:function(){return{}},methods:{}},bs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("品牌")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.orderData.brand,callback:function(e){t.$set(t.orderData,"brand",e)},expression:"orderData.brand"}},t._l(t.compData.compInfo.brandList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])])},staticRenderFns:[]},ws=a("C7Lr")(Cs,bs,!1,null,null,null).exports,Is={props:{compData:Object,orderData:Object},data:function(){return{}},watch:{"orderData.skuQuantity":function(t,e){this.$set(this.orderData,"chattingAmount",t*this.orderData.priceOfWeight)},"orderData.priceOfWeight":function(t,e){!t&&this.$set(this.orderData,"chattingAmount",null)}},methods:{onchangeChatFee:function(){null==this.orderData.skuQuantity||void 0===this.orderData.skuQuantity||""===this.orderData.skuQuantity?(this.orderData.priceOfWeight=null,this.$message.error("请先输入合同数量")):this.orderData.chattingAmount=this.orderData.skuQuantity*this.orderData.priceOfWeight}}},ks={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("撮合费用")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{staticStyle:{width:"79%"},attrs:{placeholder:"请选择"},on:{change:t.onchangeChatFee},model:{value:t.orderData.priceOfWeight,callback:function(e){t.$set(t.orderData,"priceOfWeight",e)},expression:"orderData.priceOfWeight"}},t._l(t.compData.compInfo.priceOfWeightList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),t.orderData.priceOfWeight?a("span",[t._v(t._s(t.orderData.chattingAmount)+"元")]):t._e()],1)])])])},staticRenderFns:[]},xs=a("C7Lr")(Is,ks,!1,null,null,null).exports,Ds={props:{compData:Object,orderData:Object},data:function(){return{}},watch:{"orderData.priceOfWeight":function(t,e){!t&&(this.orderData.chattingCompanyName="")}},methods:{}},Ss={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.orderData.priceOfWeight?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(0),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.chattingCompanyName,expression:"orderData.chattingCompanyName"}],attrs:{type:"text",placeholder:"请输入撮合公司"},domProps:{value:t.orderData.chattingCompanyName},on:{input:function(e){e.target.composing||t.$set(t.orderData,"chattingCompanyName",e.target.value)}}})])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("撮合公司")])}]},Ts=a("C7Lr")(Ds,Ss,!1,null,null,null).exports,Fs={props:{compData:Object,orderData:Object},data:function(){return{isShow:!0,list:[],list1:[],arr1:[{id:1,name:"卖方收款后"},{id:2,name:"买方付款后"}],arr2:[{id:3,name:"卖方送货"},{id:4,name:"买方自提"}]}},watch:{"orderData.paymentType":function(t,e){this.list=0===t?this.arr1:this.arr2,0!==t&&1!==t||(this.$set(this.orderData,"consignmentTime",null),this.$set(this.orderData,"consignmentTimeText",null)),-1===t?(this.isShow=!1,this.orderData.consignmentTime=null,this.orderData.consignmentTimeText=null):this.isShow=!0}},mounted:function(){for(var t=0;t<31;t++)this.list1.push({name:t});this.list=this.arr1},methods:{}},Ns={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isShow?a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("提/交货时间")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.consignmentTime,callback:function(e){t.$set(t.orderData,"consignmentTime",e)},expression:"orderData.consignmentTime"}},t._l(t.list,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),0===t.orderData.paymentType?a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.consignmentTimeText,callback:function(e){t.$set(t.orderData,"consignmentTimeText",e)},expression:"orderData.consignmentTimeText"}},t._l(t.list1,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1):t._e()])]),t._v(" "),0===t.orderData.paymentType&&t.orderData.consignmentTime&&t.orderData.consignmentTimeText?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"}),t._v(" "),a("div",{staticClass:"essential-text"},[1===t.orderData.consignmentTime?a("span",[t._v("\n                    "+t._s(t.orderData.consignmentTimeText)+"个工作日内完成交货\n                ")]):t._e(),t._v(" "),2===t.orderData.consignmentTime?a("span",[t._v("\n                    "+t._s(t.orderData.consignmentTimeText)+"个工作日内提货\n                ")]):t._e()])])]):t._e(),t._v(" "),1===t.orderData.paymentType&&t.orderData.consignmentTime?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"}),t._v(" "),a("div",{staticClass:"essential-text"},[3===t.orderData.consignmentTime?a("span",[t._v("\n                    货到达买方指定地点，买方付款后卸货\n                ")]):t._e(),t._v(" "),4===t.orderData.consignmentTime?a("div",[t._v("\n                    买方提货后"),a("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择"},model:{value:t.orderData.consignmentTimeText,callback:function(e){t.$set(t.orderData,"consignmentTimeText",e)},expression:"orderData.consignmentTimeText"}},t._l(t.list1,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1),t._v("个工作日内完成付款\n                ")],1):t._e()])])]):t._e()]):t._e()},staticRenderFns:[]},Ls=a("C7Lr")(Fs,Ns,!1,null,null,null).exports,Ps={props:{compData:Object,orderData:Object},data:function(){return{}},watch:{"orderData.deliveryDateFlag":function(t,e){2===t&&(this.orderData.deliveryEndDate=null)}},methods:{pickertime:function(){1===this.orderData.deliveryDateFlag&&this.orderData.deliveryBeginDate>this.orderData.deliveryEndDate&&null!==this.orderData.deliveryEndDate&&(this.$message({message:"开始时间不能大于结束时间",type:"error"}),this.orderData.deliveryBeginDate=null)}}},As={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("交割日期")]),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"flex-direction":"column"}},[a("div",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.deliveryDateFlag,callback:function(e){t.$set(t.orderData,"deliveryDateFlag",e)},expression:"orderData.deliveryDateFlag"}},t._l(t.compData.compInfo.deliveryDateFlags,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"margin-right":"0"}},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date",editable:!1,"value-format":"timestamp",placeholder:2===t.orderData.deliveryDateFlag?"截止日期":"开始日期"},on:{change:t.pickertime},model:{value:t.orderData.deliveryBeginDate,callback:function(e){t.$set(t.orderData,"deliveryBeginDate",e)},expression:"orderData.deliveryBeginDate"}})],1),t._v(" "),2!==t.orderData.deliveryDateFlag?[a("div",{staticClass:"c"},[t._v("-")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date",editable:!1,"value-format":"timestamp",placeholder:"结束日期"},on:{change:t.pickertime},model:{value:t.orderData.deliveryEndDate,callback:function(e){t.$set(t.orderData,"deliveryEndDate",e)},expression:"orderData.deliveryEndDate"}})],1)]:t._e()],2)])])])])},staticRenderFns:[]},$s=a("C7Lr")(Ps,As,!1,null,null,null).exports,Os={props:{compData:Object,orderData:Object},data:function(){return{}},methods:{changeWarehouse:function(t){if(-1!==t)for(var e=0;e<this.compData.compInfo.warehouseList.length;e++)t===this.compData.compInfo.warehouseList[e].value&&(this.orderData.deliveryWarehouseName=this.compData.compInfo.warehouseList[e].label);else this.orderData.deliveryWarehouseName=null}}},Es={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("交割地点")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.changeWarehouse(e)}},model:{value:t.orderData.deliveryWarehouseId,callback:function(e){t.$set(t.orderData,"deliveryWarehouseId",e)},expression:"orderData.deliveryWarehouseId"}},t._l(t.compData.compInfo.warehouseList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),-1==t.orderData.deliveryWarehouseId?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"}),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderData.deliveryWarehouseName,expression:"orderData.deliveryWarehouseName"}],staticClass:"gy-textarea",attrs:{type:"text",maxlength:"100",placeholder:"请输入，自定义文本选填，限制字数100字"},domProps:{value:t.orderData.deliveryWarehouseName},on:{input:function(e){e.target.composing||t.$set(t.orderData,"deliveryWarehouseName",e.target.value)}}})])])]):t._e()])},staticRenderFns:[]},Bs=a("C7Lr")(Os,Es,!1,null,null,null).exports,Ms={props:{compData:Object,orderData:Object},data:function(){return{dockWareObj:{},baseID:null}},created:function(){this.dockWareObj.value=this.orderData.deliveryWarehouseType,this.dockWareObj.label=this.orderData.deliveryWarehouseName,1===this.orderData.deliveryWarehouseType&&(this.baseID=this.orderData.deliveryWarehouseId,this.dockWareObj.list=this.compData.compInfo.dockWareList[0].list),2===this.orderData.deliveryWarehouseType&&(this.dockWareObj.list=this.compData.compInfo.dockWareList[1].list,this.baseID=this.orderData.wareDockId)},methods:{changeWarehouse:function(t){this.orderData.deliveryWarehouseType=t.value,this.orderData.deliveryWarehouseName="",this.baseID=null},handelChange:function(t){var e=this;this.dockWareObj.list.forEach(function(a){t===a.value&&(e.orderData.deliveryWarehouseName=a.label)}),1===this.dockWareObj.value&&(this.orderData.deliveryWarehouseId=this.baseID,this.orderData.wareDockId=null),2===this.dockWareObj.value&&(this.orderData.wareDockId=this.baseID,this.orderData.deliveryWarehouseId=null)}}},Rs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("交割地点")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeWarehouse},model:{value:t.dockWareObj,callback:function(e){t.dockWareObj=e},expression:"dockWareObj"}},t._l(t.compData.compInfo.dockWareList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t}})}),1),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handelChange},model:{value:t.baseID,callback:function(e){t.baseID=e},expression:"baseID"}},t._l(t.dockWareObj.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)])])])},staticRenderFns:[]},Us=a("C7Lr")(Ms,Rs,!1,null,null,null).exports,zs={props:{compData:Object,orderData:Object},data:function(){return{}},methods:{}},Vs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("交割方式")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.deliveryType,callback:function(e){t.$set(t.orderData,"deliveryType",e)},expression:"orderData.deliveryType"}},t._l(t.compData.compInfo.deliveryCreateEssList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)])])},staticRenderFns:[]},Qs=a("C7Lr")(zs,Vs,!1,null,null,null).exports,js={props:{compData:Object,orderData:Object},data:function(){return{}},mounted:function(){0===this.orderData.depositType&&(this.orderData.depositAmount=null,this.orderData.depositRatio=null)},watch:{"orderData.depositType":function(t,e){1===t&&(this.orderData.depositAmount=null),2===t&&(this.orderData.depositRatio=null),0===t&&(this.orderData.depositRatio=null,this.orderData.depositAmount=null)}},methods:{handleInput:function(t){t.target.value=t.target.value.match(/^\d*(\.?\d{0,2})/g)[0]||null,1===this.orderData.depositType?this.orderData.depositRatio=t.target.value:2===this.orderData.depositType&&(this.orderData.depositAmount=t.target.value)}}},qs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("保证金")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.depositType,callback:function(e){t.$set(t.orderData,"depositType",e)},expression:"orderData.depositType"}},t._l(t.compData.compInfo.depositTypeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),1==t.orderData.depositType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.depositRatio,expression:"orderData.depositRatio"}],staticStyle:{"margin-top":"1px"},attrs:{type:"text",placeholder:"请输入比例"},domProps:{value:t.orderData.depositRatio},on:{input:[function(e){e.target.composing||t.$set(t.orderData,"depositRatio",e.target.value)},t.handleInput]}}):t._e(),t._v(" "),2==t.orderData.depositType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.depositAmount,expression:"orderData.depositAmount"}],staticStyle:{"margin-top":"1px"},attrs:{type:"text",placeholder:"请输入金额"},domProps:{value:t.orderData.depositAmount},on:{input:[function(e){e.target.composing||t.$set(t.orderData,"depositAmount",e.target.value)},t.handleInput]}}):t._e(),t._v(" "),1==t.orderData.depositType?a("span",{staticClass:"unit"},[t._v("%")]):t._e(),t._v(" "),2==t.orderData.depositType?a("span",{staticClass:"unit"},[t._v("元")]):t._e()],1)])])},staticRenderFns:[]},Ws=a("C7Lr")(js,qs,!1,null,null,null).exports,Hs={props:{compData:Object,orderData:Object},data:function(){return{}}},Ks={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("追保约定")]),t._v(" "),a("div",{staticClass:"essential-text cont-ess-zbyd"},[a("div",{staticClass:"q",staticStyle:{"padding-left":"10px"}},[t._v("跌")]),t._v(" "),a("div",{staticClass:"w"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.depositRatioSubtract,expression:"orderData.depositRatioSubtract"}],staticStyle:{"text-align":"center"},attrs:{type:"text"},domProps:{value:t.orderData.depositRatioSubtract},on:{input:function(e){e.target.composing||t.$set(t.orderData,"depositRatioSubtract",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"e"},[t._v("%")]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"t"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.depositRatioAppend,expression:"orderData.depositRatioAppend"}],staticStyle:{"text-align":"center"},attrs:{type:"text"},domProps:{value:t.orderData.depositRatioAppend},on:{input:function(e){e.target.composing||t.$set(t.orderData,"depositRatioAppend",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"y"},[t._v("%")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"r"},[e("span",{staticStyle:{"padding-left":"-2%","text-align":"right"}},[this._v("补")])])}]},Xs=a("C7Lr")(Hs,Ks,!1,null,null,null).exports,Js={props:{compData:Object,orderData:Object},data:function(){return{}},watch:{"orderData.depositAppendBenchmark":function(t,e){"CCF"!==t&&"CCF"!==e||(this.orderData.depositAppendArea="")}}},Gs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return"CCF"===t.orderData.depositAppendBenchmark||"其他"===t.orderData.depositAppendBenchmark?a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("追保基准")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.orderData.depositAppendBenchmark,callback:function(e){t.$set(t.orderData,"depositAppendBenchmark",e)},expression:"orderData.depositAppendBenchmark"}},t._l(t.compData.compInfo.baselineRecovery,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"}),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderData.depositAppendArea,expression:"orderData.depositAppendArea"}],staticClass:"gy-textarea",attrs:{type:"text",maxlength:"100",placeholder:"请输入"},domProps:{value:t.orderData.depositAppendArea},on:{input:function(e){e.target.composing||t.$set(t.orderData,"depositAppendArea",e.target.value)}}})])])])]):a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("追保基准")]),t._v(" "),a("div",{staticClass:"essential-text cont-ess-zbyd"},[a("div",{staticClass:"w"},[a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.orderData.depositAppendBenchmark,callback:function(e){t.$set(t.orderData,"depositAppendBenchmark",e)},expression:"orderData.depositAppendBenchmark"}},t._l(t.compData.compInfo.baselineRecovery,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)]),t._v(" "),a("div",{staticClass:"t"},[a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.orderData.depositAppendArea,callback:function(e){t.$set(t.orderData,"depositAppendArea",e)},expression:"orderData.depositAppendArea"}},t._l(t.compData.compInfo.restaurants,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])])])])])},staticRenderFns:[]},Zs=a("C7Lr")(Js,Gs,!1,null,null,null).exports,Ys={props:{compData:Object,orderData:Object,bizType:Number,needRefresh:Number},data:function(){return{contractCodeUp:null}},methods:{onSeachContract:function(t){this.$parent.onSeachContract(t)},delectSeachContract:function(){this.orderData.contractCode=null,this.orderData.longtermContractOrderId=null,this.contractCodeUp=null}},watch:{needRefresh:function(t,e){t&&(this.contractCodeUp=this.orderData.contractCode)}}},ti={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 6===t.bizType?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"}):t._e(),t._v("上游合约")]),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"flex-direction":"column"}},[a("div",{staticClass:"essential-text",staticStyle:{"margin-right":"0"}},[a("div",{staticClass:"d"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractCodeUp,expression:"contractCodeUp"}],attrs:{type:"text",placeholder:"请选择上游合约编号",readonly:""},domProps:{value:t.contractCodeUp},on:{input:function(e){e.target.composing||(t.contractCodeUp=e.target.value)}}}),t._v(" "),null!==t.contractCodeUp&&void 0!==t.contractCodeUp?a("i",{staticClass:"el-icon-close",staticStyle:{position:"absolute",top:"11px",right:"30px",cursor:"pointer"},on:{click:t.delectSeachContract}}):t._e(),t._v(" "),a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",right:"5px",top:"3px"},on:{click:function(e){return t.onSeachContract("上游")}}})])])])])]):t._e()},staticRenderFns:[]},ei=a("C7Lr")(Ys,ti,!1,null,null,null).exports,ai={props:{compData:Object,orderData:Object,bizType:Number,needRefresh:Number},data:function(){return{contractCodeDown:null}},methods:{onSeachContract:function(t){this.$parent.onSeachContract(t)},delectSeachContract:function(){this.orderData.contractCode=null,this.orderData.longtermContractOrderId=null,this.contractCodeDown=null}},watch:{needRefresh:function(t,e){t&&(this.contractCodeDown=this.orderData.contractCode)}}},si={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 6===t.bizType?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"}):t._e(),t._v("下游合约")]),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"flex-direction":"column"}},[a("div",{staticClass:"essential-text",staticStyle:{"margin-right":"0"}},[a("div",{staticClass:"d"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contractCodeDown,expression:"contractCodeDown"}],attrs:{type:"text",placeholder:"请选择下游合约编号",readonly:""},domProps:{value:t.contractCodeDown},on:{input:function(e){e.target.composing||(t.contractCodeDown=e.target.value)}}}),t._v(" "),null!==t.contractCodeDown&&void 0!==t.contractCodeDown?a("i",{staticClass:"el-icon-close",staticStyle:{position:"absolute",top:"11px",right:"30px",cursor:"pointer"},on:{click:t.delectSeachContract}}):t._e(),t._v(" "),a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",right:"5px",top:"3px"},on:{click:function(e){return t.onSeachContract("下游")}}})])])])])]):t._e()},staticRenderFns:[]},ii=a("C7Lr")(ai,si,!1,null,null,null).exports,ni={props:{compData:Object,orderData:Object},data:function(){return{}}},li={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("生产商")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.manufacturer,expression:"orderData.manufacturer"}],staticClass:"gy-input",attrs:{placeholder:"请输入生产商"},domProps:{value:t.orderData.manufacturer},on:{input:function(e){e.target.composing||t.$set(t.orderData,"manufacturer",e.target.value)}}})])])])])},staticRenderFns:[]},oi=a("C7Lr")(ni,li,!1,null,null,null).exports,ri={components:{gyFileView:Ke},props:{fileList:Array},data:function(){return{boolUpload:!0,imgData:[],dialogImageUrl:""}},created:function(){var t=this;this.fileList&&this.fileList.length>0&&this.fileList.map(function(e,a){t.imgData.push({name:a,url:e,fileName:a,fileUrl:e,fileTypeAlias:t.$tools.getFileTypeAlias(e)})})},methods:{elPlus:function(t){var e=[];e.push(t),this.$refs.uFileView.open(e)},removeImg:function(t){this.imgData.splice(t,1),this.$emit("callbackFileUpload",this.imgData)},onFileUpload:function(t){var e=this,a=new FormData;a.append("file",t.file),a.append("storage","platform-mgmt"),this.$http.post(this.$api.upload.imgUpload,a,{"Content-Type":"multipart/form-data"}).then(function(t){if(0===t.data.code){var a=t.data.data;a.name=a.fileName,a.url=a.fileUrl,a.fileTypeAlias=e.$tools.getFileTypeAlias(a.fileUrl),e.imgData.push(a),e.$emit("callbackFileUpload",e.imgData)}else e.$alert(t.data.code+" "+t.data.message)})}}},ci={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"file-upload"},[t._l(t.imgData,function(e,i){return[s("div",{key:i,staticClass:"contImgItem"},["img"===e.fileTypeAlias?s("img",{attrs:{src:e.url,alt:""}}):t._e(),t._v(" "),"pdf"===e.fileTypeAlias?s("img",{attrs:{src:a("lqqb")}}):t._e(),t._v(" "),"word"===e.fileTypeAlias?s("img",{attrs:{src:a("qQEj")}}):t._e(),t._v(" "),"excel"===e.fileTypeAlias?s("img",{attrs:{src:a("6DX5")}}):t._e(),t._v(" "),s("div",[s("i",{staticClass:"el-icon-zoom-in plus",on:{click:function(a){return t.elPlus(e)}}}),t._v(" "),s("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.removeImg(i)}}})])])]}),t._v(" "),s("el-upload",{staticClass:"upload-demo-tz",attrs:{action:"api",multiple:"","file-list":t.imgData,"list-type":"picture-card",drag:t.boolUpload,"show-file-list":!1,"http-request":t.onFileUpload}},[s("i",{staticClass:"el-icon-upload"}),t._v(" "),s("div",{staticClass:"el-upload__text"},[t._v("拖到此处，或"),s("em",[t._v("点击上传")])])]),t._v(" "),s("gy-file-view",{ref:"uFileView"})],2)},staticRenderFns:[]};var di=a("C7Lr")(ri,ci,!1,function(t){a("As1V"),a("ELCf")},"data-v-9fd8a7b2",null).exports,ui={props:{compData:Object,orderData:Object},components:{gyFileUpload:di},data:function(){return{outgoingQualityBill:[]}},methods:{onCallbackBuyFileUpload:function(t){var e=this;this.orderData.outgoingQualityBill=[],t.forEach(function(t){e.orderData.outgoingQualityBill.push(t.fileUrl)})}}},pi={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-row"},[e("div",{staticClass:"essential-item"},[e("div",{staticClass:"essential-title"},[this.compData.isNecessary?e("span",{staticClass:"isMust"},[this._v("*")]):this._e(),this._v("出厂质检单")]),this._v(" "),e("div",{staticClass:"essential-text"},[e("gy-file-upload",{ref:"pFileUpload",attrs:{fileList:this.orderData.outgoingQualityBill},on:{callbackFileUpload:this.onCallbackBuyFileUpload}})],1)])])},staticRenderFns:[]},vi=a("C7Lr")(ui,pi,!1,null,null,null).exports,mi={props:{compData:Object,orderData:Object},data:function(){return{}},mounted:function(){},methods:{}},hi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("包装标准")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-radio-group",{model:{value:t.orderData.packagingStandard,callback:function(e){t.$set(t.orderData,"packagingStandard",e)},expression:"orderData.packagingStandard"}},t._l(t.compData.compInfo.packagingStandards,function(e){return a("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1)])])},staticRenderFns:[]},yi=a("C7Lr")(mi,hi,!1,null,null,null).exports,fi={props:{compData:Object,orderData:Object},data:function(){return{packagingStandardMulti:[]}},watch:{packagingStandardMulti:function(t,e){this.$set(this.orderData,"packagingStandardMulti",t)}},mounted:function(){null!=this.orderData.packagingStandardMulti&&void 0!==this.orderData.packagingStandardMulti&&""!==this.orderData.packagingStandardMulti&&this.orderData.packagingStandardMulti?this.packagingStandardMulti=this.orderData.packagingStandardMulti:this.orderData.packagingStandardMulti=[]},methods:{}},_i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("包装标准")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-checkbox-group",{model:{value:t.packagingStandardMulti,callback:function(e){t.packagingStandardMulti=e},expression:"packagingStandardMulti"}},t._l(t.compData.compInfo.packagingStandards,function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])])},staticRenderFns:[]},gi=a("C7Lr")(fi,_i,!1,null,null,null).exports,Ci={props:{compData:Object,orderData:Object},data:function(){return{}},created:function(){},methods:{pickertime:function(){this.orderData.paymentBeginDate>this.orderData.paymentEndDate&&null!==this.orderData.paymentEndDate&&(this.$message({message:"开始时间不能大于结束时间",type:"error"}),this.orderData.paymentBeginDate=null)}}},bi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return 309===t.orderData.prdSkuId||511===t.orderData.prdSkuId||284===t.orderData.prdSkuId||530===t.orderData.prdSkuId||378===t.orderData.prdSkuId?a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("付款日期")]),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"flex-direction":"column"}},[a("div",[a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.orderData.paymentDateFlag,callback:function(e){t.$set(t.orderData,"paymentDateFlag",e)},expression:"orderData.paymentDateFlag"}},t._l(t.$constant.paymentDateFlag,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"margin-right":"0"}},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:2===t.orderData.paymentDateFlag?"截止日期":"开始日期"},on:{change:t.pickertime},model:{value:t.orderData.paymentBeginDate,callback:function(e){t.$set(t.orderData,"paymentBeginDate",e)},expression:"orderData.paymentBeginDate"}})],1),t._v(" "),2!==t.orderData.paymentDateFlag?[a("div",{staticClass:"c"},[t._v("-")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},on:{change:t.pickertime},model:{value:t.orderData.paymentEndDate,callback:function(e){t.$set(t.orderData,"paymentEndDate",e)},expression:"orderData.paymentEndDate"}})],1)]:t._e(),t._v(" "),2==t.orderData.paymentDateFlag?a("span",{staticClass:"date-text-r"},[t._v("前(含当日)")]):t._e()],2)])])])]):t._e()},staticRenderFns:[]},wi=a("C7Lr")(Ci,bi,!1,null,null,null).exports,Ii={props:{compData:Object,orderData:Object},data:function(){return{}},watch:{"orderData.paymentType":function(t,e){-1!==t&&(this.orderData.paymentTypeText=null)}},methods:{}},ki={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("付款方式")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.paymentType,callback:function(e){t.$set(t.orderData,"paymentType",e)},expression:"orderData.paymentType"}},t._l(t.compData.compInfo.paymentType,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),-1!==t.orderData.paymentType?a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.orderData.payChannel,callback:function(e){t.$set(t.orderData,"payChannel",e)},expression:"orderData.payChannel"}},t._l(t.compData.compInfo.paymentChannel,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1):a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.paymentTypeText,expression:"orderData.paymentTypeText"}],staticClass:"gy-input",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.orderData.paymentTypeText},on:{input:function(e){e.target.composing||t.$set(t.orderData,"paymentTypeText",e.target.value)}}})],1)])])])},staticRenderFns:[]},xi=a("C7Lr")(Ii,ki,!1,null,null,null).exports,Di={props:{compData:Object,orderData:Object},data:function(){return{}},watch:{"orderData.prodInspectionFee":function(t,e){-1===t&&(this.orderData.prodInspectionFeeText=null)}},methods:{}},Si={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("商检费用")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.prodInspectionFee,callback:function(e){t.$set(t.orderData,"prodInspectionFee",e)},expression:"orderData.prodInspectionFee"}},t._l(t.compData.compInfo.prodInspectionFeeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),-1===t.orderData.prodInspectionFee?a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.prodInspectionFeeText,expression:"orderData.prodInspectionFeeText"}],staticClass:"gy-input",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.orderData.prodInspectionFeeText},on:{input:function(e){e.target.composing||t.$set(t.orderData,"prodInspectionFeeText",e.target.value)}}}):t._e()],1)])])])},staticRenderFns:[]},Ti=a("C7Lr")(Di,Si,!1,null,null,null).exports,Fi={props:{compData:Object,orderData:Object},data:function(){return{}},watch:{"orderData.prodInspectionType":function(t,e){-1===t&&(this.orderData.prodInspectionTypeText=null)}},methods:{}},Ni={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("商检类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.prodInspectionType,callback:function(e){t.$set(t.orderData,"prodInspectionType",e)},expression:"orderData.prodInspectionType"}},t._l(t.compData.compInfo.prodInspectionTypeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),-1===t.orderData.prodInspectionType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.prodInspectionTypeText,expression:"orderData.prodInspectionTypeText"}],staticClass:"gy-input",attrs:{placeholder:"请输入",type:"text"},domProps:{value:t.orderData.prodInspectionTypeText},on:{input:function(e){e.target.composing||t.$set(t.orderData,"prodInspectionTypeText",e.target.value)}}}):t._e()],1)])])])},staticRenderFns:[]},Li=a("C7Lr")(Fi,Ni,!1,null,null,null).exports,Pi={props:{compData:Object,orderData:Object},data:function(){return{}},methods:{}},Ai={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("发票月份")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-radio-group",{model:{value:t.orderData.provideInvoiceType,callback:function(e){t.$set(t.orderData,"provideInvoiceType",e)},expression:"orderData.provideInvoiceType"}},[a("el-radio",{attrs:{label:1}},[t._v("交割月")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("交割次月")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("交割后")]),t._v(" "),3===t.orderData.provideInvoiceType||"3"===t.orderData.provideInvoiceType?a("span",{staticStyle:{"font-size":"13px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.provideInvoiceDays,expression:"orderData.provideInvoiceDays"}],staticStyle:{width:"50px"},attrs:{type:"text"},domProps:{value:t.orderData.provideInvoiceDays},on:{input:function(e){e.target.composing||t.$set(t.orderData,"provideInvoiceDays",e.target.value)}}}),t._v("工作日")]):t._e()],1)],1)])])},staticRenderFns:[]},$i=a("C7Lr")(Pi,Ai,!1,null,null,null).exports,Oi={props:{compData:Object,orderData:Object},data:function(){return{}},watch:{"orderData.qualityStandard":function(t,e){"-"===t&&(this.orderData.qualityStandardOther=null)}},methods:{}},Ei={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("质量标准")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",clearable:!t.compData.isNecessary},model:{value:t.orderData.qualityStandard,callback:function(e){t.$set(t.orderData,"qualityStandard",e)},expression:"orderData.qualityStandard"}},t._l(t.compData.compInfo.qualityStandards,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),"其他"===t.orderData.qualityStandard?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"}),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderData.qualityStandardAux,expression:"orderData.qualityStandardAux"}],staticClass:"gy-textarea",attrs:{type:"text",maxlength:"100",placeholder:"请输入，自定义文本选填，限制字数100字"},domProps:{value:t.orderData.qualityStandardAux},on:{input:function(e){e.target.composing||t.$set(t.orderData,"qualityStandardAux",e.target.value)}}})])])]):t._e()])},staticRenderFns:[]},Bi=a("C7Lr")(Oi,Ei,!1,null,null,null).exports,Mi={props:{compData:Object,orderData:Object},data:function(){return{}},methods:{}},Ri={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderData.remarks,expression:"orderData.remarks"}],staticClass:"gy-textarea",attrs:{maxlength:"2500",name:"",cols:"30",rows:"10",placeholder:"备注最多可填写2500字"},domProps:{value:t.orderData.remarks},on:{input:function(e){e.target.composing||t.$set(t.orderData,"remarks",e.target.value)}}})])])])},staticRenderFns:[]},Ui=a("C7Lr")(Mi,Ri,!1,null,null,null).exports,zi={props:{compData:Object,orderData:Object},data:function(){return{}},watch:{},methods:{}},Vi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("结算数量")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.settlementQtyType,callback:function(e){t.$set(t.orderData,"settlementQtyType",e)},expression:"orderData.settlementQtyType"}},t._l(t.compData.compInfo.settlementQtyTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),-1===t.orderData.settlementQtyType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.settlementQtyTypeAux,expression:"orderData.settlementQtyTypeAux"}],staticClass:"gy-input",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.orderData.settlementQtyTypeAux},on:{input:function(e){e.target.composing||t.$set(t.orderData,"settlementQtyTypeAux",e.target.value)}}}):t._e()],1)])])])},staticRenderFns:[]},Qi=a("C7Lr")(zi,Vi,!1,null,null,null).exports,ji={props:{compData:Object,orderData:Object},data:function(){return{shortNum:null}},mounted:function(){this.orderData.shortOverflowRate=this.orderData.shortOverflowRate?this.orderData.shortOverflowRate:0},methods:{}},qi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("溢短装")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-input-number",{staticClass:"input-number",attrs:{min:0,max:20},model:{value:t.orderData.shortOverflowRate,callback:function(e){t.$set(t.orderData,"shortOverflowRate",e)},expression:"orderData.shortOverflowRate"}}),t._v(" "),a("span",{staticClass:"spanBlock"},[t._v("%")])],1)])])},staticRenderFns:[]},Wi=a("C7Lr")(ji,qi,!1,null,null,null).exports,Hi={props:{compData:Object,orderData:Object},data:function(){return{}},methods:{}},Ki={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("货源")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.skuOrigin,callback:function(e){t.$set(t.orderData,"skuOrigin",e)},expression:"orderData.skuOrigin"}},t._l(t.compData.compInfo.sourceGoods,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])])},staticRenderFns:[]},Xi=a("C7Lr")(Hi,Ki,!1,null,null,null).exports,Ji={props:{compData:Object,orderData:Object},data:function(){return{skuPriceType:null}},mounted:function(){this.skuPriceType=this.orderData.skuPriceType},methods:{onchangePriceType:function(t){this.orderData.skuPriceType=t,this.orderData.skuPrice=null,this.orderData.skuPriceExpression=""},handleInput:function(t){t.target.value=t.target.value.match(/^\d*(\.?\d{0,2})/g)[0]||null,21!==this.orderData.skuPriceType&&(this.orderData.skuPrice=t.target.value)}}},Gi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("单价(含税)")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticStyle:{width:"140%"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.onchangePriceType},model:{value:t.skuPriceType,callback:function(e){t.skuPriceType=e},expression:"skuPriceType"}},t._l(t.compData.compInfo.skuPriceTypeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),21!=t.orderData.skuPriceType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.skuPrice,expression:"orderData.skuPrice"}],staticStyle:{"margin-top":"1px"},attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.orderData.skuPrice},on:{input:[function(e){e.target.composing||t.$set(t.orderData,"skuPrice",e.target.value)},t.handleInput]}}):t._e(),t._v(" "),21==t.orderData.skuPriceType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.skuPriceExpression,expression:"orderData.skuPriceExpression"}],staticStyle:{"margin-top":"1px"},attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.orderData.skuPriceExpression},on:{input:function(e){e.target.composing||t.$set(t.orderData,"skuPriceExpression",e.target.value)}}}):t._e(),t._v(" "),21!==t.orderData.skuPriceType?a("span",{staticClass:"unit"},[t._v("元/吨")]):t._e()])])])])},staticRenderFns:[]},Zi=a("C7Lr")(Ji,Gi,!1,null,null,null).exports,Yi={props:{compData:Object,orderData:Object},data:function(){return{}},methods:{handleInput:function(t){t.target.value=t.target.value.match(/^\d*(\.?\d{0,3})/g)[0]||null,this.orderData.skuQuantity=t.target.value}}},tn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("合同数量")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.skuQuantity,expression:"orderData.skuQuantity"}],staticClass:"gy-input",attrs:{type:"number",placeholder:"请输入合同数量"},domProps:{value:t.orderData.skuQuantity},on:{input:[function(e){e.target.composing||t.$set(t.orderData,"skuQuantity",e.target.value)},t.handleInput]}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("吨")])])])])])},staticRenderFns:[]},en=a("C7Lr")(Yi,tn,!1,null,null,null).exports,an={props:{compData:Object,orderData:Object},data:function(){return{}}},sn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("规格型号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.specifications,expression:"orderData.specifications"}],staticClass:"gy-input",attrs:{placeholder:"请输入规格型号"},domProps:{value:t.orderData.specifications},on:{input:function(e){e.target.composing||t.$set(t.orderData,"specifications",e.target.value)}}})])])])])},staticRenderFns:[]},nn=a("C7Lr")(an,sn,!1,null,null,null).exports,ln={props:{compData:Object,orderData:Object},data:function(){return{}},methods:{}},on={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("运输方式")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.orderData.transportType,callback:function(e){t.$set(t.orderData,"transportType",e)},expression:"orderData.transportType"}},t._l(t.compData.compInfo.transportType,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])])},staticRenderFns:[]},rn=a("C7Lr")(ln,on,!1,null,null,null).exports,cn={props:{compData:Object,orderData:Object},data:function(){return{}},created:function(){},methods:{input:function(t){t.target.value<0&&(this.orderData.warehouseFreeDays=0)}}},dn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("免仓期")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.warehouseFreeDays,expression:"orderData.warehouseFreeDays"}],staticClass:"gy-input",attrs:{type:"number",placeholder:"请输入天数"},domProps:{value:t.orderData.warehouseFreeDays},on:{input:[function(e){e.target.composing||t.$set(t.orderData,"warehouseFreeDays",e.target.value)},t.input]}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("天")])])])])},staticRenderFns:[]},un=a("C7Lr")(cn,dn,!1,null,null,null).exports,pn={props:{compData:Object,orderData:Object},data:function(){return{}},mounted:function(){this.orderData.wastage=this.orderData.wastage?this.orderData.wastage:0},methods:{}},vn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("损耗")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-input-number",{staticClass:"input-number",attrs:{min:0,max:10},model:{value:t.orderData.wastage,callback:function(e){t.$set(t.orderData,"wastage",e)},expression:"orderData.wastage"}}),t._v(" "),a("span",{staticClass:"spanBlock"},[t._v("‰")])],1)])])},staticRenderFns:[]},mn=a("C7Lr")(pn,vn,!1,null,null,null).exports,hn={props:{compData:Object,orderData:Object},data:function(){return{dockWareObj:{},baseID:null}},created:function(){this.dockWareObj.value=this.orderData.deliveryWarehouseType,this.dockWareObj.label=this.orderData.deliveryWarehouseName,1===this.orderData.deliveryWarehouseType&&(this.baseID=this.orderData.deliveryWarehouseId,this.dockWareObj.list=this.compData.compInfo.dockWareList[0].list),2===this.orderData.deliveryWarehouseType&&(this.dockWareObj.list=this.compData.compInfo.dockWareList[1].list,this.baseID=this.orderData.wareDockId)},methods:{changeWarehouse:function(t){this.orderData.deliveryWarehouseType=t.value,this.orderData.deliveryWarehouseName="",this.baseID=null,this.orderData.deliveryWarehouseId=null,this.orderData.deliveryWarehouseName=null},handelChange:function(t){var e=this;this.dockWareObj.list.forEach(function(a){t===a.value&&(e.orderData.deliveryWarehouseName=a.label)}),1===this.dockWareObj.value&&(30===this.baseID&&(this.orderData.deliveryWarehouseName=""),this.orderData.deliveryWarehouseId=this.baseID,this.orderData.wareDockId=null),2===this.dockWareObj.value&&(this.orderData.wareDockId=this.baseID,this.orderData.deliveryWarehouseId=null)}}},yn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t.compData.isNecessary?a("span",{staticClass:"isMust"},[t._v("*")]):t._e(),t._v("交割地点")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeWarehouse},model:{value:t.dockWareObj,callback:function(e){t.dockWareObj=e},expression:"dockWareObj"}},t._l(t.compData.compInfo.dockWareList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t}})}),1),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handelChange},model:{value:t.baseID,callback:function(e){t.baseID=e},expression:"baseID"}},t._l(t.dockWareObj.list,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),30==t.orderData.deliveryWarehouseId?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"}),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderData.deliveryWarehouseName,expression:"orderData.deliveryWarehouseName"}],staticClass:"gy-textarea",attrs:{type:"text",maxlength:"100",placeholder:"请输入，自定义文本选填，限制字数100字"},domProps:{value:t.orderData.deliveryWarehouseName},on:{input:function(e){e.target.composing||t.$set(t.orderData,"deliveryWarehouseName",e.target.value)}}})])])]):t._e()])},staticRenderFns:[]},fn=a("C7Lr")(hn,yn,!1,null,null,null).exports,_n={components:{gyFileView:Ke,brand:ws,chattingFee:xs,chattingCompany:Ts,consignmentTime:Ls,deliveryDate:$s,deliverySite:Bs,deliverySiteDock:Us,deliveryType:Qs,deposit:Ws,depositAgreement:Xs,depositBenchmark:Zs,longTermContractUp:ei,longTermContractDown:ii,manufacturer:oi,outgoingQualityBill:vi,packagingStandard:yi,packagingStandardMulti:gi,paymentDate:wi,paymentType:xi,prodInspectionFee:Ti,prodInspectionType:Li,provideInvoiceType:$i,qualityStandard:Bi,remarks:Ui,settlementQtyType:Qi,shortOverflowRate:Wi,skuOrigin:Xi,skuPrice:Zi,skuQuantity:en,specifications:nn,transportType:rn,warehouseFreeDays:un,wastage:mn,deliverySiteOtherDock:fn},data:function(){return{unilateralRelevance:{correlationOrderId:null,contractCode:null},contEssId:null,forContEssRecreate:!1,searchForm:{pageNo:1,pageSize:10,productId:null,buyerCompanyName:null,sellerCompanyName:null,bizType:null},deliverContractAssembleVisible:!1,totalDelivery:null,purchaseContractList:[],isShowUnilateralDialog:!1,deliveryContractList:[],businessManager:[],businessManagerGroup:[],isSellerCh:!1,isBuyerCh:!1,data:{id:null,bizType:null,businessManagerId:null,businessManagerName:null,usrOrganizationName:null,organizationId:null,contractType:1,downstreamInfo:{companyId:null,companyName:null,skuOrigin:null,prodName:null,skuCode:null,prdSkuId:null,deliveryWarehouseId:null,deliveryWarehouseName:null,deliveryDateFlag:null,deliveryBeginDate:null,deliveryEndDate:null,deliveryDateText:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPriceType:1,skuPrice:null,skuPriceExpression:null,depositType:null,packagingStandard:null,qualityStandard:null,skuQuantity:null,depositRatio:null,depositAmount:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,targetCorpId:null,targetCorpName:null,longtermContractOrderId:null,chattingAmount:null,priceOfWeight:null,chattingCompanyName:null},upstreamInfo:{companyId:null,companyName:null,skuOrigin:null,prodName:null,skuCode:null,prdSkuId:null,deliveryWarehouseId:null,deliveryWarehouseName:null,deliveryDateFlag:null,deliveryBeginDate:null,deliveryEndDate:null,deliveryDateText:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPriceType:1,skuPriceExpression:null,skuPrice:null,depositType:null,packagingStandard:null,qualityStandard:null,skuQuantity:null,depositRatio:null,depositAmount:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,targetCorpId:null,targetCorpName:null,longtermContractOrderId:null,chattingAmount:null,priceOfWeight:null,chattingCompanyName:null}},goodsList:[],dialogVisible:!1,dialogVisibles:!1,sellCompanyList:[],buyCompanyList:[],relatedCompany:[],companyName:null,activeContractType:null,activeIndex:null,activeProductId:null,targetCorpIdIdx:null,businessManagerIdx:null,srOrganizationIdx:null,Verification:[{name:"bizType",msg:"请先选择业务类型"},{name:"businessManagerId",msg:"请先选择业务操作人"},{name:"organizationId",msg:"请先选择业务组"}],obj:{},upstreamTerm:null,showDvlyQtyCol:!1,sellerCheck:!1,buyerCheck:!1,upstreamCmptList:[],downstreamCmptList:[],upstreamPropList:[],downstreamPropList:[],isTargetChange:!1,needRefresh:0}},mounted:function(){this.data.businessManagerId=JSON.parse(localStorage.getItem("userInfo")).id,this.getRelatedCompany(),this.getBizUserList(),this.contEssId=this.$route.query.id,null!==this.contEssId&&void 0!==this.contEssId&&this.getdetailOrder()},methods:{delectSeachContract:function(){this.unilateralRelevance.contractCode=null,this.deliveryContractList=[]},getdetailOrder:function(){var t=this;t.$http.get(this.$api.order.orderDetail+"/"+t.contEssId).then(function(e){if(0===e.data.code){t.data=e.data.data,t.targetCorpIdIdx=t.data.targetCorpName,t.activeProductId=t.data.productId,t.data.upstreamInfo&&(t.data.upstreamInfo.companyName=t.data.upstreamInfo.sellerCompanyName,t.data.upstreamInfo.companyId=t.data.upstreamInfo.sellerCompanyId,t.data.upstreamInfo.prdSkuId=t.data.productId),t.data.downstreamInfo&&(t.data.downstreamInfo.companyName=t.data.downstreamInfo.buyerCompanyName,t.data.downstreamInfo.companyId=t.data.downstreamInfo.buyerCompanyId,t.data.downstreamInfo.prdSkuId=t.data.productId),t.companyName=null,t.activeContractType=0,t.forContEssRecreate=!0,t.getCompanyByBizType(!0),(t.data.sourceContEssId||t.data.modifyFieldInfo)&&(t.data.sourceContEssId=null,t.data.modifyFieldInfo=null);var a={bizType:t.data.bizType,userId:t.data.businessManagerId};t.$http.post(t.$api.contract.getCompany,a).then(function(e){t.goodsList=e.data.data.goodsList}).catch(function(t){console.log(t)})}}).catch(function(t){console.log(t)})},deliverContractAssembleVisibleClick:function(){this.$refs.contFileView.open(this.deliveryContractList)},onUnilateral:function(t){this.deliveryContractList=[],this.unilateralRelevance.contractCode=null},onSeachContract:function(t){this.upstreamTerm=0,"单边"===t?2===this.data.contractType?this.upstreamTerm=2:3===this.data.contractType&&(this.upstreamTerm=1):"上游"===t?this.upstreamTerm=3:"下游"===t&&(this.upstreamTerm=4),this.isShowUnilateralDialog=!0,this.purchaseContract(t)},crossHandleCheckChange:function(t){this.obj=t},handleCurrentChangeDeliver:function(t){this.searchForm.pageNo=t;var e=null;1===this.upstreamTerm||2===this.upstreamTerm?e="单边":3===this.upstreamTerm?e="上游":4===this.upstreamTerm&&(e="下游"),this.purchaseContract(e,!0)},purchaseContract:function(t,e){var a=this;if(!t||void 0!==e&&null!=e||(this.searchForm={}),"单边"===t){if(null==this.data.contractType||void 0===this.data.contractType)return this.$message.error("请先选择单边交易类型后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(1===this.data.contractType)return this.$message.error("双边交易时不能查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(this.showDvlyQtyCol=!1,2===this.data.contractType){if(null==this.activeProductId||void 0===this.activeProductId)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.bizType=1,this.searchForm.unilateralCorrelation=1,this.searchForm.productId=this.activeProductId,this.searchForm.skuQuantity=Number(this.data.upstreamInfo.skuQuantity)}else if(3===this.data.contractType){if(null==this.activeProductId||void 0===this.activeProductId)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.bizType=2,this.searchForm.unilateralCorrelation=1,this.searchForm.productId=this.activeProductId,this.searchForm.skuQuantity=this.data.downstreamInfo.skuQuantity}if(null==this.searchForm.productId||void 0===this.searchForm.productId)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(null==this.searchForm.skuQuantity||void 0===this.searchForm.skuQuantity)return this.$message.error("请先输入产品数量后再查询单边合同"),this.isShowUnilateralDialog=!1,!1}else{if(this.showDvlyQtyCol=!0,1===this.searchForm.unilateralCorrelation&&delete this.searchForm.unilateralCorrelation,"上游"===t){if(this.searchForm.bizType=2,null==this.activeProductId||void 0===this.activeProductId)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.productId=this.activeProductId,this.searchForm.skuQuantity=this.data.upstreamInfo.skuQuantity,this.searchForm.sellerCompanyName=this.data.upstreamInfo.companyName,6===this.data.bizType&&(this.searchForm.longtermContractFlag=1)}else if("下游"===t){if(this.searchForm.bizType=1,null==this.activeProductId||void 0===this.activeProductId)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.productId=this.activeProductId,this.searchForm.skuQuantity=this.data.downstreamInfo.skuQuantity,this.searchForm.buyerCompanyName=this.data.downstreamInfo.companyName,6===this.data.bizType&&(this.searchForm.longtermContractFlag=1)}if(null==this.searchForm.productId||void 0===this.searchForm.productId)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;if(null==this.searchForm.skuQuantity||void 0===this.searchForm.skuQuantity)return this.$message.error("请先输入产品数量后再查询长约合同"),this.isShowUnilateralDialog=!1,!1}this.$http.post(this.$api.delivery.crossContract,this.searchForm).then(function(t){0===t.data.code&&(a.totalDelivery=t.data.data.total,a.purchaseContractList=t.data.data.rows)})},crossSubmission:function(){3===this.upstreamTerm?(this.data.upstreamInfo.contractCode=this.obj.contractCode,this.data.upstreamInfo.longtermContractOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1,this.needRefresh+=1):4===this.upstreamTerm?(this.data.downstreamInfo.contractCode=this.obj.contractCode,this.data.downstreamInfo.longtermContractOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1,this.needRefresh+=1):(this.unilateralRelevance.contractCode=this.obj.contractCode,this.unilateralRelevance.correlationOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1,this.deliveryContractClick(this.obj.orderId)),this.searchForm={}},deliveryContractClick:function(t){if(null==t||void 0===t)return!1;var e=this;e.$http.get(e.$api.delivery.deliveryContract+"/"+t).then(function(t){if(0===t.data.code&&(e.deliveryContractList=t.data.data.erpFileContractModelList,null==e.deliveryContractList||void 0===e.deliveryContractList||0===e.deliveryContractList.length))return e.$message.error("您选择的单边合同无合同附件!"),!1})},businessManagerchk:function(){this.data.businessManagerName=this.businessManager[this.businessManagerIdx].userName,this.data.businessManagerId=this.businessManager[this.businessManagerIdx].usrUserId,this.getUserOrganization(),this.data.bizType&&this.onchangeBizType()},checked:function(t){if(this.activeIndex=t,3===this.activeContractType){var e=this.buyCompanyList[this.activeIndex].buyerCorpId,a="您选择的下游公司:"+this.buyCompanyList[this.activeIndex].buyerCorpName+"，未做准入，请先提交准入申请！";this.getCompanyGrade(this.activeContractType,e,a)}else{var s=this.sellCompanyList[this.activeIndex].sellerCorpId,i="您选择的上游公司:"+this.sellCompanyList[this.activeIndex].sellerCorpName+"，未做准入，请先提交准入申请！";this.getCompanyGrade(this.activeContractType,s,i)}},checkGroup:function(){this.data.organizationId=this.businessManagerGroup[this.srOrganizationIdx].usrOrganizationId,this.data.usrOrganizationName=this.businessManagerGroup[this.srOrganizationIdx].orgName},checkCompany:function(t){null!==this.data.bizType&&void 0!==this.data.bizType&&""!==this.data.bizType?null!=this.activeProductId&&void 0!==this.activeProductId?(3===t&&(this.dialogVisibles=!0),2===t&&(this.dialogVisible=!0),this.companyName=null,this.activeContractType=t,this.activeIndex=null,this.getCompanyByBizType()):this.$message.error("请先选择产品"):this.$message.error("请先选择业务类型")},onchangeBizType:function(){var t=this;t.activeProductId=null,t.goodsList=[],t.sellCompanyList=[],t.buyCompanyList=[],t.data.upstreamInfo&&(t.data.upstreamInfo.companyId=null,t.data.upstreamInfo.companyName=null,t.data.upstreamInfo.sellerCompanyName=null,t.data.upstreamInfo.sellerCompanyId=null,t.data.upstreamInfo.prdSkuId=null,t.data.upstreamInfo.skuCode=null,t.data.upstreamInfo.prodName=null,t.data.upstreamInfo.grade=null),t.data.downstreamInfo&&(t.data.downstreamInfo.companyId=null,t.data.downstreamInfo.companyName=null,t.data.downstreamInfo.buyerCompanyName=null,t.data.downstreamInfo.buyerCompanyId=null,t.data.downstreamInfo.prdSkuId=null,t.data.downstreamInfo.skuCode=null,t.data.downstreamInfo.prodName=null,t.data.downstreamInfo.grade=null);var e={bizType:t.data.bizType,userId:t.data.businessManagerId};t.$http.post(t.$api.contract.getCompany,e).then(function(e){t.goodsList=e.data.data.goodsList}).catch(function(t){console.log(t)})},getCompanyByBizType:function(t){var e=this,a={bizType:e.data.bizType};this.activeProductId&&(a.productId=this.activeProductId),3===this.activeContractType&&(a.buyerCorpName=this.companyName),2===this.activeContractType&&(a.sellerCorpName=this.companyName),e.data.upstreamInfo&&(e.data.upstreamInfo.bizType=e.data.bizType),e.data.downstreamInfo&&(e.data.downstreamInfo.bizType=e.data.bizType),e.$http.post(e.$api.contract.getCompany,a).then(function(a){if(e.sellCompanyList=a.data.data.sellerCorpList,e.buyCompanyList=a.data.data.buyerCorpList,t){var s=0;s=1===e.data.contractType||2===e.data.contractType?2:3,e.onchangeProduct(s,0,t)}else e.data.productId&&!e.goodsList.find(function(t){return t.goodsId===e.data.productId})&&(e.activeProductId=null,e.data.upstreamInfo&&(e.data.upstreamInfo.prdSkuId=null),e.data.downstreamInfo&&(e.data.downstreamInfo.prdSkuId=null))}).catch(function(t){console.log(t)})},getRelatedCompany:function(){var t=this;this.$http.get(this.$api.contract.getRelatedCompany).then(function(e){t.relatedCompany=e.data.data.targetCorpList}).catch(function(t){console.log(t)})},checktargetCorpbuy:function(){this.isTargetChange=!0,this.data.upstreamInfo&&(this.data.upstreamInfo.targetCorpName=this.relatedCompany[this.targetCorpIdIdx].targetCorpName,this.data.upstreamInfo.targetCorpId=this.relatedCompany[this.targetCorpIdIdx].targetCorpId),this.data.downstreamInfo&&(this.data.downstreamInfo.targetCorpName=this.relatedCompany[this.targetCorpIdIdx].targetCorpName,this.data.downstreamInfo.targetCorpId=this.relatedCompany[this.targetCorpIdIdx].targetCorpId)},onchangeProduct:function(t,e,a){var s=this;s.data.upstreamInfo&&(s.data.upstreamInfo.bizType=s.data.bizType),s.data.downstreamInfo&&(s.data.downstreamInfo.bizType=s.data.bizType);var i={};if(2===t){var n=s.goodsList.find(function(t){return t.goodsId===s.activeProductId});n&&(s.data.upstreamInfo.prdSkuId=n.goodsId,s.data.upstreamInfo.skuCode=n.goodsCode,s.data.upstreamInfo.prodName=n.goodsName),a||(i.targetCorpId=s.data.upstreamInfo.targetCorpId,i.targetCorpName=s.data.upstreamInfo.targetCorpName,i.skuPriceType=1,i.prdSkuId=s.data.upstreamInfo.prdSkuId,i.skuCode=s.data.upstreamInfo.skuCode,i.prodName=s.data.upstreamInfo.prodName,i.bizType=s.data.upstreamInfo.bizType);var l={productId:s.data.upstreamInfo.prdSkuId,contractType:2};s.$http.post(s.$api.contract.getProdPropCompList,l).then(function(t){0===t.data.code?(s.upstreamPropList=t.data.data,s.upstreamCmptList=s.upstreamPropList.filter(function(t){return t.displayOrder>0}),a||(s.data.upstreamInfo={},_s()(s.data.upstreamInfo,i))):s.$message.error(t.data.message)}).catch(function(t){console.log(t)}),1===s.data.contractType&&0===e&&s.onchangeProduct(3,1,a)}if(3===t){for(var o in s.goodsList)if(s.goodsList[o].goodsId===s.activeProductId){s.data.downstreamInfo.prdSkuId=s.goodsList[o].goodsId,s.data.downstreamInfo.skuCode=s.goodsList[o].goodsCode,s.data.downstreamInfo.prodName=s.goodsList[o].goodsName;break}a||(i.targetCorpId=s.data.downstreamInfo.targetCorpId,i.targetCorpName=s.data.downstreamInfo.targetCorpName,i.skuPriceType=1,i.prdSkuId=s.data.downstreamInfo.prdSkuId,i.skuCode=s.data.downstreamInfo.skuCode,i.prodName=s.data.downstreamInfo.prodName,i.bizType=s.data.downstreamInfo.bizType);var r={productId:s.data.downstreamInfo.prdSkuId,contractType:3};s.$http.post(s.$api.contract.getProdPropCompList,r).then(function(t){0===t.data.code?(s.downstreamPropList=t.data.data,s.downstreamCmptList=s.downstreamPropList.filter(function(t){return t.displayOrder>0}),a||(s.data.downstreamInfo={},_s()(s.data.downstreamInfo,i))):s.$message.error(t.data.message)}).catch(function(t){console.log(t)}),1===s.data.contractType&&0===e&&s.onchangeProduct(2,1,a)}},getUserOrganization:function(){var t=this;this.$http.get(this.$api.contract.getUserOrganization+"?userId="+this.data.businessManagerId).then(function(e){0===e.data.code&&(t.businessManagerGroup=e.data.data,t.srOrganizationIdx=0,t.checkGroup())}).catch(function(t){console.log(t)})},getBizUserList:function(){var t=this,e={organizationId:this.data.organizationId,pageNum:0};this.$http.post(this.$api.contract.getGrade,e).then(function(e){0===e.data.code&&(t.businessManager=e.data.data.rows,i()(e.data.data.rows).forEach(function(a){e.data.data.rows[a].usrUserId===t.data.businessManagerId&&(t.businessManagerIdx=1*a,t.businessManagerchk())}))}).catch(function(t){console.log(t)})},getCompanyGrade:function(t,e,a){var s=this,i={productId:e};s.$http.post(s.$api.contract.getCompanyGrade,i).then(function(e){if(2===t)s.data.upstreamInfo.grade=e.data.data.grade,s.sellerCheck=!1,"未评级"===s.data.upstreamInfo.grade&&(s.sellerCheck=!0,s.$message({message:a,type:"warning"}));else if(3===t&&(s.data.downstreamInfo.grade=e.data.data.grade,s.buyerCheck=!1,"未评级"===s.data.downstreamInfo.grade))return s.buyerCheck=!0,s.$message({message:a,type:"warning"}),!1}).catch(function(t){console.log(t)})},checkSales:function(t){null!==this.activeIndex?(3===t&&(this.dialogVisibles=!1,this.data.downstreamInfo.companyName=this.buyCompanyList[this.activeIndex].buyerCorpName,this.data.downstreamInfo.companyId=this.buyCompanyList[this.activeIndex].buyerCorpId,this.data.downstreamInfo.buyerCompanyName=this.buyCompanyList[this.activeIndex].buyerCorpName,this.data.downstreamInfo.buyerCompanyId=this.buyCompanyList[this.activeIndex].buyerCorpId),2===t&&(this.dialogVisible=!1,this.data.upstreamInfo.companyName=this.sellCompanyList[this.activeIndex].sellerCorpName,this.data.upstreamInfo.companyId=this.sellCompanyList[this.activeIndex].sellerCorpId,this.data.upstreamInfo.sellerCompanyName=this.sellCompanyList[this.activeIndex].sellerCorpName,this.data.upstreamInfo.sellerCompanyId=this.sellCompanyList[this.activeIndex].sellerCorpId)):this.$message({message:"请先选择公司",type:"error"})},onsubmit:function(){var t=this;if(!t.testForm(t.Verification,1))return!1;if(this.data.upstreamInfo&&null!=this.targetCorpIdIdx&&!this.isTargetChange&&(this.data.upstreamInfo.targetCorpId=this.data.targetCorpId)&&(this.data.upstreamInfo.targetCorpName=this.data.targetCorpName),this.data.downstreamInfo&&null!=this.targetCorpIdIdx&&!this.isTargetChange&&(this.data.downstreamInfo.targetCorpId=this.data.targetCorpId)&&(this.data.downstreamInfo.targetCorpName=this.data.targetCorpName),1===t.data.contractType||2===t.data.contractType){var e=t.$inputCheckFunc.checkInputItem(t.upstreamPropList,t.data.upstreamInfo,"(上游)");if(e)return t.$message.error(e),!1;if(e=t.$inputCheckFunc.checkRelatedInputItem(t.data.upstreamInfo,"(上游)"))return t.$message.error(e),!1}if(1===t.data.contractType||3===t.data.contractType){var a=t.$inputCheckFunc.checkInputItem(t.downstreamPropList,t.data.downstreamInfo,"(下游)");if(a)return t.$message.error(a),!1;if(a=t.$inputCheckFunc.checkRelatedInputItem(t.data.downstreamInfo,"(下游)"))return t.$message.error(a),!1}if(null==t.deliveryContractList||void 0===t.deliveryContractList||0===t.deliveryContractList.length?t.unilateralRelevance.isUnilateralCorrelation=!1:t.unilateralRelevance.isUnilateralCorrelation=!0,t.unilateralRelevance.contractCode&&!t.unilateralRelevance.isUnilateralCorrelation)return t.$message({message:"已选择的单边合同无合同附件！",type:"error"}),!1;null!==t.$route.query.todoId&&void 0!==t.$route.query.todoId&&(t.data.todoId=t.$route.query.todoId),_s()(t.data,t.unilateralRelevance),t.$http.post(t.$api.contract.addContract,t.data).then(function(e){0===e.data.code?(t.$message({message:"创建成功",type:"success"}),gs.a.$emit("setMenu")):t.$message({message:e.data.message,type:"error"})})},testForm:function(t,e){for(var a=1===e?this.data:3===e?this.data.downstreamInfo:this.data.upstreamInfo,s=0;s<t.length;s++)if(null===a[t[s].name]||""===a[t[s].name])return this.$message({message:t[s].msg,type:"error"}),!1;return!0}}},gn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-contract"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(0),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.onchangeBizType()}},model:{value:t.data.bizType,callback:function(e){t.$set(t.data,"bizType",e)},expression:"data.bizType"}},t._l(t.$constant.bizType4CreateEss,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同交易类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.onUnilateral},model:{value:t.data.contractType,callback:function(e){t.$set(t.data,"contractType",e)},expression:"data.contractType"}},t._l(t.$constant.contractTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(1),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.businessManagerchk},model:{value:t.businessManagerIdx,callback:function(e){t.businessManagerIdx=e},expression:"businessManagerIdx"}},t._l(t.businessManager,function(t,e){return a("el-option",{key:e,attrs:{label:t.userName,value:e}})}),1)],1)]),t._v(" "),a("div",{staticClass:"essential-item"},[t._m(2),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.checkGroup},model:{value:t.srOrganizationIdx,callback:function(e){t.srOrganizationIdx=e},expression:"srOrganizationIdx"}},t._l(t.businessManagerGroup,function(t,e){return a("el-option",{key:e,attrs:{label:t.orgName,value:e}})}),1)],1)])])])]),t._v(" "),a("div",{staticClass:"pay-wrapper"},[3!==t.data.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("上游合同信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(3),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",disabled:t.forContEssRecreate},on:{change:function(e){return t.onchangeProduct(2,0)}},model:{value:t.activeProductId,callback:function(e){t.activeProductId=e},expression:"activeProductId"}},t._l(t.goodsList,function(t,e){return a("el-option",{key:e,attrs:{label:t.goodsName,value:t.goodsId}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("我方公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.checktargetCorpbuy},model:{value:t.targetCorpIdIdx,callback:function(e){t.targetCorpIdIdx=e},expression:"targetCorpIdIdx"}},t._l(t.relatedCompany,function(t,e){return a("el-option",{key:e,attrs:{label:t.targetCorpName,value:e}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(4),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.upstreamInfo.companyName,expression:"data.upstreamInfo.companyName"}],attrs:{type:"text",placeholder:"请选择上游公司"},domProps:{value:t.data.upstreamInfo.companyName},on:{click:function(e){return t.checkCompany(2)},input:function(e){e.target.composing||t.$set(t.data.upstreamInfo,"companyName",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(5),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.upstreamInfo.grade,expression:"data.upstreamInfo.grade"}],attrs:{type:"text",disabled:"",placeholder:"请输入"},domProps:{value:t.data.upstreamInfo.grade},on:{input:function(e){e.target.composing||t.$set(t.data.upstreamInfo,"grade",e.target.value)}}})])])]),t._v(" "),t._l(t.upstreamCmptList,function(e,s){return a(e.propKey,{key:s,tag:"component",attrs:{"biz-type":t.data.upstreamInfo.bizType,"need-refresh":t.needRefresh,"comp-data":e,"order-data":t.data.upstreamInfo},on:{"update:needRefresh":function(e){t.needRefresh=e},"update:need-refresh":function(e){t.needRefresh=e}}})})],2)]):t._e(),t._v(" "),2!==t.data.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("下游合同信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(6),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",disabled:t.forContEssRecreate},on:{change:function(e){return t.onchangeProduct(3,0)}},model:{value:t.activeProductId,callback:function(e){t.activeProductId=e},expression:"activeProductId"}},t._l(t.goodsList,function(t,e){return a("el-option",{key:e,attrs:{label:t.goodsName,value:t.goodsId}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("我方公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.checktargetCorpbuy},model:{value:t.targetCorpIdIdx,callback:function(e){t.targetCorpIdIdx=e},expression:"targetCorpIdIdx"}},t._l(t.relatedCompany,function(t,e){return a("el-option",{key:e,attrs:{label:t.targetCorpName,value:e}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(7),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.downstreamInfo.companyName,expression:"data.downstreamInfo.companyName"}],attrs:{type:"text",placeholder:"请选择下游公司"},domProps:{value:t.data.downstreamInfo.companyName},on:{click:function(e){return t.checkCompany(3)},input:function(e){e.target.composing||t.$set(t.data.downstreamInfo,"companyName",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(8),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.downstreamInfo.grade,expression:"data.downstreamInfo.grade"}],attrs:{type:"text",disabled:"",placeholder:"请输入"},domProps:{value:t.data.downstreamInfo.grade},on:{input:function(e){e.target.composing||t.$set(t.data.downstreamInfo,"grade",e.target.value)}}})])])]),t._v(" "),t._l(t.downstreamCmptList,function(e,s){return a(e.propKey,{key:s,tag:"component",attrs:{"biz-type":t.data.downstreamInfo.bizType,"need-refresh":t.needRefresh,"comp-data":e,"order-data":t.data.downstreamInfo},on:{"update:bizType":function(e){return t.$set(t.data.downstreamInfo,"bizType",e)},"update:biz-type":function(e){return t.$set(t.data.downstreamInfo,"bizType",e)},"update:needRefresh":function(e){t.needRefresh=e},"update:need-refresh":function(e){t.needRefresh=e}}})})],2)]):t._e()]),t._v(" "),2===t.data.contractType||3===t.data.contractType?a("div",{staticClass:"essential-wrapper isUnilateral",staticStyle:{"padding-top":"0px"}},[a("div",{staticClass:"gy-form-group cl"},[t._m(9),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.unilateralRelevance.contractCode,expression:"unilateralRelevance.contractCode"}],attrs:{type:"text",readonly:"",placeholder:"请选择单边合同"},domProps:{value:t.unilateralRelevance.contractCode},on:{input:function(e){e.target.composing||t.$set(t.unilateralRelevance,"contractCode",e.target.value)}}}),t._v(" "),null!==t.unilateralRelevance.contractCode?a("i",{staticClass:"el-icon-close",staticStyle:{position:"absolute",top:"18px",right:"50px",cursor:"pointer"},on:{click:function(e){return t.delectSeachContract()}}}):t._e(),t._v(" "),a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",top:"10px",right:"30px"},on:{click:function(e){return t.onSeachContract("单边")}}})]),t._v(" "),t.deliveryContractList&&t.deliveryContractList.length>0?a("div",{staticClass:"gy-form-group ll"},[2===t.data.contractType?a("span",{staticClass:"l"},[t._v("单边销售合同")]):t._e(),t._v(" "),3===t.data.contractType?a("span",{staticClass:"l"},[t._v("单边采购合同")]):t._e(),t._v(" "),a("div",{staticClass:"ml",staticStyle:{display:"inline-block",height:"50px",width:"50px","margin-left":"5px"}},[a("i",{staticClass:"iconfont icon-photo",on:{click:function(e){return t.deliverContractAssembleVisibleClick()}}})])]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"foot"},[void 0!==t.contEssId&&null!==t.contEssId?a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]):t._e(),t._v(" "),a("button",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_create_cont_ess",expression:"'to_create_cont_ess'"}],staticClass:"gy-button-extra confirmations",attrs:{type:"button"},on:{click:t.onsubmit}},[t._v("提交")])]),t._v(" "),a("gy-file-view",{ref:"contFileView"}),t._v(" "),t.isShowUnilateralDialog?a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px",title:2===t.upstreamTerm||4===t.upstreamTerm?"销售合同列表":"采购合同列表",visible:t.isShowUnilateralDialog},on:{"update:visible":function(e){t.isShowUnilateralDialog=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),3===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.buyerCompanyName,expression:"searchForm.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.searchForm.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"buyerCompanyName",e.target.value)}}}):t._e(),t._v(" "),1===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.sellerCompanyName,expression:"searchForm.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.searchForm.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"sellerCompanyName",e.target.value)}}}):t._e(),t._v(" "),4===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.sellerCompanyName,expression:"searchForm.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.searchForm.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"sellerCompanyName",e.target.value)}}}):t._e(),t._v(" "),2===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.buyerCompanyName,expression:"searchForm.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.searchForm.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"buyerCompanyName",e.target.value)}}}):t._e()]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",top:"10px",left:"-20px"},on:{click:function(e){return t.purchaseContract("单边",!0)}}})]),t._v(" "),a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th",{staticStyle:{width:"120px"}},[t._v("合同要素ID")]),t._v(" "),a("th",[t._v("我方公司")]),t._v(" "),a("th",[2===t.upstreamTerm||4===t.upstreamTerm?a("span",[t._v("下游公司")]):a("span",[t._v("上游公司")])]),t._v(" "),a("th",{staticStyle:{width:"130px"}},[t._v("合同金额(元)")]),t._v(" "),a("th",[t._v("合同交割日期")]),t._v(" "),a("th",[t._v("交割库")]),t._v(" "),t.showDvlyQtyCol?a("th",[t._v("可交割数量")]):t._e(),t._v(" "),t.showDvlyQtyCol?a("th",[t._v("合约数量")]):t._e(),t._v(" "),a("th",[t._v("免仓期(天)")])])]),t._v(" "),this.purchaseContractList.length>0?a("tbody",t._l(t.purchaseContractList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"120px"}},[a("input",{attrs:{type:"radio",name:"11"},on:{change:function(a){return t.crossHandleCheckChange(e)}}}),t._v(" "),a("span",{staticStyle:{"margin-left":"3px"}},[t._v(t._s(e.contractEssenceId||"-"))])]),t._v(" "),a("td",[t._v(t._s(e.ourCompanyName||"-"))]),t._v(" "),a("td",[2===t.upstreamTerm||4===t.upstreamTerm?a("span",[t._v(t._s(e.buyerCompanyName))]):a("span",[t._v(t._s(e.sellerCompanyName))])]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):21===e.skuPriceType||22===e.skuPriceType?a("td",{staticClass:"align-r"},[t._v("公式计价")]):a("td",{staticClass:"align-r",staticStyle:{width:"130px"}},[t._v(t._s(t._f("numToCash")(e.totalAmount)))]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.deliveryDate))]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.deliveryWarehouseName))]),t._v(" "),t.showDvlyQtyCol?a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToQuantity")(e.canDeliveryQuantity)))]):t._e(),t._v(" "),t.showDvlyQtyCol?a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToQuantity")(e.skuQuantity)))]):t._e(),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.warehouseFreeDays))])])}),0):a("tbody",[a("tr",[t.showDvlyQtyCol?a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v("暂无数据")]):a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[t._v("暂无数据")])])])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.searchForm.pageNo,"page-size":t.searchForm.pageSize,total:t.totalDelivery},on:{"update:currentPage":function(e){return t.$set(t.searchForm,"pageNo",e)},"update:current-page":function(e){return t.$set(t.searchForm,"pageNo",e)},"current-change":t.handleCurrentChangeDeliver}}),t._v(" "),a("div",{staticClass:"button-wrap",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){t.isShowUnilateralDialog=!1}}},[t._v("取消\n            ")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.crossSubmission()}}},[t._v("确定")])])],1):t._e(),t._v(" "),t.dialogVisible?a("el-dialog",{staticClass:"addDialog",attrs:{width:"800px",title:"上游公司列表",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),a("div",[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"search1",on:{click:function(e){return t.getCompanyByBizType()}}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"dialog-table"},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("上游公司")]),t._v(" "),a("th",[t._v("地址")])])]),t._v(" "),a("tbody",t._l(t.sellCompanyList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"50px","max-width":"50px"}},[a("span",{staticClass:"el-radio__input",class:s===t.activeIndex?"is-checked":"",on:{click:function(e){return t.checked(s)}}},[a("span",{staticClass:"el-radio__inner"})])]),t._v(" "),a("td",{staticStyle:{width:"320px","max-width":"320px"}},[t._v(t._s(e.sellerCorpName))]),t._v(" "),a("td",{staticStyle:{width:"358px","max-width":"358px"}},[t._v(t._s(e.address))])])}),0)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",class:{sellConfirmation:t.sellerCheck},staticStyle:{"margin-left":"8px"},attrs:{disabled:t.sellerCheck},on:{click:function(e){return t.checkSales(2)}}},[t._v("选择")])])]):t._e(),t._v(" "),t.dialogVisibles?a("el-dialog",{staticClass:"addDialog",attrs:{width:"800px",title:"下游公司列表",visible:t.dialogVisibles},on:{"update:visible":function(e){t.dialogVisibles=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),a("div",[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"search1",on:{click:function(e){return t.getCompanyByBizType()}}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"dialog-table"},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("下游公司")]),t._v(" "),a("th",[t._v("地址")])])]),t._v(" "),a("tbody",t._l(t.buyCompanyList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"50px","max-width":"50px"}},[a("span",{staticClass:"el-radio__input",class:s===t.activeIndex?"is-checked":"",on:{click:function(e){return t.checked(s)}}},[a("span",{staticClass:"el-radio__inner"})])]),t._v(" "),a("td",{staticStyle:{width:"320px","max-width":"320px"}},[t._v(t._s(e.buyerCorpName))]),t._v(" "),a("td",{staticStyle:{width:"358px","max-width":"358px"}},[t._v(t._s(e.address))])])}),0)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.dialogVisibles=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",class:{buyConfirmation:t.buyerCheck},staticStyle:{"margin-left":"8px"},attrs:{disabled:t.buyerCheck},on:{click:function(e){return t.checkSales(3)}}},[t._v("选择")])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("业务类型")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("业务操作人")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("业务组")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("产品名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("上游公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交易对手评级")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("产品名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("下游公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交易对手评级")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("span",{staticStyle:{"padding-left":"6px"}},[this._v("单边合同关联")])])}]};var Cn=a("C7Lr")(_n,gn,!1,function(t){a("N1wJ"),a("wMPM")},"data-v-4abbea8f",null).exports,bn={data:function(){return{total:null,isShowSearch:!1,value:"",dataList:[],search:{pageNo:1,pageSize:10,prodName:null,sellerCompanyName:null,buyerCompanyName:null,businessManagerName:null,contEssenceStatus:null,bizType:null,id:null,staCreatedDate:null,endCreatedDate:null},statisticsShow:{newPurchaseCount:0,signedPurchaseCount:0,unsignedPurchaseCount:0,newSellCount:0,signedSellCount:0,unsignedSellCount:0}}},activated:function(){this.$route.meta.isBack||(this.search={},this.getList()),this.$route.meta.isBack=!1},methods:{toggleTabs:function(t){var e=this;this.$http.get(this.$api.contract.allPageStatusCount+"?countType="+t).then(function(t){0===t.data.code&&(e.statisticsShow=t.data.data)}).catch(function(t){console.log(t)})},getList:function(){var t=this,e={};i()(this.search).forEach(function(a){e[a]=t.search[a]}),null!==e.endCreatedDate&&""!==e.endCreatedDate&&(e.endCreatedDate=e.endCreatedDate+864e5-1),this.$http.post(this.$api.contract.getlist,e).then(function(e){0===e.data.code?(t.dataList=e.data.data.rows,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},showDetail:function(t){var e={id:t.id};this.$router.push({name:"contEssDetailmenu",query:e})},turnPage:function(t){this.search.pageNo=t,this.getList()}},created:function(){this.toggleTabs(1)},components:{listStatistics:Ue}},wn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contract contract-list"},[a("div",{staticClass:"search-wrapper"},[a("div",{staticClass:"search-form"},[a("div",{staticClass:"gy-form-group",staticStyle:{height:"46px"}},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.id,expression:"search.id"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.search.id},on:{input:function(e){e.target.composing||t.$set(t.search,"id",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{height:"46px"}},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.prodName,expression:"search.prodName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.search.prodName},on:{input:function(e){e.target.composing||t.$set(t.search,"prodName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.sellerCompanyName,expression:"search.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.search.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"sellerCompanyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.buyerCompanyName,expression:"search.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.search.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"buyerCompanyName",e.target.value)}}}),t._v(" "),t.isShowSearch?t._e():a("span",{staticClass:"searchicon",on:{click:t.getList}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),t.isShowSearch?[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.search.contEssenceStatus,callback:function(e){t.$set(t.search,"contEssenceStatus",e)},expression:"search.contEssenceStatus"}},t._l(t.$constant.orderStatusList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.businessManagerName,expression:"search.businessManagerName"}],attrs:{type:"text",placeholder:"请输入业务操作人名称"},domProps:{value:t.search.businessManagerName},on:{input:function(e){e.target.composing||t.$set(t.search,"businessManagerName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.search.bizType,callback:function(e){t.$set(t.search,"bizType",e)},expression:"search.bizType"}},t._l(t.$constant.bizType4CreateEss,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.staCreatedDate,callback:function(e){t.$set(t.search,"staCreatedDate",e)},expression:"search.staCreatedDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.search.endCreatedDate,callback:function(e){t.$set(t.search,"endCreatedDate",e)},expression:"search.endCreatedDate"}})],1)]),t._v(" "),a("span",{staticClass:"searchicon",on:{click:t.getList}},[a("i",{staticClass:"iconfont icon-search"})])])]:t._e(),t._v(" "),a("div",{staticClass:"clearfix"})],2),t._v(" "),a("span",{staticClass:"search-btn",on:{click:function(e){t.isShowSearch=!t.isShowSearch}}},[t._v("高级搜索"),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticClass:"ess-list"},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataList}},[a("el-table-column",{attrs:{fixed:"","show-overflow-tooltip":!0,label:"ID\n产品名称",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))]),e.row.sourceContEssId?a("span",[t._v(" ("+t._s(e.row.sourceContEssId)+")")]):t._e(),a("br"),t._v(" "),a("span",[t._v(t._s(e.row.prodName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类别",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?a("span",[t._v("采购"),a("br"),t._v("销售")]):t._e(),t._v(" "),2===e.row.contractType?a("span",[t._v("采购")]):t._e(),t._v(" "),3===e.row.contractType?a("span",[t._v("销售")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上游公司\n下游公司",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"bottom","visible-arrow":"false"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.row.sellerCompanyName)),a("br"),t._v(t._s(e.row.buyerCompanyName))]),t._v(" "),a("div",{staticClass:"wid-overflow"},[a("span",[t._v(t._s(e.row.sellerCompanyName))]),e.row.sellerCompanyName?a("br"):t._e(),t._v(" "),a("span",[t._v(t._s(e.row.buyerCompanyName))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"状态",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.$constant.orderStatus[e.row.approveStatus]))]),e.row.currentTodoUserName?a("br"):t._e(),t._v(" "),a("span",[t._v(t._s(e.row.currentTodoUserName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购交割日期\n销售交割日期",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.planBuyDlvyDate))]),null!==e.row.planBuyDlvyDate?a("br"):t._e(),t._v(" "),a("span",[t._v(t._s(e.row.planSaleDlvyDate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"总金额(元)","class-name":"amount-right-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?[21===e.row.buySkuPriceType||22===e.row.buySkuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(e.row.buyTotal)))]),a("br")]:t._e(),t._v(" "),e.row.saleOrderId?[21===e.row.saleSkuPriceType||22===e.row.saleSkuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(e.row.saleTotal)))])]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"业务操作人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.businessManagerName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"创建时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.createdDate,e.row.createdDate)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","class-name":"operation-styles-el",width:"71"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"#fff"},attrs:{type:"button"},on:{click:function(a){return t.showDetail(e.row)}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),a("listStatistics",{on:{toggleTabs:t.toggleTabs}},[a("div",{staticClass:"list-statistics-item"},[a("div",{staticClass:"list-statistics-item-l list-statistics-item-r"},[a("span",[t._v("新增采购单数(单)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.newPurchaseCount)))])]),t._v(" "),a("div",{staticClass:"list-statistics-item-l list-statistics-item-r"},[a("span",[t._v("已双签采购单数(单)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.signedPurchaseCount)))])]),t._v(" "),a("div",{staticClass:"list-statistics-item-l list-statistics-item-r"},[a("span",[t._v("未双签采购单数(单)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.unsignedPurchaseCount)))])]),t._v(" "),a("div",{staticClass:"list-statistics-item-l list-statistics-item-r"},[a("span",[t._v("新增销售单数(单)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.newSellCount)))])]),t._v(" "),a("div",{staticClass:"list-statistics-item-l list-statistics-item-r"},[a("span",[t._v("已双签销售单数(单)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.signedSellCount)))])]),t._v(" "),a("div",{staticClass:"list-statistics-item-l list-statistics-item-r"},[a("span",[t._v("未双签销售单数(单)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.statisticsShow.unsignedSellCount)))])])])]),t._v(" "),a("span",{staticClass:"total-number"},[t._v("共 "+t._s(t.total)+" 条记录")])],1),t._v(" "),a("el-pagination",{attrs:{background:"",total:t.total,layout:"prev, pager, next"},on:{"current-change":t.turnPage}})],1)},staticRenderFns:[]};var In=a("C7Lr")(bn,wn,!1,function(t){a("T2uo"),a("06db")},"data-v-df87b0fa",null).exports,kn={components:{gyFileView:Ke},props:{list:{default:{}},isCont:{default:String}}},xn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("上游公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.upstreamInfo.sellerCompanyName))])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("交易对手评级")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.upstreamInfo.grade))])])]),t._v(" "),t._l(t.list.upstreamObjs,function(e,s){return a("div",{key:s,staticClass:"essential-row"},["备注"===e.title?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同要素备注")]),t._v(" "),a("div",{staticClass:"essential-text text-overflow"},[t._v(t._s(t._f("showline")(e.value)))])]):"出厂质检单"===e.title?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"essential-text"},[e.value&&0!==e.value.length?a("span",{on:{click:function(a){return t.$refs.contFileView.open4MultiFile(e.value)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])])]):a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("showline")(e.value)))])])])}),t._v(" "),a("gy-file-view",{ref:"contFileView"})],2)},staticRenderFns:[]};var Dn=a("C7Lr")(kn,xn,!1,function(t){a("kxHj")},"data-v-4abf4274",null).exports,Sn={components:{gyFileView:Ke},props:{list:{default:{}},isCont:{default:String}}},Tn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("下游公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.downstreamInfo.buyerCompanyName))])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("交易对手评级")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.downstreamInfo.grade))])])]),t._v(" "),t._l(t.list.downstreamObjs,function(e,s){return a("div",{key:s,staticClass:"essential-row"},["备注"===e.title?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同要素备注")]),t._v(" "),a("div",{staticClass:"essential-text text-overflow"},[t._v(t._s(t._f("showline")(e.value)))])]):"出厂质检单"===e.title?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"essential-text"},[e.value&&0!==e.value.length?a("span",{on:{click:function(a){return t.$refs.contFileView.open4MultiFile(e.value)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])])]):a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("showline")(e.value)))])])])}),t._v(" "),a("gy-file-view",{ref:"contFileView"})],2)},staticRenderFns:[]};var Fn=a("C7Lr")(Sn,Tn,!1,function(t){a("5XIg")},"data-v-63319f64",null).exports,Nn={data:function(){return{treeData:[],defaultProps:{children:"usrOrganizationNodes",label:"name"},currentTreeNode:"点击选择部门",isShowUser:!1,isShowTree:!1,userList:[],userTotal:0,currXrefUser:{innerVisible:null,userName:null,usrUserId:null},searchForm:{pageNum:1,pageSize:10,organizationId:0,username:null},defaultAll:!0,defaultOrgId:null,defaultUserId:null}},methods:{getUsers:function(t,e){this.searchForm.pageNum=1,this.search(t,e)},search:function(t,e){var a=this;this.defaultOrgId=t,this.defaultUserId=e,this.isShowUser=!0,null==this.treeData||void 0===this.treeData||0===this.treeData.length?this.$http.get(this.$api.organization.list).then(function(t){0===t.data.code?(a.treeData=t.data.data,a.selectUserList()):(a.userList=[],a.userTotal=0,a.$alert(t.data.code+" "+t.data.message))}):this.selectUserList()},selectUserList:function(){var t=this;this.$http.post(this.$api.contract.getGrade,this.searchForm).then(function(e){0===e.data.code?(t.userList=e.data.data.rows,t.userTotal=e.data.data.total,t.setDefaultSelectedUser(t.userList,t.defaultUserId)):(t.userList=[],t.userTotal=0,t.$alert(e.data.code+" "+e.data.message))})},treecurrentChange:function(){this.isShowTree=!this.isShowTree},handleNodeClick:function(t){this.currentTreeNode=t.name,this.searchForm.organizationId=t.id},changeXrefUser:function(t){if(this.isShowUser=!1,0===t)return!1;this.currXrefUser.type=t,this.$emit("affirmUser",this.currXrefUser)},handleCurrentChange:function(t){this.currXrefUser=t},currentChange:function(t,e){"user"===t?(this.searchForm.pageNum=e,this.search(this.defaultOrgId,this.defaultUserId)):(this.searchForm.pageNum=1,this.search(null,null))},setDefaultSelectedUser:function(t,e){if(null==e||void 0===e||null==t||void 0===t||0===t.length)return!1;for(var a=0,s=t.length;a<s;a++){var i=t[a];if(e===i.usrUserId){this.$refs.myUserListTbl.setCurrentRow(i);break}}}}},Ln={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-list"},[a("el-dialog",{attrs:{width:"800px",title:"请选择指定人员",visible:t.isShowUser,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(e){t.isShowUser=e}}},[a("div",{staticClass:"search-block"},[a("div",{staticClass:"gy-form-group",staticStyle:{"z-index":"999"}},[a("span",{staticClass:"l",staticStyle:{"padding-left":"0"}},[t._v("部门")]),t._v(" "),a("div",{staticClass:"tree-box",on:{click:function(e){t.isShowTree=!t.isShowTree}}},[t._v(t._s(t.currentTreeNode))]),t._v(" "),t.isShowTree?a("el-tree",{attrs:{"default-expand-all":t.defaultAll,data:t.treeData,props:t.defaultProps},on:{"node-click":t.handleNodeClick,"current-change":t.treecurrentChange}}):t._e()],1),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{"padding-right":"0"}},[a("span",{staticClass:"l"},[t._v("姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.username,expression:"searchForm.username"}],attrs:{type:"text",placeholder:"请输入人员姓名"},domProps:{value:t.searchForm.username},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"username",e.target.value)}}}),t._v(" "),a("span",{staticClass:"searchicon",on:{click:function(e){return t.currentChange("list")}}},[a("i",{staticClass:"iconfont icon-search"})])])]),t._v(" "),a("div",[a("div",{staticClass:"gy-table"},[a("el-table",{ref:"myUserListTbl",staticStyle:{width:"100%"},attrs:{data:t.userList,"highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{property:"orgName",label:"部门"}}),t._v(" "),a("el-table-column",{attrs:{property:"userName",label:"人员姓名"}})],1)],1)]),t._v(" "),a("span",{staticClass:"total-number"},[t._v("共 "+t._s(t.userTotal)+" 条记录")]),t._v(" "),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"",layout:"prev, pager, next",total:t.userTotal},on:{"current-change":function(e){return t.currentChange("user",e)}}}),t._v(" "),a("div",{staticClass:"foot-btn-group"},[a("button",{staticClass:"gy-button-normal",attrs:{type:"button"},on:{click:function(e){return t.changeXrefUser(0)}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra",staticStyle:{"margin-left":"8px"},attrs:{type:"button"},on:{click:function(e){return t.changeXrefUser(1)}}},[t._v("确定")])])],1)],1)},staticRenderFns:[]};var Pn=a("C7Lr")(Nn,Ln,!1,function(t){a("zV09"),a("G/do")},"data-v-46ed13ee",null).exports,An={props:{list:{default:null},isZXFP:Number},data:function(){return{relatedCompany:[]}},created:function(){this.getRelatedCompany()},methods:{getRelatedCompany:function(){var t=this;this.$http.get(this.$api.contract.getRelatedCompany).then(function(e){0===e.data.code&&(t.relatedCompany=e.data.data.targetCorpList)}).catch(function(t){console.log(t)})},checktargetCorpbuy:function(t){this.$emit("chkCompany",this.relatedCompany.find(function(e){return e.targetCorpId===t}))},checkTransactionType:function(t){this.$emit("onChangeTransactionType",t)},chkPerson:function(){this.$refs.myUserDlg.getUsers(null,this.list.executiveId)},affirmUser:function(t){this.list.executiveId=t.usrUserId,this.list.executiveName=t.userName,this.$emit("chkPerson",t)}},components:{selectPersonnel:Pn}},$n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"essential-wrapper essential-row-float"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同要素ID")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.id))])]),t._v(" "),1===t.isZXFP?a("div",{staticClass:"essential-item"},[t._m(0),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.list.executiveName,expression:"list.executiveName"}],attrs:{type:"text",placeholder:"请选择执行操作人"},domProps:{value:t.list.executiveName},on:{click:t.chkPerson,input:function(e){e.target.composing||t.$set(t.list,"executiveName",e.target.value)}}})])]):a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("执行操作人")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.executiveName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v("\n      "+t._s(t._f("businessTradeType")(t.list.bizType))+"\n      "),1!==t.list.contractType?a("span",{staticClass:"contractType"},[t._v(t._s(t._f("contractTradeType")(t.list.contractType,t.list.bizType)))]):t._e()])]),t._v(" "),1===t.isZXFP?a("div",{staticClass:"essential-item"},[t._m(1),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{staticClass:"mycorp",attrs:{placeholder:"请选择"},on:{change:t.checktargetCorpbuy},model:{value:t.list.targetCorpName,callback:function(e){t.$set(t.list,"targetCorpName",e)},expression:"list.targetCorpName"}},t._l(t.relatedCompany,function(e,s){return a("el-option",{key:s,attrs:{label:e.targetCorpName,value:e.targetCorpId}},[a("span",[t._v(t._s(e.targetCorpName))])])}),1)],1)]):a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("我方公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.targetCorpName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("产品名称")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.prodName))])]),t._v(" "),1===t.isZXFP?a("div",{staticClass:"essential-item"},[t._m(2),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{staticClass:"mycorp",attrs:{placeholder:"请选择"},on:{change:t.checkTransactionType},model:{value:t.list.transactionType,callback:function(e){t.$set(t.list,"transactionType",e)},expression:"list.transactionType"}},t._l(t.$constant.contractTradeTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)]):a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("交易类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("contractTransactionTypeList")(t.list.transactionType)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务操作人")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.businessManagerName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务组")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.organizationName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("创建时间")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("date")(t.list.createdDate,t.list.createdDate)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("状态")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.$constant.orderStatus[t.list.approveStatus]))])]),t._v(" "),null!==t.list.correlatedEssenceId&&void 0!==t.list.correlatedEssenceId?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("关联合同要素ID")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.correlatedEssenceId))])]):t._e(),t._v(" "),a("selectPersonnel",{ref:"myUserDlg",on:{affirmUser:t.affirmUser}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("执行操作人\n    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("我方公司\n    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交易类型\n    ")])}]};var On=a("C7Lr")(An,$n,!1,function(t){a("cA+u"),a("QoEK")},"data-v-0f63a99d",null).exports,En={name:"modifyFieldInfo",components:{gyFileView:Ke},data:function(){return{}},props:{sourceContEssId:Number,updatedContEssId:Number,modifyFieldInfo:Object}},Bn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"paydetail-title"},[t._v("变更记录")]),t._v(" "),a("table",{staticClass:"gy-table",staticStyle:{width:"94%",margin:"20px 30px 30px 30px"}},[t._m(0),t._v(" "),a("tbody",[a("tr",[a("td",{staticClass:"contBasice"},[t._v("基本信息")]),t._v(" "),a("td",[t._v("ID")]),t._v(" "),a("td",[a("router-link",{attrs:{to:{name:"contEssDetailmenu",query:{id:t.sourceContEssId}}}},[a("em",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.sourceContEssId))])])],1),t._v(" "),a("td",[t._v(t._s(t.updatedContEssId))])]),t._v(" "),t._l(t.modifyFieldInfo.upstreamInfo,function(e,s){return a("tr",{key:s+"-"},[0===s?a("td",{staticClass:"contBasice"},[t._v("采购信息")]):a("td"),t._v(" "),a("td",[t._v(t._s(e.title))]),t._v(" "),"file"===e.valType?[a("td",[e.oldVal&&0!==e.oldVal.length?a("span",{on:{click:function(a){return t.$refs.contFileView.open4MultiFile(e.oldVal)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("td",[e.newVal&&0!==e.newVal.length?a("span",{on:{click:function(a){return t.$refs.contFileView.open4MultiFile(e.newVal)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])])]:[a("td",[a("span",{domProps:{innerHTML:t._s(e.oldVal||"--")}})]),t._v(" "),a("td",[a("span",{domProps:{innerHTML:t._s(e.newVal||"--")}})])]],2)}),t._v(" "),t._l(t.modifyFieldInfo.downstreamInfo,function(e,s){return a("tr",{key:s+"*"},[0===s?a("td",{staticClass:"contBasice"},[t._v("销售信息")]):a("td"),t._v(" "),a("td",[t._v(t._s(e.title))]),t._v(" "),"file"===e.valType?[a("td",[e.oldVal&&0!==e.oldVal.length?a("span",{on:{click:function(a){return t.$refs.contFileView.open4MultiFile(e.oldVal)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("td",[e.newVal&&0!==e.newVal.length?a("span",{on:{click:function(a){return t.$refs.contFileView.open4MultiFile(e.newVal)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])])]:[a("td",[a("span",{domProps:{innerHTML:t._s(e.oldVal||"--")}})]),t._v(" "),a("td",[a("span",{domProps:{innerHTML:t._s(e.newVal||"--")}})])]],2)})],2)]),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticStyle:{width:"13%"}},[this._v("变更类型")]),this._v(" "),e("th",{staticStyle:{width:"20%"}},[this._v("变更项目")]),this._v(" "),e("th",{staticStyle:{width:"33%"}},[this._v("变更前")]),this._v(" "),e("th",{staticStyle:{width:"33%"}},[this._v("变更后")])])])}]};var Mn=a("C7Lr")(En,Bn,!1,function(t){a("pB2+")},"data-v-4f7c87d8",null).exports,Rn={data:function(){return{homeFromFlg:null,list:{id:null,contEssenceStatus:null,bizType:null,contractType:null,createdName:null,businessManagerId:null,businessManagerName:null,orgName:null,orderStatus:null,createdDate:null,planBuyDlvyDate:null,planSaleDlvyDate:null,targetCorpId:null,targetCorpName:null,downstreamInfo:{companyId:null,companyName:null,skuOrigin:null,deliveryWarehouseId:null,deliveryWarehouseName:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,grade:null,packagingStandard:null,skuQuantity:null,odrContactId:null,odrContactName:null,depositRatio:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,chattingAmount:null,chattingCompanyName:null},upstreamInfo:{companyId:null,companyName:null,skuOrigin:null,deliveryWarehouseId:null,deliveryWarehouseName:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,grade:null,packagingStandard:null,skuQuantity:null,odrContactId:null,odrContactName:null,depositRatio:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,chattingAmount:null,chattingCompanyName:null}},hasPass:!0,isShowApproval:!0,changedable:!1,remarks:null,approveStatus:!1,userId:null,history:[{approverId:null,username:null,resultCode:null,msg:null,createdDate:null}],commentDiog:{dialogVisibleRemark:!1},contessDetailCommpany:{targetType:1,subSysType:0,targetId:null,refFunc:{},refParam:{targetId:this.$route.query.id,targetType:1}},modifyFieldInfo:{}}},watch:{remarks:function(t){t.length>2500&&(this.$message({message:"审批备注最多可填写2500字",type:"warning"}),this.remarks=this.remarks.substr(0,2500))}},created:function(){this.getdetailOrder(),this.approveJurisdiction()},mounted:function(){this.approve1History(),this.userId=JSON.parse(localStorage.getItem("userInfo")).id,this.contessDetailCommpany.targetId=Number(this.$route.query.id),this.homeFromFlg=Number(this.$route.query.homeFromFlg)},methods:{contractRevise:function(){this.$router.push({name:"creatEssRevise",query:{id:this.$route.query.id}})},getdetailOrder:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+t.$route.query.id).then(function(e){0===e.data.code?(t.list=e.data.data,t.modifyFieldInfo=JSON.parse(e.data.data.modifyFieldInfo),t.approveStatus=t.list.approveStatus>=4&&t.list.approveStatus<=6||8===t.list.approveStatus||9===t.list.approveStatus||12===t.list.approveStatus,(0===t.list.paymentStatus&&0===t.list.buyDlvyStatus&&0===t.list.buyReceiptStatus&&0===t.list.collectionStatus&&0===t.list.saleDlvyStatus&&0===t.list.saleReceiptStatus||null==t.list.paymentStatus&&0===t.list.collectionStatus&&0===t.list.saleDlvyStatus&&0===t.list.saleReceiptStatus||null==t.list.collectionStatus&&0===t.list.paymentStatus&&0===t.list.buyDlvyStatus&&0===t.list.buyReceiptStatus)&&(t.changedable=!0),t.list.sourceContEssId&&(t.changedable=!1),1!==t.homeFromFlg&&2!==t.homeFromFlg||(t.changedable=!1)):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},resubMission:function(){this.$router.push({name:"createEss",query:{id:this.$route.query.id,todoId:this.$route.query.todoId}})},contralDetail:function(){var t={id:this.$route.query.id};this.$router.push({name:"contractDetailmenu",query:t})},approveSub:function(t){var e=this,a={todoId:e.$route.query.todoId,id:e.$route.query.id,operaType:t,remarks:this.remarks};null!==e.list.sourceContEssId&&(a.commitType=1),this.$http.post(this.$api.contract.approve,a).then(function(t){0===t.data.code?(e.$message({message:"操作成功",type:"success"}),e.$router.push({name:"home"})):e.$message.error(t.data.code+" "+t.data.message)}).catch(function(t){console.log(t)})},approveJurisdiction:function(){var t=this,e={targetId:t.$route.query.id,targetType:1};t.hasPass=!1,this.$http.post(this.$api.apprProc.hasApproveAuth,e).then(function(e){0===e.data.code&&(t.hasPass=!0)}).catch(function(t){console.log(t)})},approve1History:function(){var t={targetId:this.$route.query.id,targetType:1};this.$refs.operationHis.display(this.$api.contract.approve1History,t)},reject:function(){var t=this;this.$confirm('<span><i class="iconfont icon-message-warning"></i>确认驳回?</span>',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then(function(){t.approveSub(2)})},comment:function(){this.commentDiog.dialogVisibleRemark=!0,this.contessDetailCommpany.refFunc=this.$refs.operationHis.display},gotom:function(){this.$router.push({name:"modifyContract",query:{id:this.$route.query.id}})}},components:{contSell:Dn,contBuy:Fn,cont:On,gyOperationHistory:oa,gyCommentRemark:da,modifyFieldInfo:Mn}},Un={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paydetail-wrapper"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("cont",{attrs:{list:t.list}})],1),t._v(" "),a("div",{staticClass:"pay-wrapper"},[1===t.list.contractType||2===t.list.contractType?a("div",{staticClass:"receivables-information"},[a("p",{staticClass:"paydetail-title"},[t._v("采购信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("cont-sell",{attrs:{list:t.list}})],1)]):t._e(),t._v(" "),1===t.list.contractType||3===t.list.contractType?a("div",{staticClass:"receivables-information"},[a("p",{staticClass:"paydetail-title"},[t._v("销售信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("cont-buy",{attrs:{list:t.list}})],1)]):t._e()]),t._v(" "),null!==t.list.modifyFieldInfo?a("modifyFieldInfo",{attrs:{"source-cont-ess-id":t.list.sourceContEssId,"updated-cont-ess-id":t.list.id,"modify-field-info":t.modifyFieldInfo}}):t._e(),t._v(" "),t.hasPass?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("审批备注")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"gy-textarea",attrs:{name:"",placeholder:"请填写审批备注",id:"",cols:"30",rows:"10"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])])])]):t._e(),t._v(" "),a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),4!==t.homeFromFlg||7!==t.list.approveStatus&&10!==t.list.approveStatus&&11!==t.list.approveStatus||t.list.businessManagerId!=t.userId?t._e():a("button",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_create_cont_ess",expression:"'to_create_cont_ess'"}],staticClass:"gy-button-extra",on:{click:function(e){return t.resubMission()}}},[t._v("重新创建")]),t._v(" "),t.hasPass&&1===t.homeFromFlg?[a("button",{staticClass:"gy-button-normal",on:{click:t.reject}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",on:{click:function(e){return t.approveSub(1)}}},[t._v("通过")])]:t._e(),t._v(" "),t.approveStatus?a("button",{staticClass:"gy-button-normal confirmations",on:{click:function(e){return t.contralDetail()}}},[t._v("查看合同")]):t._e(),t._v(" "),t.changedable&&9===t.list.approveStatus?a("button",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_create_contract",expression:"'to_create_contract'"}],staticClass:"gy-button-extra",on:{click:t.gotom}},[t._v("修改合同要素")]):t._e(),t._v(" "),!t.changedable||5!==t.list.approveStatus&&6!==t.list.approveStatus?t._e():a("button",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_create_cont_ess",expression:"'to_create_cont_ess'"}],staticClass:"gy-button-extra",on:{click:function(e){return t.contractRevise()}}},[t._v("修改合同要素")])],2),t._v(" "),1===t.homeFromFlg||2===t.homeFromFlg?a("div",{staticClass:"button-wrap"},[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.comment()}}},[t._v("评论")])]):t._e(),t._v(" "),a("gy-operation-history",{ref:"operationHis"}),t._v(" "),!0===t.commentDiog.dialogVisibleRemark?a("gy-comment-remark",{attrs:{dialog:t.commentDiog,invoice:t.contessDetailCommpany}}):t._e()],1)},staticRenderFns:[]};var zn=a("C7Lr")(Rn,Un,!1,function(t){a("jjHM")},"data-v-783ce494",null).exports,Vn={data:function(){return{commitType:"1",buyContImg:[],saleContImg:[],saleContTmplId:null,list:{id:null,contEssenceStatus:null,bizType:null,purchaseOrderId:null,contractType:null,createdName:null,approveStatus:null,businessManagerId:null,businessManagerName:null,orgName:null,orderStatus:null,createdDate:null,planBuyDlvyDate:null,planSaleDlvyDate:null,targetCorpId:null,targetCorpName:null,downstreamInfo:{buyerCompanyId:null,buyerCompanyName:null,skuOrigin:null,deliveryWarehouseId:null,deliveryWarehouseName:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,grade:null,packagingStandard:null,skuQuantity:null,odrContactId:null,odrContactName:null,depositRatio:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,fileDocUrl:null,fileAttachList:null},upstreamInfo:{buyerCompanyId:null,buyerCompanyName:null,skuOrigin:null,deliveryWarehouseId:null,deliveryWarehouseName:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,grade:null,packagingStandard:null,skuQuantity:null,odrContactId:null,odrContactName:null,depositRatio:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,fileDocUrl:null,fileAttachList:null}},hasPass:!1,canUploadContract:!1,remarks:null,contract:"contract",purchaseExecuteRemarks:null,saleExecuteRemarks:null,isSingleBuyContract:!1,isSingleSaleContract:!1,commentDiog:{dialogVisibleRemark:!1},contractDetailCommpany:{targetType:2,subSysType:0,targetId:null,refFunc:{}},showCommentBtn:!0,homeFromFlg:null,modifyFieldInfo:{},isModify:!1}},mounted:function(){this.getdetailOrder(),this.approve1History(),this.contractDetailCommpany.targetId=Number(this.$route.query.id),this.homeFromFlg=Number(this.$route.query.homeFromFlg)},watch:{remarks:function(t){t.length>2500&&(this.$message({message:"审批备注最多可填写2500字",type:"warning"}),this.remarks=this.remarks.substr(0,2500))},purchaseExecuteRemarks:function(t){t.length>2500&&(this.$message({message:"盖章合同备注最多可填写2500字",type:"warning"}),this.purchaseExecuteRemarks=this.purchaseExecuteRemarks.substr(0,2500))},saleExecuteRemarks:function(t){t.length>2500&&(this.$message({message:"盖章合同备注最多可填写2500字",type:"warning"}),this.saleExecuteRemarks=this.saleExecuteRemarks.substr(0,2500))}},methods:{checkHistory:function(){this.showCommentBtn=!1},getdetailOrder:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+this.$route.query.id).then(function(e){0===e.data.code?(t.list=e.data.data,t.list.modifyFieldInfo&&t.list.sourceContEssId&&(t.isModify=!0,t.modifyFieldInfo=JSON.parse(t.list.modifyFieldInfo)),!t.list.upstreamInfo||null!==t.list.upstreamInfo.fileAttachCertifiedList&&0!==t.list.upstreamInfo.fileAttachCertifiedList.length||(t.isSingleBuyContract=!0),!t.list.downstreamInfo||null!==t.list.downstreamInfo.fileAttachCertifiedList&&0!==t.list.downstreamInfo.fileAttachCertifiedList.length||(t.isSingleSaleContract=!0),t.list.correlatedEssenceId&&(t.showCommentBtn=!1),1!==t.$route.query.homeFromFlg&&"1"!==t.$route.query.homeFromFlg||0!==t.$route.query.doneFlg&&"0"!==t.$route.query.doneFlg||6!==t.list.approveStatus||!t.$tools.hasBizAuth("to_create_contract")||(t.canUploadContract=!0),t.approveJurisdiction()):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},approve1History:function(){var t={targetId:Number(this.$route.query.id),targetType:2};this.$refs.operationHis.display(this.$api.contract.approve1History,t)},approveJurisdiction:function(){var t=this,e={targetId:Number(t.$route.query.id),targetType:2};this.$http.post(this.$api.apprProc.hasApproveAuth,e).then(function(e){0===e.data.code&&5===t.list.approveStatus&&(t.hasPass=!0)}).catch(function(t){console.log(t)})},approveSub:function(t){var e=this,a={todoId:e.$route.query.todoId,id:Number(e.$route.query.id),operaType:t,remarks:this.remarks};this.isModify&&(a.sourceContEssId=this.list.sourceContEssId,a.commitType="1"),null!=e.list.sourceContEssId&&(a.commitType=1,a.sourceContEssId=e.list.sourceContEssId),this.$http.post(this.$api.contract.approve1,a).then(function(t){0===t.data.code?(e.$message({message:"操作成功",type:"success"}),e.$router.push({name:"home"})):e.$message.error(t.data.code+" "+t.data.message)}).catch(function(t){console.log(t)})},goback:function(){this.$router.go(-1)},onCallbackBuyFileUpload:function(t){var e=this;this.buyContImg=[],t.forEach(function(t){e.buyContImg.push(t.fileUrl)})},onCallbackSaleFileUpload:function(t){var e=this;this.saleContImg=[],t.forEach(function(t){e.saleContImg.push(t.fileUrl)})},submit:function(){var t=this,e=this,a={todoId:e.$route.query.todoId,id:Number(this.$route.query.id),purchaseCertifiedFileAttachList:this.buyContImg,purchaseExecuteRemarks:this.purchaseExecuteRemarks,saleCertifiedFileAttachList:this.saleContImg,saleExecuteRemarks:this.saleExecuteRemarks};return null!=e.list.sourceContEssId&&(a.commitType=1,a.sourceContEssId=e.list.sourceContEssId),!this.isSingleBuyContract||1!==this.list.contractType&&2!==this.list.contractType||6!==this.list.approveStatus||0!==this.buyContImg.length?!this.isSingleSaleContract||1!==this.list.contractType&&3!==this.list.contractType||6!==this.list.approveStatus||0!==this.saleContImg.length?void this.$http.post(this.$api.contract.attach,a).then(function(a){0===a.data.code?(t.$message({message:"创建成功",type:"success"}),e.goback()):t.$message.error(a.data.code+" "+a.data.message)}):(this.$message({message:"请上传盖章销售合同",type:"warning"}),!1):(this.$message({message:"请上传盖章采购合同",type:"warning"}),!1)},reject:function(){var t=this;this.$confirm('<span><i class="iconfont icon-message-warning"></i>确认驳回?</span>',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then(function(){t.approveSub(2)})},showImg:function(t){this.$refs.contFileView.open4MultiFile(t)},showContImg:function(t){var e=[];t.forEach(function(t){e.push({fileUrl:t.filepath})}),this.$refs.contFileView.open(e)},comment:function(){this.commentDiog.dialogVisibleRemark=!0,this.contractDetailCommpany.targetId=Number(this.$route.query.id),this.contractDetailCommpany.refFunc=this.$refs.operationHis.display,this.contractDetailCommpany.refParam={targetId:this.$route.query.id,targetType:2}}},components:{contSell:Dn,contBuy:Fn,cont:On,gyFileView:Ke,gyFileUpload:aa,gyOperationHistory:oa,gyCommentRemark:da,modifyFieldInfo:Mn}},Qn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contract-detail"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("cont",{attrs:{list:t.list}})],1),t._v(" "),a("div",{staticClass:"pay-wrapper"},[1===t.list.contractType||2===t.list.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("采购合同信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("采购合同编号")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.upstreamInfo.contractCode))])])]),t._v(" "),a("cont-sell",{attrs:{list:t.list,isCont:t.contract}}),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("纸质合同号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.upstreamInfo.planNumber||"--"))])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("采购合同")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[t.list.upstreamInfo.fileAttachList&&0!==t.list.upstreamInfo.fileAttachList.length?a("span",{on:{click:function(e){return t.showContImg(t.list.upstreamInfo.fileAttachList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):t._e(),t._v(" "),t.list.upstreamInfo.fileDocUrl&&0!==t.list.upstreamInfo.fileDocUrl.length?a("span",{on:{click:function(e){return t.showImg(t.list.upstreamInfo.fileDocUrl)}}},[a("i",{staticClass:"iconfont icon-photo"})]):t._e()])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("创建合同备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.buyRemark||"--"))])])]),t._v(" "),t.list.upstreamInfo.fileAttachCertifiedList&&t.list.upstreamInfo.fileAttachCertifiedList.length>0?[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章合同")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("span",{on:{click:function(e){return t.showContImg(t.list.upstreamInfo.fileAttachCertifiedList)}}},[a("i",{staticClass:"iconfont icon-photo"})])])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章合同备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.upstreamInfo.executeRemarks||"--"))])])])]:t._e(),t._v(" "),!t.canUploadContract||1!==t.$route.query.homeFromFlg&&"1"!==t.$route.query.homeFromFlg||0!==t.$route.query.doneFlg&&"0"!==t.$route.query.doneFlg||6!==t.list.approveStatus||!t.list.upstreamInfo.fileAttachCertifiedList||0!==t.list.upstreamInfo.fileAttachCertifiedList.length?t._e():[a("div",{staticClass:"essential-row"},[t.isSingleBuyContract?a("div",{staticClass:"essential-item"},[t._m(0),t._v(" "),a("div",{staticClass:"essential-text"},[a("gy-file-upload",{ref:"pFileUpload",on:{callbackFileUpload:t.onCallbackBuyFileUpload}})],1)]):t._e()]),t._v(" "),a("div",{staticClass:"essential-row"},[t.isSingleBuyContract?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章合同备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.purchaseExecuteRemarks,expression:"purchaseExecuteRemarks"}],staticClass:"gy-textarea",attrs:{name:"",cols:"30",rows:"10"},domProps:{value:t.purchaseExecuteRemarks},on:{input:function(e){e.target.composing||(t.purchaseExecuteRemarks=e.target.value)}}})])]):t._e()])]],2)]):t._e(),t._v(" "),1===t.list.contractType||3===t.list.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("销售合同信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("销售合同编号")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.downstreamInfo.contractCode))])])]),t._v(" "),a("cont-buy",{attrs:{list:t.list,isCont:t.contract}}),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("纸质合同号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.downstreamInfo.planNumber||"--"))])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("销售合同")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[t.list.downstreamInfo.fileAttachList&&0!==t.list.downstreamInfo.fileAttachList.length?a("span",{on:{click:function(e){return t.showContImg(t.list.downstreamInfo.fileAttachList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):t._e(),t._v(" "),t.list.downstreamInfo.fileDocUrl&&0!==t.list.downstreamInfo.fileDocUrl.length?a("span",{on:{click:function(e){return t.showImg(t.list.downstreamInfo.fileDocUrl)}}},[a("i",{staticClass:"iconfont icon-photo"})]):t._e()])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("创建合同备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.saleRemark||"--"))])])]),t._v(" "),t.list.downstreamInfo.fileAttachCertifiedList&&t.list.downstreamInfo.fileAttachCertifiedList.length>0?[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章合同")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("span",{on:{click:function(e){return t.showContImg(t.list.downstreamInfo.fileAttachCertifiedList)}}},[a("i",{staticClass:"iconfont icon-photo"})])])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章合同备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.downstreamInfo.executeRemarks||"--"))])])])]:t._e(),t._v(" "),!t.canUploadContract||1!==t.$route.query.homeFromFlg&&"1"!==t.$route.query.homeFromFlg||0!==t.$route.query.doneFlg&&"0"!==t.$route.query.doneFlg||6!==t.list.approveStatus||!t.list.downstreamInfo.fileAttachCertifiedList||0!==t.list.downstreamInfo.fileAttachCertifiedList.length?t._e():[a("div",{staticClass:"essential-row"},[t.isSingleSaleContract?a("div",{staticClass:"essential-item"},[t._m(1),t._v(" "),a("div",{staticClass:"essential-text"},[a("gy-file-upload",{ref:"sFileUpload",on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1)]):t._e()]),t._v(" "),a("div",{staticClass:"essential-row"},[t.isSingleSaleContract?a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章合同备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.saleExecuteRemarks,expression:"saleExecuteRemarks"}],staticClass:"gy-textarea",attrs:{name:"",cols:"30",rows:"10"},domProps:{value:t.saleExecuteRemarks},on:{input:function(e){e.target.composing||(t.saleExecuteRemarks=e.target.value)}}})])]):t._e()])],t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("下游统计口径")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text",staticStyle:{"padding-left":"10px"}},[t._v(t._s(t.list.downstreamInfo.statisticalCaliber))])])])])],2)]):t._e()]),t._v(" "),null!==t.list.modifyFieldInfo?a("modifyFieldInfo",{attrs:{"source-cont-ess-id":t.list.sourceContEssId,"updated-cont-ess-id":t.list.id,"modify-field-info":t.modifyFieldInfo}}):t._e(),t._v(" "),t.hasPass?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("审批备注")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"gy-textarea",attrs:{name:"",placeholder:"请填写审批备注",id:"",cols:"30",rows:"10"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])])])]):t._e(),t._v(" "),a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-normal",on:{click:t.goback}},[t._v("返回")]),t._v(" "),!t.canUploadContract||1!==t.homeFromFlg||0!==t.$route.query.doneFlg&&"0"!==t.$route.query.doneFlg||6!==t.list.approveStatus?t._e():a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.submit()}}},[t._v("提交\n    ")]),t._v(" "),t.hasPass&&1===t.homeFromFlg?[a("button",{staticClass:"gy-button-normal",on:{click:t.reject}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",on:{click:function(e){return t.approveSub(1)}}},[t._v("通过")])]:t._e()],2),t._v(" "),!t.showCommentBtn||1!==t.homeFromFlg&&2!==t.homeFromFlg?t._e():a("div",{staticClass:"button-wrap"},[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.comment()}}},[t._v("评论")])]),t._v(" "),t.showCommentBtn?a("gy-operation-history",{ref:"operationHis",on:{checkHistory:t.checkHistory}}):t._e(),t._v(" "),!0===t.commentDiog.dialogVisibleRemark?a("gy-comment-remark",{attrs:{dialog:t.commentDiog,invoice:t.contractDetailCommpany}}):t._e(),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("盖章采购合同\n              ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("盖章销售合同")])}]};var jn=a("C7Lr")(Vn,Qn,!1,function(t){a("ghcj"),a("KEGd")},"data-v-c041f6c2",null).exports,qn={data:function(){return{purchasePlanNumber:null,salePlanNumber:null,remark:null,unilateralRelevance:{isUnilateralCorrelation:null,correlationOrderId:null,contractCode:null},totalDelivery:null,searchForm:{pageNo:1,pageSize:10,productId:null,buyerCompanyName:null,sellerCompanyName:null,bizType:null},saleRemark:null,buyRemark:null,list:{id:null,contEssenceStatus:null,bizType:null,contractType:null,productId:null,createdName:null,approveStatus:null,businessManagerId:null,businessManagerName:null,orgName:null,orderStatus:null,createdDate:null,planBuyDlvyDate:null,planSaleDlvyDate:null,purchaseOrderId:null,targetCorpId:null,targetCorpName:null,downstreamInfo:{companyId:null,companyName:null,skuOrigin:null,deliveryWarehouseId:null,deliveryWarehouseName:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,grade:null,packagingStandard:null,skuQuantity:null,odrContactId:null,odrContactName:null,depositRatio:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null},upstreamInfo:{companyId:null,companyName:null,skuOrigin:null,deliveryWarehouseId:null,deliveryWarehouseName:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,grade:null,packagingStandard:null,skuQuantity:null,odrContactId:null,odrContactName:null,depositRatio:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null}},ContractTemplate1:[{name:"使用通用采购合同模板",id:3},{name:"上传采购合同",id:"upload"}],ContractTemplate:[{name:"使用通用销售合同模板",id:3},{name:"上传销售合同",id:"upload"}],buyContTmplId:null,saleContTmplId:null,buyContImg:[],saleContImg:[],obj:{},deliveryContractList:[],isShowUnilateralDialog:!1,purchaseContractList:[],currContractType:null}},created:function(){this.getdetailOrder()},watch:{purchasePlanNumber:function(t){t&&t.length>20&&(this.$message({message:"纸质合同号最多可填写20字",type:"error"}),this.purchasePlanNumber=this.purchasePlanNumber.substr(0,20))},salePlanNumber:function(t){t&&t.length>20&&(this.$message({message:"纸质合同号最多可填写20字",type:"error"}),this.salePlanNumber=this.salePlanNumber.substr(0,20))}},methods:{turnDown:function(){var t=this;this.$confirm('<span><i class="iconfont icon-message-warning"></i>确认驳回?</span>',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then(function(){t.$http.post(t.$api.contract.turnDown,{todoId:t.$route.query.todoId,id:t.$route.query.id}).then(function(e){0===e.data.code?(t.$message("合同已驳回"),t.$router.go(-1)):t.$message.error(e.data.code+" "+e.data.message)})})},showContImg:function(t){var e=[];t.forEach(function(t){e.push({fileUrl:t.filepath})}),this.showImgList(e)},showImgList:function(t){this.$refs.contFileView.open(t)},essenceTest:function(t,e){var a=this;this.$http.post(this.$api.contract.essenceTest,{planNumber:t}).then(function(t){1===t.data.code&&(a.$message.error("纸质合同号已存在，请重新输入"),a[e]=null)}).catch(function(t){console.log(t)})},onCallbackBuyFileUpload:function(t){var e=this;this.buyContImg=[],t.forEach(function(t){e.buyContImg.push(t.fileUrl)})},onCallbackSaleFileUpload:function(t){var e=this;this.saleContImg=[],t.forEach(function(t){e.saleContImg.push(t.fileUrl)})},getdetailOrder:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+t.$route.query.id).then(function(e){0===e.data.code?(t.list=e.data.data,2===t.list.contractType||3===t.list.contractType?t.unilateral=!0:t.unilateral=!1,2===t.list.contractType?this.currContractType=2:3===this.list.contractType&&(this.currContractType=3)):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},onSeachContract:function(t){this.isShowUnilateralDialog=!0,this.searchForm.pageNo=1,this.purchaseContract(t)},purchaseContract:function(t){var e=this;if("单边"===t){if(null==this.list.contractType||void 0===this.list.contractType)return this.$message("请先选择单边交易类型后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(1===this.list.contractType)return this.$message("双边交易时不能查询单边合同"),this.isShowUnilateralDialog=!1,!1;2===this.list.contractType?(this.searchForm.bizType=1,this.currContractType=2,this.searchForm.unilateralCorrelation=1,this.searchForm.productId=this.list.productId,this.searchForm.skuQuantity=this.list.upstreamInfo.skuQuantity):3===this.list.contractType&&(this.searchForm.bizType=2,this.currContractType=3,this.searchForm.unilateralCorrelation=1,this.searchForm.productId=this.list.productId,this.searchForm.skuQuantity=this.list.downstreamInfo.skuQuantity)}this.$http.post(this.$api.delivery.crossContract,this.searchForm).then(function(t){0===t.data.code&&(e.totalDelivery=t.data.data.total,e.purchaseContractList=t.data.data.rows)})},crossSubmission:function(){1===this.upstreamTerm?(this.list.upstreamInfo.contractCode=this.obj.contractCode,this.list.upstreamInfo.longtermContractOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1):2===this.upstreamTerm?(this.list.downstreamInfo.contractCode=this.obj.contractCode,this.list.downstreamInfo.longtermContractOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1):(this.unilateralRelevance.contractCode=this.obj.contractCode,this.unilateralRelevance.correlationOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1,this.deliveryContractClick(this.obj.orderId))},handleCurrentChangeDeliver:function(t){this.searchForm.pageNo=t,this.purchaseContract()},crossHandleCheckChange:function(t){this.obj=t},deliveryContractClick:function(t){var e=this;this.$http.get(this.$api.delivery.deliveryContract+"/"+t).then(function(t){0===t.data.code&&(e.deliveryContractList=t.data.data.erpFileContractModelList)})},onsubmit:function(){var t=this,e=this,a={todoId:this.$route.query.todoId,id:this.$route.query.id,isOnline:1,buyContTmplId:"upload"===this.buyContTmplId?null:this.buyContTmplId,saleContTmplId:"upload"===this.saleContTmplId?null:this.saleContTmplId,purchaseFileAttachList:"upload"===this.buyContTmplId?this.buyContImg:null,saleFileAttachList:"upload"===this.saleContTmplId?this.saleContImg:null,correlationOrderId:this.obj.orderId,purchasePlanNumber:this.purchasePlanNumber,salePlanNumber:this.salePlanNumber,saleRemark:this.saleRemark,buyRemark:this.buyRemark};null!=e.list.sourceContEssId&&(a.commitType=1,a.sourceContEssId=e.list.sourceContEssId),a.isUnilateralCorrelation="1"===this.unilateralRelevance.isUnilateralCorrelation,this.$http.post(this.$api.contract.addContract1,a).then(function(a){0===a.data.code?(t.$message({message:"创建成功",type:"success"}),e.goback()):t.$message({message:a.data.code+" "+a.data.message,type:"error"})})},goback:function(){this.$router.go(-1)}},components:{contSell:Dn,contBuy:Fn,cont:On,gyFileView:Ke,gyFileUpload:aa}},Wn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-contract"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("cont",{attrs:{list:t.list}})],1),t._v(" "),a("div",{staticClass:"pay-wrapper"},[1===t.list.contractType||2===t.list.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("采购合同信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("cont-sell",{attrs:{list:t.list}}),t._v(" "),t.list.upstreamInfo.fileAttachCertifiedList&&t.list.upstreamInfo.fileAttachCertifiedList.length>0?[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("纸质合同号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[t._v("\n                          "+t._s(t.list.upstreamInfo.purchasePlanNumber||"--")+"\n                          ")])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章合同")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("span",{on:{click:function(e){return t.showContImg(t.list.upstreamInfo.fileAttachCertifiedList)}}},[a("i",{staticClass:"iconfont icon-photo"})])])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章合同备注")]),t._v(" "),a("div",{staticClass:"essential-text text-overflow"},[t._v(t._s(t.list.upstreamInfo.executeRemarks||"--"))])])])]:t._e(),t._v(" "),"upload"===t.buyContTmplId?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item "},[a("div",{staticClass:"essential-title"},[t._v("纸质合同号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.purchasePlanNumber,expression:"purchasePlanNumber"}],attrs:{type:"text",placeholder:"请输入纸质合同号"},domProps:{value:t.purchasePlanNumber},on:{blur:function(e){return t.essenceTest(t.purchasePlanNumber,"purchasePlanNumber")},input:function(e){e.target.composing||(t.purchasePlanNumber=e.target.value)}}})])])])]):t._e(),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(0),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.buyContTmplId,callback:function(e){t.buyContTmplId=e},expression:"buyContTmplId"}},t._l(t.ContractTemplate1,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)])])]),t._v(" "),"upload"===t.buyContTmplId?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(1),t._v(" "),a("div",{staticClass:"essential-text"},[a("gy-file-upload",{ref:"pFileUpload",on:{callbackFileUpload:t.onCallbackBuyFileUpload}})],1)])]):t._e(),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("创建合同备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.buyRemark,expression:"buyRemark"}],staticStyle:{width:"306px"},attrs:{cols:"4",rows:"4"},domProps:{value:t.buyRemark},on:{input:function(e){e.target.composing||(t.buyRemark=e.target.value)}}})])])])],2),t._v(" "),2===t.list.contractType||3===t.list.contractType?a("div",{staticClass:"single-essential-wrapper",staticStyle:{padding:"0"}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l",staticStyle:{"margin-left":"10px"}},[t._v("单边关联")]),t._v(" "),[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.unilateralRelevance.isUnilateralCorrelation,callback:function(e){t.$set(t.unilateralRelevance,"isUnilateralCorrelation",e)},expression:"unilateralRelevance.isUnilateralCorrelation"}})]],2),t._v(" "),"1"===t.unilateralRelevance.isUnilateralCorrelation?a("div",{staticClass:"gy-form-group cl"},[t._m(2),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.unilateralRelevance.contractCode,expression:"unilateralRelevance.contractCode"}],attrs:{type:"text",readonly:""},domProps:{value:t.unilateralRelevance.contractCode},on:{input:function(e){e.target.composing||t.$set(t.unilateralRelevance,"contractCode",e.target.value)}}}),t._v(" "),a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",top:"10px",right:"20px"},on:{click:function(e){return t.onSeachContract("单边")}}})]):t._e(),t._v(" "),"1"===t.unilateralRelevance.isUnilateralCorrelation?a("div",{staticClass:"gy-form-group tl"},[2===t.list.contractType?a("span",{staticClass:"l"},[t._v("单边销售合同")]):t._e(),t._v(" "),3===t.list.contractType?a("span",{staticClass:"l"},[t._v("单边采购合同")]):t._e(),t._v(" "),t.deliveryContractList&&t.deliveryContractList.length>0?a("span",{on:{click:function(e){return t.showImgList(t.deliveryContractList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):t._e()]):t._e()]):t._e()]):t._e(),t._v(" "),1===t.list.contractType||3===t.list.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("销售合同信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("cont-buy",{attrs:{list:t.list}}),t._v(" "),t.list.downstreamInfo.fileAttachCertifiedList&&t.list.downstreamInfo.fileAttachCertifiedList.length>0?[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("纸质合同号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.downstreamInfo.salePlanNumber||"--"))])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("下游统计口径")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.downstreamInfo.statisticalCaliber||"--"))])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章合同")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("span",{on:{click:function(e){return t.showContImg(t.list.downstreamInfo.fileAttachCertifiedList)}}},[a("i",{staticClass:"iconfont icon-photo"})])])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("盖章合同备注")]),t._v(" "),a("div",{staticClass:"essential-text text-overflow"},[t._v(t._s(t.list.downstreamInfo.executeRemarks||"--"))])])])]:t._e(),t._v(" "),"upload"===t.saleContTmplId?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("纸质合同号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.salePlanNumber,expression:"salePlanNumber"}],attrs:{type:"text",placeholder:"请输入纸质合同号"},domProps:{value:t.salePlanNumber},on:{blur:function(e){return t.essenceTest(t.salePlanNumber,"salePlanNumber")},input:function(e){e.target.composing||(t.salePlanNumber=e.target.value)}}})])])])]):t._e(),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(3),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.saleContTmplId,callback:function(e){t.saleContTmplId=e},expression:"saleContTmplId"}},t._l(t.ContractTemplate,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)])])]),t._v(" "),"upload"===t.saleContTmplId?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(4),t._v(" "),a("div",{staticClass:"essential-text"},[a("gy-file-upload",{ref:"sFileUpload",on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1)])]):t._e(),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("创建合同备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.saleRemark,expression:"saleRemark"}],staticStyle:{width:"306px"},attrs:{cols:"4",rows:"4"},domProps:{value:t.saleRemark},on:{input:function(e){e.target.composing||(t.saleRemark=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("下游统计口径")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text",staticStyle:{"padding-left":"10px"}},[t._v(t._s(t.list.downstreamInfo.statisticalCaliber||"--"))])])])])],2),t._v(" "),2===t.list.contractType||3===t.list.contractType?a("div",{staticClass:"single-essential-wrapper",staticStyle:{padding:"0"}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l",staticStyle:{"margin-left":"10px"}},[t._v("单边关联")]),t._v(" "),[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.unilateralRelevance.isUnilateralCorrelation,callback:function(e){t.$set(t.unilateralRelevance,"isUnilateralCorrelation",e)},expression:"unilateralRelevance.isUnilateralCorrelation"}})]],2),t._v(" "),"1"===t.unilateralRelevance.isUnilateralCorrelation?a("div",{staticClass:"gy-form-group cl"},[t._m(5),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.unilateralRelevance.contractCode,expression:"unilateralRelevance.contractCode"}],attrs:{type:"text"},domProps:{value:t.unilateralRelevance.contractCode},on:{input:function(e){e.target.composing||t.$set(t.unilateralRelevance,"contractCode",e.target.value)}}})]),t._v(" "),a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",top:"10px",right:"20px"},on:{click:function(e){return t.onSeachContract("单边")}}})]):t._e(),t._v(" "),"1"===t.unilateralRelevance.isUnilateralCorrelation?a("div",{staticClass:"gy-form-group tl"},[2===t.list.contractType?a("span",{staticClass:"l"},[t._v("单边销售合同")]):t._e(),t._v(" "),3===t.list.contractType?a("span",{staticClass:"l"},[t._v("单边采购合同")]):t._e(),t._v(" "),t.deliveryContractList&&t.deliveryContractList.length>0?a("span",{on:{click:function(e){return t.showImgList(t.deliveryContractList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):t._e()]):t._e()]):t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-normal",on:{click:t.goback}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-normal",on:{click:t.turnDown}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",on:{click:t.onsubmit}},[t._v("提交")])]),t._v(" "),a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px",title:2===t.currContractType?"选择销售合同":"选择采购合同",visible:t.isShowUnilateralDialog},on:{"update:visible":function(e){t.isShowUnilateralDialog=e}}},[2===t.currContractType?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.sellerCompanyName,expression:"searchForm.sellerCompanyName"}],attrs:{type:"text"},domProps:{value:t.searchForm.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"sellerCompanyName",e.target.value)}}})]):t._e(),t._v(" "),3===t.currContractType?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.buyerCompanyName,expression:"searchForm.buyerCompanyName"}],attrs:{type:"text"},domProps:{value:t.searchForm.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"buyerCompanyName",e.target.value)}}})]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",top:"10px",left:"-50px"},on:{click:function(e){return t.purchaseContract()}}})]),t._v(" "),a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th",{staticStyle:{width:"120px"}},[t._v("合同要素ID")]),t._v(" "),a("th",[t._v("我方公司")]),t._v(" "),a("th",[2===t.currContractType?a("span",[t._v("下游公司")]):t._e(),3===t.currContractType?a("span",[t._v("上游公司")]):t._e()]),t._v(" "),a("th",{staticStyle:{width:"130px"}},[t._v("合同金额(元)")]),t._v(" "),a("th",[t._v("实际交割日期")]),t._v(" "),a("th",[t._v("交割日期")]),t._v(" "),a("th",[t._v("交割库")]),t._v(" "),a("th",[t._v("免仓期(天)")])])]),t._v(" "),this.purchaseContractList.length>0?a("tbody",t._l(t.purchaseContractList,function(e,s){return a("tr",{key:s},[a("td",[a("input",{attrs:{type:"radio",name:"11"},on:{change:function(a){return t.crossHandleCheckChange(e)}}}),t._v(" "),a("span",{staticStyle:{"margin-left":"3px"}},[t._v(t._s(e.contractEssenceId||"-"))])]),t._v(" "),a("td",[t._v(t._s(e.ourCompanyName||"-"))]),t._v(" "),a("td",[2===t.currContractType?a("span",[t._v(t._s(e.buyerCompanyName))]):a("span",[t._v(t._s(e.sellerCompanyName))])]),t._v(" "),a("td",{staticClass:"align-r",staticStyle:{width:"130px"}},[t._v(t._s(t._f("numToCash")(e.totalAmount)))]),t._v(" "),a("td",[e.realDeliveryDate?a("span",[t._v(t._s(t._f("date")(e.realDeliveryDate)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[t._v(t._s(e.deliveryDate))]),t._v(" "),a("td",[t._v(t._s(e.deliveryWarehouseName))]),t._v(" "),a("td",[t._v(t._s(e.warehouseFreeDays))])])}),0):t._e()]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.searchForm.pageNo,"page-size":t.searchForm.pageSize,total:t.totalDelivery},on:{"update:currentPage":function(e){return t.$set(t.searchForm,"pageNo",e)},"update:current-page":function(e){return t.$set(t.searchForm,"pageNo",e)},"current-change":t.handleCurrentChangeDeliver}}),t._v(" "),a("div",{staticClass:"button-wrap",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.isShowUnilateralDialog=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.crossSubmission()}}},[t._v("确定")])])],1),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("选择合同模板\n                        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("上传采购合同")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l",staticStyle:{"margin-left":"0px"}},[e("i",{staticClass:"i",staticStyle:{color:"red"}},[this._v("* ")]),this._v("单边合同编号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("选择合同模板\n                        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("上传销售合同\n                        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l",staticStyle:{"margin-left":"0"}},[e("i",{staticClass:"i",staticStyle:{color:"red"}},[this._v("* ")]),this._v("单边合同编号")])}]};var Hn=a("C7Lr")(qn,Wn,!1,function(t){a("v+BL"),a("/owe")},"data-v-f622ebda",null).exports,Kn=a("3cXf"),Xn=a.n(Kn),Jn={components:{gyFileView:Ke,gyFileUpload:aa,specifications:nn,manufacturer:oi,skuQuantity:en,shortOverflowRate:Wi,packagingStandardMulti:gi,longTermContractUp:ei,longTermContractDown:ii,wastage:mn,settlementQtyType:Qi,skuPrice:Zi,deposit:Ws,depositAgreement:Xs,depositBenchmark:Zs,deliverySite:Bs,deliverySiteDock:Us,deliveryDate:$s,deliveryType:Qs,warehouseFreeDays:un,transportType:rn,paymentType:xi,provideInvoiceType:$i,skuOrigin:Xi,brand:ws,qualityStandard:Bi,packagingStandard:yi,prodInspectionType:Li,prodInspectionFee:Ti,chattingFee:xs,consignmentTime:Ls,outgoingQualityBill:vi,paymentDate:wi,remarks:Ui,chattingCompany:Ts,deliverySiteOtherDock:fn},data:function(){return{contEssId:null,searchForm:{pageNo:1,pageSize:10,productId:null,buyerCompanyName:null,sellerCompanyName:null,bizType:null},goodsList:[],forContEssRecreate:null,totalDelivery:null,purchaseContractList:[],isShowUnilateralDialog:!1,deliveryContractList:[],userid:null,organizationId:null,businessManager:[],businessManagerGroup:[],isSellerCh:!1,isBuyerCh:!1,data:{id:null,bizType:null,businessManagerId:null,businessManagerName:null,organizationName:null,usrOrganizationId:null,contractType:1,modifyFieldInfo:[],downstreamInfo:{companyId:null,companyName:null,skuOrigin:null,prodName:null,skuCode:null,prdSkuId:null,deliveryWarehouseId:null,deliveryWarehouseName:null,deliveryDateFlag:null,deliveryBeginDate:null,deliveryEndDate:null,deliveryDateText:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,skuPriceType:1,depositType:null,skuPriceExpression:null,packagingStandard:null,qualityStandard:null,skuQuantity:null,depositRatio:null,depositAmount:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,targetCorpId:null,targetCorpName:null,longtermContractOrderId:null,chattingAmount:null,priceOfWeight:null,chattingCompanyName:null},upstreamInfo:{companyId:null,companyName:null,skuOrigin:null,prodName:null,skuCode:null,prdSkuId:null,deliveryWarehouseId:null,deliveryWarehouseName:null,deliveryDateFlag:null,deliveryBeginDate:null,deliveryEndDate:null,deliveryDateText:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,skuPriceType:1,depositType:null,skuPriceExpression:null,packagingStandard:null,qualityStandard:null,skuQuantity:null,depositRatio:null,depositAmount:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,targetCorpId:null,targetCorpName:null,longtermContractOrderId:null,chattingAmount:null,priceOfWeight:null,chattingCompanyName:null}},dialogVisible:!1,dialogVisibles:!1,sellCompanyList:[],buyCompanyList:[],relatedCompany:[],companyName:null,activeContractType:null,activeIndex:null,buyerInfoProd:null,sellerInfoProd:null,sellerInfoProdIndex:null,buyerTrade:null,sellerTrade:null,businessManageridx:null,srOrganizationIdx:null,obj:{},modifyFieldInfo:{},upstreamTerm:null,showDvlyQtyCol:!1,sellerCheck:!1,buyerCheck:!1,dataOldList:{},oldData:{},targetCorpIdIdx:null,upstreamCmptList:[],downstreamCmptList:[],upstreamPropList:[],downstreamPropList:[],isTargetChange:!1}},mounted:function(){this.getRelatedCompany(),this.getGrade(),this.businessManageridx=JSON.parse(localStorage.getItem("userInfo")).username,this.data.businessManagerName=this.businessManageridx,this.userid=JSON.parse(localStorage.getItem("userInfo")).id,this.getUserOrganization(),this.contEssId=this.$route.query.id,null!==this.$route.query.id&&void 0!==this.$route.query.id&&this.getdetailOrder()},methods:{goback:function(){this.$router.go(-1)},getdetailOrder:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+t.$route.query.id).then(function(e){0===e.data.code&&(t.data=e.data.data,t.activeProductId=t.data.productId,t.data.sourceContEssId=t.$route.query.id,t.data.lastContEssId=e.data.data.lastContEssId||e.data.data.id,t.data.upstreamInfo&&(t.data.upstreamInfo.companyName=t.data.upstreamInfo.sellerCompanyName,t.data.upstreamInfo.companyId=t.data.upstreamInfo.sellerCompanyId,t.data.upstreamInfo.prdSkuId=t.data.productId,t.data.upstreamInfo.targetCorpName=t.data.targetCorpName,t.gitPropType(2)),t.data.downstreamInfo&&(t.data.downstreamInfo.companyName=t.data.downstreamInfo.buyerCompanyName,t.data.downstreamInfo.companyId=t.data.downstreamInfo.buyerCompanyId,t.data.downstreamInfo.prdSkuId=t.data.productId,t.data.downstreamInfo.targetCorpName=t.data.targetCorpName,t.gitPropType(3)),t.companyName=null,t.activeContractType=0,t.forContEssRecreate=!0,t.oldData=JSON.parse(Xn()(t.data)),t.getCompanyByBizType(!0))}).catch(function(t){console.log(t)})},gitPropType:function(t){var e=this,a={productId:this.data.productId,contractType:t};e.$http.post(e.$api.contract.getProdPropCompList,a).then(function(a){0===a.data.code?(2===t&&(e.upstreamPropList=a.data.data,e.upstreamCmptList=e.upstreamPropList.filter(function(t){return t.displayOrder>0})),3===t&&(e.downstreamPropList=a.data.data,e.downstreamCmptList=e.downstreamPropList.filter(function(t){return t.displayOrder>0}))):e.$message.error(a.data.message)}).catch(function(t){console.log(t)})},onSeachContract:function(t){this.isShowUnilateralDialog=!0,this.purchaseContract(t)},crossHandleCheckChange:function(t){this.obj=t},handleCurrentChangeDeliver:function(t){this.searchForm.pageNo=t;var e=null;1===this.upstreamTerm||2===this.upstreamTerm?e="单边":3===this.upstreamTerm?e="上游":4===this.upstreamTerm&&(e="下游"),this.purchaseContract(e,!0)},purchaseContract:function(t,e){var a=this;if(!t||void 0!==e&&null!=e||(this.searchForm={}),this.upstreamTerm=0,"单边"===t){if(null==this.data.contractType||void 0===this.data.contractType)return this.$message.error("请先选择单边交易类型后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(1===this.data.contractType)return this.$message.error("双边交易时不能查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(this.showDvlyQtyCol=!1,2===this.data.contractType){if(this.upstreamTerm=2,null==this.sellerInfoProd||void 0===this.sellerInfoProd)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.bizType=1,this.searchForm.unilateralCorrelation=1,this.searchForm.productId=this.sellerInfoProd,this.searchForm.skuQuantity=Number(this.data.upstreamInfo.skuQuantity)}else if(3===this.data.contractType){if(this.upstreamTerm=1,null==this.buyerInfoProd||void 0===this.buyerInfoProd)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.bizType=2,this.searchForm.unilateralCorrelation=1,this.searchForm.productId=this.buyerInfoProd,this.searchForm.skuQuantity=this.data.downstreamInfo.skuQuantity}if(null==this.searchForm.productId||void 0===this.searchForm.productId)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(null==this.searchForm.skuQuantity||void 0===this.searchForm.skuQuantity)return this.$message.error("请先输入产品数量后再查询单边合同"),this.isShowUnilateralDialog=!1,!1}else{if(this.showDvlyQtyCol=!0,1===this.searchForm.unilateralCorrelation&&delete this.searchForm.unilateralCorrelation,"上游"===t){if(this.upstreamTerm=3,this.searchForm.bizType=2,null==this.sellerInfoProd||void 0===this.sellerInfoProd)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.productId=this.sellerInfoProd,this.searchForm.skuQuantity=this.data.upstreamInfo.skuQuantity,this.searchForm.sellerCompanyName=this.data.upstreamInfo.companyName,6===this.data.bizType&&(this.searchForm.longtermContractFlag=1)}else if("下游"===t){if(this.upstreamTerm=4,this.searchForm.bizType=1,null==this.buyerInfoProd||void 0===this.buyerInfoProd)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.productId=this.buyerInfoProd,this.searchForm.skuQuantity=this.data.downstreamInfo.skuQuantity,this.searchForm.buyerCompanyName=this.data.downstreamInfo.companyName,6===this.data.bizType&&(this.searchForm.longtermContractFlag=1)}if(null==this.searchForm.productId||void 0===this.searchForm.productId)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;if(null==this.searchForm.skuQuantity||void 0===this.searchForm.skuQuantity)return this.$message.error("请先输入产品数量后再查询长约合同"),this.isShowUnilateralDialog=!1,!1}this.$http.post(this.$api.delivery.crossContract,this.searchForm).then(function(t){0===t.data.code&&(a.totalDelivery=t.data.data.total,a.purchaseContractList=t.data.data.rows)})},crossSubmission:function(){3===this.upstreamTerm?(this.data.upstreamInfo.contractCode=this.obj.contractCode,this.data.upstreamInfo.longtermContractOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1):4===this.upstreamTerm&&(this.data.downstreamInfo.contractCode=this.obj.contractCode,this.data.downstreamInfo.longtermContractOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1),this.searchForm={}},deliveryContractClick:function(t){if(null==t||void 0===t)return!1;var e=this;e.$http.get(e.$api.delivery.deliveryContract+"/"+t).then(function(t){if(0===t.data.code&&(e.deliveryContractList=t.data.data.erpFileContractModelList,null==e.deliveryContractList||void 0===e.deliveryContractList||0===e.deliveryContractList.length))return e.$message.error("您选择的单边合同无合同附件!"),!1})},businessManagerchk:function(){this.data.businessManagerName=this.businessManager[this.businessManageridx].userName,this.data.businessManagerId=this.businessManager[this.businessManageridx].usrUserId,this.userid=this.businessManager[this.businessManageridx].usrUserId,this.getUserOrganization()},checked:function(t){if(this.activeIndex=t,3===this.activeContractType){var e=this.buyCompanyList[this.activeIndex].buyerCorpId,a="您选择的下游公司:"+this.buyCompanyList[this.activeIndex].buyerCorpName+"，未做准入，请先提交准入申请！";this.getCompanyGrade(this.activeContractType,e,a)}else{var s=this.sellCompanyList[this.activeIndex].sellerCorpId,i="您选择的上游公司:"+this.sellCompanyList[this.activeIndex].sellerCorpName+"，未做准入，请先提交准入申请！";this.getCompanyGrade(this.activeContractType,s,i)}},checkGroup:function(){this.data.usrOrganizationId=this.businessManagerGroup[this.srOrganizationIdx].usrOrganizationId,this.data.usrOrganizationName=this.businessManagerGroup[this.srOrganizationIdx].orgName,this.data.orgName=this.businessManagerGroup[this.srOrganizationIdx].orgName},checkCompany:function(t){null!==this.data.bizType&&""!==this.data.bizType?(3===t&&(this.dialogVisibles=!0),2===t&&(this.dialogVisible=!0),this.companyName=null,this.activeContractType=t,this.activeIndex=null,this.getCompanyByBizType()):this.$message.error("请先选择业务类型")},getCompanyByBizType:function(t){var e=this,a={bizType:this.data.bizType,productId:this.data.productId};3===this.activeContractType&&(a.buyerCorpName=this.companyName),2===this.activeContractType&&(a.sellerCorpName=this.companyName),this.$http.post(this.$api.contract.getCompany,a).then(function(t){e.sellCompanyList=t.data.data.sellerCorpList,e.buyCompanyList=t.data.data.buyerCorpList}).catch(function(t){console.log(t)})},getRelatedCompany:function(){var t=this;this.$http.get(this.$api.contract.getRelatedCompany).then(function(e){t.relatedCompany=e.data.data.targetCorpList}).catch(function(t){console.log(t)})},checktargetCorpbuy:function(t){this.isTargetChange=!0,this.data.upstreamInfo&&(this.data.upstreamInfo.targetCorpName=this.relatedCompany[t].targetCorpName,this.data.upstreamInfo.targetCorpId=this.relatedCompany[t].targetCorpId),this.data.downstreamInfo&&(this.data.downstreamInfo.targetCorpName=this.relatedCompany[t].targetCorpName,this.data.downstreamInfo.targetCorpId=this.relatedCompany[t].targetCorpId)},getUserOrganization:function(){var t=this;this.$http.get(this.$api.contract.getUserOrganization+"?userId="+this.userid).then(function(e){0===e.data.code&&(t.businessManagerGroup=e.data.data,t.srOrganizationIdx=0,t.checkGroup())}).catch(function(t){console.log(t)})},getGrade:function(){var t=this,e={organizationId:this.data.usrOrganizationId,pageNum:0};this.$http.post(this.$api.contract.getGrade,e).then(function(e){0===e.data.code&&(t.businessManager=e.data.data.rows,i()(e.data.data.rows).forEach(function(a){e.data.data.rows[a].usrUserId===t.userid&&(t.businessManageridx=1*a,t.businessManagerchk())}))}).catch(function(t){console.log(t)})},getCompanyGrade:function(t,e,a){var s=this,i={productId:e};s.$http.post(s.$api.contract.getCompanyGrade,i).then(function(e){if(2===t)s.data.upstreamInfo.grade=e.data.data.grade,s.sellerCheck=!1,"未评级"===s.data.upstreamInfo.grade&&(s.sellerCheck=!0,s.$message({message:a,type:"warning"}));else if(3===t&&(s.data.downstreamInfo.grade=e.data.data.grade,s.buyerCheck=!1,"未评级"===s.data.downstreamInfo.grade))return s.buyerCheck=!0,s.$message({message:a,type:"warning"}),!1}).catch(function(t){console.log(t)})},checkSales:function(t){null!==this.activeIndex?(3===t&&(this.dialogVisibles=!1,this.data.downstreamInfo.companyName=this.buyCompanyList[this.activeIndex].buyerCorpName,this.data.downstreamInfo.companyId=this.buyCompanyList[this.activeIndex].buyerCorpId,this.data.downstreamInfo.buyerCompanyName=this.buyCompanyList[this.activeIndex].buyerCorpName,this.data.downstreamInfo.buyerCompanyId=this.buyCompanyList[this.activeIndex].buyerCorpId),2===t&&(this.dialogVisible=!1,this.data.upstreamInfo.companyName=this.sellCompanyList[this.activeIndex].sellerCorpName,this.data.upstreamInfo.companyId=this.sellCompanyList[this.activeIndex].sellerCorpId,this.data.upstreamInfo.sellerCompanyName=this.sellCompanyList[this.activeIndex].sellerCorpName,this.data.upstreamInfo.sellerCompanyId=this.sellCompanyList[this.activeIndex].sellerCorpId)):this.$message({message:"请先选择公司",type:"error"})},onsubmit:function(){var t=this;if(1===t.data.contractType||2===t.data.contractType){var e=t.$inputCheckFunc.checkInputItem(t.upstreamPropList,t.data.upstreamInfo,"(上游)");if(e)return t.$message.error(e),!1;if(e=t.$inputCheckFunc.checkRelatedInputItem(t.data.upstreamInfo,"(上游)"))return t.$message.error(e),!1;if(!(4!==t.data.upstreamInfo.paymentType||t.data.upstreamInfo.paymentDateFlag&&t.data.upstreamInfo.paymentBeginDate))return void t.$message.error("指定日期情况下，付款日期必填(上游)")}if(1===t.data.contractType||3===t.data.contractType){var a=t.$inputCheckFunc.checkInputItem(t.downstreamPropList,t.data.downstreamInfo,"(下游)");if(a)return t.$message.error(a),!1;if(a=t.$inputCheckFunc.checkRelatedInputItem(t.data.downstreamInfo,"(下游)"))return t.$message.error(a),!1;if(!(4!==t.data.downstreamInfo.paymentType||t.data.downstreamInfo.paymentDateFlag&&t.data.downstreamInfo.paymentBeginDate))return void t.$message.error("指定日期情况下，付款日期必填(下游)")}t.data.upstreamInfo&&t.upstreamPropList&&t.upstreamPropList.length>0&&(t.modifyFieldInfo.upstreamInfo=[],t.upstreamPropList.forEach(function(e,a){var s=e.varNameList;if(null!=s&&void 0!==s&&0!==s.length)for(var i=0;i<s.length;i++){if("0"!==String(t.oldData.upstreamInfo[s[i]])||String(t.data.upstreamInfo[s[i]]))if(String(t.oldData.upstreamInfo[s[i]])!==String(t.data.upstreamInfo[s[i]]))if("break"===function(){var a={key:e.propKey,varList:[]};return s.forEach(function(e){var s={key:e,oldVal:t.oldData.upstreamInfo[e],newVal:t.data.upstreamInfo[e]};a.varList.push(s)}),t.modifyFieldInfo.upstreamInfo.push(a),"break"}())break}})),t.data.downstreamInfo&&t.downstreamPropList&&t.downstreamPropList.length>0&&(t.modifyFieldInfo.downstreamInfo=[],t.downstreamPropList.forEach(function(e,a){var s=e.varNameList;if(null!=s&&void 0!==s&&0!==s.length)for(var i=0;i<s.length;i++){if("0"!==String(t.oldData.downstreamInfo[s[i]])||String(t.data.downstreamInfo[s[i]]))if(String(t.oldData.downstreamInfo[s[i]])!==String(t.data.downstreamInfo[s[i]]))if("break"===function(){var a={key:e.propKey,varList:[]};return s.forEach(function(e){var s={key:e,oldVal:t.oldData.downstreamInfo[e],newVal:t.data.downstreamInfo[e]};a.varList.push(s)}),t.modifyFieldInfo.downstreamInfo.push(a),"break"}())break}})),null!==t.$route.query.todoId&&void 0!==t.$route.query.todoId&&(t.data.todoId=t.$route.query.todoId),t.data.commitType=1,t.data.upstreamInfo&&0===t.modifyFieldInfo.upstreamInfo.length&&t.data.downstreamInfo&&0===t.modifyFieldInfo.downstreamInfo.length?t.$message({message:"没有修改，请修改后再提交!",type:"warning"}):(t.data.upstreamInfo&&!t.isTargetChange&&(t.data.upstreamInfo.targetCorpId=t.data.targetCorpId),t.data.downstreamInfo&&!t.isTargetChange&&(t.data.downstreamInfo.targetCorpId=t.data.targetCorpId),t.data.modifyFieldInfo=Xn()(t.modifyFieldInfo),t.$http.post(t.$api.contract.addContract,t.data).then(function(e){0===e.data.code?(t.$message({message:"创建成功",type:"success"}),gs.a.$emit("setMenu")):t.$message({message:e.data.message,type:"error"})}))}}},Gn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-contract contract-revise contract-revise-new"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("businessTradeType")(t.data.bizType))+"\n                        "),1!==t.data.contractType?a("span",{staticClass:"contractType"},[t._v(t._s(t._f("contractTradeType")(t.data.contractType,t.data.bizType)))]):t._e()])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("交易类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("contractTransactionTypeList")(t.data.transactionType)))])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务操作人")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.data.businessManagerName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务组")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.data.organizationName))])])])])]),t._v(" "),a("div",{staticClass:"pay-wrapper"},[3!==t.data.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("上游合同信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(0),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:t.data.prodName,callback:function(e){t.$set(t.data,"prodName",e)},expression:"data.prodName"}})],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title sellerInfo-title"},[t._v("我方公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.checktargetCorpbuy},model:{value:t.data.targetCorpName,callback:function(e){t.$set(t.data,"targetCorpName",e)},expression:"data.targetCorpName"}},t._l(t.relatedCompany,function(t,e){return a("el-option",{key:e,attrs:{label:t.targetCorpName,value:e}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(1),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.upstreamInfo.sellerCompanyName,expression:"data.upstreamInfo.sellerCompanyName"}],attrs:{type:"text",placeholder:"请选择上游公司"},domProps:{value:t.data.upstreamInfo.sellerCompanyName},on:{click:function(e){return t.checkCompany(2)},input:function(e){e.target.composing||t.$set(t.data.upstreamInfo,"sellerCompanyName",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(2),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.upstreamInfo.grade,expression:"data.upstreamInfo.grade"}],attrs:{type:"text",disabled:"",placeholder:"请输入"},domProps:{value:t.data.upstreamInfo.grade},on:{input:function(e){e.target.composing||t.$set(t.data.upstreamInfo,"grade",e.target.value)}}})])])]),t._v(" "),t._l(t.upstreamCmptList,function(e,s){return a(e.propKey,{key:s,tag:"component",attrs:{"comp-data":e,"order-data":t.data.upstreamInfo}})})],2)]):t._e(),t._v(" "),2!==t.data.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("下游合同信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(3),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:t.data.prodName,callback:function(e){t.$set(t.data,"prodName",e)},expression:"data.prodName"}})],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title buyerInfo-title"},[t._v("我方公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.checktargetCorpbuy},model:{value:t.data.targetCorpName,callback:function(e){t.$set(t.data,"targetCorpName",e)},expression:"data.targetCorpName"}},t._l(t.relatedCompany,function(t,e){return a("el-option",{key:e,attrs:{label:t.targetCorpName,value:e}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(4),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.downstreamInfo.buyerCompanyName,expression:"data.downstreamInfo.buyerCompanyName"}],attrs:{type:"text",placeholder:"请选择下游公司"},domProps:{value:t.data.downstreamInfo.buyerCompanyName},on:{click:function(e){return t.checkCompany(3)},input:function(e){e.target.composing||t.$set(t.data.downstreamInfo,"buyerCompanyName",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(5),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.downstreamInfo.grade,expression:"data.downstreamInfo.grade"}],attrs:{type:"text",disabled:"",placeholder:"请输入"},domProps:{value:t.data.downstreamInfo.grade},on:{input:function(e){e.target.composing||t.$set(t.data.downstreamInfo,"grade",e.target.value)}}})])])]),t._v(" "),t._l(t.downstreamCmptList,function(e,s){return a(e.propKey,{key:s,tag:"component",attrs:{"comp-data":e,"order-data":t.data.downstreamInfo}})})],2)]):t._e()]),t._v(" "),a("div",{staticClass:"foot"},[void 0!==t.contEssId&&null!==t.contEssId?a("button",{staticClass:"gy-button-normal",on:{click:t.goback}},[t._v("返回")]):t._e(),t._v(" "),a("button",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_create_cont_ess",expression:"'to_create_cont_ess'"}],staticClass:"gy-button-extra confirmations",attrs:{type:"button"},on:{click:t.onsubmit}},[t._v("提交")])]),t._v(" "),a("gy-file-view",{ref:"contFileView"}),t._v(" "),t.isShowUnilateralDialog?a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px",title:2===t.upstreamTerm||4===t.upstreamTerm?"销售合同列表":"采购合同列表",visible:t.isShowUnilateralDialog},on:{"update:visible":function(e){t.isShowUnilateralDialog=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),1===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.buyerCompanyName,expression:"searchForm.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.searchForm.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"buyerCompanyName",e.target.value)}}}):t._e(),t._v(" "),2===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.sellerCompanyName,expression:"searchForm.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.searchForm.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"sellerCompanyName",e.target.value)}}}):t._e(),t._v(" "),3===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.sellerCompanyName,expression:"searchForm.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.searchForm.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"sellerCompanyName",e.target.value)}}}):t._e(),t._v(" "),4===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.buyerCompanyName,expression:"searchForm.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.searchForm.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"buyerCompanyName",e.target.value)}}}):t._e()]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",top:"10px",left:"-20px"},on:{click:function(e){return t.purchaseContract()}}})]),t._v(" "),a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[2===t.upstreamTerm||4===t.upstreamTerm?a("span",[t._v("下游公司")]):a("span",[t._v("上游公司")])]),t._v(" "),a("th",[2===t.upstreamTerm||4===t.upstreamTerm?a("span",[t._v("销售合同编号")]):a("span",[t._v("采购合同编号")])]),t._v(" "),a("th",[t._v("合同金额(元)")]),t._v(" "),a("th",[t._v("交割库")]),t._v(" "),a("th",[t._v("交割日期")]),t._v(" "),t.showDvlyQtyCol?a("th",[t._v("可交割数量")]):t._e(),t._v(" "),t.showDvlyQtyCol?a("th",[t._v("合约数量")]):t._e(),t._v(" "),a("th",[t._v("免仓期(天)")])])]),t._v(" "),this.purchaseContractList.length>0?a("tbody",t._l(t.purchaseContractList,function(e,s){return a("tr",{key:s},[a("td",[a("input",{attrs:{type:"radio",name:"11"},on:{change:function(a){return t.crossHandleCheckChange(e)}}})]),t._v(" "),a("td",[2===t.upstreamTerm||4===t.upstreamTerm?a("span",[t._v(t._s(e.buyerCompanyName))]):a("span",[t._v(t._s(e.sellerCompanyName))])]),t._v(" "),a("td",[t._v(t._s(e.contractCode))]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToCash")(e.totalAmount)))]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.deliveryWarehouseName))]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.deliveryDate))]),t._v(" "),t.showDvlyQtyCol?a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToQuantity")(e.canDeliveryQuantity)))]):t._e(),t._v(" "),t.showDvlyQtyCol?a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToQuantity")(e.skuQuantity)))]):t._e(),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.warehouseFreeDays))])])}),0):a("tbody",[a("tr",[t.showDvlyQtyCol?a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v("暂无数据")]):a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[t._v("暂无数据")])])])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.searchForm.pageNo,"page-size":t.searchForm.pageSize,total:t.totalDelivery},on:{"update:currentPage":function(e){return t.$set(t.searchForm,"pageNo",e)},"update:current-page":function(e){return t.$set(t.searchForm,"pageNo",e)},"current-change":t.handleCurrentChangeDeliver}}),t._v(" "),a("div",{staticClass:"button-wrap",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){t.isShowUnilateralDialog=!1}}},[t._v("取消\n            ")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.crossSubmission()}}},[t._v("确定")])])],1):t._e(),t._v(" "),t.dialogVisible?a("el-dialog",{staticClass:"addDialog",attrs:{width:"800px",title:"上游公司列表",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),a("div",[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"search1",on:{click:t.getCompanyByBizType}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"dialog-table"},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("上游公司")]),t._v(" "),a("th",[t._v("地址")])])]),t._v(" "),a("tbody",t._l(t.sellCompanyList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"50px","max-width":"50px"}},[a("span",{staticClass:"el-radio__input",class:s===t.activeIndex?"is-checked":"",on:{click:function(e){return t.checked(s)}}},[a("span",{staticClass:"el-radio__inner"})])]),t._v(" "),a("td",{staticStyle:{width:"320px","max-width":"320px"}},[t._v(t._s(e.sellerCorpName))]),t._v(" "),a("td",{staticStyle:{width:"358px","max-width":"358px"}},[t._v(t._s(e.address))])])}),0)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",class:{sellConfirmation:t.sellerCheck},staticStyle:{"margin-left":"8px"},attrs:{disabled:t.sellerCheck},on:{click:function(e){return t.checkSales(2)}}},[t._v("选择")])])]):t._e(),t._v(" "),t.dialogVisibles?a("el-dialog",{staticClass:"addDialog",attrs:{width:"800px",title:"下游公司列表",visible:t.dialogVisibles},on:{"update:visible":function(e){t.dialogVisibles=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),a("div",[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"search1",on:{click:t.getCompanyByBizType}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"dialog-table"},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("下游公司")]),t._v(" "),a("th",[t._v("地址")])])]),t._v(" "),a("tbody",t._l(t.buyCompanyList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"50px","max-width":"50px"}},[a("span",{staticClass:"el-radio__input",class:s===t.activeIndex?"is-checked":"",on:{click:function(e){return t.checked(s)}}},[a("span",{staticClass:"el-radio__inner"})])]),t._v(" "),a("td",{staticStyle:{width:"320px","max-width":"320px"}},[t._v(t._s(e.buyerCorpName))]),t._v(" "),a("td",{staticStyle:{width:"358px","max-width":"358px"}},[t._v(t._s(e.address))])])}),0)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.dialogVisibles=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",class:{buyConfirmation:t.buyerCheck},staticStyle:{"margin-left":"8px"},attrs:{disabled:t.buyerCheck},on:{click:function(e){return t.checkSales(3)}}},[t._v("选择")])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title sellerInfo-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("产品名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title sellerInfo-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("上游公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title sellerInfo-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交易对手评级")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title buyerInfo-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("产品名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title buyerInfo-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("下游公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title buyerInfo-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交易对手评级")])}]};var Zn=a("C7Lr")(Jn,Gn,!1,function(t){a("myjZ"),a("Nrsb")},"data-v-2119bd84",null).exports,Yn={data:function(){return{list:{id:null,contEssenceStatus:null,bizType:null,contractType:null,createdName:null,businessManagerId:null,businessManagerName:null,orgName:null,orderStatus:null,createdDate:null,planBuyDlvyDate:null,planSaleDlvyDate:null,targetCorpId:null,targetCorpName:null,buyerInfo:{companyId:null,companyName:null,skuOrigin:null,deliveryWarehouseId:null,deliveryWarehouseName:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,grade:null,packagingStandard:null,skuQuantity:null,odrContactId:null,odrContactName:null,depositRatio:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,planNumber:null,statisticalCaliber:null},sellerInfo:{companyId:null,companyName:null,skuOrigin:null,deliveryWarehouseId:null,deliveryWarehouseName:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,grade:null,packagingStandard:null,skuQuantity:null,odrContactId:null,odrContactName:null,depositRatio:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,planNumber:null,statisticalCaliber:null}},isShowApproval:!0,isDistribution:0,remarks:null,isZXFP:null,status:[4,5,6,8,9],statisticalCaliber:[1,2,3],history:[{approverId:null,username:null,resultCode:null,msg:null,createdDate:null}],eaSubmit:{id:null,executiveId:null,executiveName:null,targetCorpId:null,targetCorpName:null,purchaseOrderId:null,purchaseStatisticalCaliber:null,saleOrderId:null,saleStatisticalCaliber:null}}},watch:{isDistribution:function(){this.isZXFP=this.isDistribution}},mounted:function(){this.getdetailOrder(),this.approve1History()},methods:{getdetailOrder:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+this.$route.query.id).then(function(e){0===e.data.code&&(t.list=e.data.data,t.eaSubmit.id=t.list.id,t.eaSubmit.purchaseOrderId=t.list.purchaseOrderId,t.eaSubmit.saleOrderId=t.list.saleOrderId,t.eaSubmit.targetCorpName=t.list.targetCorpName,t.eaSubmit.targetCorpId=t.list.targetCorpId,t.eaSubmit.transactionType=t.list.transactionType,(1!==t.list.distributeType&&2!==t.list.distributeType||0===t.$route.query.doneFlg||"0"===t.$route.query.doneFlg)&&(t.isDistribution=1),1!==t.$route.query.doneFlg&&"1"!==t.$route.query.doneFlg||(t.isDistribution=0),t.eaSubmit.executiveId=t.list.executiveId,t.eaSubmit.executiveName=t.list.executiveName,t.$refs.contEssVo.targetCorpIdbuy=t.list.targetCorpId)}).catch(function(t){console.log(t)})},contralDetail:function(){var t={id:this.$route.query.id};this.$router.push({name:"contractDetailmenu",query:t})},approve1History:function(){var t={targetId:this.$route.query.id,targetType:1};this.$refs.operationHis.display(this.$api.contract.approve1History,t)},onChangeTransactionType:function(t){this.eaSubmit.transactionType=t},chkPerson:function(t){this.eaSubmit.executiveId=t.usrUserId,this.eaSubmit.executiveName=t.userName},chkCompany:function(t){this.list.targetCorpName=t.targetCorpName,this.list.targetCorpId=t.targetCorpId,this.eaSubmit.targetCorpName=t.targetCorpName,this.eaSubmit.targetCorpId=t.targetCorpId},Sub:function(){var t=this;this.eaSubmit.todoId=Number(this.$route.query.todoId),console.log(this.eaSubmit.targetCorpId),null!==this.eaSubmit.executiveId&&void 0!==this.eaSubmit.executiveId?null!==this.eaSubmit.targetCorpId&&void 0!==this.eaSubmit.targetCorpId?null!==this.eaSubmit.transactionType&&void 0!==this.eaSubmit.transactionType?(this.list.downstreamInfo&&(this.eaSubmit.saleStatisticalCaliber=this.list.downstreamInfo.statisticalCaliber),this.$http.post(this.$api.contract.essenceUpdate,this.eaSubmit).then(function(e){0===e.data.code?(t.$message.success("分配成功!"),t.$router.go(-1)):t.$message.error(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})):this.$message.warning("请先选择交易类型"):this.$message.warning("请先选择我方公司"):this.$message.warning("请先选择执行人员")},approveSub:function(){var t=this;this.$http.post(this.$api.contract.rejectContEss,{id:this.list.id,todoId:this.$route.query.todoId}).then(function(e){0===e.data.code?(t.$message.success("操作成功!"),t.$router.go(-1)):t.$message.error(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},reject:function(){var t=this;this.$confirm('<span><i class="iconfont icon-message-warning"></i>确认驳回?</span>',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then(function(){t.approveSub()})}},components:{contSell:Dn,contBuy:Fn,cont:On,gyOperationHistory:oa}},tl={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paydetail-wrapper"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("cont",{ref:"contEssVo",attrs:{list:t.list,isZXFP:t.isZXFP},on:{chkPerson:t.chkPerson,chkCompany:t.chkCompany,onChangeTransactionType:t.onChangeTransactionType}})],1),t._v(" "),a("div",{staticClass:"pay-wrapper"},[1===t.list.contractType||2===t.list.contractType?a("div",{staticClass:"receivables-information"},[a("p",{staticClass:"paydetail-title"},[t._v("采购信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("cont-sell",{attrs:{list:t.list}})],1)]):t._e(),t._v(" "),1===t.list.contractType||3===t.list.contractType?a("div",{staticClass:"receivables-information"},[a("p",{staticClass:"paydetail-title"},[t._v("销售信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("cont-buy",{attrs:{list:t.list}}),t._v(" "),1===t.isDistribution?[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("下游统计口径")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.list.downstreamInfo.statisticalCaliber,callback:function(e){t.$set(t.list.downstreamInfo,"statisticalCaliber",e)},expression:"list.downstreamInfo.statisticalCaliber"}},t._l(t.statisticalCaliber,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}},[a("span",[t._v(t._s(e))])])}),1)],1)])])])]:[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("下游统计口径")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[t._v(t._s(t.list.downstreamInfo.statisticalCaliber))])])])])]],2)]):t._e()]),t._v(" "),a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),1===t.isDistribution?[a("button",{staticClass:"gy-button-normal",on:{click:t.reject}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",on:{click:t.Sub}},[t._v("分配")])]:t._e()],2),t._v(" "),a("gy-operation-history",{ref:"operationHis"})],1)},staticRenderFns:[]};var el=a("C7Lr")(Yn,tl,!1,function(t){a("LStA")},"data-v-6051f3e5",null).exports,al={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},sl=a("C7Lr")(null,al,!1,null,null,null).exports,il={data:function(){return{companyName:null,dialogVisible:!1,dialogVisibles:!1,upstreamTerm:null,showDvlyQtyCol:!1,sellerCheck:!1,buyerCheck:!1,totalDelivery:null,isShowUnilateralDialog:!1,activeIndex:null,buyCompanyList:[],sellCompanyList:[],contractType:"3",contEssId:null,purchaseContractList:[],searchForm:{pageNo:1,pageSize:10,productId:null,buyerCompanyName:null,sellerCompanyName:null,bizType:null},obj:{},ContractTemplate1:[{name:"使用通用采购合同模板",id:3},{name:"上传采购合同",id:"upload"}],ContractTemplate:[{name:"使用通用销售合同模板",id:3},{name:"上传销售合同",id:"upload"}],relatedCompany:[],proType:[],prdProductId:null,data:{id:null,isOnline:1,sourceContEssId:null,lastContEssId:null,bizType:null,businessManagerId:null,businessManagerName:null,usrOrganizationId:null,contractType:1,prodName:null,buyContTmplId:null,saleContTmplId:null,purchaseFileAttachList:[],saleFileAttachList:[],downstreamInfo:{companyId:null,companyName:null,skuOrigin:null,prodName:null,skuCode:null,prdSkuId:null,deliveryWarehouseId:null,deliveryWarehouseName:null,deliveryDateFlag:null,deliveryBeginDate:null,deliveryEndDate:null,deliveryDateText:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,skuPriceType:1,depositType:null,skuPriceExpression:null,packagingStandard:null,qualityStandard:null,skuQuantity:null,depositRatio:null,depositAmount:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,targetCorpId:null,targetCorpName:null,longtermContractOrderId:null,grade:null,statisticalCaliber:null,priceOfWeight:null,chattingCompanyName:null,chattingAmount:0},upstreamInfo:{companyId:null,companyName:null,skuOrigin:null,prodName:null,skuCode:null,prdSkuId:null,deliveryWarehouseId:null,deliveryWarehouseName:null,deliveryDateFlag:null,deliveryBeginDate:null,deliveryEndDate:null,deliveryDateText:null,provideInvoiceType:null,provideInvoiceDays:null,paymentType:null,skuPrice:null,skuPriceType:1,depositType:null,skuPriceExpression:null,packagingStandard:null,qualityStandard:null,skuQuantity:null,depositRatio:null,depositAmount:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:null,deliveryType:null,payChannel:null,remarks:null,targetCorpId:null,targetCorpName:null,longtermContractOrderId:null,grade:null,statisticalCaliber:null,priceOfWeight:null,chattingCompanyName:null,chattingAmount:0}},oldData:{},sellDeliveryBank:[],buyDeliveryBank:[],activeCompanyType:null,buyContImg:[],saleContImg:[],sellerInfoProd:null,buyerInfoProd:null,newArr:[],upstreamCmptList:[],downstreamCmptList:[],upstreamPropList:[],downstreamPropList:[],modifyFieldInfo:{},activeContractType:null}},created:function(){this.baseFunc()},components:{gyFileUpload:aa,specifications:nn,manufacturer:oi,skuQuantity:en,shortOverflowRate:Wi,packagingStandardMulti:gi,longTermContractUp:ei,longTermContractDown:ii,wastage:mn,settlementQtyType:Qi,skuPrice:Zi,deposit:Ws,depositAgreement:Xs,depositBenchmark:Zs,deliverySite:Bs,deliverySiteDock:Us,deliveryDate:$s,deliveryType:Qs,warehouseFreeDays:un,transportType:rn,paymentType:xi,provideInvoiceType:$i,skuOrigin:Xi,brand:ws,qualityStandard:Bi,packagingStandard:yi,prodInspectionType:Li,prodInspectionFee:Ti,chattingFee:xs,consignmentTime:Ls,outgoingQualityBill:vi,paymentDate:wi,remarks:Ui,chattingCompany:Ts,deliverySiteOtherDock:fn},methods:{baseFunc:function(){this.getdetailOrder(),this.getRelatedCompany()},open:function(){var t=this;this.$confirm("返回将不保存修改的信息，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.go(-1)}).catch(function(){t.$message({type:"info",message:"已取消"})})},getdetailOrder:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+this.$route.query.id).then(function(e){if(0===e.data.code)return t.data=e.data.data,t.data.usrOrganizationId=t.data.organizationId,t.data.sourceContEssId=t.$route.query.id,t.data.lastContEssId=e.data.data.lastContEssId||e.data.data.id,t.data.upstreamInfo&&(t.data.upstreamInfo.companyName=t.data.upstreamInfo.sellerCompanyName,t.data.upstreamInfo.companyId=t.data.upstreamInfo.sellerCompanyId,t.data.upstreamInfo.prdSkuId=t.data.productId,t.data.upstreamInfo.targetCorpName=t.data.targetCorpName,t.data.upstreamInfo.targetCorpId=t.data.targetCorpId,t.gitPropType(2)),t.data.downstreamInfo&&(t.data.downstreamInfo.companyName=t.data.downstreamInfo.buyerCompanyName,t.data.downstreamInfo.companyId=t.data.downstreamInfo.buyerCompanyId,t.data.downstreamInfo.prdSkuId=t.data.productId,t.data.downstreamInfo.targetCorpName=t.data.targetCorpName,t.data.downstreamInfo.targetCorpId=t.data.targetCorpId,t.gitPropType(3)),t.companyName=null,t.activeContractType=0,t.forContEssRecreate=!0,t.oldData=JSON.parse(Xn()(t.data)),t.getCompanyByBizType(!0),!1;t.$alert(e.data.code+" "+e.data.message)})},gitPropType:function(t){var e=this,a={productId:this.data.productId,contractType:t};this.$http.post(this.$api.contract.getProdPropCompList,a).then(function(a){0===a.data.code?(2===t&&(e.upstreamPropList=a.data.data,e.upstreamCmptList=e.upstreamPropList.filter(function(t){return t.displayOrder>0})),3===t&&(e.downstreamPropList=a.data.data,e.downstreamCmptList=e.downstreamPropList.filter(function(t){return t.displayOrder>0}))):e.$message.error(a.data.message)}).catch(function(t){console.log(t)})},getCompanyByBizType:function(t){var e=this,a={productId:this.data.productId,bizType:this.data.bizType};3===this.activeContractType&&(a.buyerCorpName=this.companyName),2===this.activeContractType&&(a.sellerCorpName=this.companyName),this.$http.post(this.$api.contract.getCompany,a).then(function(t){e.sellCompanyList=t.data.data.sellerCorpList,e.buyCompanyList=t.data.data.buyerCorpList}).catch(function(t){console.log(t)})},getRelatedCompany:function(){var t=this;this.$http.get(this.$api.contract.getRelatedCompany).then(function(e){0===e.data.code&&(t.relatedCompany=e.data.data.targetCorpList)})},checkCompany:function(t){3===t&&(this.dialogVisibles=!0),2===t&&(this.dialogVisible=!0),this.companyName=null,this.activeContractType=t,this.activeIndex=null,this.getCompanyByBizType()},checked:function(t){if(this.activeIndex=t,3===this.activeContractType){var e=this.buyCompanyList[this.activeIndex].buyerCorpId,a="您选择的下游公司:"+this.buyCompanyList[this.activeIndex].buyerCorpName+"，未做准入，请先提交准入申请！";this.getCompanyGrade(this.activeContractType,e,a)}else{var s=this.sellCompanyList[this.activeIndex].sellerCorpId,i="您选择的上游公司:"+this.sellCompanyList[this.activeIndex].sellerCorpName+"，未做准入，请先提交准入申请！";this.getCompanyGrade(this.activeContractType,s,i)}},getCompanyGrade:function(t,e,a){var s=this;this.$http.post(this.$api.contract.getCompanyGrade,{productId:e}).then(function(e){if(2===t)s.data.upstreamInfo.grade=e.data.data.grade,s.sellerCheck=!1,"未评级"===s.data.upstreamInfo.grade&&(s.sellerCheck=!0,s.$message({message:a,type:"warning"}));else if(3===t&&(s.data.downstreamInfo.grade=e.data.data.grade,s.buyerCheck=!1,"未评级"===s.data.downstreamInfo.grade))return s.buyerCheck=!0,s.$message({message:a,type:"warning"}),!1})},checkSales:function(){null!==this.activeIndex?3===this.activeContractType?(this.dialogVisibles=!1,this.data.downstreamInfo.companyName=this.buyCompanyList[this.activeIndex].buyerCorpName,this.data.downstreamInfo.companyId=this.buyCompanyList[this.activeIndex].buyerCorpId,this.data.downstreamInfo.buyerCompanyName=this.buyCompanyList[this.activeIndex].buyerCorpName,this.data.downstreamInfo.buyerCompanyId=this.buyCompanyList[this.activeIndex].buyerCorpId):(this.dialogVisible=!1,this.data.upstreamInfo.companyName=this.sellCompanyList[this.activeIndex].sellerCorpName,this.data.upstreamInfo.companyId=this.sellCompanyList[this.activeIndex].sellerCorpId,this.data.upstreamInfo.sellerCompanyName=this.sellCompanyList[this.activeIndex].sellerCorpName,this.data.upstreamInfo.sellerCompanyId=this.sellCompanyList[this.activeIndex].sellerCorpId):this.$message({message:"请先选择公司",type:"error"})},onSeachContract:function(t){this.isShowUnilateralDialog=!0,this.purchaseContract(t)},purchaseContract:function(t,e){var a=this;if("单边"===t){if(null==this.data.contractType||void 0===this.data.contractType)return this.$message.error("请先选择单边交易类型后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(1===this.data.contractType)return this.$message.error("双边交易时不能查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(this.showDvlyQtyCol=!1,2===this.data.contractType){if(this.upstreamTerm=2,null==this.sellerInfoProd||void 0===this.sellerInfoProd)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.bizType=1,this.searchForm.unilateralCorrelation=1,this.searchForm.productId=this.sellerInfoProd,this.searchForm.skuQuantity=Number(this.data.upstreamInfo.skuQuantity)}else if(3===this.data.contractType){if(this.upstreamTerm=1,null==this.buyerInfoProd||void 0===this.buyerInfoProd)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.bizType=2,this.searchForm.unilateralCorrelation=1,this.searchForm.productId=this.buyerInfoProd,this.searchForm.skuQuantity=this.data.downstreamInfo.skuQuantity}if(null==this.searchForm.productId||void 0===this.searchForm.productId)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(null==this.searchForm.skuQuantity||void 0===this.searchForm.skuQuantity)return this.$message.error("请先输入产品数量后再查询单边合同"),this.isShowUnilateralDialog=!1,!1}else{if(this.showDvlyQtyCol=!0,1===this.searchForm.unilateralCorrelation&&delete this.searchForm.unilateralCorrelation,"上游"===t){if(this.upstreamTerm=3,this.searchForm.bizType=2,null==this.sellerInfoProd||void 0===this.sellerInfoProd)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.productId=this.sellerInfoProd,this.searchForm.skuQuantity=this.data.upstreamInfo.skuQuantity,this.searchForm.sellerCompanyName=this.data.upstreamInfo.companyName,6===this.data.bizType&&(this.searchForm.longtermContractFlag=1)}else if("下游"===t){if(this.upstreamTerm=4,this.searchForm.bizType=1,null==this.buyerInfoProd||void 0===this.buyerInfoProd)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.productId=this.buyerInfoProd,this.searchForm.skuQuantity=this.data.downstreamInfo.skuQuantity,this.searchForm.buyerCompanyName=this.data.downstreamInfo.companyName,6===this.data.bizType&&(this.searchForm.longtermContractFlag=1)}if(null==this.searchForm.productId||void 0===this.searchForm.productId)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;if(null==this.searchForm.skuQuantity||void 0===this.searchForm.skuQuantity)return this.$message.error("请先输入产品数量后再查询长约合同"),this.isShowUnilateralDialog=!1,!1}this.$http.post(this.$api.delivery.crossContract,this.searchForm).then(function(t){0===t.data.code&&(a.totalDelivery=t.data.data.total,a.purchaseContractList=t.data.data.rows)})},crossHandleCheckChange:function(t){this.obj=t},handleCurrentChangeDeliver:function(t){this.searchForm.pageNo=t;var e=null;1===this.upstreamTerm||2===this.upstreamTerm?e="单边":3===this.upstreamTerm?e="上游":4===this.upstreamTerm&&(e="下游"),this.purchaseContract(e,!0)},crossSubmission:function(){3===this.upstreamTerm?(this.data.upstreamInfo.contractCode=this.obj.contractCode,this.data.upstreamInfo.longtermContractOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1):4===this.upstreamTerm&&(this.data.downstreamInfo.contractCode=this.obj.contractCode,this.data.downstreamInfo.longtermContractOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1),this.searchForm={}},onCallbackBuyFileUpload:function(t){var e=this;this.buyContImg=[],t.forEach(function(t){e.buyContImg.push(t.fileUrl)}),this.data.purchaseFileAttachList=this.buyContImg},onCallbackSaleFileUpload:function(t){var e=this;this.saleContImg=[],t.forEach(function(t){e.saleContImg.push(t.fileUrl)}),this.data.saleFileAttachList=this.saleContImg},onsubmit:function(){var t=this;if(1===t.data.contractType||2===t.data.contractType){var e=t.$inputCheckFunc.checkInputItem(t.upstreamPropList,t.data.upstreamInfo,"(上游)");if(e)return t.$message.error(e),!1;if(e=t.$inputCheckFunc.checkRelatedInputItem(t.data.upstreamInfo,"(上游)"))return t.$message.error(e),!1;if(!(4!==t.data.upstreamInfo.paymentType||t.data.upstreamInfo.paymentDateFlag&&t.data.upstreamInfo.paymentBeginDate))return void t.$message.error("指定日期情况下，付款日期必填(上游)");if(!t.data.buyContTmplId)return t.$message({message:"请选择合同模板！(上游)",type:"error"}),!1;if("upload"===t.data.buyContTmplId&&!t.data.purchaseFileAttachList)return t.$message({message:"请上传采购合同",type:"error"}),!1}if(1===t.data.contractType||3===t.data.contractType){var a=t.$inputCheckFunc.checkInputItem(t.downstreamPropList,t.data.downstreamInfo,"(下游)");if(a)return t.$message.error(a),!1;if(a=t.$inputCheckFunc.checkRelatedInputItem(t.data.downstreamInfo,"(下游)"))return t.$message.error(a),!1;if(!(4!==t.data.downstreamInfo.paymentType||t.data.downstreamInfo.paymentDateFlag&&t.data.downstreamInfo.paymentBeginDate))return void t.$message.error("指定日期情况下，付款日期必填(下游)");if(!t.data.saleContTmplId)return t.$message({message:"请选择合同模板！(下游)",type:"error"}),!1;if("upload"===t.data.saleContTmplId&&!t.data.saleFileAttachList)return t.$message({message:"请上传销售合同",type:"error"}),!1}t.data.upstreamInfo&&t.upstreamPropList&&t.upstreamPropList.length>0&&(t.modifyFieldInfo.upstreamInfo=[],t.upstreamPropList.forEach(function(e,a){var s=e.varNameList;if(null!=s&&void 0!==s&&0!==s.length)for(var i=0;i<s.length;i++){if("0"!==String(t.oldData.upstreamInfo[s[i]])||String(t.data.upstreamInfo[s[i]]))if(String(t.oldData.upstreamInfo[s[i]])!==String(t.data.upstreamInfo[s[i]]))if("break"===function(){var a={key:e.propKey,varList:[]};return s.forEach(function(e){var s={key:e,oldVal:t.oldData.upstreamInfo[e],newVal:t.data.upstreamInfo[e]};a.varList.push(s)}),t.modifyFieldInfo.upstreamInfo.push(a),"break"}())break}})),t.data.downstreamInfo&&t.downstreamPropList&&t.downstreamPropList.length>0&&(t.modifyFieldInfo.downstreamInfo=[],t.downstreamPropList.forEach(function(e,a){var s=e.varNameList;if(null!=s&&void 0!==s&&0!==s.length)for(var i=0;i<s.length;i++){if("0"!==String(t.oldData.downstreamInfo[s[i]])||String(t.data.downstreamInfo[s[i]]))if(String(t.oldData.downstreamInfo[s[i]])!==String(t.data.downstreamInfo[s[i]]))if("break"===function(){var a={key:e.propKey,varList:[]};return s.forEach(function(e){var s={key:e,oldVal:t.oldData.downstreamInfo[e],newVal:t.data.downstreamInfo[e]};a.varList.push(s)}),t.modifyFieldInfo.downstreamInfo.push(a),"break"}())break}})),t.data.id=null,t.data.commitType=1,t.data.buyContTmplId="upload"===t.data.buyContTmplId?null:t.data.buyContTmplId,t.data.saleContTmplId="upload"===t.data.saleContTmplId?null:t.data.saleContTmplId,t.data.upstreamInfo&&0===t.modifyFieldInfo.upstreamInfo.length&&t.data.downstreamInfo&&0===t.modifyFieldInfo.downstreamInfo.length?t.$message({message:"没有修改，请修改后再提交!",type:"warning"}):(t.data.modifyFieldInfo=Xn()(t.modifyFieldInfo),t.$http.post(t.$api.contract.addContract1,t.data).then(function(e){0===e.data.code?(t.$message({message:"创建成功",type:"success"}),gs.a.$emit("setMenu")):t.$message({message:e.data.message,type:"error"})}))}}},nl={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paydetail-wrapper modify-contract"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper essential-row-float"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同要素ID")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.data.id))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("执行操作人")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.data.executiveName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("bizType")(t.data.bizType))+"\n                ")])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("我方公司")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.data.targetCorpName)+"\n                ")])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("产品名称")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.data.prodName)+"\n                ")])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("交易类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t._f("contractTransactionTypeList")(t.data.transactionType)))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务操作人")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.data.businessManagerName))])]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("业务组")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.data.organizationName))])])])]),t._v(" "),a("div",{staticClass:"pay-wrapper"},[3!==t.data.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("采购信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(0),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.upstreamInfo.sellerCompanyName,expression:"data.upstreamInfo.sellerCompanyName"}],attrs:{type:"text",placeholder:"请选择上游公司"},domProps:{value:t.data.upstreamInfo.sellerCompanyName},on:{click:function(e){return t.checkCompany(2)},input:function(e){e.target.composing||t.$set(t.data.upstreamInfo,"sellerCompanyName",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(1),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.upstreamInfo.grade,expression:"data.upstreamInfo.grade"}],attrs:{type:"text",disabled:"",placeholder:"请输入"},domProps:{value:t.data.upstreamInfo.grade},on:{input:function(e){e.target.composing||t.$set(t.data.upstreamInfo,"grade",e.target.value)}}})])])]),t._v(" "),t._l(t.upstreamCmptList,function(e,s){return a(e.propKey,{key:s,tag:"component",attrs:{"comp-data":e,"order-data":t.data.upstreamInfo}})}),t._v(" "),6===t.data.bizType?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(2),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"flex-direction":"column"}},[a("div",{staticClass:"essential-text",staticStyle:{"margin-right":"0"}},[a("div",{staticClass:"d"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.upstreamInfo.contractCode,expression:"data.upstreamInfo.contractCode"}],attrs:{type:"text",placeholder:"请选择上游合约编号"},domProps:{value:t.data.upstreamInfo.contractCode},on:{input:function(e){e.target.composing||t.$set(t.data.upstreamInfo,"contractCode",e.target.value)}}}),t._v(" "),a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",right:"5px",top:"3px"},on:{click:function(e){return t.onSeachContract("上游")}}})])])])])]):t._e(),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("纸质合同号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.upstreamInfo.planNumber,expression:"data.upstreamInfo.planNumber"}],attrs:{type:"text",placeholder:"请输入纸质合同号"},domProps:{value:t.data.upstreamInfo.planNumber},on:{input:function(e){e.target.composing||t.$set(t.data.upstreamInfo,"planNumber",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(3),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.buyContTmplId,callback:function(e){t.$set(t.data,"buyContTmplId",e)},expression:"data.buyContTmplId"}},t._l(t.ContractTemplate1,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)])]),t._v(" "),"upload"===t.data.buyContTmplId?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(4),t._v(" "),a("div",{staticClass:"essential-text"},[a("gy-file-upload",{ref:"pFileUpload",on:{callbackFileUpload:t.onCallbackBuyFileUpload}})],1)])]):t._e()],2)]):t._e(),t._v(" "),2!==t.data.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("销售信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(5),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.downstreamInfo.buyerCompanyName,expression:"data.downstreamInfo.buyerCompanyName"}],attrs:{type:"text",placeholder:"请选择下游公司"},domProps:{value:t.data.downstreamInfo.buyerCompanyName},on:{click:function(e){return t.checkCompany(3)},input:function(e){e.target.composing||t.$set(t.data.downstreamInfo,"buyerCompanyName",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(6),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.downstreamInfo.grade,expression:"data.downstreamInfo.grade"}],attrs:{type:"text",disabled:"",placeholder:"请输入"},domProps:{value:t.data.downstreamInfo.grade},on:{input:function(e){e.target.composing||t.$set(t.data.downstreamInfo,"grade",e.target.value)}}})])])]),t._v(" "),t._l(t.downstreamCmptList,function(e,s){return a(e.propKey,{key:s,tag:"component",attrs:{"comp-data":e,"order-data":t.data.downstreamInfo}})}),t._v(" "),6===t.data.bizType?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(7),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"flex-direction":"column"}},[a("div",{staticClass:"essential-text",staticStyle:{"margin-right":"0"}},[a("div",{staticClass:"d"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.downstreamInfo.contractCode,expression:"data.downstreamInfo.contractCode"}],attrs:{type:"text",placeholder:"请选择下游合约编号"},domProps:{value:t.data.downstreamInfo.contractCode},on:{input:function(e){e.target.composing||t.$set(t.data.downstreamInfo,"contractCode",e.target.value)}}}),t._v(" "),a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",right:"5px",top:"3px"},on:{click:function(e){return t.onSeachContract("下游")}}})])])])])]):t._e(),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("纸质合同号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.downstreamInfo.planNumber,expression:"data.downstreamInfo.planNumber"}],attrs:{type:"text",placeholder:"请输入纸质合同号"},domProps:{value:t.data.downstreamInfo.planNumber},on:{input:function(e){e.target.composing||t.$set(t.data.downstreamInfo,"planNumber",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(8),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.saleContTmplId,callback:function(e){t.$set(t.data,"saleContTmplId",e)},expression:"data.saleContTmplId"}},t._l(t.ContractTemplate,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)])]),t._v(" "),"upload"===t.data.saleContTmplId?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(9),t._v(" "),a("div",{staticClass:"essential-text"},[a("gy-file-upload",{ref:"pFileUpload",on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1)])]):t._e(),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("下游统计口径")]),t._v(" "),a("div",{staticClass:"essential-text"},[t._v(t._s(t.data.downstreamInfo.statisticalCaliber))])])])],2)]):t._e()]),t._v(" "),a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-normal",on:{click:t.open}},[t._v("返回")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",attrs:{type:"button"},on:{click:t.onsubmit}},[t._v("提交")])]),t._v(" "),t.isShowUnilateralDialog?a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px",title:2===t.upstreamTerm||4===t.upstreamTerm?"销售合同列表":"采购合同列表",visible:t.isShowUnilateralDialog},on:{"update:visible":function(e){t.isShowUnilateralDialog=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),1===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.buyerCompanyName,expression:"searchForm.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.searchForm.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"buyerCompanyName",e.target.value)}}}):t._e(),t._v(" "),2===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.sellerCompanyName,expression:"searchForm.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.searchForm.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"sellerCompanyName",e.target.value)}}}):t._e(),t._v(" "),3===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.sellerCompanyName,expression:"searchForm.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.searchForm.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"sellerCompanyName",e.target.value)}}}):t._e(),t._v(" "),4===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.buyerCompanyName,expression:"searchForm.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.searchForm.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"buyerCompanyName",e.target.value)}}}):t._e()]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",top:"10px",left:"-20px"},on:{click:function(e){return t.purchaseContract()}}})]),t._v(" "),a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[2===t.upstreamTerm||4===t.upstreamTerm?a("span",[t._v("下游公司")]):a("span",[t._v("上游公司")])]),t._v(" "),a("th",[2===t.upstreamTerm||4===t.upstreamTerm?a("span",[t._v("销售合同编号")]):a("span",[t._v("采购合同编号")])]),t._v(" "),a("th",[t._v("合同金额(元)")]),t._v(" "),a("th",[t._v("交割库")]),t._v(" "),a("th",[t._v("交割日期")]),t._v(" "),t.showDvlyQtyCol?a("th",[t._v("可交割数量")]):t._e(),t._v(" "),t.showDvlyQtyCol?a("th",[t._v("合约数量")]):t._e(),t._v(" "),a("th",[t._v("免仓期(天)")])])]),t._v(" "),this.purchaseContractList.length>0?a("tbody",t._l(t.purchaseContractList,function(e,s){return a("tr",{key:s},[a("td",[a("input",{attrs:{type:"radio",name:"11"},on:{change:function(a){return t.crossHandleCheckChange(e)}}})]),t._v(" "),a("td",[2===t.upstreamTerm||4===t.upstreamTerm?a("span",[t._v(t._s(e.buyerCompanyName))]):a("span",[t._v(t._s(e.sellerCompanyName))])]),t._v(" "),a("td",[t._v(t._s(e.contractCode))]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToCash")(e.totalAmount)))]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.deliveryWarehouseName))]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.deliveryDate))]),t._v(" "),t.showDvlyQtyCol?a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToQuantity")(e.canDeliveryQuantity)))]):t._e(),t._v(" "),t.showDvlyQtyCol?a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToQuantity")(e.skuQuantity)))]):t._e(),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.warehouseFreeDays))])])}),0):a("tbody",[a("tr",[t.showDvlyQtyCol?a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v("暂无数据")]):a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[t._v("暂无数据")])])])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.searchForm.pageNo,"page-size":t.searchForm.pageSize,total:t.totalDelivery},on:{"update:currentPage":function(e){return t.$set(t.searchForm,"pageNo",e)},"update:current-page":function(e){return t.$set(t.searchForm,"pageNo",e)},"current-change":t.handleCurrentChangeDeliver}}),t._v(" "),a("div",{staticClass:"button-wrap",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){t.isShowUnilateralDialog=!1}}},[t._v("取消\n            ")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.crossSubmission()}}},[t._v("确定")])])],1):t._e(),t._v(" "),t.dialogVisible?a("el-dialog",{staticClass:"addDialog",attrs:{width:"800px",title:"上游公司列表",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),a("div",[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"search1",on:{click:t.getCompanyByBizType}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"dialog-table min-height-table"},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("上游公司")]),t._v(" "),a("th",[t._v("地址")])])]),t._v(" "),a("tbody",t._l(t.sellCompanyList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"50px","max-width":"50px"}},[a("span",{staticClass:"el-radio__input",class:s===t.activeIndex?"is-checked":"",on:{click:function(e){return t.checked(s)}}},[a("span",{staticClass:"el-radio__inner"})])]),t._v(" "),a("td",{staticStyle:{width:"320px","max-width":"320px"}},[t._v(t._s(e.sellerCorpName))]),t._v(" "),a("td",{staticStyle:{width:"358px","max-width":"358px"}},[t._v(t._s(e.address))])])}),0)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",class:{sellConfirmation:t.sellerCheck},staticStyle:{"margin-left":"8px"},attrs:{disabled:t.sellerCheck},on:{click:function(e){return t.checkSales()}}},[t._v("选择")])])]):t._e(),t._v(" "),t.dialogVisibles?a("el-dialog",{staticClass:"addDialog",attrs:{width:"800px",title:"下游公司列表",visible:t.dialogVisibles},on:{"update:visible":function(e){t.dialogVisibles=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),a("div",[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"search1",on:{click:t.getCompanyByBizType}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"dialog-table min-height-table"},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("下游公司")]),t._v(" "),a("th",[t._v("地址")])])]),t._v(" "),a("tbody",t._l(t.buyCompanyList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"50px","max-width":"50px"}},[a("span",{staticClass:"el-radio__input",class:s===t.activeIndex?"is-checked":"",on:{click:function(e){return t.checked(s)}}},[a("span",{staticClass:"el-radio__inner"})])]),t._v(" "),a("td",{staticStyle:{width:"320px","max-width":"320px"}},[t._v(t._s(e.buyerCorpName))]),t._v(" "),a("td",{staticStyle:{width:"358px","max-width":"358px"}},[t._v(t._s(e.address))])])}),0)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.dialogVisibles=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",class:{buyConfirmation:t.buyerCheck},staticStyle:{"margin-left":"8px"},attrs:{disabled:t.buyerCheck},on:{click:function(e){return t.checkSales()}}},[t._v("选择")])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("上游公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交易对手评级")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"}),this._v("上游合约")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("选择合同模板")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("上传采购合同")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("下游公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交易对手评级")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"}),this._v("下游合约")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("选择合同模板")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("上传销售合同")])}]};var ll=a("C7Lr")(il,nl,!1,function(t){a("fzCH"),a("5Tij")},"data-v-55963b42",null).exports,ol={data:function(){return{downCostNum:0,upCostNum:0,unilateralRelevance:{correlationOrderId:null,contractCode:null},contEssId:null,searchForm:{pageNo:1,pageSize:10,productId:null,buyerCompanyName:null,sellerCompanyName:null,bizType:null},deliverContractAssembleVisible:!1,totalDelivery:null,purchaseContractList:[],isShowUnilateralDialog:!1,deliveryContractList:[],sellerRemarks:null,buyerRemarks:null,userid:null,organizationId:null,businessManager:[],businessManagerGroup:[],isSellerCh:!1,isBuyerCh:!1,bizType4CreateEss:[{name:"准现货-现货",id:4},{name:"准现货-长约",id:6}],priceOfWeightList:[{value:"",label:"请选择"},{value:1,label:"1元/吨"},{value:1.5,label:"1.5元/吨"},{value:2,label:"2元/吨"}],data:{id:null,bizType:4,prdProductId:1,skuQuantity:null,businessManagerId:1924,businessManagerName:null,usrOrganizationName:null,usrOrganizationId:null,contractType:2,contractCreatedDate:null,transactionType:4,targetCorpIdbuy:null,buyerInfo:{companyId:null,companyName:null,skuOrigin:"进口",prodName:null,skuCode:null,prdSkuId:1,deliveryWarehouseId:null,deliveryWarehouseName:null,deliveryDateFlag:null,deliveryBeginDate:null,deliveryEndDate:null,deliveryDateText:null,provideInvoiceType:1,provideInvoiceDays:null,paymentType:0,skuPrice:null,packagingStandard:0,qualityStandard:"国标",skuQuantity:null,depositRatio:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:5,deliveryType:3,payChannel:1,remarks:null,targetCorpId:null,targetCorpName:null,longtermContractOrderId:null,chattingAmount:null,priceOfWeight:null,chattingCompanyName:null,statisticalCaliber:1,odrContractNumber:null},sellerInfo:{companyId:null,companyName:null,skuOrigin:"进口",prodName:null,skuCode:null,prdSkuId:1,deliveryWarehouseId:null,deliveryWarehouseName:null,deliveryDateFlag:null,deliveryBeginDate:null,deliveryEndDate:null,deliveryDateText:null,provideInvoiceType:1,provideInvoiceDays:null,paymentType:0,skuPrice:null,packagingStandard:0,qualityStandard:"国标",skuQuantity:null,depositRatio:null,depositRatioSubtract:null,depositRatioAppend:null,warehouseFreeDays:5,deliveryType:3,payChannel:1,remarks:null,targetCorpId:null,targetCorpName:null,longtermContractOrderId:null,chattingAmount:null,priceOfWeight:null,chattingCompanyName:null,odrContractNumber:null}},proType:[{goodsId:1,goodsName:"乙二醇                 "},{goodsId:2,goodsName:"甲醇"},{goodsId:3,goodsName:"二甘醇"}],dialogVisible:!1,dialogVisibles:!1,sellCompanyList:[],buyCompanyList:[],relatedCompany:[],companyName:null,activeCompanyType:null,activeIndex:null,buyDeliveryBank:[],sellDeliveryBank:[],buyerInfoProd:1,sellerInfoProd:1,sellerInfoProdIndex:null,buyerTrade:null,sellerTrade:null,warehouseidxbuy:null,warehouseidxsell:null,businessManageridx:null,srOrganizationIdx:null,Verification:[{name:"bizType",msg:"请先选择业务类型"},{name:"businessManagerId",msg:"请先选择业务操作人"},{name:"skuQuantity",msg:"请先输入产品数量"},{name:"targetCorpIdbuy",msg:"请先选择我方公司"}],Verification1:[{name:"companyId",msg:"请先选择上游公司或下游公司"},{name:"prdSkuId",msg:"请先选择产品"},{name:"skuPrice",msg:"请先输入产品单价"},{name:"deliveryWarehouseId",msg:"请先选择交割库"},{name:"deliveryDateFlag",msg:"请先选择交割日期"},{name:"warehouseFreeDays",msg:"请先输入免仓期"},{name:"odrContractNumber",msg:"请输入合同编号"}],obj:{},deliveryContractType:null,upstreamTerm:null,showDvlyQtyCol:!1,depositAppendBenchmarkType:0,sellerCheck:!1,buyerCheck:!1,dataList:{},statisticalCaliber:[1,2,3],buyContImg:[],saleContImg:[]}},mounted:function(){this.getRelatedCompany(),this.getGrade(),this.userid=JSON.parse(localStorage.getItem("userInfo")).id,this.downCostNum=this.data.skuQuantity*this.data.buyerInfo.priceOfWeight,this.upCostNum=this.data.skuQuantity*this.data.sellerInfo.priceOfWeight},watch:{sellerRemarks:function(t){t.length>2500&&(this.$message({message:"备注最多可填写2500字",type:"warning"}),this.sellerRemarks=this.sellerRemarks.substr(0,2500)),this.data.sellerInfo.remarks=this.sellerRemarks},buyerRemarks:function(t){t.length>2500&&(this.$message({message:"备注最多可填写2500字",type:"warning"}),this.buyerRemarks=this.buyerRemarks.substr(0,2500)),this.data.buyerInfo.remarks=this.buyerRemarks},"data.bizType":{handler:function(t,e){6===t&&(this.data.transactionType=5)},deep:!0},"data.sellerInfo.depositAppendBenchmark":{handler:function(t,e){null!=t&&""!==t&&void 0!==t||this.data.sellerInfo&&(this.data.sellerInfo.depositAppendArea=null)},deep:!0},"data.buyerInfo.depositAppendBenchmark":{handler:function(t,e){null!=t&&""!==t&&void 0!==t||this.data.buyerInfo&&(this.data.buyerInfo.depositAppendArea=null)},deep:!0}},components:{gyFileView:Ke,gyFileUpload:aa},methods:{goback:function(){this.$router.go(-1)},upNumInput:function(t){this.upCostNum=t*this.data.sellerInfo.priceOfWeight},downNumInput:function(t){this.downCostNum=t*this.data.buyerInfo.priceOfWeight},downCost:function(t){this.downCostNum=this.data.skuQuantity*this.data.buyerInfo.priceOfWeight,this.data.buyerInfo.chattingCompanyName=t?this.data.buyerInfo.chattingCompanyName:null},upCost:function(t){this.upCostNum=this.data.skuQuantity*this.data.sellerInfo.priceOfWeight,this.data.sellerInfo.chattingCompanyName=t?this.data.sellerInfo.chattingCompanyName:null},handleInput:function(t){t.target.value=t.target.value.match(/^\d*(\.?\d{0,3})/g)[0]||null,this.data.sellerInfo.depositRatio=t.target.value},handleInput2:function(t){t.target.value=t.target.value.match(/^\d*(\.?\d{0,3})/g)[0]||null,this.data.buyerInfo.depositRatio=t.target.value},onUnilateral:function(t){this.deliveryContractList=[],this.deliveryContractType=null,this.unilateralRelevance.contractCode=null,this.data.contractType=t},onSeachContract:function(t){this.isShowUnilateralDialog=!0,this.purchaseContract(t)},crossHandleCheckChange:function(t){this.obj=t},handleCurrentChangeDeliver:function(t){this.searchForm.pageNo=t;var e=null;1===this.upstreamTerm||2===this.upstreamTerm?e="单边":3===this.upstreamTerm?e="上游":4===this.upstreamTerm&&(e="下游"),this.purchaseContract(e,!0)},purchaseContract:function(t,e){var a=this;if(!t||void 0!==e&&null!=e||(this.searchForm={}),this.upstreamTerm=0,"单边"===t){if(null==this.data.contractType||void 0===this.data.contractType)return this.$message.error("请先选择单边交易类型后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(1===this.data.contractType)return this.$message.error("双边交易时不能查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(this.showDvlyQtyCol=!1,2===this.data.contractType){if(this.upstreamTerm=2,null==this.sellerInfoProd||void 0===this.sellerInfoProd)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.bizType=1,this.searchForm.unilateralCorrelation=1,this.searchForm.productId=this.sellerInfoProd,this.searchForm.skuQuantity=this.data.skuQuantity}else if(3===this.data.contractType){if(this.upstreamTerm=1,null==this.buyerInfoProd||void 0===this.buyerInfoProd)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.bizType=2,this.searchForm.unilateralCorrelation=1,this.searchForm.productId=this.buyerInfoProd,this.searchForm.skuQuantity=this.data.skuQuantity}if(null==this.searchForm.productId||void 0===this.searchForm.productId)return this.$message.error("请先选择产品后再查询单边合同"),this.isShowUnilateralDialog=!1,!1;if(null==this.searchForm.skuQuantity||void 0===this.searchForm.skuQuantity)return this.$message.error("请先输入产品数量后再查询单边合同"),this.isShowUnilateralDialog=!1,!1}else{if(this.showDvlyQtyCol=!0,1===this.searchForm.unilateralCorrelation&&delete this.searchForm.unilateralCorrelation,"上游"===t){if(this.upstreamTerm=3,this.searchForm.bizType=2,null==this.sellerInfoProd||void 0===this.sellerInfoProd)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.productId=this.sellerInfoProd,this.searchForm.skuQuantity=this.data.skuQuantity,this.searchForm.sellerCompanyName=this.data.sellerInfo.companyName,6===this.data.bizType&&(this.searchForm.longtermContractFlag=1)}else if("下游"===t){if(this.upstreamTerm=4,this.searchForm.bizType=1,null==this.buyerInfoProd||void 0===this.buyerInfoProd)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;this.searchForm.productId=this.buyerInfoProd,this.searchForm.skuQuantity=this.data.skuQuantity,this.searchForm.buyerCompanyName=this.data.buyerInfo.companyName,6===this.data.bizType&&(this.searchForm.longtermContractFlag=1)}if(null==this.searchForm.productId||void 0===this.searchForm.productId)return this.$message.error("请先选择产品后再查询长约合同"),this.isShowUnilateralDialog=!1,!1;if(null==this.searchForm.skuQuantity||void 0===this.searchForm.skuQuantity)return this.$message.error("请先输入产品数量后再查询长约合同"),this.isShowUnilateralDialog=!1,!1}this.$http.post(this.$api.delivery.crossContract,this.searchForm).then(function(t){0===t.data.code&&(a.totalDelivery=t.data.data.total,a.purchaseContractList=t.data.data.rows)})},crossSubmission:function(){3===this.upstreamTerm?(this.data.sellerInfo.contractCode=this.obj.contractCode,this.data.sellerInfo.longtermContractOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1):4===this.upstreamTerm?(this.data.buyerInfo.contractCode=this.obj.contractCode,this.data.buyerInfo.longtermContractOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1):(this.unilateralRelevance.contractCode=this.obj.contractCode,this.unilateralRelevance.correlationOrderId=this.obj.orderId,this.isShowUnilateralDialog=!1,this.deliveryContractClick(this.obj.orderId)),this.searchForm={}},deliveryContractClick:function(t){if(null==t||void 0===t)return!1;var e=this;e.$http.get(e.$api.delivery.deliveryContract+"/"+t).then(function(t){if(0===t.data.code){if(e.deliveryContractList=t.data.data.erpFileContractModelList,null==e.deliveryContractList||void 0===e.deliveryContractList||0===e.deliveryContractList.length)return e.$message.error("您选择的单边合同无合同附件!"),!1;var a=e.deliveryContractList[0].fileUrl.lastIndexOf("."),s=e.deliveryContractList[0].fileUrl.substring(a+1,e.deliveryContractList[0].fileUrl.delveryLength);e.deliveryContractType=s}})},openPro:function(t,e){!t||1!==e||null!==this.data.bizType&&null!==this.data.buyerInfo.companyName||this.$message.error("请先选择业务类型及下游公司后再选择产品"),!t||2!==e||null!==this.data.bizType&&null!==this.data.sellerInfo.companyName||this.$message.error("请先选择业务类型及上游公司后再选择产品"),!t||3!==e||null!==this.data.bizType&&null!==this.data.buyerInfo.companyName&&null!==this.data.buyerInfo.prdSkuId||this.$message.error("请先选择业务类型、下游公司及产品后再选择交割库"),!t||4!==e||null!==this.data.bizType&&null!==this.data.sellerInfo.companyName&&null!==this.data.sellerInfo.prdSkuId||this.$message.error("请先选择业务类型、上游公司及产品后再选择交割库")},warehouseidxbuys:function(){if(null!==this.warehouseidxbuy&&void 0!==this.warehouseidxbuy)for(var t=0;t<this.buyDeliveryBank.length;t++)this.warehouseidxbuy===this.buyDeliveryBank[t].warehouseId&&(this.data.buyerInfo.deliveryWarehouseId=this.buyDeliveryBank[t].warehouseId,this.data.buyerInfo.deliveryWarehouseName=this.buyDeliveryBank[t].warehouseName)},businessManagerchk:function(){this.data.businessManagerName=this.businessManager[this.businessManageridx].userName,this.data.businessManagerId=this.businessManager[this.businessManageridx].usrUserId,this.userid=this.businessManager[this.businessManageridx].usrUserId},warehouseidxsells:function(){if(null!==this.warehouseidxsell&&void 0!==this.warehouseidxsell)for(var t=0;t<this.sellDeliveryBank.length;t++)this.warehouseidxsell===this.sellDeliveryBank[t].warehouseId&&(this.data.sellerInfo.deliveryWarehouseId=this.sellDeliveryBank[t].warehouseId,this.data.sellerInfo.deliveryWarehouseName=this.sellDeliveryBank[t].warehouseName)},checked:function(t){this.activeIndex=t},checkGroup:function(){this.data.usrOrganizationId=this.businessManagerGroup[this.srOrganizationIdx].usrOrganizationId,this.data.usrOrganizationName=this.businessManagerGroup[this.srOrganizationIdx].orgName},checkCompany:function(t){"买"===t&&(this.dialogVisibles=!0,this.data.buyerInfo.contractCode=null,this.data.buyerInfo.longtermContractOrderId=null),"卖"===t&&(this.dialogVisible=!0,this.data.sellerInfo.contractCode=null,this.data.sellerInfo.longtermContractOrderId=null),null!==this.data.bizType&&""!==this.data.bizType?(this.companyName=null,this.activeCompanyType=t,this.activeIndex=null,this.getCompany()):this.$message.error("请先选择业务类型")},getCompany:function(){var t=this,e={bizType:t.data.bizType,prdProductId:"卖"===t.activeCompanyType?t.data.sellerInfo.prdSkuId:t.data.buyerInfo.prdSkuId};"卖"===t.activeCompanyType?e.sellerCorpName=t.companyName:e.buyerCorpName=t.companyName,this.$http.post(this.$api.contract.getCompany,e).then(function(e){t.proType=e.data.data.goodsList,"卖"===t.activeCompanyType?t.sellCompanyList=e.data.data.sellerCorpList:t.buyCompanyList=e.data.data.buyerCorpList,t.checkPro(t.activeCompanyType)}).catch(function(t){console.log(t)})},getRelatedCompany:function(){var t=this;this.$http.get(this.$api.contract.getRelatedCompany).then(function(e){t.relatedCompany=e.data.data.targetCorpList}).catch(function(t){console.log(t)})},checktargetCorpbuy:function(){this.data.buyerInfo.targetCorpName=this.relatedCompany[this.data.targetCorpIdbuy].targetCorpName,this.data.buyerInfo.targetCorpId=this.relatedCompany[this.data.targetCorpIdbuy].targetCorpId,this.data.sellerInfo.targetCorpName=this.relatedCompany[this.data.targetCorpIdbuy].targetCorpName,this.data.sellerInfo.targetCorpId=this.relatedCompany[this.data.targetCorpIdbuy].targetCorpId},checkPro:function(t){if("卖"===t){for(var e=0;e<this.proType.length;e++)this.sellerInfoProd===this.proType[e].goodsId&&(this.sellerInfoProdIndex=e);this.data.sellerInfo.prdSkuId=this.proType[this.sellerInfoProdIndex].goodsId,this.data.sellerInfo.skuCode=this.proType[this.sellerInfoProdIndex].goodsCode,this.data.sellerInfo.prodName=this.proType[this.sellerInfoProdIndex].goodsName,this.data.buyerInfo.prdSkuId=this.proType[this.sellerInfoProdIndex].goodsId,this.data.buyerInfo.skuCode=this.proType[this.sellerInfoProdIndex].goodsCode,this.data.buyerInfo.prodName=this.proType[this.sellerInfoProdIndex].goodsName,this.buyerInfoProd=this.sellerInfoProd}if("买"===t){for(var a=0;a<this.proType.length;a++)this.buyerInfoProd===this.proType[a].goodsId&&(this.sellerInfoProdIndex=a);this.data.buyerInfo.prdSkuId=this.proType[this.sellerInfoProdIndex].goodsId,this.data.buyerInfo.skuCode=this.proType[this.sellerInfoProdIndex].goodsCode,this.data.buyerInfo.prodName=this.proType[this.sellerInfoProdIndex].goodsName,this.data.sellerInfo.prdSkuId=this.proType[this.sellerInfoProdIndex].goodsId,this.data.sellerInfo.skuCode=this.proType[this.sellerInfoProdIndex].goodsCode,this.data.sellerInfo.prodName=this.proType[this.sellerInfoProdIndex].goodsName,this.sellerInfoProd=this.buyerInfoProd}var s=this,i={productId:"卖"===t?this.sellerInfoProd:this.buyerInfoProd};this.$http.post(this.$api.contract.getWarehouseList,i).then(function(t){s.sellDeliveryBank=t.data.data.warehouseList,s.buyDeliveryBank=t.data.data.warehouseList,null===s.$route.query.id&&void 0===s.$route.query.if||(2===s.data.contractType?s.warehouseidxsells():3===s.data.contractType?s.warehouseidxbuys():(s.warehouseidxsells(),s.warehouseidxbuys()))}).catch(function(t){console.log(t)})},getGrade:function(){var t=this,e={organizationId:this.data.usrOrganizationId,pageNum:0};this.$http.post(this.$api.contract.getGrade,e).then(function(e){0===e.data.code&&(t.businessManager=e.data.data.rows,i()(e.data.data.rows).forEach(function(a){1924===e.data.data.rows[a].usrUserId&&(t.businessManageridx=1*a,t.data.businessManagerName=t.businessManager[t.businessManageridx].userName,t.data.businessManagerId=t.businessManager[t.businessManageridx].usrUserId,t.userid=t.businessManager[t.businessManageridx].usrUserId)}))}).catch(function(t){console.log(t)})},checkSales:function(){null!==this.activeIndex?"买"===this.activeCompanyType?(this.dialogVisibles=!1,this.data.buyerInfo.companyName=this.buyCompanyList[this.activeIndex].buyerCorpName,this.data.buyerInfo.companyId=this.buyCompanyList[this.activeIndex].buyerCorpId):(this.dialogVisible=!1,this.data.sellerInfo.companyName=this.sellCompanyList[this.activeIndex].sellerCorpName,this.data.sellerInfo.companyId=this.sellCompanyList[this.activeIndex].sellerCorpId):this.$message({message:"请先选择公司",type:"error"})},beforeSubmit:function(){var t=this;if(!1===this.chksubmit())return!1;this.$messagebox.prompt("请输入安全码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(e,a,s){"confirm"===e?a.inputValue?(t.data.prodName=a.inputValue,t.onsubmit(),s()):t.$message.error("必须输入安全码"):s()}}).then(function(t){t.value}).catch(function(){})},onsubmit:function(){var t=this;this.$http.post(this.$api.contract.addOfflineContract,this.data).then(function(e){0===e.data.code?t.$alert("补录合同成功 id= "+e.data.data.id,"提交成功",{confirmButtonText:"确定",callback:function(e){t.$router.go(0)}}):t.$message({message:e.data.message,type:"error"})})},chksubmit:function(){if(1===this.data.contractType?(this.data.buyerInfo.skuQuantity=this.data.skuQuantity,this.data.sellerInfo.skuQuantity=this.data.skuQuantity):2===this.data.contractType?this.data.sellerInfo.skuQuantity=this.data.skuQuantity:3===this.data.contractType&&(this.data.buyerInfo.skuQuantity=this.data.skuQuantity),!this.testForm(this.Verification,1))return!1;if(1===this.data.contractType){if(!this.testForm(this.Verification1,2))return!1;if(!this.testForm(this.Verification1,3))return!1}else if((2===this.data.contractType||3===this.data.contractType)&&!this.testForm(this.Verification1,this.data.contractType))return!1;if(null==this.deliveryContractList||void 0===this.deliveryContractList||0===this.deliveryContractList.length?this.unilateralRelevance.isUnilateralCorrelation=!1:this.unilateralRelevance.isUnilateralCorrelation=!0,this.unilateralRelevance.contractCode&&!this.unilateralRelevance.isUnilateralCorrelation)return this.$message({message:"已选择的单边合同无合同附件！",type:"error"}),!1;if(1===this.data.contractType||2===this.data.contractType){if(3===this.data.sellerInfo.provideInvoiceType&&(null===this.data.sellerInfo.provideInvoiceDays||""===this.data.sellerInfo.provideInvoiceDays))return this.$message({message:"请填写发票日期",type:"error"}),!1;if(!this.data.sellerInfo.deliveryDateFlag)return this.$message({message:"请先选择交割日期",type:"error"}),!1;if(!this.data.sellerInfo.deliveryBeginDate)return this.$message({message:"请选择"+(2===this.data.sellerInfo.deliveryDateFlag?"截止日期":"开始日期"),type:"error"}),!1;if(1===this.data.sellerInfo.deliveryDateFlag&&!this.data.sellerInfo.deliveryEndDate)return this.$message({message:"请选择结束日期",type:"error"}),!1;if(this.data.sellerInfo.priceOfWeight&&(!this.data.sellerInfo.chattingCompanyName||this.getBLen(this.data.sellerInfo.chattingCompanyName)>50))return this.$message({message:"请填写上游撮合公司且长度不能超过50字符",type:"error"}),!1;if(this.data.sellerInfo.chattingAmount=this.data.sellerInfo.skuQuantity*this.data.sellerInfo.priceOfWeight,null==this.buyContImg||void 0===this.buyContImg||0===this.buyContImg.length)return this.$message({message:"请上传盖章采购合同",type:"error"}),!1}if(1===this.data.contractType||3===this.data.contractType){if(3===this.data.buyerInfo.provideInvoiceType&&(null===this.data.buyerInfo.provideInvoiceDays||""===this.data.buyerInfo.provideInvoiceDays))return this.$message({message:"请填写发票日期",type:"error"}),!1;if(!this.data.buyerInfo.deliveryDateFlag)return this.$message({message:"请先选择交割日期",type:"error"}),!1;if(!this.data.buyerInfo.deliveryBeginDate)return this.$message({message:"请选择"+(2===this.data.buyerInfo.deliveryDateFlag?"截止日期":"开始日期"),type:"error"}),!1;if(1===this.data.buyerInfo.deliveryDateFlag&&!this.data.buyerInfo.deliveryEndDate)return this.$message({message:"请选择结束日期",type:"error"}),!1;if(this.data.buyerInfo.priceOfWeight&&(!this.data.buyerInfo.chattingCompanyName||this.getBLen(this.data.buyerInfo.chattingCompanyName)>50))return this.$message({message:"请填写下游撮合公司且长度不能超过50字符",type:"error"}),!1;if(this.data.buyerInfo.chattingAmount=this.data.buyerInfo.skuQuantity*this.data.buyerInfo.priceOfWeight,null==this.saleContImg||void 0===this.saleContImg||0===this.saleContImg.length)return this.$message({message:"请上传盖章销售合同",type:"error"}),!1}return _s()(this.data,this.unilateralRelevance),this.data.purchaseCertifiedFileAttachList=this.buyContImg,this.data.saleCertifiedFileAttachList=this.saleContImg,!0},getBLen:function(t){return null==t?0:("string"!=typeof t&&(t+=""),t.replace(/[^x00-xff]/g,"01").length)},testForm:function(t,e){for(var a=1===e?this.data:3===e?this.data.buyerInfo:this.data.sellerInfo,s=0;s<t.length;s++)if(null===a[t[s].name]||""===a[t[s].name])return this.$message({message:t[s].msg,type:"error"}),!1;return!0},pickertime:function(t){return 1===t&&this.data.sellerInfo.deliveryBeginDate>this.data.sellerInfo.deliveryEndDate&&null!==this.data.sellerInfo.deliveryEndDate?(this.$message({message:"开始时间不能大于结束时间",type:"error"}),void(this.data.sellerInfo.deliveryBeginDate=null)):2===t&&this.data.sellerInfo.deliveryBeginDate>this.data.sellerInfo.deliveryEndDate&&null!==this.data.sellerInfo.deliveryBeginDate?(this.$message({message:"结束时间应大于开始时间",type:"error"}),void(this.data.sellerInfo.deliveryEndDate=null)):3===t&&this.data.buyerInfo.deliveryBeginDate>this.data.buyerInfo.deliveryEndDate&&null!==this.data.buyerInfo.deliveryEndDate?(this.$message({message:"开始时间不能大于结束时间",type:"error"}),void(this.data.buyerInfo.deliveryBeginDate=null)):void(4===t&&this.data.buyerInfo.deliveryBeginDate>this.data.buyerInfo.deliveryEndDate&&null!==this.data.buyerInfo.deliveryBeginDate&&(this.$message({message:"结束时间应大于开始时间",type:"error"}),this.data.buyerInfo.deliveryEndDate=null))},onDepositAppendBenchmark:function(t){this.depositAppendBenchmarkType=t},querySearch4DepositAppend:function(t,e){var a=[];2===this.depositAppendBenchmarkType?"CCF"===this.data.buyerInfo.depositAppendBenchmark?e(a):(a=[{value:"华东地区"},{value:"华南地区"}],e(t?a.filter(this.createFilter(t)):a)):3===this.depositAppendBenchmarkType?"CCF"===this.data.sellerInfo.depositAppendBenchmark?e(a):(a=[{value:"华东地区"},{value:"华南地区"}],e(t?a.filter(this.createFilter(t)):a)):e(a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},onCallbackBuyFileUpload:function(t){var e=this;this.buyContImg=[],t.forEach(function(t){e.buyContImg.push(t.fileUrl)})},onCallbackSaleFileUpload:function(t){var e=this;this.saleContImg=[],t.forEach(function(t){e.saleContImg.push(t.fileUrl)})}}},rl={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-contract"},[a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(0),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getCompany},model:{value:t.data.bizType,callback:function(e){t.$set(t.data,"bizType",e)},expression:"data.bizType"}},t._l(t.bizType4CreateEss,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)]),t._v(" "),a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("合同类型")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.onUnilateral},model:{value:t.data.contractType,callback:function(e){t.$set(t.data,"contractType",e)},expression:"data.contractType"}},t._l(t.$constant.contractTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(1),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.businessManagerchk},model:{value:t.businessManageridx,callback:function(e){t.businessManageridx=e},expression:"businessManageridx"}},t._l(t.businessManager,function(e,s){return a("el-option",{key:s,attrs:{label:e.userName,value:s}},[a("span",[t._v(t._s(e.userName))])])}),1)],1)]),t._v(" "),a("div",{staticClass:"essential-item"})]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(2),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.prdProductId,callback:function(e){t.$set(t.data,"prdProductId",e)},expression:"data.prdProductId"}},t._l(t.proType,function(e,s){return a("el-option",{key:s,attrs:{label:e.goodsName,value:e.goodsId}},[a("span",[t._v(t._s(e.goodsName))])])}),1)],1)]),t._v(" "),a("div",{staticClass:"essential-item"},[t._m(3),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.skuQuantity,expression:"data.skuQuantity"}],staticClass:"gy-input",attrs:{type:"number",placeholder:"请输入产品数量"},domProps:{value:t.data.skuQuantity},on:{input:[function(e){e.target.composing||t.$set(t.data,"skuQuantity",e.target.value)},function(e){return t.downNumInput(t.data.skuQuantity)}]}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("吨")])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(4),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.checktargetCorpbuy},model:{value:t.data.targetCorpIdbuy,callback:function(e){t.$set(t.data,"targetCorpIdbuy",e)},expression:"data.targetCorpIdbuy"}},t._l(t.relatedCompany,function(e,s){return a("el-option",{key:s,attrs:{label:e.targetCorpName,value:s}},[a("span",[t._v(t._s(e.targetCorpName))])])}),1)],1)]),t._v(" "),a("div",{staticClass:"essential-item"},[t._m(5),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{staticClass:"mycorp",attrs:{placeholder:"请选择"},model:{value:t.data.transactionType,callback:function(e){t.$set(t.data,"transactionType",e)},expression:"data.transactionType"}},t._l(t.$constant.contractTradeTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(6),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp"},on:{change:function(e){return t.pickertime(1)}},model:{value:t.data.contractCreatedDate,callback:function(e){t.$set(t.data,"contractCreatedDate",e)},expression:"data.contractCreatedDate"}})],1)])]),t._v(" "),a("div",{staticClass:"essential-item"})])])]),t._v(" "),a("div",{staticClass:"pay-wrapper"},[3!==t.data.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("上游合同信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(7),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.companyName,expression:"data.sellerInfo.companyName"}],attrs:{type:"text",placeholder:"请选择上游公司"},domProps:{value:t.data.sellerInfo.companyName},on:{click:function(e){return t.checkCompany("卖")},input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"companyName",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(8),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.skuPrice,expression:"data.sellerInfo.skuPrice"}],attrs:{type:"text",placeholder:"请输入产品单价"},domProps:{value:t.data.sellerInfo.skuPrice},on:{input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"skuPrice",e.target.value)}}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("元/吨")])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("保证金")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.depositRatio,expression:"data.sellerInfo.depositRatio"}],attrs:{type:"text",placeholder:"请输入保证金比例"},domProps:{value:t.data.sellerInfo.depositRatio},on:{change:t.handleInput,input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"depositRatio",e.target.value)}}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("%")])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("追保约定")]),t._v(" "),a("div",{staticClass:"essential-text cont-ess-zbyd"},[a("div",{staticClass:"q",staticStyle:{"padding-left":"10px"}},[t._v("跌")]),t._v(" "),a("div",{staticClass:"w"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.depositRatioSubtract,expression:"data.sellerInfo.depositRatioSubtract"}],staticStyle:{"text-align":"center"},attrs:{type:"text"},domProps:{value:t.data.sellerInfo.depositRatioSubtract},on:{input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"depositRatioSubtract",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"e"},[t._v("%")]),t._v(" "),t._m(9),t._v(" "),a("div",{staticClass:"t"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.depositRatioAppend,expression:"data.sellerInfo.depositRatioAppend"}],staticStyle:{"text-align":"center"},attrs:{type:"text"},domProps:{value:t.data.sellerInfo.depositRatioAppend},on:{input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"depositRatioAppend",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"y"},[t._v("%")])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("追保基准")]),t._v(" "),a("div",{staticClass:"essential-text cont-ess-zbyd"},[a("div",{staticClass:"w"},[a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",clearable:!0},on:{change:function(e){return t.onDepositAppendBenchmark(3)}},model:{value:t.data.sellerInfo.depositAppendBenchmark,callback:function(e){t.$set(t.data.sellerInfo,"depositAppendBenchmark",e)},expression:"data.sellerInfo.depositAppendBenchmark"}},t._l(t.$constant.baselineRecovery,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)]),t._v(" "),a("div",{staticClass:"t"},[a("div",{staticClass:"essential-text"},[a("el-autocomplete",{attrs:{clearable:!0,"fetch-suggestions":t.querySearch4DepositAppend,debounce:10,placeholder:"请输入或选择"},model:{value:t.data.sellerInfo.depositAppendArea,callback:function(e){t.$set(t.data.sellerInfo,"depositAppendArea",e)},expression:"data.sellerInfo.depositAppendArea"}})],1)])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(10),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{"visible-change":function(e){return t.openPro(e,4)},change:t.warehouseidxsells},model:{value:t.warehouseidxsell,callback:function(e){t.warehouseidxsell=e},expression:"warehouseidxsell"}},t._l(t.sellDeliveryBank,function(e,s){return a("el-option",{key:s,attrs:{label:e.warehouseName,value:e.warehouseId}},[a("span",[t._v(t._s(e.warehouseName))])])}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(11),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"flex-direction":"column"}},[a("div",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.sellerInfo.deliveryDateFlag,callback:function(e){t.$set(t.data.sellerInfo,"deliveryDateFlag",e)},expression:"data.sellerInfo.deliveryDateFlag"}},t._l(t.$constant.deliveryDateFlag,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"margin-right":"0"}},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:2===t.data.sellerInfo.deliveryDateFlag?"截止日期":"开始日期"},on:{change:function(e){return t.pickertime(1)}},model:{value:t.data.sellerInfo.deliveryBeginDate,callback:function(e){t.$set(t.data.sellerInfo,"deliveryBeginDate",e)},expression:"data.sellerInfo.deliveryBeginDate"}})],1),t._v(" "),2!==t.data.sellerInfo.deliveryDateFlag?[a("div",{staticClass:"c"},[t._v("-")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},on:{change:function(e){return t.pickertime(2)}},model:{value:t.data.sellerInfo.deliveryEndDate,callback:function(e){t.$set(t.data.sellerInfo,"deliveryEndDate",e)},expression:"data.sellerInfo.deliveryEndDate"}})],1)]:t._e()],2)])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(12),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.sellerInfo.deliveryType,callback:function(e){t.$set(t.data.sellerInfo,"deliveryType",e)},expression:"data.sellerInfo.deliveryType"}},t._l(t.$constant.deliveryCreateEssList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(13),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.warehouseFreeDays,expression:"data.sellerInfo.warehouseFreeDays"}],attrs:{type:"text",placeholder:"请输入天数"},domProps:{value:t.data.sellerInfo.warehouseFreeDays},on:{input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"warehouseFreeDays",e.target.value)}}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("天")])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(14),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.sellerInfo.paymentType,callback:function(e){t.$set(t.data.sellerInfo,"paymentType",e)},expression:"data.sellerInfo.paymentType"}},t._l(t.$constant.paymentType4Buy,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.data.sellerInfo.payChannel,callback:function(e){t.$set(t.data.sellerInfo,"payChannel",e)},expression:"data.sellerInfo.payChannel"}},t._l(t.$constant.paymentType1,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(15),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-radio-group",{model:{value:t.data.sellerInfo.provideInvoiceType,callback:function(e){t.$set(t.data.sellerInfo,"provideInvoiceType",e)},expression:"data.sellerInfo.provideInvoiceType"}},[a("el-radio",{attrs:{label:1}},[t._v("交割月")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("交割次月")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("交割后")]),t._v(" "),3===t.data.sellerInfo.provideInvoiceType||"3"===t.data.sellerInfo.provideInvoiceType?a("span",{staticStyle:{"font-size":"13px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.provideInvoiceDays,expression:"data.sellerInfo.provideInvoiceDays"}],staticStyle:{width:"50px"},attrs:{type:"text"},domProps:{value:t.data.sellerInfo.provideInvoiceDays},on:{input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"provideInvoiceDays",e.target.value)}}}),t._v("工作日")]):t._e()],1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(16),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.sellerInfo.skuOrigin,callback:function(e){t.$set(t.data.sellerInfo,"skuOrigin",e)},expression:"data.sellerInfo.skuOrigin"}},t._l(t.$constant.sourceGoods,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(17),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.sellerInfo.qualityStandard,callback:function(e){t.$set(t.data.sellerInfo,"qualityStandard",e)},expression:"data.sellerInfo.qualityStandard"}},t._l(t.$constant.qualityStandards,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(18),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-radio-group",{model:{value:t.data.sellerInfo.packagingStandard,callback:function(e){t.$set(t.data.sellerInfo,"packagingStandard",e)},expression:"data.sellerInfo.packagingStandard"}},[a("el-radio",{attrs:{label:0}},[t._v("散水")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("桶装")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("袋装")])],1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("撮合费用")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{staticClass:"lc-select",attrs:{placeholder:"请选择"},on:{change:t.upCost},model:{value:t.data.sellerInfo.priceOfWeight,callback:function(e){t.$set(t.data.sellerInfo,"priceOfWeight",e)},expression:"data.sellerInfo.priceOfWeight"}},t._l(t.priceOfWeightList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),t.data.sellerInfo.priceOfWeight?a("span",[t._v(t._s(t.upCostNum)+"元")]):t._e()],1)])]),t._v(" "),t.data.sellerInfo.priceOfWeight?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(19),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.chattingCompanyName,expression:"data.sellerInfo.chattingCompanyName"}],attrs:{type:"text",placeholder:"请输入撮合公司"},domProps:{value:t.data.sellerInfo.chattingCompanyName},on:{input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"chattingCompanyName",e.target.value)}}})])])]):t._e(),t._v(" "),6===t.data.bizType?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(20),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"flex-direction":"column"}},[a("div",{staticClass:"essential-text",staticStyle:{"margin-right":"0"}},[a("div",{staticClass:"d"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.contractCode,expression:"data.sellerInfo.contractCode"}],attrs:{type:"text",placeholder:"请选择上游合约编号"},domProps:{value:t.data.sellerInfo.contractCode},on:{input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"contractCode",e.target.value)}}}),t._v(" "),a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",right:"5px",top:"3px"},on:{click:function(e){return t.onSeachContract("上游")}}})])])])])]):t._e(),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sellerRemarks,expression:"sellerRemarks"}],staticClass:"gy-textarea",attrs:{name:"",cols:"30",rows:"10"},domProps:{value:t.sellerRemarks},on:{input:function(e){e.target.composing||(t.sellerRemarks=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(21),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.odrContractNumber,expression:"data.sellerInfo.odrContractNumber"}],attrs:{type:"text",placeholder:"请输入上游合同编号"},domProps:{value:t.data.sellerInfo.odrContractNumber},on:{input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"odrContractNumber",e.target.value)}}})])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(22),t._v(" "),a("div",{staticClass:"essential-text"},[a("gy-file-upload",{on:{callbackFileUpload:t.onCallbackBuyFileUpload}})],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("纸质合同号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.sellerInfo.planNumber,expression:"data.sellerInfo.planNumber"}],attrs:{type:"text",placeholder:"请输入纸质合同号"},domProps:{value:t.data.sellerInfo.planNumber},on:{input:function(e){e.target.composing||t.$set(t.data.sellerInfo,"planNumber",e.target.value)}}})])])])])])]):t._e(),t._v(" "),2!==t.data.contractType?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("下游合同信息")]),t._v(" "),a("div",{staticClass:"essential-wrapper",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(23),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.companyName,expression:"data.buyerInfo.companyName"}],attrs:{type:"text",placeholder:"请选择下游公司"},domProps:{value:t.data.buyerInfo.companyName},on:{click:function(e){return t.checkCompany("买")},input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"companyName",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(24),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.skuPrice,expression:"data.buyerInfo.skuPrice"}],attrs:{type:"text",placeholder:"请输入产品单价"},domProps:{value:t.data.buyerInfo.skuPrice},on:{input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"skuPrice",e.target.value)}}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("元/吨")])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("保证金")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.depositRatio,expression:"data.buyerInfo.depositRatio"}],attrs:{type:"text",placeholder:"请输入保证金比例"},domProps:{value:t.data.buyerInfo.depositRatio},on:{change:t.handleInput2,input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"depositRatio",e.target.value)}}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("%")])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("追保约定")]),t._v(" "),a("div",{staticClass:"essential-text cont-ess-zbyd"},[a("div",{staticClass:"q",staticStyle:{"padding-left":"10px"}},[t._v("跌")]),t._v(" "),a("div",{staticClass:"w"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.depositRatioSubtract,expression:"data.buyerInfo.depositRatioSubtract"}],staticStyle:{"text-align":"center"},attrs:{type:"text"},domProps:{value:t.data.buyerInfo.depositRatioSubtract},on:{input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"depositRatioSubtract",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"e"},[t._v("%")]),t._v(" "),a("div",{staticClass:"r"},[t._v("补")]),t._v(" "),a("div",{staticClass:"t"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.depositRatioAppend,expression:"data.buyerInfo.depositRatioAppend"}],staticStyle:{"text-align":"center"},attrs:{type:"text"},domProps:{value:t.data.buyerInfo.depositRatioAppend},on:{input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"depositRatioAppend",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"y"},[t._v("%")])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("追保基准")]),t._v(" "),a("div",{staticClass:"essential-text cont-ess-zbyd"},[a("div",{staticClass:"w"},[a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择",clearable:!0},on:{change:function(e){return t.onDepositAppendBenchmark(2)}},model:{value:t.data.buyerInfo.depositAppendBenchmark,callback:function(e){t.$set(t.data.buyerInfo,"depositAppendBenchmark",e)},expression:"data.buyerInfo.depositAppendBenchmark"}},t._l(t.$constant.baselineRecovery,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)]),t._v(" "),a("div",{staticClass:"t"},[a("div",{staticClass:"essential-text"},[a("el-autocomplete",{attrs:{clearable:!0,"fetch-suggestions":t.querySearch4DepositAppend,debounce:10,placeholder:"请输入或选择"},model:{value:t.data.buyerInfo.depositAppendArea,callback:function(e){t.$set(t.data.buyerInfo,"depositAppendArea",e)},expression:"data.buyerInfo.depositAppendArea"}})],1)])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(25),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.warehouseidxbuys},model:{value:t.warehouseidxbuy,callback:function(e){t.warehouseidxbuy=e},expression:"warehouseidxbuy"}},t._l(t.buyDeliveryBank,function(e,s){return a("el-option",{key:s,attrs:{label:e.warehouseName,value:e.warehouseId}},[a("span",[t._v(t._s(e.warehouseName))])])}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(26),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"flex-direction":"column"}},[a("div",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.buyerInfo.deliveryDateFlag,callback:function(e){t.$set(t.data.buyerInfo,"deliveryDateFlag",e)},expression:"data.buyerInfo.deliveryDateFlag"}},t._l(t.$constant.deliveryDateFlag,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"margin-right":"0"}},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:2===t.data.buyerInfo.deliveryDateFlag?"截止日期":"开始日期"},on:{change:function(e){return t.pickertime(3)}},model:{value:t.data.buyerInfo.deliveryBeginDate,callback:function(e){t.$set(t.data.buyerInfo,"deliveryBeginDate",e)},expression:"data.buyerInfo.deliveryBeginDate"}})],1),t._v(" "),2!==t.data.buyerInfo.deliveryDateFlag?[a("div",{staticClass:"c"},[t._v("-")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},on:{change:function(e){return t.pickertime(4)}},model:{value:t.data.buyerInfo.deliveryEndDate,callback:function(e){t.$set(t.data.buyerInfo,"deliveryEndDate",e)},expression:"data.buyerInfo.deliveryEndDate"}})],1)]:t._e()],2)])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(27),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.buyerInfo.deliveryType,callback:function(e){t.$set(t.data.buyerInfo,"deliveryType",e)},expression:"data.buyerInfo.deliveryType"}},t._l(t.$constant.deliveryCreateEssList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(28),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.warehouseFreeDays,expression:"data.buyerInfo.warehouseFreeDays"}],attrs:{type:"text",placeholder:"请输入天数"},domProps:{value:t.data.buyerInfo.warehouseFreeDays},on:{input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"warehouseFreeDays",e.target.value)}}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("天")])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(29),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.buyerInfo.paymentType,callback:function(e){t.$set(t.data.buyerInfo,"paymentType",e)},expression:"data.buyerInfo.paymentType"}},t._l(t.$constant.paymentType,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.data.buyerInfo.payChannel,callback:function(e){t.$set(t.data.buyerInfo,"payChannel",e)},expression:"data.buyerInfo.payChannel"}},t._l(t.$constant.paymentType1,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(30),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-radio-group",{model:{value:t.data.buyerInfo.provideInvoiceType,callback:function(e){t.$set(t.data.buyerInfo,"provideInvoiceType",e)},expression:"data.buyerInfo.provideInvoiceType"}},[a("el-radio",{attrs:{label:1}},[t._v("交割月")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("交割次月")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("交割后")]),t._v(" "),3===t.data.buyerInfo.provideInvoiceType||"3"===t.data.buyerInfo.provideInvoiceType?a("span",{staticStyle:{"font-size":"13px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.provideInvoiceDays,expression:"data.buyerInfo.provideInvoiceDays"}],staticStyle:{width:"50px"},attrs:{type:"text"},domProps:{value:t.data.buyerInfo.provideInvoiceDays},on:{input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"provideInvoiceDays",e.target.value)}}}),t._v("工作日")]):t._e()],1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(31),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.buyerInfo.skuOrigin,callback:function(e){t.$set(t.data.buyerInfo,"skuOrigin",e)},expression:"data.buyerInfo.skuOrigin"}},t._l(t.$constant.sourceGoods,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(32),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.buyerInfo.qualityStandard,callback:function(e){t.$set(t.data.buyerInfo,"qualityStandard",e)},expression:"data.buyerInfo.qualityStandard"}},t._l(t.$constant.qualityStandards,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(33),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-radio-group",{model:{value:t.data.buyerInfo.packagingStandard,callback:function(e){t.$set(t.data.buyerInfo,"packagingStandard",e)},expression:"data.buyerInfo.packagingStandard"}},[a("el-radio",{attrs:{label:0}},[t._v("散水")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("桶装")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("袋装")])],1)],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("撮合费用")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("el-select",{staticClass:"lc-select",attrs:{placeholder:"请选择"},on:{change:t.downCost},model:{value:t.data.buyerInfo.priceOfWeight,callback:function(e){t.$set(t.data.buyerInfo,"priceOfWeight",e)},expression:"data.buyerInfo.priceOfWeight"}},t._l(t.priceOfWeightList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),t.data.buyerInfo.priceOfWeight?a("span",[t._v(t._s(t.downCostNum)+"元")]):t._e()],1)])]),t._v(" "),t.data.buyerInfo.priceOfWeight?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(34),t._v(" "),a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.chattingCompanyName,expression:"data.buyerInfo.chattingCompanyName"}],attrs:{type:"text",placeholder:"请输入撮合公司"},domProps:{value:t.data.buyerInfo.chattingCompanyName},on:{input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"chattingCompanyName",e.target.value)}}})])])]):t._e(),t._v(" "),6===t.data.bizType?a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(35),t._v(" "),a("div",{staticClass:"essential-text",staticStyle:{"flex-direction":"column"}},[a("div",{staticClass:"essential-text",staticStyle:{"margin-right":"0"}},[a("div",{staticClass:"d"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.contractCode,expression:"data.buyerInfo.contractCode"}],attrs:{type:"text",placeholder:"请选择下游合约编号"},domProps:{value:t.data.buyerInfo.contractCode},on:{input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"contractCode",e.target.value)}}}),t._v(" "),a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",right:"5px",top:"3px"},on:{click:function(e){return t.onSeachContract("下游")}}})])])])])]):t._e(),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("备注")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.buyerRemarks,expression:"buyerRemarks"}],staticClass:"gy-textarea",attrs:{name:"",cols:"30",rows:"10"},domProps:{value:t.buyerRemarks},on:{input:function(e){e.target.composing||(t.buyerRemarks=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(36),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.odrContractNumber,expression:"data.buyerInfo.odrContractNumber"}],attrs:{type:"text",placeholder:"请输入下游合同编号"},domProps:{value:t.data.buyerInfo.odrContractNumber},on:{input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"odrContractNumber",e.target.value)}}})])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[t._m(37),t._v(" "),a("div",{staticClass:"essential-text"},[a("gy-file-upload",{on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1)])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("纸质合同号")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.buyerInfo.planNumber,expression:"data.buyerInfo.planNumber"}],attrs:{type:"text",placeholder:"请输入纸质合同号"},domProps:{value:t.data.buyerInfo.planNumber},on:{input:function(e){e.target.composing||t.$set(t.data.buyerInfo,"planNumber",e.target.value)}}})])])])]),t._v(" "),a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v("下游统计口径")]),t._v(" "),a("div",{staticClass:"essential-text"},[a("div",{staticClass:"essential-text"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.data.buyerInfo.statisticalCaliber,callback:function(e){t.$set(t.data.buyerInfo,"statisticalCaliber",e)},expression:"data.buyerInfo.statisticalCaliber"}},t._l(t.statisticalCaliber,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}},[a("span",[t._v(t._s(e))])])}),1)],1)])])])])]):t._e(),t._v(" "),2===t.data.contractType||3===t.data.contractType?a("div",{staticClass:"essential-information"}):t._e()]),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[a("button",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_create_contract",expression:"'to_create_contract'"}],staticClass:"gy-button-extra confirmations",attrs:{type:"button"},on:{click:t.beforeSubmit}},[t._v("提交")])]),t._v(" "),t.isShowUnilateralDialog?a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px",title:2===t.upstreamTerm||4===t.upstreamTerm?"销售合同列表":"采购合同列表",visible:t.isShowUnilateralDialog},on:{"update:visible":function(e){t.isShowUnilateralDialog=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),1===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.buyerCompanyName,expression:"searchForm.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.searchForm.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"buyerCompanyName",e.target.value)}}}):t._e(),t._v(" "),2===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.sellerCompanyName,expression:"searchForm.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.searchForm.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"sellerCompanyName",e.target.value)}}}):t._e(),t._v(" "),3===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.sellerCompanyName,expression:"searchForm.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司名称"},domProps:{value:t.searchForm.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"sellerCompanyName",e.target.value)}}}):t._e(),t._v(" "),4===t.upstreamTerm?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.buyerCompanyName,expression:"searchForm.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司名称"},domProps:{value:t.searchForm.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"buyerCompanyName",e.target.value)}}}):t._e()]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",top:"10px",left:"-20px"},on:{click:function(e){return t.purchaseContract()}}})]),t._v(" "),a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th",{staticStyle:{width:"120px"}},[t._v("合同要素ID")]),t._v(" "),a("th",[t._v("我方公司")]),t._v(" "),a("th",[2===t.upstreamTerm||4===t.upstreamTerm?a("span",[t._v("下游公司")]):a("span",[t._v("上游公司")])]),t._v(" "),a("th",{staticStyle:{width:"130px"}},[t._v("合同金额(元)")]),t._v(" "),a("th",[t._v("实际交割日期")]),t._v(" "),a("th",[t._v("交割日期")]),t._v(" "),a("th",[t._v("交割库")]),t._v(" "),t.showDvlyQtyCol?a("th",[t._v("可交割数量")]):t._e(),t._v(" "),t.showDvlyQtyCol?a("th",[t._v("合约数量")]):t._e(),t._v(" "),a("th",[t._v("免仓期(天)")])])]),t._v(" "),this.purchaseContractList.length>0?a("tbody",t._l(t.purchaseContractList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"120px"}},[a("input",{attrs:{type:"radio",name:"11"},on:{change:function(a){return t.crossHandleCheckChange(e)}}}),t._v(" "),a("span",{staticStyle:{"margin-left":"3px"}},[t._v(t._s(e.contractEssenceId||"-"))])]),t._v(" "),a("td",[t._v(t._s(e.ourCompanyName||"-"))]),t._v(" "),a("td",[2===t.upstreamTerm||4===t.upstreamTerm?a("span",[t._v(t._s(e.buyerCompanyName))]):a("span",[t._v(t._s(e.sellerCompanyName))])]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",{staticClass:"align-r",staticStyle:{width:"130px"}},[t._v(t._s(t._f("numToCash")(e.totalAmount)))]),t._v(" "),a("td",[e.realDeliveryDate?a("span",[t._v(t._s(t._f("date")(e.realDeliveryDate)))]):a("span",[t._v("-")])]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.deliveryDate))]),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.deliveryWarehouseName))]),t._v(" "),t.showDvlyQtyCol?a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToQuantity")(e.canDeliveryQuantity)))]):t._e(),t._v(" "),t.showDvlyQtyCol?a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToQuantity")(e.skuQuantity)))]):t._e(),t._v(" "),t.showDvlyQtyCol?a("td",[t._v("-")]):a("td",[t._v(t._s(e.warehouseFreeDays))])])}),0):a("tbody",[a("tr",[t.showDvlyQtyCol?a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v("暂无数据")]):a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[t._v("暂无数据")])])])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.searchForm.pageNo,"page-size":t.searchForm.pageSize,total:t.totalDelivery},on:{"update:currentPage":function(e){return t.$set(t.searchForm,"pageNo",e)},"update:current-page":function(e){return t.$set(t.searchForm,"pageNo",e)},"current-change":t.handleCurrentChangeDeliver}}),t._v(" "),a("div",{staticClass:"button-wrap",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){t.isShowUnilateralDialog=!1}}},[t._v("取消\n            ")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.crossSubmission()}}},[t._v("确定")])])],1):t._e(),t._v(" "),t.dialogVisible?a("el-dialog",{staticClass:"addDialog",attrs:{width:"800px",title:"卖"===t.activeCompanyType?"上游公司列表":"下游公司列表",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),a("div",[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],attrs:{type:"text",placeholder:"卖"===t.activeCompanyType?"请输入上游公司名称":"请输入下游公司名称"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"search1",on:{click:t.getCompany}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"dialog-table"},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("上游公司")]),t._v(" "),a("th",[t._v("地址")])])]),t._v(" "),a("tbody",t._l(t.sellCompanyList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"50px","max-width":"50px"}},[a("span",{staticClass:"el-radio__input",class:s===t.activeIndex?"is-checked":"",on:{click:function(e){return t.checked(s)}}},[a("span",{staticClass:"el-radio__inner"})])]),t._v(" "),a("td",{staticStyle:{width:"320px","max-width":"320px"}},[t._v(t._s(e.sellerCorpName))]),t._v(" "),a("td",{staticStyle:{width:"358px","max-width":"358px"}},[t._v(t._s(e.address))])])}),0)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",class:{sellConfirmation:t.sellerCheck},staticStyle:{"margin-left":"8px"},attrs:{disabled:t.sellerCheck},on:{click:function(e){return t.checkSales()}}},[t._v("选择")])])]):t._e(),t._v(" "),t.dialogVisibles?a("el-dialog",{staticClass:"addDialog",attrs:{width:"800px",title:"卖"===t.activeCompanyType?"上游公司列表":"下游公司列表",visible:t.dialogVisibles},on:{"update:visible":function(e){t.dialogVisibles=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("公司名称")]),t._v(" "),a("div",[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.companyName,expression:"companyName"}],attrs:{type:"text",placeholder:"卖"===t.activeCompanyType?"请输入上游公司名称":"请输入下游公司名称"},domProps:{value:t.companyName},on:{input:function(e){e.target.composing||(t.companyName=e.target.value)}}})]),t._v(" "),a("span",{staticClass:"search1",on:{click:t.getCompany}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"dialog-table"},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("下游公司")]),t._v(" "),a("th",[t._v("地址")])])]),t._v(" "),a("tbody",t._l(t.buyCompanyList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"50px","max-width":"50px"}},[a("span",{staticClass:"el-radio__input",class:s===t.activeIndex?"is-checked":"",on:{click:function(e){return t.checked(s)}}},[a("span",{staticClass:"el-radio__inner"})])]),t._v(" "),a("td",{staticStyle:{width:"320px","max-width":"320px"}},[t._v(t._s(e.buyerCorpName))]),t._v(" "),a("td",{staticStyle:{width:"358px","max-width":"358px"}},[t._v(t._s(e.address))])])}),0)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.dialogVisibles=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",class:{buyConfirmation:t.buyerCheck},staticStyle:{"margin-left":"8px"},attrs:{disabled:t.buyerCheck},on:{click:function(e){return t.checkSales()}}},[t._v("选择")])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("业务类型")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("业务员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("产品名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("数量")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("我方公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交易类型")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"}),this._v("合同签约日")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("上游公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("单价(含税)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"r"},[e("span",{staticStyle:{"padding-left":"20%","text-align":"right"}},[this._v("补")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交割库")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交割日期")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交割方式")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("免仓期")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("付款方式")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("发票月份")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("货源")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("质量标准")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("包装标准")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("撮合公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"}),this._v("上游合约")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("上游合同编号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("盖章合同")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("下游公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("单价(含税)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交割库")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交割日期")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("交割方式")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("免仓期")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("付款方式")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("发票月份")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("货源")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("质量标准")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("包装标准")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("撮合公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"}),this._v("下游合约")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("下游合同编号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"essential-title"},[e("span",{staticClass:"isMust"},[this._v("*")]),this._v("盖章合同")])}]};var cl=a("C7Lr")(ol,rl,!1,function(t){a("9C6k"),a("vzOQ")},"data-v-86013612",null).exports,dl={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},ul=a("C7Lr")(null,dl,!1,null,null,null).exports,pl={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"step-box box step-active",class:{active:t.isActive,double:t.doubleLength,done:t.isDone}},[a("div",{staticClass:"wrapper",class:{right:t.isRight}},[t.showLine&&!t.isRight&&1!==t.step?a("div",{staticClass:"line"}):t._e(),t._v(" "),a("div",{staticClass:"text-box"},[a("div",{staticClass:"text"},[t._v(t._s(t.step))])]),t._v(" "),t.showLine?a("div",{staticClass:"line"}):t._e()]),t._v(" "),a("div",{staticClass:"step-text-box"},[t._t("default")],2)])},staticRenderFns:[]};var vl=a("C7Lr")({name:"step-active",props:{step:"",isRight:"",isActive:"",isDone:"",doubleLength:"",showLine:{default:!1}}},pl,!1,function(t){a("dtmi")},"data-v-0fe62a61",null).exports,ml={components:{bankAcc:Ye,gyStep:vl,operationProcess:La,gyFileUpload:aa},name:"paymentAssembly",props:{orderData:Object,orderIds:Object,upstreamInfo:Object,downstreamInfo:Object},data:function(){return{applyQuantities:null,tempPrice:null,applyConfirmation:!1,isPost:!1,depositType:null,skuPriceExpression:null,isShowDs:!1,paidAmount:0,isaddFkdSubmit:!0,permiseCreate:null,paymentAmountRadio:1,id:null,purchaseOrderId:null,saleOrderId:null,paymentNwes:[],newReceiptsList:{collectionType:null,collectionAmount:null,erpBuyerPaymentFileModelList:[],skuQuantity:null,applyQuantities:null,skuPrice:null,tempPrice:null},creatPaymentForm:{appalyPaymentTime:new Date,planPayTime:new Date,sellerAccount:null,sellerDepositBank:null,payMethod:null,sellerCorpName:null,payTotal:null,tradeMode:null,handlerUserName:null,payDesc:null,approveType:null,payInfoList:[{payAmount:null,description:null}]},dialogVisible:!1,newReceiptsdialog:!1,paymentReceivables:[],collectionList:[],newBank:[],payStatus:1,isSubmit:!0,isSubmit2:!0,stepArr:[],stepArr2:[],paymentRecelice:!1,paymentGuan:!1,paymentAmount:{isFormulaPric:null,payTotal:null},receliverAmount:{},payMethodAmount:null,recMethodAmount:null,autosUpload:!1,remarks:null,payBillInfo4Multi:{}}},created:function(){},mounted:function(){this.id=this.orderIds.id},methods:{initReceiptView:function(t){this.isSubmit=!0,this.receliverAmount.payTotal=null,this.getreceliveApplicationAmount(t)},initPaymentView:function(t,e){this.isSubmit2=!0,this.remarks=null,this.paymentAmount.payTotal=null,this.getpaymentApplicationAmount(t),this.newPaymentBankAssembly(e)},handleCloseReceivables:function(){this.orderData.newReceiptsdialog=!1,this.$emit("ivoiceList"),0!==this.newReceiptsList.erpBuyerPaymentFileModelList.length&&this.$refs.upload&&this.$refs.upload.clearFiles(),this.newReceiptsList.erpBuyerPaymentFileModelList=[]},handleClosePayment:function(){this.orderData.dialogVisible=!1,this.$emit("ivoiceList")},addClick:function(){var t={payAmount:null,description:null};this.creatPaymentForm.payInfoList.push(t)},delectClick:function(t){this.creatPaymentForm.payInfoList.splice(t,1),0===this.creatPaymentForm.payInfoList.length&&(this.creatPaymentForm.payDesc=null)},newPaymentBankAssembly:function(t){var e=this;this.$http.post(this.$api.payment.newBank,{companyId:t}).then(function(t){0===t.data.code&&(e.newBank=t.data.data)})},changeBlank:function(t){0===t&&(this.$refs.bankAcc.addBank=!0,this.$refs.bankAcc.creatBank.companyId=this.upstreamInfo.sellerCompanyId,this.$refs.bankAcc.creatBank.accountName=this.upstreamInfo.sellerCompanyName);for(var e=0;e<this.newBank.length;e++)t===this.newBank[e].bankAccId&&(this.creatPaymentForm.sellerAccount=this.newBank[e].bankAccount,this.creatPaymentForm.sellerDepositBankId=this.newBank[e].bankAccId,this.creatPaymentForm.sellerDepositBank=this.newBank[e].depositBankName)},popupPaySubmission:function(t){if(null==t||void 0===t)return this.creatPaymentForm.sellerAccount=null,this.creatPaymentForm.sellerDepositBankId=null,void(this.creatPaymentForm.sellerDepositBank=null);this.creatPaymentForm.sellerDepositBank=t.depositBank,this.creatPaymentForm.sellerDepositBankId=t.id,this.creatPaymentForm.sellerAccount=t.companyAccount,this.newPaymentBankAssembly(this.orderIds.sellerCompanyId)},onCallbackSaleFileUpload:function(t){var e=this;this.newReceiptsList.erpBuyerPaymentFileModelList=[],t.forEach(function(t){e.newReceiptsList.erpBuyerPaymentFileModelList.push({fileUrl:t.fileUrl})})},paymentColl:function(){var t=this;t.$http.get(t.$api.payment.getDetailCollection+t.saleOrderId).then(function(e){0===e.data.code&&(t.collectionList=e.data.data)})},createReceiptsSingle:function(){var t=this;if(!this.receliverAmount.isFormulaPrice){var e=Number(this.$tools.formatNumber(this.receliverAmount.needCollectionAmount,2));if(0===e)return void this.$message({message:"已无待收金额，无需提交",type:"error"});if(e<0)return void this.$message({message:"数据错误，待收金额为负数",type:"error"})}if(null!==this.recMethodAmount){if(this.receliverAmount.isFormulaPrice&&1===Number(this.recMethodAmount)){if(Number(this.receliverAmount.leftReceiptQuantity)<=0)return void this.$message.error("申请收款数量已超出合同数量，不可再收款");if(!this.newReceiptsList.applyQuantities||this.newReceiptsList.applyQuantities<=0)return void this.$message({message:"收款数量不能为空且不能小于等于0",type:"error"});if(Number(this.newReceiptsList.applyQuantities)>Number(this.receliverAmount.leftReceiptQuantity))return void this.$message({message:"申请收款数量不能大于剩余可收款总数量",type:"error"});if(this.newReceiptsList.tempPrice&&this.newReceiptsList.tempPrice<=0)return void this.$message({message:"暂定价不能小于等于0",type:"error"})}""!==this.receliverAmount.payTotal&&void 0!==this.receliverAmount.payTotal?this.receliverAmount.payTotal<=0?this.$message({message:"请输入大于零的收款金额",type:"error"}):("1"===this.recMethodAmount?this.newReceiptsList.collectionType=1:"2"===this.recMethodAmount?this.newReceiptsList.collectionType=2:"5"===this.recMethodAmount&&(this.newReceiptsList.collectionType=5),this.newReceiptsList.collectionAmount=this.receliverAmount.payTotal,this.newReceiptsList.orderId=this.orderIds.saleOrderId,this.newReceiptsList.contractId=this.orderIds.id,this.$http.post(this.$api.order.createReceipts,this.newReceiptsList).then(function(e){if(0===e.data.code){t.paymentGuan=!0,t.$message({message:e.data.message,type:"success"}),t.$emit("ivoiceList"),t.$refs.sFileUpload&&t.$refs.sFileUpload.endUpload();var a={targetId:e.data.data,targetType:5};t.isSubmit=!1,t.$http.post(t.$api.contract.approve1History,a).then(function(e){0===e.data.code&&(t.stepArr=e.data.data,t.stepArr.forEach(function(t,e){t.step=e}))})}else t.$message({message:e.data.message,type:"error"})})):this.$message({message:"请输入本次收款金额",type:"error"})}else this.$message({message:"请选择收款类型",type:"error"})},billOfPayment:function(){if(null!==this.creatPaymentForm.appalyPaymentTime)if(null!==this.creatPaymentForm.planPayTime)if(null!==this.creatPaymentForm.sellerDepositBank&&""!==this.creatPaymentForm.sellerDepositBank)if(null!==this.creatPaymentForm.sellerAccount&&""!==this.creatPaymentForm.sellerAccount)if(null!==this.creatPaymentForm.tradeMode){if(this.paymentAmount.isFormulaPrice&&1===Number(this.payMethodAmount)){if(Number(this.paymentAmount.leftPayQuantities)<=0)return void this.$message.error("申请付款数量已超出合同数量，不可再申请付款");if(!this.applyQuantities||this.applyQuantities<=0)return void this.$message({message:"申请付款数量不能为空且不能小于等于0",type:"error"});if(this.tempPrice&&this.tempPrice<=0)return void this.$message({message:"暂定价不能小于等于0",type:"error"})}if(null!==this.payMethodAmount&&0!==this.payMethodAmount)if(null!==this.creatPaymentForm.payDesc)if(null!==this.paymentAmount.payTotal&&""!==this.paymentAmount.payTotal&&void 0!==this.paymentAmount.payTotal)if(this.paymentAmount.payTotal<=0)this.$message({message:"请输入大于零申请金额",type:"error"});else if(0!==this.paymentAmount.payTotal&&"0"!==this.paymentAmount.payTotal)if(3!==Number(this.creatPaymentForm.payDesc)||null!=this.creatPaymentForm.approveType){if(this.paymentAmount.isFormulaPrice||"1"!==this.payMethodAmount&&1!==this.payMethodAmount)"2"===this.payMethodAmount||2===this.payMethodAmount?this.payMethodAmount=2:"5"!==this.payMethodAmount&&5!==this.payMethodAmount||(this.payMethodAmount=5);else{this.payMethodAmount=1;if(this.orderIds.buyTotal-this.paymentAmount.leftAmount+Number(this.paymentAmount.payTotal)>=1.05*this.orderIds.buyTotal)return void this.$message({message:"抱歉，申请金额核算已超出合同金额的5%，无法提交申请",type:"warning"})}if("25"===this.creatPaymentForm.tradeMode&&(this.creatPaymentForm.tradeMode=25),"22"===this.creatPaymentForm.tradeMode&&(this.creatPaymentForm.tradeMode=22),"1"===this.creatPaymentForm.payDesc?this.creatPaymentForm.payDesc=1:"2"===this.creatPaymentForm.payDesc&&(this.creatPaymentForm.payDesc=2),this.paymentAmount.isFormulaPrice&&this.applyQuantities>Number(this.paymentAmount.leftPayQuantities))return this.orderData.dialogVisible=!1,void(this.applyConfirmation=!0);this.commonPost()}else this.$message({message:"分批付款时请选择审批类型",type:"error"});else this.$message({message:"申请金额不能为0",type:"error"});else this.$message({message:"请输入申请金额",type:"error"});else this.$message({message:"付款说明为必选项",type:"error"});else this.$message({message:"请选择用途",type:"error"})}else this.$message({message:"请选择付款方式",type:"error"});else this.$message({message:"请输入收款银行账号",type:"error"});else this.$message({message:"请输入收款开户行",type:"error"});else this.$message({message:"请选择计划付款日期",type:"error"});else this.$message({message:"请选择申请日期",type:"error"})},commonPost:function(){var t=this;this.creatPaymentForm.payMethod=this.payMethodAmount,this.creatPaymentForm.payTotal=this.paymentAmount.payTotal,this.creatPaymentForm.contEssId=this.orderIds.id,this.creatPaymentForm.purchaseOrderId=this.orderIds.purchaseOrderId,this.creatPaymentForm.saleOrderId=this.orderIds.saleOrderId,this.creatPaymentForm.sellerCorpName=this.orderIds.sellerCompanyName,this.creatPaymentForm.sellerCorpId=this.orderIds.sellerCompanyId,this.creatPaymentForm.buyerCompId=this.orderIds.buyerCompanyId,this.creatPaymentForm.buyerCorpName=this.orderIds.buyerCompanyName,this.creatPaymentForm.orderType=3,this.creatPaymentForm.approveStatus=3,this.isPost&&(this.applyConfirmation=!1),this.creatPaymentForm.applyQuantities=this.applyQuantities,this.creatPaymentForm.tempPrice=this.tempPrice,this.$http.post(this.$api.order.newPayment,this.creatPaymentForm).then(function(e){if(0===e.data.code){t.$message({message:e.data.message,type:"success"}),t.paymentRecelice=!0,t.$emit("ivoiceList");var a={targetId:e.data.data.targetId,targetType:3};t.isSubmit2=!1,t.$http.post(t.$api.contract.approve1History,a).then(function(e){0===e.data.code&&(t.stepArr2=e.data.data,t.stepArr2.forEach(function(t,e){t.step=e}))})}else t.$message({message:e.data.message,type:"error"})})},addFkdSubmit:function(){var t=this;if(0!==this.creatPaymentForm.payInfoList.length){for(var e=0,a=0;a<this.creatPaymentForm.payInfoList.length;a++){if(e+=Number(this.creatPaymentForm.payInfoList[a].payAmount),null===this.creatPaymentForm.payInfoList[a].payAmount||void 0===this.creatPaymentForm.payInfoList[a].payAmount||""===this.creatPaymentForm.payInfoList[a].payAmount)return void this.$message({message:"请填写付款金额",type:"error"})}var s;if(s=Number(this.paymentAmount.payTotal),Number(this.paymentAmount.submitedAmount),!this.paymentAmount.submitedAmount&&(this.paymentAmount.submitedAmount=0),this.paymentAmount.submitedAmount+e>s)this.$message({message:"分批付款总额不能大于申请金额",type:"error"});else{var i={contEssId:this.orderIds.id,purchaseOrderId:this.orderIds.purchaseOrderId,paymentId:this.payBillInfo4Multi.id,payInfoList:this.creatPaymentForm.payInfoList};this.$http.post(this.$api.payment.saveErpPaymentInfo,i).then(function(e){if(0===e.data.code){t.$message({message:e.data.message,type:"success"}),t.paymentRecelice=!0,t.isSubmit2=!1,t.isaddFkdSubmit=!1;var a={targetId:e.data.data.multiPayId,targetType:27};t.isSubmit2=!1,t.$http.post(t.$api.contract.approve1History,a).then(function(e){0===e.data.code&&(t.stepArr2=e.data.data,t.stepArr2.forEach(function(t,e){t.step=e}))})}else t.$message({message:e.data.message,type:"error"})})}}else this.$message({message:"请填写付款金额",type:"error"})},getpaymentApplicationAmount:function(t){var e=this;this.creatPaymentForm.sellerDepositBank=null,this.creatPaymentForm.sellerAccount=null,this.payMethodAmount=null,this.creatPaymentForm.tradeMode=null,this.paymentAmount.payTotal=null,this.creatPaymentForm.payDesc=null,this.remarks=null,this.isSubmit2=!0,this.paymentRecelice=!1,this.$http.get(this.$api.payment.paymentApplicationAmount+"/"+t).then(function(t){if(0===t.data.code){if(e.paymentAmount=t.data.data,e.paidAmount=0,e.paymentAmount.paymentModelDtos&&e.paymentAmount.paymentModelDtos.list&&e.paymentAmount.paymentModelDtos.list.length>0){var a=e.paymentAmount.paymentModelDtos.list[0];e.creatPaymentForm.sellerDepositBank=a.sellerDepositBank,e.paidAmount=a.paidAmount,e.creatPaymentForm.sellerAccount=a.sellerAccount,e.creatPaymentForm.tradeMode=a.tradeMode,e.creatPaymentForm.payDesc=a.payDesc,e.creatPaymentForm.approveType=a.approveType,e.payMethodAmount=a.payMethod}if(1===e.paymentAmount.depositStatus?e.payMethodAmount="2":1===e.paymentAmount.appendDepositStatus?e.payMethodAmount="5":1===e.paymentAmount.goodPaymentStatus&&(e.payMethodAmount="1"),e.applyQuantities=e.paymentAmount.leftPayQuantities,e.tempPrice=e.paymentAmount.formulaTempPrice,0===e.paymentAmount.leftAmount&&(e.paymentAmount.payTotal=0),e.paymentAmount.leftAmount&&(e.paymentAmount.payTotal=Number(e.paymentAmount.leftAmount)),e.permiseCreate=e.paymentAmount.permiseCreate,2===e.permiseCreate){e.isShowDs=!0;var s=e.paymentAmount.paymentModelDtos;if(s){var i=s.list;i&&i.length>0&&(e.payBillInfo4Multi=i[0])}e.isaddFkdSubmit=!0,e.creatPaymentForm.payInfoList=[{payAmount:null,description:null}]}else 1===e.permiseCreate?(e.isShowDs=!1,e.creatPaymentForm.sellerAccount=null,e.creatPaymentForm.sellerDepositBank=null,e.creatPaymentForm.payDesc=null,e.creatPaymentForm.tradeMode=null,e.creatPaymentForm.approveType=null):3!==e.permiseCreate&&4!==e.permiseCreate||(e.isShowDs=!0)}else e.$message({message:t.data.message,type:"error"})})},getreceliveApplicationAmount:function(t){var e=this;this.recMethodAmount=null,this.receliverAmount.payTotal=null,this.isSubmit=!0,this.paymentGuan=!1,this.$refs.sFileUpload&&this.$refs.sFileUpload.init(),this.$http.get(this.$api.invoice.createCollectView+"/"+t).then(function(t){0===t.data.code?(e.receliverAmount=t.data.data,1===e.receliverAmount.depositStatus?e.recMethodAmount="2":1===e.receliverAmount.goodPaymentStatus?e.recMethodAmount="1":1===e.receliverAmount.appendDepositStatus&&(e.recMethodAmount="5"),e.newReceiptsList.applyQuantities=e.receliverAmount.leftReceiptQuantity,e.newReceiptsList.tempPrice=e.receliverAmount.formulaTempPrice,e.receliverAmount.needCollectionAmount&&(e.receliverAmount.payTotal=Number(e.receliverAmount.needCollectionAmount))):e.$message({message:t.data.message,type:"error"})})}},watch:{payMethodAmount:function(t,e){"1"===t&&this.paymentAmount.leftAmount&&(this.paymentAmount.payTotal=this.$tools.toFixedFn(Number(this.paymentAmount.leftAmount),2)),"5"===t&&(this.paymentAmount.payTotal=this.$tools.toFixedFn(this.paymentAmount.appendDepositAmount,2))},applyQuantities:function(t,e){null!=t&&void 0!==t&&1===this.permiseCreate&&this.paymentAmount.isFormulaPrice&&"1"===this.payMethodAmount&&this.tempPrice&&(this.paymentAmount.payTotal=this.$tools.toFixedFn(Number(t)*Number(this.tempPrice)-Number(this.paymentAmount.paymentValidDeposit),2))},tempPrice:function(t,e){t&&0!==Number(t)&&this.paymentAmount.isFormulaPrice&&"1"===this.payMethodAmount&&1===this.permiseCreate&&this.applyQuantities&&(this.paymentAmount.payTotal=this.$tools.toFixedFn(Number(this.applyQuantities)*Number(t)-Number(this.paymentAmount.paymentValidDeposit),2))},"creatPaymentForm.payDesc":function(t,e){this.creatPaymentForm.approveType=3===Number(t)?1:null},"newReceiptsList.applyQuantities":function(t,e){null!=t&&void 0!==t&&this.receliverAmount.isFormulaPrice&&"1"===this.recMethodAmount&&this.newReceiptsList.tempPrice&&(this.receliverAmount.payTotal=this.$tools.toFixedFn(Number(this.newReceiptsList.tempPrice)*Number(t)-Number(this.receliverAmount.collectionValidDeposit),2))},"newReceiptsList.tempPrice":function(t,e){t&&0!==Number(t)&&this.receliverAmount.isFormulaPrice&&"1"===this.recMethodAmount&&this.newReceiptsList.applyQuantities&&(this.receliverAmount.payTotal=this.$tools.toFixedFn(Number(this.newReceiptsList.applyQuantities)*Number(t)-Number(this.receliverAmount.collectionValidDeposit),2))},recMethodAmount:function(t,e){"1"===t&&this.receliverAmount.needCollectionAmount&&(this.receliverAmount.payTotal=this.$tools.toFixedFn(this.receliverAmount.needCollectionAmount,2)),"5"===t&&(this.receliverAmount.payTotal=this.$tools.toFixedFn(this.receliverAmount.appendDepositAmount,2))},remarks:function(t,e){t&&t.length>2500?this.$message({message:"付款备注最多可填写2500字",type:"warning"}):this.remarks&&(this.creatPaymentForm.remarks=this.remarks.substr(0,2500))}}},hl={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paymentDetails"},[a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px","close-on-click-modal":!1,"before-close":t.handleCloseReceivables,visible:t.orderData.newReceiptsdialog},on:{"update:visible":function(e){return t.$set(t.orderData,"newReceiptsdialog",e)}}},[a("div",{staticClass:"order-apply"},[a("div",{staticClass:"title"},[t._v("新建收款")])]),t._v(" "),a("div",{staticClass:"block clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("下游公司")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.downstreamInfo.buyerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("产品名称")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.orderIds.prodName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("付款方式")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t._f("paymentType")(t.downstreamInfo.paymentType,t.downstreamInfo.payChannel)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("合同金额(元)")]),t._v(" "),t.receliverAmount.isFormulaPrice?a("span",{staticClass:"left-align red"},[t._v("公式计价")]):a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToCash")(t.orderIds.saleTotal)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("收款类型")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.recMethodAmount,expression:"recMethodAmount"}],attrs:{type:"radio",name:"ddd",disabled:2===t.receliverAmount.goodPaymentStatus,value:"1"},domProps:{checked:t._q(t.recMethodAmount,"1")},on:{change:function(e){t.recMethodAmount="1"}}}),t._v("货款\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.recMethodAmount,expression:"recMethodAmount"}],attrs:{type:"radio",name:"ddd",disabled:2===t.receliverAmount.depositStatus,value:"2"},domProps:{checked:t._q(t.recMethodAmount,"2")},on:{change:function(e){t.recMethodAmount="2"}}}),t._v("保证金\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.recMethodAmount,expression:"recMethodAmount"}],attrs:{type:"radio",name:"ddd",disabled:2===t.receliverAmount.appendDepositStatus,value:"5"},domProps:{checked:t._q(t.recMethodAmount,"5")},on:{change:function(e){t.recMethodAmount="5"}}}),t._v("追加保证金\n            ")]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("待收金额(元)")]),t._v(" "),t.receliverAmount.isFormulaPrice?a("span",{staticClass:"left-align"},[t._v("--")]):a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToCash")(t.receliverAmount.needCollectionAmount)))])]),t._v(" "),t.receliverAmount.isFormulaPrice&&1==t.recMethodAmount?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("合同数量(吨)")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToQuantity")(t.downstreamInfo.skuQuantity)))])]):t._e(),t._v(" "),t.receliverAmount.isFormulaPrice&&1==t.recMethodAmount?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("收款数量(吨)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newReceiptsList.applyQuantities,expression:"newReceiptsList.applyQuantities"}],staticClass:"gy-input",attrs:{type:"number",placeholder:"请输入收款数量"},domProps:{value:t.newReceiptsList.applyQuantities},on:{input:function(e){e.target.composing||t.$set(t.newReceiptsList,"applyQuantities",e.target.value)}}})]):t._e(),t._v(" "),t.receliverAmount.isFormulaPrice&&1==t.recMethodAmount?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("暂定价(元/吨)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newReceiptsList.tempPrice,expression:"newReceiptsList.tempPrice"}],staticClass:"gy-input",attrs:{readonly:22==t.downstreamInfo.skuPriceType,type:"text",placeholder:"请输入暂定价"},domProps:{value:t.newReceiptsList.tempPrice},on:{input:function(e){e.target.composing||t.$set(t.newReceiptsList,"tempPrice",e.target.value)}}})]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("本次收款金额(元)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.receliverAmount.payTotal,expression:"receliverAmount.payTotal"}],attrs:{type:"text",disabled:2===t.recMethodAmount},domProps:{value:t.receliverAmount.payTotal},on:{input:function(e){e.target.composing||t.$set(t.receliverAmount,"payTotal",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("下游付款凭证")]),t._v(" "),a("gy-file-upload",{ref:"sFileUpload",on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1)]),t._v(" "),t.isSubmit?t._e():a("div",[a("operation-process",{attrs:{elStepList:t.stepArr}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px","text-align":"right","padding-bottom":"30px","padding-right":"30px"}},[t.paymentGuan?t._e():a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){return t.handleCloseReceivables()}}},[t._v("取消")]),t._v(" "),t.paymentGuan?a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){return t.handleCloseReceivables()}}},[t._v("关闭")]):t._e(),t._v(" "),t.isSubmit?a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.createReceiptsSingle()}}},[t._v("提交")]):t._e()])]),t._v(" "),a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px","before-close":t.handleClosePayment,"close-on-click-modal":!1,visible:t.orderData.dialogVisible},on:{"update:visible":function(e){return t.$set(t.orderData,"dialogVisible",e)}}},[a("div",{staticClass:"order-apply"},[a("div",{staticClass:"title"},[t._v("新建付款")])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("产品名称")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.orderIds.prodName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("申请日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d input-date"},[a("el-date-picker",{attrs:{type:"date",disabled:t.isShowDs,"value-format":"timestamp",placeholder:"申请日期"},model:{value:t.creatPaymentForm.appalyPaymentTime,callback:function(e){t.$set(t.creatPaymentForm,"appalyPaymentTime",e)},expression:"creatPaymentForm.appalyPaymentTime"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("付款单位")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.upstreamInfo.buyerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("计划付款日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d input-date"},[a("el-date-picker",{attrs:{type:"date",disabled:t.isShowDs,"value-format":"timestamp",placeholder:"计划付款日期"},model:{value:t.creatPaymentForm.planPayTime,callback:function(e){t.$set(t.creatPaymentForm,"planPayTime",e)},expression:"creatPaymentForm.planPayTime"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("收款单位")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.upstreamInfo.sellerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("收款开户行")]),t._v(" "),a("el-select",{staticClass:"input-date",attrs:{disabled:t.isShowDs,placeholder:"请选择收款银行账户"},on:{change:t.changeBlank},model:{value:t.creatPaymentForm.sellerDepositBank,callback:function(e){t.$set(t.creatPaymentForm,"sellerDepositBank",e)},expression:"creatPaymentForm.sellerDepositBank"}},t._l(t.newBank,function(t){return a("el-option",{key:t.bankAccId,attrs:{label:t.depositBankName,value:t.bankAccId}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("合同金额(元)")]),t._v(" "),t.paymentAmount.isFormulaPrice?a("span",{staticClass:"left-align red"},[t._v("公式计价")]):a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToCash")(t.orderIds.buyTotal)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("收款银行账号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.sellerAccount,expression:"creatPaymentForm.sellerAccount"}],attrs:{type:"text",disabled:t.isShowDs,readonly:""},domProps:{value:t.creatPaymentForm.sellerAccount},on:{input:function(e){e.target.composing||t.$set(t.creatPaymentForm,"sellerAccount",e.target.value)}}})]),t._v(" "),t.paymentAmount.isFormulaPrice?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("合同数量(吨)")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.upstreamInfo.skuQuantity))])]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("付款方式")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.tradeMode,expression:"creatPaymentForm.tradeMode"}],attrs:{type:"radio",disabled:t.isShowDs,value:"22"},domProps:{checked:t._q(t.creatPaymentForm.tradeMode,"22")},on:{change:function(e){return t.$set(t.creatPaymentForm,"tradeMode","22")}}}),t._v("银行电汇\n            "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.tradeMode,expression:"creatPaymentForm.tradeMode"}],attrs:{type:"radio",disabled:t.isShowDs,value:"26"},domProps:{checked:t._q(t.creatPaymentForm.tradeMode,"26")},on:{change:function(e){return t.$set(t.creatPaymentForm,"tradeMode","26")}}}),t._v("承兑汇票\n        ")]),t._v(" "),t.paymentAmount.isFormulaPrice&&1==t.payMethodAmount?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("申请付款数量(吨)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyQuantities,expression:"applyQuantities"}],staticClass:"gy-input",attrs:{disabled:t.isShowDs,type:"number",min:"0",placeholder:"请输入申请付款数量"},domProps:{value:t.applyQuantities},on:{input:function(e){e.target.composing||(t.applyQuantities=e.target.value)}}})]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("用途")]),t._v(" "),a("div",{staticStyle:{display:"inline-block"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.payMethodAmount,expression:"payMethodAmount"}],attrs:{type:"radio",value:"1",name:"ttt",disabled:2===t.paymentAmount.goodPaymentStatus||t.isShowDs},domProps:{checked:t._q(t.payMethodAmount,"1")},on:{change:function(e){t.payMethodAmount="1"}}}),t._v("货款\n            ")]),t._v(" "),null!==t.upstreamInfo.depositAmount||""!==t.upstreamInfo.depositAmount?a("div",{staticStyle:{display:"inline-block"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.payMethodAmount,expression:"payMethodAmount"}],attrs:{type:"radio",value:"2",name:"ttt",disabled:2===t.paymentAmount.depositStatus||t.isShowDs},domProps:{checked:t._q(t.payMethodAmount,"2")},on:{change:function(e){t.payMethodAmount="2"}}}),t._v("保证金\n            ")]):t._e(),t._v(" "),null!==t.upstreamInfo.depositAmount||""!==t.upstreamInfo.depositAmount?a("div",{staticStyle:{display:"inline-block"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.payMethodAmount,expression:"payMethodAmount"}],attrs:{type:"radio",value:"5",name:"ttt",disabled:2===t.paymentAmount.appendDepositStatus||t.isShowDs},domProps:{checked:t._q(t.payMethodAmount,"5")},on:{change:function(e){t.payMethodAmount="5"}}}),t._v("追加保证金\n            ")]):t._e()]),t._v(" "),t.paymentAmount.isFormulaPrice&&1==t.payMethodAmount?a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l spanLeft"},[t._v("暂定价(元/吨)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempPrice,expression:"tempPrice"}],staticClass:"gy-input",attrs:{readonly:22==t.upstreamInfo.skuPriceType,disabled:t.isShowDs,type:"number",placeholder:"请输入暂定价"},domProps:{value:t.tempPrice},on:{input:function(e){e.target.composing||(t.tempPrice=e.target.value)}}})]):t._e(),t._v(" "),2===t.permiseCreate?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("已提交金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.paymentAmount.submitedAmount)))])]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group",class:{cl:2===t.permiseCreate},staticStyle:{float:"right",height:"90px"}},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("付款说明")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.payDesc,expression:"creatPaymentForm.payDesc"}],attrs:{type:"radio",disabled:t.isShowDs,value:"1"},domProps:{checked:t._q(t.creatPaymentForm.payDesc,"1")},on:{change:function(e){return t.$set(t.creatPaymentForm,"payDesc","1")}}}),t._v("本笔资金支出为正常交割，我司需垫资 "),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.payDesc,expression:"creatPaymentForm.payDesc"}],attrs:{type:"radio",disabled:t.isShowDs,value:"2"},domProps:{checked:t._q(t.creatPaymentForm.payDesc,"2")},on:{change:function(e){return t.$set(t.creatPaymentForm,"payDesc","2")}}}),t._v("本笔资金支出需先收到下家款项，我司无需垫资 "),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.payDesc,expression:"creatPaymentForm.payDesc"}],attrs:{type:"radio",disabled:t.isShowDs,value:"3"},domProps:{checked:t._q(t.creatPaymentForm.payDesc,"3")},on:{change:function(e){return t.$set(t.creatPaymentForm,"payDesc","3")}}}),t._v("分批付款，以付款明细表为准\n        ")]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("申请金额(元)")]),t._v(" "),"2"===t.payMethodAmount?a("span",[t._v(t._s(t.paymentAmount.payTotal))]):a("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentAmount.payTotal,expression:"paymentAmount.payTotal"}],attrs:{type:"text","aria-disabled":1===t.paymentAmount.depositStatus,disabled:t.isShowDs,placeholder:"请输入申请金额"},domProps:{value:t.paymentAmount.payTotal},on:{input:function(e){e.target.composing||t.$set(t.paymentAmount,"payTotal",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{height:"auto"}},[a("span",{staticClass:"l spanLeft"},[t._v("备注")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticStyle:{width:"406px"},attrs:{cols:"40",rows:"4",disabled:t.isShowDs},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})]),t._v(" "),"3"===t.creatPaymentForm.payDesc||3===t.creatPaymentForm.payDesc?a("div",{staticClass:"gy-form-group",class:{cl:2===t.permiseCreate}},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("审批类型")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.approveType,expression:"creatPaymentForm.approveType"}],attrs:{type:"radio",value:"1",disabled:t.isShowDs},domProps:{checked:t._q(t.creatPaymentForm.approveType,"1")},on:{change:function(e){return t.$set(t.creatPaymentForm,"approveType","1")}}}),t._v("一次审批\n            "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.creatPaymentForm.approveType,expression:"creatPaymentForm.approveType"}],attrs:{type:"radio",value:"2",disabled:t.isShowDs},domProps:{checked:t._q(t.creatPaymentForm.approveType,"2")},on:{change:function(e){return t.$set(t.creatPaymentForm,"approveType","2")}}}),t._v("批次审批\n        ")]):t._e(),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),3===t.permiseCreate?a("p",{staticClass:"wxtip"},[a("span",{staticClass:"l"},[t._v("温馨提示：")]),t._v("付款审批中, 请在审批完成后再提交付款。")]):t._e(),t._v(" "),4===t.permiseCreate?a("p",{staticClass:"wxtip"},[a("span",{staticClass:"l"},[t._v("温馨提示：")]),t._v("已提交付款, 请等待财务付款。")]):t._e(),t._v(" "),2===t.permiseCreate?a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("付款金额(元)")]),t._v(" "),a("th",[t._v("备注")]),t._v(" "),a("th",[t._v("操作")])])]),t._v(" "),a("tbody",t._l(t.creatPaymentForm.payInfoList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.payAmount,expression:"item.payAmount"}],attrs:{type:"text",placeholder:"请输入付款金额"},domProps:{value:e.payAmount},on:{input:function(a){a.target.composing||t.$set(e,"payAmount",a.target.value)}}})]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"item.description"}],attrs:{type:"text",placeholder:"请输入备注"},domProps:{value:e.description},on:{input:function(a){a.target.composing||t.$set(e,"description",a.target.value)}}})]),t._v(" "),a("td",[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.addClick()}}},[t._v("+")]),a("br"),t._v(" "),t.creatPaymentForm.payInfoList.length>1?a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.delectClick(s)}}},[t._v("-")]):t._e()])])}),0)]):t._e(),t._v(" "),t.isSubmit2?t._e():a("div",[a("operation-process",{attrs:{elStepList:t.stepArr2}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"50px","text-align":"right","padding-bottom":"30px","padding-right":"30px"}},[t.paymentRecelice?t._e():a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){t.orderData.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),t.paymentRecelice?a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){t.orderData.dialogVisible=!1}}},[t._v("关闭")]):t._e(),t._v(" "),t.isSubmit2&&1===t.permiseCreate?a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.billOfPayment()}}},[t._v("提交")]):t._e(),t._v(" "),t.isaddFkdSubmit&&2===t.permiseCreate?a("button",{staticClass:"gy-button-extra",on:{click:t.addFkdSubmit}},[t._v("提交")]):t._e(),t._v(" "),3===t.permiseCreate||4===t.permiseCreate?a("button",{staticClass:"gy-button-extra gray"},[t._v("提交")]):t._e()])]),t._v(" "),a("el-dialog",{staticClass:"applyConfirmation-wrap",attrs:{title:"申请确认","close-on-click-modal":!1,visible:t.applyConfirmation,width:"30%"},on:{"update:visible":function(e){t.applyConfirmation=e}}},[a("p",{staticClass:"title"},[t._v("申请的付款数量已超出合同约定，确认提交吗？")]),t._v(" "),a("p",[t._v("合同数量："+t._s(t._f("numToQuantity")(t.upstreamInfo.skuQuantity))+"吨")]),t._v(" "),a("p",[t._v("已申请数量："+t._s(t._f("numToQuantity")(t.upstreamInfo.skuQuantity-t.paymentAmount.leftPayQuantities))+"吨")]),t._v(" "),a("p",[t._v("本次申请数量："+t._s(t._f("numToQuantity")(t.applyQuantities))+"吨")]),t._v(" "),a("p",[t._v("暂定价："+t._s(t._f("numToCash")(t.tempPrice,!0))+"元")]),t._v(" "),a("p",[t._v("申请付款金额："),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t._f("numToCash")(t.paymentAmount.payTotal)))]),t._v("元")]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){t.applyConfirmation=!1,this.orderData.dialogVisible=!0}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.commonPost(t.isPost=!0)}}},[t._v("提交")])])]),t._v(" "),a("bank-acc",{ref:"bankAcc",on:{onSaveAccInfo:t.popupPaySubmission}})],1)},staticRenderFns:[]};var yl=a("C7Lr")(ml,hl,!1,function(t){a("O/NC"),a("QlMj")},"data-v-3c72e7d6",null).exports,fl=a("zsLt"),_l=a.n(fl),gl=a("IHPB"),Cl=a.n(gl),bl={name:"deliveryAssembly",props:{orderData:Object,orderIds:Object},data:function(){return{isFormulaPrice:!1,orderMessage:{},createSellDelive:{deliveryQuantity:null,deliveryDate:null,warehouseName:null,acrossDelivery:0,erpDeliveryFileModelList:[],erpFileContractModelList:[],erpGoodFileModelList:[]},certificateOfSaleVoucherList:{erpDeliveryFileModelList:[],erpFileContractModelList:[],erpGoodFileModelList:[]},crossPurchaseContract:!1,purchaseContractObj:{pageNo:1,pageSize:10},purchaseContractList:[],crossSubmissionList:[],totalDelivery:null,newDateDeliveryAssembly:"",deliverAssembleVisible:!1,deliverContractAssembleVisible:!1,deliveryContractList:[],erpGoodFileModelList:[],befGoodFileModelList:[],deliveryAcxOrderid:[],erpDeliveryHistoryModelList:[],deliveryPure:!1,deliverySell:!1,collectionList:[],createBuyDelive:{deliveryDate:null,erpDeliveryFileModelList:[]},warehouseList:[],surplusQuantity4Across:null}},mounted:function(){this.newDateDeliveryAssembly=new Date,this.createBuyDelive.deliveryDate=Date.parse(this.newDateDeliveryAssembly),this.createSellDelive.deliveryDate=Date.parse(this.newDateDeliveryAssembly)},methods:{initBuyDeliveryView:function(t){this.deliveryPure=!1,this.salesDeliveryDetail(t)},initSaleDeliveryView:function(t,e){this.deliverySell=!1,this.createSellDelive.warehouseName=null,this.orderMessage.overdueReason=null,this.createSellDelive.acrossDelivery=null,this.crossSubmissionList=[],this.deliveryAcxOrderid=[],this.onAcrossDelivery(!1),this.salesDeliveryDetail(t),this.paymentColl(),this.replacementWarehouse(e)},salesDeliveryDetail:function(t){var e=this;e.erpGoodFileModelList=[],e.befGoodFileModelList=[],e.$http.get(e.$api.delivery.createDeliveryView+"/"+t).then(function(t){0===t.data.code&&(e.orderMessage=t.data.data,e.orderMessage.surplusQuantitys=e.orderMessage.surplusQuantity,e.orderMessage.surplusQuantityTwos=e.orderMessage.surplusQuantityTwo,e.orderMessage.erpGoodFileModelList&&e.orderMessage.erpGoodFileModelList.forEach(function(t){e.erpGoodFileModelList.push(t.fileUrl),e.befGoodFileModelList.push(t.fileUrl)}))})},replacementWarehouse:function(t){var e=this,a={};a.productId=t,this.$http.post(this.$api.delivery.getWarehouseList,a).then(function(t){e.warehouseList=t.data.data.warehouseList})},handleClosePurchanseDelivery:function(){this.orderData.purchaseDeliverydialog=!1,this.$emit("ivoiceList")},handleCloseSaleDelivery:function(){this.orderData.newSaledialog=!1,this.$emit("ivoiceList")},crossHandleCheckChange:function(t){if(this.deliveryAcxOrderid.includes(t.deliveryItemId))return this.deliveryAcxOrderid=this.deliveryAcxOrderid.filter(function(e){return e!==t.deliveryItemId}),void(this.crossSubmissionList=this.crossSubmissionList.filter(function(e){return e.deliveryItemId!==t.deliveryItemId}));var e=0;this.crossSubmissionList.map(function(t){e+=1*t.supAcrossRelQuantity}),this.deliveryAcxOrderid.length>0&&1*this.orderMessage.surplusQuantityTwo<e?this.$message.error("该合同可关联数量已满足本次销售交割数量"):(this.crossSubmissionList.push(t),this.deliveryAcxOrderid.push(t.deliveryItemId))},crossSubmission:function(){var t=[],e=[],a=[],s=[];this.crossSubmissionList.map(function(i){t=[].concat(Cl()(t),Cl()(i.deliveryFileList)),e=[].concat(Cl()(e),Cl()(i.contractFileList)),a.push(i.contractCode),s.push(i.contractEssenceId)}),this.erpGoodFileModelList=[].concat(Cl()(new _l.a(t))),this.deliveryContractList=[].concat(Cl()(new _l.a(e)));var i=[],n=null;this.createSellDelive.acrossOdrList=this.crossSubmissionList.map(function(t){i.push({itemIndex:t.itemIndex,acrossContractNo:t.contractCode,acrossOrderId:t.contractOrderId,acrossDvlyItemId:t.deliveryItemId,supAcrossRelQuantity:t.supAcrossRelQuantity}),n+=1*t.supAcrossRelQuantity}),this.createSellDelive.acrossContractNo=a.join(", "),this.createSellDelive.acrossContractIds=s.join(", "),this.createSellDelive.acrossOdrList=i,this.surplusQuantity4Across=n,this.crossPurchaseContract=!1},openSeachContractDialog:function(){this.crossPurchaseContract=!0,this.onSeachContractList()},onSeachContractList:function(){var t=this;this.purchaseContractObj.orderId=this.orderIds.purchaseOrderId,this.purchaseContractObj.createdCorpId=this.orderIds.createdCorpId,this.purchaseContractObj.productId=this.orderIds.productId,this.$http.post(this.$api.delivery.crossContracts,this.purchaseContractObj).then(function(e){0===e.data.code&&(t.totalDelivery=e.data.data.total,e.data.data.rows?t.purchaseContractList=e.data.data.rows:t.purchaseContractList=[])})},handleCurrentChangeDeliver:function(t){this.purchaseContractObj.pageNo=t,this.onSeachContractList()},paymentColl:function(){var t=this;this.$http.get(this.$api.payment.getDetailCollection+this.orderIds.saleOrderId).then(function(e){0===e.data.code&&(t.collectionList=e.data.data,21!==Number(t.collectionList.skuPriceType)&&22!==Number(t.collectionList.skuPriceType)||(t.isFormulaPrice=!0))})},createBuyDelivery:function(){var t=this;0!==this.orderMessage.surplusQuantityTwos?this.orderMessage.surplusQuantityTwos<0?this.$message.error("待交割数量数据错误，请联系运营"):""!==this.orderMessage.deliveryWarehouseName?""!==this.orderMessage.deliveryDetailedAddress?null!==this.createBuyDelive.deliveryDate?null!==this.orderMessage.surplusQuantityTwo&&""!==this.orderMessage.surplusQuantityTwo?this.orderMessage.surplusQuantityTwo>this.orderMessage.surplusQuantityTwos?this.$message.error("输入的交割数量已超过待交割数量"):this.orderMessage.surplusQuantityTwo<=0?this.$message.error("交割数量应大于0"):(this.createBuyDelive.deliveryWarehouseName=this.orderMessage.deliveryWarehouseName,this.createBuyDelive.deliveryDetailedAddress=this.orderMessage.deliveryDetailedAddress,this.createBuyDelive.deliveryQuantity=this.orderMessage.surplusQuantityTwo,this.createBuyDelive.orderId=this.orderIds.purchaseOrderId,this.createBuyDelive.contractEssenceId=this.orderIds.id,this.createBuyDelive.freeWarehouseDate=this.orderMessage.freeWarehouseDate,this.$http.post(this.$api.delivery.createBuyDelivery,this.createBuyDelive).then(function(e){0===e.data.code?(t.deliveryPure=!0,t.$message.success(e.data.message),t.salesViewHistory(e.data.data.targetId,7),t.$emit("ivoiceList")):t.$message.error(e.data.message)})):this.$message.error("请填本次交割数量"):this.$message.error("请选择交割日"):this.$message.error("请输入交割地址"):this.$message.error("请输入交割库"):this.$message.error("待交割数量为0，不能再发起交割申请")},createSellDelivery:function(){var t=this;if(0!==this.orderMessage.surplusQuantityTwos)if(this.orderMessage.surplusQuantityTwos<0)this.$message.error("待交割数量数据错误，请联系运营");else if(""!==this.orderMessage.deliveryWarehouseName)if("1"!==this.createSellDelive.acrossDelivery||this.createSellDelive.acrossContractNo)if(""!==this.orderMessage.deliveryDetailedAddress)if(null!==this.createSellDelive.deliveryDate)if(null!==this.orderMessage.surplusQuantityTwo&&""!==this.orderMessage.surplusQuantityTwo)if(this.orderMessage.surplusQuantityTwo>this.orderMessage.surplusQuantityTwos)this.$message.error("输入的交割数量已超过待交割数量");else if(this.orderMessage.surplusQuantityTwo<=0)this.$message.error("交割数量应大于0");else{if("1"===this.createSellDelive.acrossDelivery)if(Number(this.orderMessage.surplusQuantityTwo)>this.surplusQuantity4Across)return void this.$message.error("本次交割数量应小于或等于可关联数量");this.createSellDelive.deliveryQuantity=this.orderMessage.surplusQuantityTwo,this.createSellDelive.deliveryDetailedAddress=this.orderMessage.deliveryDetailedAddress,this.createSellDelive.deliveryWarehouseName=this.orderMessage.deliveryWarehouseName,this.createSellDelive.freeWarehouseDate=this.orderMessage.freeWarehouseDate,this.createSellDelive.overdueReasonType=this.orderMessage.overdueReasonType,this.createSellDelive.overdueReason=this.orderMessage.overdueReason,this.createSellDelive.orderId=this.orderIds.saleOrderId,this.createSellDelive.contractEssenceId=this.orderIds.id,this.$http.post(this.$api.delivery.createSellDelivery,this.createSellDelive).then(function(e){0===e.data.code?(t.deliverySell=!0,t.$message.success(e.data.message),t.salesViewHistory(e.data.data.targetId,8),t.$emit("ivoiceList")):t.$message.error(e.data.message)})}else this.$message.error("请输入本次交割数量");else this.$message.error("请选择交割日");else this.$message.error("请输入交割地址");else this.$message.error("请选择交叉采购合同");else this.$message.error("请输入交割库");else this.$message.error("待交割数量为0，不能再发起交割申请")},onAcrossDelivery:function(t){"1"===t||1===t||(this.erpGoodFileModelList=this.befGoodFileModelList,this.deliveryContractList=[],this.createSellDelive.acrossContractNo=null,this.createSellDelive.acrossContractIds=null)},showImg:function(t){this.$refs.dvlyFileView.open4MultiFile(t)},showImg4Coll:function(t){this.$refs.dvlyFileView.open(t)},salesViewHistory:function(t,e){var a=this,s={targetId:t,targetType:e};this.$http.post(this.$api.contract.approve1History,s).then(function(t){0===t.data.code&&(a.erpDeliveryHistoryModelList=t.data.data)}).catch(function(t){console.log(t)})}},components:{operationProcess:La,gyFileView:Ke}},wl={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"deliveryDetails"},[a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px","close-on-click-modal":!1,visible:t.orderData.purchaseDeliverydialog},on:{"update:visible":function(e){return t.$set(t.orderData,"purchaseDeliverydialog",e)}}},[a("div",{staticClass:"order-apply"},[a("div",{staticClass:"title"},[t._v("新建采购交割")])]),t._v(" "),a("div",{staticClass:"block clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("上游公司")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.orderMessage.sellerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("交割库")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderMessage.deliveryWarehouseName,expression:"orderMessage.deliveryWarehouseName"}],attrs:{type:"text",readonly:93===t.orderMessage.productId,placeholder:"请输入交割库"},domProps:{value:t.orderMessage.deliveryWarehouseName},on:{input:function(e){e.target.composing||t.$set(t.orderMessage,"deliveryWarehouseName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("合同交割日")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.orderMessage.planDeliveryDate))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("交割库地址")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderMessage.deliveryDetailedAddress,expression:"orderMessage.deliveryDetailedAddress"}],attrs:{type:"text",readonly:93===t.orderMessage.productId,placeholder:"请输入交割库地址"},domProps:{value:t.orderMessage.deliveryDetailedAddress},on:{input:function(e){e.target.composing||t.$set(t.orderMessage,"deliveryDetailedAddress",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("产品名称")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.orderMessage.skuName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("免仓期(天)")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.orderMessage.warehouseFreeDays))]),t._v("\n              自\n              "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{staticClass:"input-date",attrs:{type:"date","value-format":"timestamp",placeholder:"交割日"},model:{value:t.orderMessage.freeWarehouseDate,callback:function(e){t.$set(t.orderMessage,"freeWarehouseDate",e)},expression:"orderMessage.freeWarehouseDate"}})],1)]),t._v("\n              起仓储费由收货单位承担\n          ")]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("申请交割日")]),t._v(" "),a("div",[a("div",{staticClass:"d"},[a("el-date-picker",{staticClass:"input-date",attrs:{type:"date","value-format":"timestamp",placeholder:"交割日"},model:{value:t.createBuyDelive.deliveryDate,callback:function(e){t.$set(t.createBuyDelive,"deliveryDate",e)},expression:"createBuyDelive.deliveryDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("数量(吨)")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToQuantity")(t.orderMessage.skuQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("本次交割数量(吨)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderMessage.surplusQuantityTwo,expression:"orderMessage.surplusQuantityTwo"}],attrs:{type:"text",disabled:0===t.orderMessage.surplusQuantityTwo},domProps:{value:t.orderMessage.surplusQuantityTwo},on:{input:function(e){e.target.composing||t.$set(t.orderMessage,"surplusQuantityTwo",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("待交割数量(吨)")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToQuantity")(t.orderMessage.surplusQuantityTwos)))])])]),t._v(" "),t.deliveryPure?a("div",[a("operation-process",{attrs:{elStepList:t.erpDeliveryHistoryModelList}})],1):t._e(),t._v(" "),a("div",{staticStyle:{"margin-top":"10px","text-align":"right","padding-bottom":"30px","padding-right":"30px"}},[t.deliveryPure?t._e():a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:t.handleClosePurchanseDelivery}},[t._v("取消")]),t._v(" "),t.deliveryPure?a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:t.handleClosePurchanseDelivery}},[t._v("关闭")]):t._e(),t._v(" "),t.deliveryPure?t._e():a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.createBuyDelivery()}}},[t._v("提交")])])]),t._v(" "),a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px","close-on-click-modal":!1,visible:t.orderData.newSaledialog},on:{"update:visible":function(e){return t.$set(t.orderData,"newSaledialog",e)}}},[a("div",{staticClass:"order-apply"},[a("div",{staticClass:"title"},[t._v("新建销售交割")])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("下游公司")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.orderMessage.buyerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("交割库")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderMessage.deliveryWarehouseName,expression:"orderMessage.deliveryWarehouseName"}],attrs:{type:"text",disabled:t.deliverySell,readonly:93===t.orderMessage.productId,placeholder:"请输入交割库"},domProps:{value:t.orderMessage.deliveryWarehouseName},on:{input:function(e){e.target.composing||t.$set(t.orderMessage,"deliveryWarehouseName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("合同交割日")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.orderMessage.planDeliveryDate))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("交割库地址")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderMessage.deliveryDetailedAddress,expression:"orderMessage.deliveryDetailedAddress"}],attrs:{type:"text",disabled:t.deliverySell,readonly:93===t.orderMessage.productId,placeholder:"请输入交割库地址"},domProps:{value:t.orderMessage.deliveryDetailedAddress},on:{input:function(e){e.target.composing||t.$set(t.orderMessage,"deliveryDetailedAddress",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("产品名称")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.orderMessage.skuName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("换货仓库")]),t._v(" "),a("el-select",{staticClass:"input-date",attrs:{placeholder:"请选择换货仓库",clearable:!0},model:{value:t.createSellDelive.warehouseName,callback:function(e){t.$set(t.createSellDelive,"warehouseName",e)},expression:"createSellDelive.warehouseName"}},t._l(t.warehouseList,function(t){return a("el-option",{key:t.warehouseName,attrs:{label:t.warehouseName,value:t.warehouseName}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("本次交割数量(吨)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderMessage.surplusQuantityTwo,expression:"orderMessage.surplusQuantityTwo"}],attrs:{type:"text",disabled:0===t.orderMessage.surplusQuantityTwo},domProps:{value:t.orderMessage.surplusQuantityTwo},on:{input:function(e){e.target.composing||t.$set(t.orderMessage,"surplusQuantityTwo",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("申请交割日")]),t._v(" "),a("div",[a("div",{staticClass:"d input-date"},[a("el-date-picker",{attrs:{disabled:t.deliverySell,type:"date","value-format":"timestamp",placeholder:"交割日"},model:{value:t.createSellDelive.deliveryDate,callback:function(e){t.$set(t.createSellDelive,"deliveryDate",e)},expression:"createSellDelive.deliveryDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("免仓期(天)")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.orderMessage.warehouseFreeDays)+"   ")]),t._v("\n            自\n            "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{staticClass:"input-date",attrs:{type:"date","value-format":"timestamp",placeholder:"交割日"},model:{value:t.orderMessage.freeWarehouseDate,callback:function(e){t.$set(t.orderMessage,"freeWarehouseDate",e)},expression:"orderMessage.freeWarehouseDate"}})],1)]),t._v(" "),a("span",[t._v("起仓储费由收货单位承担")])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("数量(吨)")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToQuantity")(t.orderMessage.skuQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l spanLeft"},[t._v("已交割数量(吨)")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToQuantity")(t.orderMessage.alreadyDeliveryQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("待交割数量(吨)")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToQuantity")(t.orderMessage.surplusQuantityTwos)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("采购交割凭证")]),t._v(" "),t.erpGoodFileModelList&&0!==t.erpGoodFileModelList.length?a("span",{staticClass:"left-align",on:{click:function(e){return t.showImg(t.erpGoodFileModelList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",{staticClass:"left-align"},[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("交叉交割")]),t._v(" "),a("span",{staticClass:"left-align"},[a("el-checkbox",{attrs:{disabled:t.deliverySell,"true-label":"1","false-label":"0"},on:{change:t.onAcrossDelivery},model:{value:t.createSellDelive.acrossDelivery,callback:function(e){t.$set(t.createSellDelive,"acrossDelivery",e)},expression:"createSellDelive.acrossDelivery"}})],1)]),t._v(" "),"1"===t.createSellDelive.acrossDelivery?a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("交叉采购合同号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.createSellDelive.acrossContractNo,expression:"createSellDelive.acrossContractNo"}],attrs:{type:"text",disabled:t.deliverySell,readonly:"",placeholder:"请选择采购合同"},domProps:{value:t.createSellDelive.acrossContractNo},on:{input:function(e){e.target.composing||t.$set(t.createSellDelive,"acrossContractNo",e.target.value)}}}),t._v(" "),t.deliverySell?t._e():a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",top:"10px",right:"20px"},on:{click:t.openSeachContractDialog}})]):t._e(),t._v(" "),"1"===t.createSellDelive.acrossDelivery?a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("交叉合同ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.createSellDelive.acrossContractIds,expression:"createSellDelive.acrossContractIds"}],attrs:{type:"text",disabled:t.deliverySell,readonly:""},domProps:{value:t.createSellDelive.acrossContractIds},on:{input:function(e){e.target.composing||t.$set(t.createSellDelive,"acrossContractIds",e.target.value)}}})]):t._e(),t._v(" "),"1"===t.createSellDelive.acrossDelivery?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交叉采购合同")]),t._v(" "),t.deliveryContractList&&0!==t.deliveryContractList.length?a("span",{staticClass:"left-align",on:{click:function(e){return t.showImg(t.deliveryContractList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",{staticClass:"left-align"},[a("i",{staticClass:"iconfont icon-photo-null"})])]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l spanLeft"},[t._v("备注")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderMessage.overdueReason,expression:"orderMessage.overdueReason"}],staticStyle:{width:"298px"},attrs:{type:"text",disabled:t.deliverySell,placeholder:"请输入备注"},domProps:{value:t.orderMessage.overdueReason},on:{input:function(e){e.target.composing||t.$set(t.orderMessage,"overdueReason",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("div",{staticClass:"order-skjl"},[a("div",{staticClass:"title"},[t._v("收款信息")]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同金额(元)")]),t._v(" "),t.isFormulaPrice?a("span",[a("span",{staticStyle:{color:"red"}},[t._v("公式计价")])]):a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToCash")(t.collectionList.contractAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("待收金额(元)")]),t._v(" "),t.isFormulaPrice?a("span",{staticClass:"left-align"},[t._v("--")]):a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToCash")(t.collectionList.needCollectionTotal)))])]),t._v(" "),a("table",{staticClass:"gy-table j-table",staticStyle:{width:"1168px"}},[a("thead",[a("tr",[a("th",[t._v("编号")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("th",[t._v("收款凭证")]),t._v(" "),a("th",[t._v("收款金额(元)")]),t._v(" "),a("th",[t._v("付款用途")]),t._v(" "),a("th",[t._v("到账日期")])])]),t._v(" "),t.collectionList.erpCollectionModelList?a("tbody",t._l(t.collectionList.erpCollectionModelList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(10===e.collectionStatus?"已创建":"已确认"))]),t._v(" "),a("td",[0!==e.erpCollectionFileModelList.length?a("span",{on:{click:function(a){return t.showImg4Coll(e.erpCollectionFileModelList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("numToCash")(e.collectionAmount)))]),t._v(" "),a("td",[t._v(t._s(t.$constant.collectionType[e.collectionType]))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.collectionDate)))])])}),0):a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"10"}},[t._v("暂无数据")])])])])]),t._v(" "),t.deliverySell?a("div",[a("operation-process",{attrs:{elStepList:t.erpDeliveryHistoryModelList}})],1):t._e(),t._v(" "),a("div",{staticStyle:{"margin-top":"10px","text-align":"right","padding-bottom":"30px","padding-right":"30px","padding-top":"18px"}},[t.deliverySell?t._e():a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"4px"},on:{click:t.handleCloseSaleDelivery}},[t._v("取消")]),t._v(" "),t.deliverySell?a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"4px"},on:{click:t.handleCloseSaleDelivery}},[t._v("关闭")]):t._e(),t._v(" "),t.deliverySell?t._e():a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.createSellDelivery()}}},[t._v("提交")])]),t._v(" "),a("gy-file-view",{ref:"dvlyFileView"})],1),t._v(" "),a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px",visible:t.crossPurchaseContract},on:{"update:visible":function(e){t.crossPurchaseContract=e}}},[a("div",{staticClass:"order-apply"},[a("div",{staticClass:"title"},[t._v("选择采购合同")])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseContractObj.sellerCompanyName,expression:"purchaseContractObj.sellerCompanyName"}],attrs:{type:"text"},domProps:{value:t.purchaseContractObj.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.purchaseContractObj,"sellerCompanyName",e.target.value)}}}),t._v(" "),a("i",{staticClass:"iconfont icon-search",staticStyle:{position:"absolute",top:"10px",right:"20px"},on:{click:function(e){return t.onSeachContractList()}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"}),t._v(" "),a("table",{staticClass:"gy-table",staticStyle:{width:"96%"}},[a("thead",[a("tr",[a("th",{staticStyle:{width:"90px"}},[t._v("合同要素ID")]),t._v(" "),a("th",[t._v("我方公司")]),t._v(" "),a("th",[t._v("上游公司")]),t._v(" "),a("th",[t._v("合同数量(吨)")]),t._v(" "),a("th",[t._v("入库数量(吨)")]),t._v(" "),a("th",[t._v("可关联数量(吨)")]),t._v(" "),a("th",[t._v("实际交割日期")]),t._v(" "),a("th",[t._v("交割库")]),t._v(" "),a("th",[t._v("免仓期(天)")])])]),t._v(" "),this.purchaseContractList.length>0?a("tbody",t._l(t.purchaseContractList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"90px"}},[a("span",{staticClass:"el-checkbox__input",class:{"is-checked":t.deliveryAcxOrderid.includes(e.deliveryItemId)},on:{click:function(a){return t.crossHandleCheckChange(e)}}},[a("span",{staticClass:"el-checkbox__inner"})]),t._v(" "),a("span",{staticStyle:{"margin-left":"3px"}},[t._v(t._s(e.contractEssenceId))])]),t._v(" "),a("td",[t._v(t._s(e.ourCompanyName))]),t._v(" "),a("td",[t._v(t._s(e.sellerCompanyName))]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("numToQuantity")(e.skuQuantity)))]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("numToQuantity")(e.alreadyStoreQuantity)))]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("numToQuantity")(e.supAcrossRelQuantity)))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.realDeliveryDate)))]),t._v(" "),a("td",[t._v(t._s(e.deliveryWarehouseName))]),t._v(" "),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.warehouseFreeDays))])])}),0):a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[t._v("暂无数据")])])])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.purchaseContractObj.pageNo,"page-size":t.purchaseContractObj.pageSize,total:t.totalDelivery},on:{"update:currentPage":function(e){return t.$set(t.purchaseContractObj,"pageNo",e)},"update:current-page":function(e){return t.$set(t.purchaseContractObj,"pageNo",e)},"current-change":t.handleCurrentChangeDeliver}}),t._v(" "),a("div",{staticClass:"button-wrap",staticStyle:{"padding-top":"24px","padding-bottom":"30px","padding-right":"30px"}},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"4px"},on:{click:function(e){t.crossPurchaseContract=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.crossSubmission()}}},[t._v("确定")])])],1)],1)},staticRenderFns:[]};var Il=a("C7Lr")(bl,wl,!1,function(t){a("eKH/"),a("P/DX")},"data-v-3554b172",null).exports,kl={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialogImg",attrs:{title:"图片预览",visible:t.dialogVisible,width:"1000px","custom-class":"dialog-erp-cont","before-close":t.close,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"block"},[a("el-carousel",{attrs:{trigger:"click","indicator-position":"none",autoplay:!1}},t._l(t.dialogImg,function(e,s){return a("el-carousel-item",{key:s},[-1!==t.$constant.imgType.indexOf(e.fileUrl.split(".").pop().toLowerCase())?a("img",{attrs:{src:e.fileUrl,alt:"",width:"100%",height:"auto"}}):t._e(),t._v(" "),"pdf"===e.fileUrl.split(".").pop().toLowerCase()?a("iframe",{staticStyle:{"min-height":"490px"},attrs:{src:e.fileUrl,frameborder:"0",width:"100%"}}):t._e(),t._v(" "),-1!==t.$constant.fileType.indexOf(e.fileUrl.split(".").pop().toLowerCase())?a("iframe",{staticStyle:{"min-height":"490px"},attrs:{src:"https://view.officeapps.live.com/op/view.aspx?src="+e.fileUrl,frameborder:"0",width:"100%"}}):t._e()])}),1)],1)])},staticRenderFns:[]};var xl=a("C7Lr")({props:{dialogImg:{default:[]},dialogVisible:{default:!1}},data:function(){return{}},methods:{close:function(){this.$emit("closedialogvisible")}}},kl,!1,function(t){a("ShVN")},null,null).exports,Dl={components:{dialogImg:xl,gyStep:vl,bankAcc:Ye,operationProcess:La,gyFileView:Ke,gyFileUpload:aa},props:{orderData:Object,orderIds:Object,upstreamInfo:Object,downstreamInfo:Object},data:function(){return{initialData:{},invoiceCollection:{},payStatus:1,id:null,purchaseOrderId:null,saleOrderId:null,collectTicketReceipt:[],collectTickets:[],applyList:{hasReceiptInvoice:null,operationUserName:null,productTaxCode:null,productName:null,deliveredProductBillToFinance:0,buyerBankName:null,buyerBankAccount:null,buyerTaxCode:null,applicationDate:null,buyerName:null,payInfoList:[],productSettlementBill:[],receiptVoucher:[],receiptInvoiceStatus:null,remark:null},collectList:{amount:null,receiptDate:null,sellerName:null,receiptInvoiceUrlList:[]},dialogVisibles:!1,collectTicketsdialog:!1,entryoptions:[{id:0,label:"无进项票"},{id:1,label:"有进项票"}],entryoptionTwo:[],entryoptionTwoYes:[{id:0,label:"在途中"},{id:1,label:"已收到"}],entryoptionTwoNo:[{id:2,label:"先开销项发票"}],ComentList:{receiptList:[]},reapingVoucherComentList:{receiptList:[]},deliveryBillComentList:{receiptList:[]},newBank:[],handleCheckChangeList:{},newDateInvoiceAssembly:"",invoiceDeliveryCollection:{},fileList:[],isSubmit:!0,isSubmit2:!0,stepArr:[],stepArr2:[],threadRunTag:!0,remark:null,commodCode:[]}},mounted:function(){this.newDateInvoiceAssembly=new Date,this.collectList.receiptDate=Date.parse(this.newDateInvoiceAssembly),this.applyList.applicationDate=Date.parse(this.newDateInvoiceAssembly)},methods:{initCollectTicketsView:function(t){this.isSubmit2=!0,this.collectTicketsReceipt(t)},initInvoiceView:function(t,e,a,s,i){this.isSubmit=!0;var n=JSON.parse(localStorage.getItem("userInfo"));this.applyList.operationUserName=n.username,this.applyList.productName=s,this.commodityTaxCode(a),this.newPaymentBankAssembly(i),this.InitializationData(e),this.getInvoiceDeliveryCollection(e,t)},InitializationData:function(t){var e=this;this.$http.get(this.$api.invoice.pageBringInData+t).then(function(t){0===t.data.code&&(e.initialData=t.data.data,e.initialData.quantitys=e.initialData.quantity,e.initialData.amount=e.$tools.toFixedFn(e.initialData.amount,2),21!==e.downstreamInfo.skuPriceType&&22!==e.downstreamInfo.skuPriceType||(e.initialData.amount=null),e.initialData.amounts=e.initialData.amount,e.handleInitData())})},getInvoiceDeliveryCollection:function(t,e){var a=this;this.$http.post(this.$api.invoice.getInvoiceDeliveryCollection,{salesOrderId:t,purchaseOrderId:e}).then(function(t){0===t.data.code&&(a.invoiceCollection=t.data.data)})},handleCloseCollectTickets:function(){this.orderData.collectTicketsdialog=!1,this.$emit("ivoiceList")},handleCloseTicketOpening:function(){this.orderData.dialogVisibles=!1,this.$emit("ivoiceList")},newPaymentBankAssembly:function(t){var e=this;this.$http.post(this.$api.payment.newBank,{companyId:t}).then(function(t){0===t.data.code&&(e.newBank=t.data.data,2===e.newBank.length&&(e.applyList.buyerBankId=e.newBank[0].bankAccId,e.applyList.buyerBankName=e.newBank[0].depositBankName,e.applyList.buyerBankAccount=e.newBank[0].bankAccount))})},commodityTaxCode:function(t){var e=this;this.applyList.productTaxCode=null,this.$http.post(this.$api.invoice.commodityCode,{productId:t}).then(function(t){0===t.data.code&&(e.commodCode=t.data.data,1===e.commodCode.length&&(e.applyList.productTaxCode=e.commodCode[0].taxCode,e.applyList.productName=e.commodCode[0].productName))})},changeBlank:function(t){0===t&&(this.$refs.bankAcc.addBank=!0,this.$refs.bankAcc.creatBank.companyId=this.orderIds.buyerCompanyId,this.$refs.bankAcc.creatBank.accountName=this.orderIds.buyerCompanyName);for(var e=0;e<this.newBank.length;e++)t===this.newBank[e].bankAccId&&(this.applyList.buyerBankId=this.newBank[e].bankAccId,this.applyList.buyerBankAccount=this.newBank[e].bankAccount,this.applyList.buyerBankName=this.newBank[e].depositBankName)},popupPaySubmission:function(t){if(null==t||void 0===t)return this.applyList.buyerBankId=null,this.applyList.buyerBankAccount=null,void(this.applyList.buyerBankName=null);this.applyList.buyerBankId=t.bankAccId,this.applyList.buyerBankName=t.depositBank,this.applyList.buyerBankAccount=t.companyAccount,this.newPaymentBankAssembly(this.initialData.buyerId)},entryTicket:function(){1===this.applyList.hasReceiptInvoice&&(this.applyList.receiptInvoiceStatus=null,this.entryoptionTwo=this.entryoptionTwoYes),0===this.applyList.hasReceiptInvoice&&(this.applyList.receiptInvoiceStatus=null,this.entryoptionTwo=this.entryoptionTwoNo)},onCallbackBuyFileUpload:function(t){var e=this;this.collectList.receiptInvoiceUrlList=[],t.forEach(function(t){e.collectList.receiptInvoiceUrlList.push(t.fileUrl)})},onCallbackEnclosureFileUpload:function(t){var e=this;this.applyList.invoiceApplicationFiles=[],t.forEach(function(t){e.applyList.invoiceApplicationFiles.push(t.fileUrl)})},collectTicketsReceipt:function(t){var e=this;e.$http.get(e.$api.invoice.getDetail+"/"+t).then(function(t){0===t.data.code&&(e.collectTicketReceipt=t.data.data,21===e.upstreamInfo.skuPriceType?e.collectList.amount=null:e.collectList.amount=e.$tools.toFixedFn(Number(e.upstreamInfo.skuQuantity*e.upstreamInfo.skuPrice),2))})},collectTicketsSales:function(){var t=this;t.$http.get(t.$api.invoice.getDetails+"/"+t.saleOrderId).then(function(e){0===e.data.code&&(t.collectTickets=e.data.data)})},applyTicket:function(){var t=this;Array.prototype.isPrototypeOf(this.invoiceCollection.purchaseDeliverys)&&this.invoiceCollection.purchaseDeliverys.length>0&&(this.applyList.deliveredProductBillToFinance=1),this.applyList.deliveredProductBillToFinance,""!==this.downstreamInfo.buyerCompanyName?null!==this.applyList.applicationDate?(this.applyList.buyerTaxCode=this.invoiceCollection.corpTaxCode,null!==this.applyList.buyerTaxCode&&""!==this.applyList.buyerTaxCode?null!==this.applyList.buyerBankAccount&&""!==this.applyList.buyerBankAccount?null!==this.applyList.productName&&""!==this.applyList.productName?null!==this.applyList.buyerBankName&&""!==this.applyList.buyerBankName?""!==this.initialData.quantity&&null!=this.initialData.quantity&&void 0!==this.initialData.quantity?this.initialData.quantity<=0?this.$message({message:"开票数量不能为0或为负数",type:"error"}):""!==this.initialData.amount&&null!=this.initialData.amount&&void 0!==this.initialData.amount?this.initialData.amount<=0?this.$message({message:"开票金额不能为0或为负数",type:"error"}):""!==this.initialData.deliveredProductQuantity?null!==this.applyList.deliveredProductBillToFinance?""!==this.initialData.receiptInvoiceAmount?null!==this.applyList.productTaxCode?null!==this.applyList.operationUserName?null!==this.applyList.hasReceiptInvoice&&null!==this.applyList.receiptInvoiceStatus?this.initialData.quantity>this.initialData.quantitys?this.$message({message:"超出可开票数量",type:"error"}):this.initialData.quantity<=0?this.$message({message:"开票数量不能小于等于零",type:"error"}):1===this.downstreamInfo.skuPriceType&&this.initialData.amount>this.initialData.amounts?this.$message({message:"超出可开票总金额",type:"error"}):("1"===this.applyList.deliveredProductBillToFinance?this.applyList.deliveredProductBillToFinance=1:this.applyList.deliveredProductBillToFinance=0,this.applyList.skuQuantity=this.initialData.quantity,this.applyList.amount=this.initialData.amount,this.applyList.deliveredProductQuantity=this.initialData.deliveredProductQuantity,this.applyList.receiptInvoiceAmount=this.initialData.receiptInvoiceAmount,this.applyList.quantity=this.downstreamInfo.skuQuantity,this.applyList.buyerName=this.downstreamInfo.buyerCompanyName,this.applyList.receiptVoucherList=this.reapingVoucherComentList.receiptList,this.applyList.productSettlementBillList=this.deliveryBillComentList.receiptList,this.applyList.salesOrderId=this.orderIds.saleOrderId,this.applyList.buyerId=this.downstreamInfo.buyerCompanyId,this.applyList.contEssId=this.orderIds.id,this.threadRunTag&&(this.threadRunTag=!1,this.$http.post(this.$api.invoice.applyInvoice,this.applyList).then(function(e){if(0===e.data.code){t.$message({message:e.data.message,type:"success"}),t.$emit("ivoiceList"),t.isSubmit=!1;var a={targetId:e.data.data.targetId,targetType:4};t.$http.post(t.$api.contract.approve1History,a).then(function(e){0===e.data.code&&(t.stepArr=e.data.data,t.stepArr.forEach(function(t,e){t.step=e}))})}else t.$message({message:e.data.message,type:"error"});t.threadRunTag=!0}).catch(function(e){t.$message({message:"网络异常",type:"error"}),t.threadRunTag=!0}))):this.$message({message:"请选择进项票",type:"error"}):this.$message({message:"请输入经办人",type:"error"}):this.$message({message:"请输入商品税务编码",type:"error"}):this.$message({message:"请输入本笔业务已收到上游发票总金额",type:"error"}):this.$message({message:"请选择采购交割凭证是否已上传",type:"error"}):this.$message({message:"请输入转让货权总数量",type:"error"}):this.$message({message:"请输入开票金额",type:"error"}):this.$message({message:"请输入开票数量",type:"error"}):this.$message({message:"请输入开户银行",type:"error"}):this.$message({message:"请输入品名",type:"error"}):this.$message({message:"请输入银行账号",type:"error"}):this.$message({message:"请输入税号",type:"error"})):this.$message({message:"请选择日期",type:"error"}):this.$message({message:"请输入开票单位",type:"error"})},collecTicket:function(){var t=this;""!==this.upstreamInfo.sellerCompanyName?null!==this.collectList.receiptDate?""!==this.collectList.amount&&null!==this.collectList.amount?0!==this.collectList.receiptInvoiceUrlList.length?(this.collectList.sellerId=this.upstreamInfo.sellerCompanyId,this.collectList.sellerName=this.upstreamInfo.sellerCompanyName,this.collectList.productName=this.orderIds.prodName,this.collectList.quantity=this.upstreamInfo.skuQuantity,this.collectList.productUnitPrice=this.upstreamInfo.skuPrice,this.collectList.purchaseOrderId=this.orderIds.purchaseOrderId,this.collectList.contEssId=this.orderIds.id,this.$http.post(this.$api.invoice.createCollect,this.collectList).then(function(e){if(0===e.data.code){t.$message({message:e.data.message,type:"success"}),t.$emit("ivoiceList"),t.$refs.pFileUpload.endUpload();var a={targetId:e.data.data.targetId,targetType:6};t.isSubmit2=!1,t.$http.post(t.$api.contract.approve1History,a).then(function(e){0===e.data.code&&(t.stepArr2=e.data.data,t.stepArr2.forEach(function(t,e){t.step=e}))})}else t.$message({message:e.data.message,type:"error"})})):this.$message({message:"请上传收票凭证",type:"error"}):this.$message({message:"请输入发票总金额",type:"error"}):this.$message({message:"请输入收票日期",type:"error"}):this.$message({message:"请输入上游公司",type:"error"})},showImg:function(t){this.$refs.buyInvoiceFileView.open4MultiFile(t)},handleInitData:function(){this.initialData.receiptInvoiceAmount>0?(this.applyList.hasReceiptInvoice=this.entryoptions[1].id,this.entryoptionTwo=this.entryoptionTwoYes,this.applyList.receiptInvoiceStatus=this.entryoptionTwoYes[1].id):(this.applyList.hasReceiptInvoice=this.entryoptions[0].id,this.entryoptionTwo=this.entryoptionTwoNo,this.applyList.receiptInvoiceStatus=this.entryoptionTwoNo[0].id)},initUploadFileData:function(){this.$refs.pFileUpload&&this.$refs.pFileUpload.init()}},watch:{remark:function(t,e){t.length>2500?this.$message({message:"备注最多可填写2500字",type:"warning"}):this.applyList.remark=this.remark.substr(0,2500)}}},Sl={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"invoiceDetails"},[a("el-dialog",{staticClass:"order-dialogs",attrs:{width:"1200px","close-on-click-modal":!1,"before-close":t.handleCloseTicketOpening,visible:t.orderData.dialogVisibles},on:{"update:visible":function(e){return t.$set(t.orderData,"dialogVisibles",e)}}},[a("div",{staticClass:"order-apply"},[a("div",{staticClass:"title"},[t._v("申请开票")])]),t._v(" "),a("div",{staticClass:"block clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("开票单位名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.downstreamInfo.buyerCompanyName,expression:"downstreamInfo.buyerCompanyName"}],attrs:{type:"text"},domProps:{value:t.downstreamInfo.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.downstreamInfo,"buyerCompanyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("申请日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{staticClass:"input-date",attrs:{type:"date","value-format":"timestamp"},model:{value:t.applyList.applicationDate,callback:function(e){t.$set(t.applyList,"applicationDate",e)},expression:"applyList.applicationDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("税号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.invoiceCollection.corpTaxCode,expression:"invoiceCollection.corpTaxCode"}],attrs:{type:"text",placeholder:"请输入税号"},domProps:{value:t.invoiceCollection.corpTaxCode},on:{input:function(e){e.target.composing||t.$set(t.invoiceCollection,"corpTaxCode",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("开票数量(吨)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.initialData.quantity,expression:"initialData.quantity"}],attrs:{type:"text",placeholder:"请输入开票数量"},domProps:{value:t.initialData.quantity},on:{input:function(e){e.target.composing||t.$set(t.initialData,"quantity",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("开户银行")]),t._v(" "),a("el-select",{staticClass:"input-date",attrs:{placeholder:"请选择开户银行账户"},on:{change:t.changeBlank},model:{value:t.applyList.buyerBankName,callback:function(e){t.$set(t.applyList,"buyerBankName",e)},expression:"applyList.buyerBankName"}},t._l(t.newBank,function(t){return a("el-option",{key:t.bankAccId,attrs:{label:t.depositBankName,value:t.bankAccId}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("开票金额(元)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.initialData.amount,expression:"initialData.amount"}],attrs:{type:"text",placeholder:"请输入开票金额"},domProps:{value:t.initialData.amount},on:{input:function(e){e.target.composing||t.$set(t.initialData,"amount",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("银行账号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.buyerBankAccount,expression:"applyList.buyerBankAccount"}],attrs:{type:"text",readonly:""},domProps:{value:t.applyList.buyerBankAccount},on:{input:function(e){e.target.composing||t.$set(t.applyList,"buyerBankAccount",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("品名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.productName,expression:"applyList.productName"}],attrs:{type:"text"},domProps:{value:t.applyList.productName},on:{input:function(e){e.target.composing||t.$set(t.applyList,"productName",e.target.value)}}})]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[a("span",[t._v("转让货权总数量(吨)")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.initialData.deliveredProductQuantity,expression:"initialData.deliveredProductQuantity"}],attrs:{type:"text",placeholder:"请输入转让货权总数量"},domProps:{value:t.initialData.deliveredProductQuantity},on:{input:function(e){e.target.composing||t.$set(t.initialData,"deliveredProductQuantity",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("商品税务编码")]),t._v(" "),[a("el-select",{staticClass:"input-date",attrs:{placeholder:"请选择"},model:{value:t.applyList.productTaxCode,callback:function(e){t.$set(t.applyList,"productTaxCode",e)},expression:"applyList.productTaxCode"}},t._l(t.commodCode,function(t){return a("el-option",{key:t.id,attrs:{label:t.taxCode,value:t.taxCode}})}),1)]],2),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("已收上游发票(元)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.initialData.receiptInvoiceAmount,expression:"initialData.receiptInvoiceAmount"}],attrs:{type:"text",placeholder:"请输入本笔业务已收到上游发票总金额"},domProps:{value:t.initialData.receiptInvoiceAmount},on:{input:function(e){e.target.composing||t.$set(t.initialData,"receiptInvoiceAmount",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("进项票")]),t._v(" "),[a("el-select",{staticClass:"input-date",staticStyle:{width:"49%"},attrs:{placeholder:"请选择"},on:{change:function(e){return t.entryTicket()}},model:{value:t.applyList.hasReceiptInvoice,callback:function(e){t.$set(t.applyList,"hasReceiptInvoice",e)},expression:"applyList.hasReceiptInvoice"}},t._l(t.entryoptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}),1)],t._v(" "),[a("el-select",{staticClass:"input-date",staticStyle:{width:"49%"},attrs:{placeholder:"请选择"},model:{value:t.applyList.receiptInvoiceStatus,callback:function(e){t.$set(t.applyList,"receiptInvoiceStatus",e)},expression:"applyList.receiptInvoiceStatus"}},t._l(t.entryoptionTwo,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}),1)]],2),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("经办人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.applyList.operationUserName,expression:"applyList.operationUserName"}],attrs:{type:"text",placeholder:"请输入经办人"},domProps:{value:t.applyList.operationUserName},on:{input:function(e){e.target.composing||t.$set(t.applyList,"operationUserName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("采购交割凭证")]),t._v(" "),Array.prototype.isPrototypeOf(t.invoiceCollection.purchaseDeliverys)&&t.invoiceCollection.purchaseDeliverys.length>0?a("span",{staticClass:"left-align",on:{click:function(e){return t.showImg(t.invoiceCollection.purchaseDeliverys)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",{staticClass:"left-align"},[t._v("未上传")])]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("销售交割凭证")]),t._v(" "),Array.prototype.isPrototypeOf(t.invoiceCollection.salesDeliverys)&&t.invoiceCollection.salesDeliverys.length>0?a("span",{staticClass:"left-align",on:{click:function(e){return t.showImg(t.invoiceCollection.salesDeliverys)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",{staticClass:"left-align"},[t._v("未上传")])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("收款凭证")]),t._v(" "),Array.prototype.isPrototypeOf(t.invoiceCollection.collections)&&t.invoiceCollection.collections.length>0?a("span",{staticClass:"left-align",on:{click:function(e){return t.showImg(t.invoiceCollection.collections)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",{staticClass:"left-align"},[t._v("未上传")])]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{clear:"both"}},[a("span",{staticClass:"l spanLeft"},[a("i"),t._v("附件")]),t._v(" "),a("div",{staticClass:"left-align"},[a("gy-file-upload",{ref:"pFileUpload",on:{callbackFileUpload:t.onCallbackEnclosureFileUpload}})],1)]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{height:"auto"}},[a("span",{staticClass:"l spanLeft"},[t._v("备注")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],staticStyle:{width:"406px"},attrs:{placeholder:"请输入备注",cols:"40",rows:"4"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})])]),t._v(" "),t.isSubmit?t._e():a("div",[a("operation-process",{attrs:{elStepList:t.stepArr}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"50px","text-align":"right","padding-bottom":"30px","padding-right":"30px"}},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){t.orderData.dialogVisibles=!1}}},[t.isSubmit?a("span",[t._v("取消")]):a("span",[t._v("关闭")])]),t._v(" "),t.isSubmit?a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.applyTicket()}}},[t._v("提交")]):t._e()])]),t._v(" "),a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1200px","close-on-click-modal":!1,"before-close":t.handleCloseCollectTickets,visible:t.orderData.collectTicketsdialog},on:{"update:visible":function(e){return t.$set(t.orderData,"collectTicketsdialog",e)}}},[a("div",{staticClass:"order-apply"},[a("div",{staticClass:"title"},[t._v("收票")])]),t._v(" "),a("div",{staticClass:"block clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("上游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.upstreamInfo.sellerCompanyName,expression:"upstreamInfo.sellerCompanyName"}],attrs:{type:"text"},domProps:{value:t.upstreamInfo.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.upstreamInfo,"sellerCompanyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("收票日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{staticClass:"input-date",attrs:{type:"date","value-format":"timestamp",placeholder:"收票日期"},model:{value:t.collectList.receiptDate,callback:function(e){t.$set(t.collectList,"receiptDate",e)},expression:"collectList.receiptDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("品名")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t.upstreamInfo.prodName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("数量(吨)")]),t._v(" "),a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToQuantity")(t.upstreamInfo.skuQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l spanLeft"},[t._v("单价(元/吨)")]),t._v(" "),21===t.upstreamInfo.skuPriceType||22===t.upstreamInfo.skuPriceType?a("span",{staticClass:"left-align red"},[t._v("公式计价")]):a("span",{staticClass:"left-align"},[t._v(t._s(t._f("numToCash")(t.upstreamInfo.skuPrice,!0)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("发票总金额(元)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.collectList.amount,expression:"collectList.amount"}],attrs:{type:"text"},domProps:{value:t.collectList.amount},on:{input:function(e){e.target.composing||t.$set(t.collectList,"amount",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[a("i",[t._v("*")]),t._v("收票凭证")]),t._v(" "),a("div",{staticClass:"left-align"},[a("gy-file-upload",{ref:"pFileUpload",on:{callbackFileUpload:t.onCallbackBuyFileUpload}})],1)])]),t._v(" "),t.isSubmit2?t._e():a("div",[a("operation-process",{attrs:{elStepList:t.stepArr2}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px","text-align":"right","padding-bottom":"30px","padding-right":"30px"}},[a("button",{staticClass:"gy-button-normal",staticStyle:{"margin-right":"6px"},on:{click:function(e){t.orderData.collectTicketsdialog=!1}}},[t.isSubmit2?a("span",[t._v("取消")]):a("span",[t._v("关闭")])]),t._v(" "),t.isSubmit2?a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.collecTicket()}}},[t._v("提交")]):t._e()])]),t._v(" "),a("bank-acc",{ref:"bankAcc",on:{onSaveAccInfo:t.popupPaySubmission}}),t._v(" "),a("gy-file-view",{ref:"buyInvoiceFileView"})],1)},staticRenderFns:[]};var Tl=a("C7Lr")(Dl,Sl,!1,function(t){a("Td+A"),a("T+cj")},"data-v-161baae2",null).exports,Fl={name:"settleAssembly",props:{orderData:Object,orderIds:Object},components:{gyFileUpload:aa},data:function(){return{saleOrBuy:null,settleText:null,purchasedialog:!1,addForm:{contractEssenceId:null,settlementPrice:null,settlementQuantity:null,settlementAmount:null,settleBalance:0,settleTotalAmount:0,hadPayAmount:null,orderSettleChargesList:[{bearer:null,costItem:"",costCharge:null,bearerId:"",bearerName:""}],remark:null},orderBoolObj:{purchasedialog:!1,saledialog:!1},settleChargesList:[],settlementOrder:{},payerData:[],paymentList:{},collectionList:{},settlelistDetail:{}}},watch:{"addForm.settlementQuantity":function(t,e){console.log(t,e),null!=t&&void 0!==t&&(this.addForm.settlementAmount=this.$tools.toFixedFn(Number(t)*Number(this.addForm.settlementPrice),2))},"addForm.settlementAmount":function(t,e){console.log(t,e),this.addForm.settleTotalAmount=Number(this.addForm.settlementAmount),this.changeMoney(),0!==Number(this.addForm.settlementQuantity)&&(this.addForm.settlementPrice=this.$tools.toFixedFn(Number(t)/Number(this.addForm.settlementQuantity),2))}},mounted:function(){console.log(this.orderIds)},methods:{initPurchaseView:function(t,e){this.settleText="付款",this.saleOrBuy="采购结算",this.addForm={purchaseOrderId:t,contractEssenceId:e.id,settlementPrice:null,settlementQuantity:null,settlementAmount:null,settleBalance:0,orderSettleChargesList:[]};var a={orderId:t,contractEssenceId:e.id,purchaseOrderId:t};this.orderSettleList(t,a),this.orderBoolObj.purchasedialog=!0},initSaleView:function(t,e){this.settleText="收款",this.saleOrBuy="销售结算",this.addForm={saleOrderId:t,contractEssenceId:e.id,settlementPrice:null,settlementQuantity:null,settlementAmount:null,orderSettleChargesList:[]};var a={orderId:t,contractEssenceId:e.id,saleOrderId:t};this.orderSettleList(t,a),this.orderBoolObj.purchasedialog=!0},orderSettleList:function(t,e){var a=this;this.$http.post(this.$api.order.getSettlementOrder,e).then(function(t){console.log(t.data.data),a.settlelistDetail=t.data.data.order,a.payerData=t.data.data.bearerModelList,a.settlementOrder=t.data.data.settlementOrder,a.settleChargesList=t.data.data.settleChargesList,null===a.settlementOrder.hadPayAmount&&(a.settlementOrder.hadPayAmount=0),a.paymentList=t.data.data.paymentList,a.collectionList=t.data.data.collectionList,21===a.settlelistDetail.skuPriceType?(a.addForm.settlementPrice=0,a.addForm.settlementAmount=null):a.addForm.settlementPrice=a.settlelistDetail.skuPrice,0===a.settlementOrder.alreadyDeliveryQuantity?a.addForm.settlementQuantity=null:a.addForm.settlementQuantity=a.settlementOrder.alreadyDeliveryQuantity})},addEnumerated:function(){this.addForm.orderSettleChargesList.push({costItem:"",costCharge:null,bearerId:"",bearerName:""}),console.log(this.addForm.orderSettleChargesList)},changeMoney:function(){null===this.settlementOrder.hadPayAmount&&(this.settlementOrder.hadPayAmount=0);for(var t=0;t<this.addForm.orderSettleChargesList.length;t++)"采购结算"===this.saleOrBuy?3===Number(this.addForm.orderSettleChargesList[t].bearer.bearerType)?this.addForm.settleTotalAmount=this.addForm.settleTotalAmount+Number(this.addForm.orderSettleChargesList[t].costCharge):this.addForm.settleTotalAmount=this.addForm.settleTotalAmount-Number(this.addForm.orderSettleChargesList[t].costCharge):3===Number(this.addForm.orderSettleChargesList[t].bearer.bearerType)?this.addForm.settleTotalAmount=this.addForm.settleTotalAmount-Number(this.addForm.orderSettleChargesList[t].costCharge):this.addForm.settleTotalAmount=this.addForm.settleTotalAmount+Number(this.addForm.orderSettleChargesList[t].costCharge);this.addForm.settleBalance=this.addForm.settleTotalAmount-this.settlementOrder.hadPayAmount},assumecost:function(t){t.bearerId=t.bearer.bearerId,t.bearerName=t.bearer.bearerName,t.costCharge=Number(t.costCharge),this.addForm.settleTotalAmount=Number(this.addForm.settlementAmount),console.log(this.addForm.orderSettleChargesList),this.changeMoney(),console.log(this.addForm.settleTotalAmount)},charge:function(t,e){console.log(e),t.target.value=t.target.value.match(/^\d*(\.?\d{0,2})/g)[0]||null,e.costCharge=t.target.value,this.addForm.settleTotalAmount=Number(this.addForm.settlementAmount),e.bearerName&&this.changeMoney()},delEnumerated:function(t){this.addForm.orderSettleChargesList.splice(t,1),this.addForm.settleTotalAmount=Number(this.addForm.settlementAmount),this.changeMoney()},closeSettle:function(){console.log("aa")},createSettle:function(){var t=this;if(!this.check())return!1;this.addForm.hadPayAmount=this.settlementOrder.hadPayAmount,this.$http.post(this.$api.order.createSettlementOrder,this.addForm).then(function(e){0===e.data.code?(t.$message({message:"创建成功",type:"success"}),t.orderBoolObj.purchasedialog=!1):t.$message({message:e.data.message,type:"error"})})},check:function(){if(console.log(this.addForm.orderSettleChargesList),!this.addForm.settlementQuantity)return this.$message.error("请输入结算数量"),!1;if(!this.addForm.settlementAmount)return this.$message.error("请输入结算金额"),!1;if(0!==this.addForm.orderSettleChargesList.length)for(var t=0;t<this.addForm.orderSettleChargesList.length;t++){if(!this.addForm.orderSettleChargesList[t].costItem)return this.$message.error("费用名称不能为空"),!1;if(!this.addForm.orderSettleChargesList[t].costCharge)return this.$message.error("费用金额不能为空"),!1;if(!this.addForm.orderSettleChargesList[t].bearerName)return this.$message.error("费用承担方不能为空"),!1}return!0},handleInput:function(t){t.target.value=t.target.value.match(/^\d*(\.?\d{0,3})/g)[0]||null,this.addForm.settlementQuantity=t.target.value},handleInput1:function(t){0===Number(this.addForm.settlementQuantity)||null===this.addForm.settlementQuantity||void 0===this.addForm.settlementQuantity?(this.$message.error("请先输入合同结算数量"),this.addForm.settlementAmount=null):(t.target.value=t.target.value.match(/^\d*(\.?\d{0,2})/g)[0]||null,this.addForm.settlementAmount=t.target.value)}}},Nl={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"createSettle"},[a("el-dialog",{staticClass:"order-dialog",attrs:{width:"1032px","close-on-click-modal":!1,title:t.saleOrBuy,visible:t.orderBoolObj.purchasedialog},on:{"update:visible":function(e){return t.$set(t.orderBoolObj,"purchasedialog",e)}}},[a("div",{staticClass:"gy-table-box"},[a("div",{staticClass:"title"},[t._v("结算明细")]),t._v(" "),a("table",{staticClass:"gy-table",staticStyle:{width:"1000px"}},[a("thead",[a("th",{staticStyle:{width:"120px"}},[t._v("类别")]),t._v(" "),a("th",{staticStyle:{width:"220px"}},[t._v("数量(吨)")]),t._v(" "),a("th",{staticStyle:{width:"220px"}},[t._v("单价(元/吨)")]),t._v(" "),a("th",{staticStyle:{width:"220px"}},[t._v("金额(元)")]),t._v(" "),a("th",{staticStyle:{width:"220px"}},[t._v("已交货(吨)")])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("合同信息")]),t._v(" "),a("td",{staticClass:"align-r",staticStyle:{"padding-right":"50px"}},[t._v(t._s(t._f("numToQuantity")(t.settlelistDetail.skuQuantity)))]),t._v(" "),a("td",{staticClass:"align-r",staticStyle:{"padding-right":"50px"}},[21===t.settlelistDetail.skuPriceType||22===t.settlelistDetail.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.settlelistDetail.skuPrice,!0)))])]),t._v(" "),a("td",{staticClass:"align-r",staticStyle:{"padding-right":"50px"}},[21===t.settlelistDetail.skuPriceType||22===t.settlelistDetail.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.settlelistDetail.skuTotalAmount)))])]),t._v(" "),a("td",{staticClass:"align-r",staticStyle:{"padding-right":"50px"}},[t._v(t._s(t.settlementOrder.alreadyDeliveryQuantity||"--"))])]),t._v(" "),a("tr",[a("td",[t._v("合同结算")]),t._v(" "),a("td",{staticClass:"align-r"},[0==t.settlementOrder.settleStatus?a("input",{directives:[{name:"model",rawName:"v-model",value:t.addForm.settlementQuantity,expression:"addForm.settlementQuantity"}],staticClass:"gy-input align-r",staticStyle:{"padding-right":"40px"},attrs:{type:"text",placeholder:"请输入数量"},domProps:{value:t.addForm.settlementQuantity},on:{input:[function(e){e.target.composing||t.$set(t.addForm,"settlementQuantity",e.target.value)},t.handleInput]}}):t._e(),t._v(" "),0!=t.settlementOrder.settleStatus?a("span",{staticStyle:{"padding-right":"40px"}},[t._v(t._s(t._f("numToCash")(t.settlementOrder.settlementQuantity)))]):t._e()]),t._v(" "),a("td",{staticClass:"align-r"},[0==t.settlementOrder.settleStatus?a("input",{directives:[{name:"model",rawName:"v-model",value:t.addForm.settlementPrice,expression:"addForm.settlementPrice"}],staticClass:"gy-input align-r",staticStyle:{"padding-right":"40px"},attrs:{type:"text",disabled:""},domProps:{value:t.addForm.settlementPrice},on:{input:function(e){e.target.composing||t.$set(t.addForm,"settlementPrice",e.target.value)}}}):t._e(),t._v(" "),0!=t.settlementOrder.settleStatus?a("span",{staticStyle:{"padding-right":"40px"}},[t._v(t._s(t._f("numToCash")(t.settlementOrder.settlementPrice)))]):t._e()]),t._v(" "),a("td",{staticClass:"align-r"},[0==t.settlementOrder.settleStatus?a("input",{directives:[{name:"model",rawName:"v-model",value:t.addForm.settlementAmount,expression:"addForm.settlementAmount"}],staticClass:"gy-input align-r",staticStyle:{"padding-right":"40px"},attrs:{type:"text",placeholder:"请输入金额"},domProps:{value:t.addForm.settlementAmount},on:{input:[function(e){e.target.composing||t.$set(t.addForm,"settlementAmount",e.target.value)},t.handleInput1]}}):t._e(),t._v(" "),0!=t.settlementOrder.settleStatus?a("span",{staticStyle:{"padding-right":"40px"}},[t._v(t._s(t._f("numToCash")(t.settlementOrder.settlementAmount)))]):t._e()]),t._v(" "),a("td",{staticClass:"align-r",staticStyle:{"padding-right":"50px"}},[t._v("\n                            --\n                        ")])])])]),t._v(" "),a("div",{staticClass:"title"},[t._v(t._s(t.settleText)+"明细")]),t._v(" "),"付款"==t.settleText?a("table",{staticClass:"gy-table",staticStyle:{width:"1000px"}},[a("thead",[a("th",[t._v("付款单号")]),t._v(" "),a("th",[t._v("出账日期")]),t._v(" "),a("th",[t._v("付款银行")]),t._v(" "),a("th",[t._v("支付方式")]),t._v(" "),a("th",[t._v("经办人")]),t._v(" "),a("th",[t._v("操作时间")]),t._v(" "),a("th",[t._v("单价(元/吨)")]),t._v(" "),a("th",[t._v("付款数量(吨)")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("th",[t._v("付款金额(元)")])]),t._v(" "),a("tbody",[t._l(t.paymentList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.payTime)))]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"poper-class":"test",content:e.buyerDepositBank,disabled:!(e.buyerDepositBank&&e.buyerDepositBank.replace(/[^x00-xff]/g,"aa").length>16),placement:"bottom"}},[a("div",{staticClass:"wid-overflow",staticStyle:{width:"100px",cursor:"pointer"}},[t._v("\n                                    "+t._s(e.buyerDepositBank)+"\n                                ")])])],1),t._v(" "),a("td",[t._v(t._s(t._f("tradeMode")(e.tradeMode)))]),t._v(" "),a("td",[t._v(t._s(e.creatorName))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.createdDate)))]),t._v(" "),21===t.settlelistDetail.skuPriceType||22===t.settlelistDetail.skuPriceType?a("td",{staticClass:"align-r"},[2==e.payMethod?a("span",[t._v("--")]):a("span",[t._v(t._s(t._f("numToCash")(e.tempPrice,!0)))])]):a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToCash")(t.settlelistDetail.skuPrice,!0)))]),t._v(" "),21===t.settlelistDetail.skuPriceType||22===t.settlelistDetail.skuPriceType?a("td",{staticClass:"align-r"},[2==e.payMethod?a("span",[t._v("--")]):a("span",[t._v(t._s(t._f("numToQuantity")(e.applyQuantities)))])]):a("td",{staticClass:"align-r"},[t._v("--")]),t._v(" "),a("td",[t._v(t._s(t._f("paymentBillStatus")(e.approveStatus,e)))]),t._v(" "),a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToCash")(e.payTotal)))])])}),t._v(" "),null===t.paymentList||0==t.paymentList.length?a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v("暂无付款")])]):t._e(),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("实际付款总计")]),t._v(" "),a("td",{staticClass:"align-r",attrs:{colspan:"8"}},[a("span",{staticClass:"red"},[t._v(t._s(t._f("numToCash")(t.settlementOrder.hadPayAmount)))])])])],2)]):t._e(),t._v(" "),"收款"==t.settleText?a("table",{staticClass:"gy-table",staticStyle:{width:"1000px"}},[a("thead",[a("th",[t._v("收款单号")]),t._v(" "),a("th",[t._v("入账日期")]),t._v(" "),a("th",[t._v("经办人")]),t._v(" "),a("th",[t._v("操作时间")]),t._v(" "),a("th",[t._v("单价(元/吨)")]),t._v(" "),a("th",[t._v("收款数量(吨)")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("th",[t._v("收款金额(元)")])]),t._v(" "),a("tbody",[t._l(t.collectionList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.confirmDate)))]),t._v(" "),a("td",[t._v(t._s(e.creatorName))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.createdDate)))]),t._v(" "),21===t.settlelistDetail.skuPriceType||22===t.settlelistDetail.skuPriceType?a("td",{staticClass:"align-r"},[2==e.payMethod?a("span",[t._v("--")]):a("span",[t._v(t._s(t._f("numToCash")(e.tempPrice,!0)))])]):a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToCash")(t.settlelistDetail.skuPrice,!0)))]),t._v(" "),21===t.settlelistDetail.skuPriceType||22===t.settlelistDetail.skuPriceType?a("td",{staticClass:"align-r"},[2==e.payMethod?a("span",[t._v("--")]):a("span",[t._v(t._s(t._f("numToQuantity")(e.applyQuantities)))])]):a("td",{staticClass:"align-r"},[t._v("--")]),t._v(" "),a("td",[t._v(t._s(t._f("collectionBillStatus")(e.collectionStatus)))]),t._v(" "),a("td",{staticClass:"align-r"},[t._v(t._s(t._f("numToCash")(e.payTotal)))])])}),t._v(" "),null===t.collectionList||0==t.collectionList.length?a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[t._v("暂无收款")])]):t._e(),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("实际收款总计")]),t._v(" "),a("td",{staticClass:"align-r",attrs:{colspan:"6"}},[a("span",{staticClass:"red"},[t._v(t._s(t._f("numToCash")(t.settlementOrder.hadPayAmount)))])])])],2)]):t._e(),t._v(" "),a("div",{staticClass:"title"},[t._v("其它费用\n                "),0==t.settlementOrder.settleStatus?a("i",{staticClass:"el-icon-circle-plus add_contact fl",on:{click:t.addEnumerated}}):t._e()]),t._v(" "),0==t.settlementOrder.settleStatus?a("div",t._l(t.addForm.orderSettleChargesList,function(e,s){return a("div",{key:s,staticClass:"clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("strong",[t._v("*")]),t._v("费用名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.costItem,expression:"item.costItem"}],staticClass:"gy-input",attrs:{type:"text",placeholder:"请输入费用名称"},domProps:{value:e.costItem},on:{input:function(a){a.target.composing||t.$set(e,"costItem",a.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[a("strong",[t._v("*")]),t._v("费用金额(元)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.costCharge,expression:"item.costCharge"}],staticClass:"gy-input",attrs:{type:"text",placeholder:"请输入费用金额"},domProps:{value:e.costCharge},on:{input:[function(a){a.target.composing||t.$set(e,"costCharge",a.target.value)},function(a){return t.charge(a,e)}]}})]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{width:"37%"}},[a("span",{staticClass:"l"},[a("strong",[t._v("*")]),t._v("费用承担方")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择","value-key":"bearerName"},on:{change:function(a){return t.assumecost(e)}},model:{value:e.bearer,callback:function(a){t.$set(e,"bearer",a)},expression:"item.bearer"}},t._l(t.payerData,function(t,e){return a("el-option",{key:e,attrs:{label:t.bearerName,value:t}})}),1)],1),t._v(" "),a("i",{staticClass:"el-icon-remove delete_bank",on:{click:function(e){return t.delEnumerated(s)}}})])}),0):t._e(),t._v(" "),0!=t.settlementOrder.settleStatus?a("div",t._l(t.settleChargesList,function(e,s){return a("div",{key:s,staticClass:"clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("费用名称")]),t._v(" "),a("span",[t._v(t._s(e.costItem))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("费用金额(元)")]),t._v(" "),a("span",[t._v(t._s(e.costCharge))])]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{width:"37%"}},[a("span",{staticClass:"l"},[t._v("费用承担方")]),t._v(" "),a("span",[t._v(t._s(e.bearerName))])])])}),0):t._e(),t._v(" "),a("div",{staticClass:"title"},[t._v("备注")]),t._v(" "),a("div",[0==t.settlementOrder.settleStatus?a("input",{directives:[{name:"model",rawName:"v-model",value:t.addForm.remark,expression:"addForm.remark"}],staticStyle:{width:"50%","margin-left":"30px"},attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.addForm.remark},on:{input:function(e){e.target.composing||t.$set(t.addForm,"remark",e.target.value)}}}):t._e(),t._v(" "),0!=t.settlementOrder.settleStatus?a("span",{staticStyle:{width:"50%","margin-left":"30px"}},[t._v(t._s(t.settlementOrder.remark||"--"))]):t._e()]),t._v(" "),a("div",{staticClass:"total-detail cl"},[a("dl",[a("dt",[t._v("合同总金额(元)")]),t._v(" "),21===t.settlelistDetail.skuPriceType||22===t.settlelistDetail.skuPriceType?a("dd",[t._v("公式计价")]):a("dd",[t._v(t._s(t._f("numToCash")(t.settlelistDetail.skuTotalAmount)))])]),t._v(" "),a("dl",[a("dt",[t._v("已"+t._s(t.settleText)+"总金额(元)")]),t._v(" "),a("dd",[t._v(t._s(t._f("numToCash")(t.settlementOrder.hadPayAmount)))])]),t._v(" "),a("dl",[a("dt",[t._v("结算总金额(元)")]),t._v(" "),0==t.settlementOrder.settleStatus?a("dd",[t._v(t._s(t._f("numToCash")(t.addForm.settleTotalAmount)))]):t._e(),t._v(" "),0!=t.settlementOrder.settleStatus?a("dd",[t._v(t._s(t._f("numToCash")(t.settlementOrder.settleTotalAmount)))]):t._e()]),t._v(" "),a("hr"),t._v(" "),a("dl",[a("dt",[t._v("待"+t._s(t.settleText)+"(元)")]),t._v(" "),0==t.settlementOrder.settleStatus?a("dd",[t._v(t._s(t._f("numToCash")(t.addForm.settleBalance)))]):t._e(),t._v(" "),0!=t.settlementOrder.settleStatus?a("dd",[t._v(t._s(t._f("numToCash")(t.settlementOrder.settleBalance)))]):t._e()])])]),t._v(" "),0==t.settlementOrder.settleStatus?a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.createSettle()}}},[t._v("确认发起结算")])]):t._e(),t._v(" "),0!=t.settlementOrder.settleStatus?a("div",{staticClass:"footclose"},[50==t.settlementOrder.settleStatus?a("p",[a("span",[t._v("温馨提示：")]),t._v("财务复核已完成，请进行结款！")]):t._e(),t._v(" "),60==t.settlementOrder.settleStatus?a("p",[a("span",[t._v("温馨提示：")]),t._v("结算已完成！")]):t._e(),t._v(" "),40==t.settlementOrder.settleStatus||30==t.settlementOrder.settleStatus||20==t.settlementOrder.settleStatus||10==t.settlementOrder.settleStatus?a("p",[a("span",[t._v("温馨提示：")]),t._v("已发起结算，请等待财务复核！")]):t._e(),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.closeSettle(t.orderBoolObj.purchasedialog=!1)}}},[t._v("关闭")])]):t._e()])],1)},staticRenderFns:[]};var Ll={components:{gyPayment:yl,gyDelivery:Il,gyInvoice:Tl,gySettle:a("C7Lr")(Fl,Nl,!1,function(t){a("n1cg"),a("MLOM")},"data-v-31b1d6f6",null).exports,listStatistics:Ue},data:function(){return{payMethod:[{type:"货款",status:1},{type:"保证金",status:2},{type:"追加保证金",status:5}],isShowSearch:!1,orderlist:[],orders:{pageNo:1,pageSize:10},total:null,orderBoolObj:{purchaseDeliverydialog:!1,newSaledialog:!1,dialogVisibles:!1,collectTicketsdialog:!1,dialogVisible:!1,newReceiptsdialog:!1,salesSettledialog:!1,purchaseSettledialog:!1},orderlistDetail:{},settlelistDetail:{},paymentInfo:null,receiptInfo:{},orderUpstreamMessage:{},orderDownstreamMessage:{},allowedFunctionsId:0,getAllPageStatusCountObj:{}}},activated:function(){this.$route.meta.isBack||(this.orders={},this.getOrderlist()),this.$route.meta.isBack=!1},created:function(){this.getAllPageStatusCount(1)},methods:{purchaseClick:function(t,e,a){12!==a.approveStatus?34===t?this.receivables(a,4,null,e):35===t?this.salesDelivery(a,5,null,e):39===t&&this.ticketOpening(a,6,null,e):this.$message.warning("该合同锁定中，请在修改合同要素完成后再操作")},salesClick:function(t,e,a){12!==a.approveStatus?36===t?this.payment(a,1,null,e):37===t?this.purchaseDelivery(a,2,null,e):38===t&&this.collectTickets(a,3,null,e):this.$message.warning("该合同锁定中，请在修改合同要素完成后再操作")},orderClickDetail:function(t){this.$router.push({name:"orderDetails",query:{id:t.id,saleOrderId:t.saleOrderId,purchaseOrderId:t.purchaseOrderId}})},getOrderlist:function(){var t=this;this.$http.post(this.$api.order.orderList,this.orders).then(function(e){if(0===e.data.code){t.total=e.data.data.total,t.orderlist=e.data.data.rows;for(var a=0;a<t.orderlist.length;a++){if(null!==t.orderlist[a].downstreamInfo&&t.orderlist[a].downstreamInfo.operateDetailModel&&null!==t.orderlist[a].downstreamInfo.operateDetailModel.orderExecuteSubStatusModel&&null!==t.orderlist[a].downstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList)for(var s=0;s<t.orderlist[a].downstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList.length;s++)34===t.orderlist[a].downstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[s].id&&(t.orderlist[a].downstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[s].statueSeller=t.orderlist[a].collectionStatus),35===t.orderlist[a].downstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[s].id&&(t.orderlist[a].downstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[s].statueSeller=t.orderlist[a].saleDlvyStatus),39===t.orderlist[a].downstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[s].id&&(t.orderlist[a].downstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[s].statueSeller=t.orderlist[a].saleReceiptStatus);if(null!==t.orderlist[a].upstreamInfo&&t.orderlist[a].upstreamInfo.operateDetailModel&&null!==t.orderlist[a].upstreamInfo.operateDetailModel.orderExecuteSubStatusModel&&null!==t.orderlist[a].upstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList)for(var i=0;i<t.orderlist[a].upstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList.length;i++)36===t.orderlist[a].upstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[i].id&&(t.orderlist[a].upstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[i].statueBuyer=t.orderlist[a].paymentStatus),37===t.orderlist[a].upstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[i].id&&(t.orderlist[a].upstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[i].statueBuyer=t.orderlist[a].buyDlvyStatus),38===t.orderlist[a].upstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[i].id&&(t.orderlist[a].upstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList[i].statueBuyer=t.orderlist[a].buyReceiptStatus)}}}).catch(function(t){console.log(t)})},orderDetailList:function(t,e){var a=this;a.$http.get(a.$api.order.orderDetail+"/"+t.id).then(function(s){0===s.data.code?(a.orderUpstreamMessage=s.data.data.upstreamInfo,a.orderUpstreamMessage||(a.orderUpstreamMessage={}),a.orderDownstreamMessage=s.data.data.downstreamInfo,a.orderDownstreamMessage||(a.orderDownstreamMessage={}),1===e&&(a.orderBoolObj.dialogVisible=!0,a.orderBoolObj.purchaseDeliverydialog=!1,a.orderBoolObj.collectTicketsdialog=!1,a.orderBoolObj.newReceiptsdialog=!1,a.orderBoolObj.newSaledialog=!1,a.orderBoolObj.dialogVisibles=!1,a.$refs.paymentClick.initPaymentView(t.purchaseOrderId,t.sellerCompanyId)),2===e&&(a.orderBoolObj.dialogVisible=!1,a.orderBoolObj.purchaseDeliverydialog=!0,a.orderBoolObj.collectTicketsdialog=!1,a.orderBoolObj.newReceiptsdialog=!1,a.orderBoolObj.newSaledialog=!1,a.orderBoolObj.dialogVisibles=!1,a.$refs.deliveryClick.initBuyDeliveryView(t.purchaseOrderId)),3===e&&(a.orderBoolObj.dialogVisible=!1,a.orderBoolObj.purchaseDeliverydialog=!1,a.orderBoolObj.collectTicketsdialog=!0,a.orderBoolObj.newReceiptsdialog=!1,a.orderBoolObj.newSaledialog=!1,a.orderBoolObj.dialogVisibles=!1,a.$refs.invoiceClick.initCollectTicketsView(t.purchaseOrderId)),4===e&&(a.orderBoolObj.dialogVisible=!1,a.orderBoolObj.purchaseDeliverydialog=!1,a.orderBoolObj.collectTicketsdialog=!1,a.orderBoolObj.newReceiptsdialog=!0,a.orderBoolObj.newSaledialog=!1,a.orderBoolObj.dialogVisibles=!1,a.$refs.paymentClick.initReceiptView(t.saleOrderId,t.sellerCompanyId)),5===e&&(a.orderBoolObj.dialogVisible=!1,a.orderBoolObj.purchaseDeliverydialog=!1,a.orderBoolObj.collectTicketsdialog=!1,a.orderBoolObj.newReceiptsdialog=!1,a.orderBoolObj.newSaledialog=!0,a.orderBoolObj.dialogVisibles=!1,a.$refs.deliveryClick.initSaleDeliveryView(t.saleOrderId,t.productId)),6===e&&(a.orderBoolObj.dialogVisible=!1,a.orderBoolObj.purchaseDeliverydialog=!1,a.orderBoolObj.collectTicketsdialog=!1,a.orderBoolObj.newReceiptsdialog=!1,a.orderBoolObj.newSaledialog=!1,a.orderBoolObj.dialogVisibles=!0,a.$refs.invoiceClick.initInvoiceView(t.purchaseOrderId,t.saleOrderId,t.productId,t.prodName,t.buyerCompanyId))):a.$message.error(s.data.message)})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},search:function(){0===this.orders.bizType&&(this.orders.bizType=null),null!==this.orders.endCreatedDates&&void 0!==this.orders.endCreatedDates?this.orders.endCreatedDate=this.orders.endCreatedDates+86399e3:this.orders.endCreatedDate=null,this.getOrderlist()},handleCurrentChange:function(t){this.orders.pageNo=t,this.getOrderlist()},payment:function(t,e,a,s){1===s.valid?(this.allowedFunctionsId=36,this.$tools.hasBizAuth("to_payment")?(this.orderDetailList(t,e),this.orderlistDetail=t,this.orderlistDetail.allowedFunctionsId=this.allowedFunctionsId):this.$message.error("没有付款操作权限")):this.$message.warning("暂时无法执行该操作")},purchaseDelivery:function(t,e,a,s){1===s.valid?(this.allowedFunctionsId=37,this.$tools.hasBizAuth("to_buy_dlvy")?(this.orderDetailList(t,e),this.orderlistDetail=t,this.orderlistDetail.allowedFunctionsId=this.allowedFunctionsId):this.$message.error("没有采购交割操作权限")):this.$message.warning("暂时无法执行该操作")},collectTickets:function(t,e,a,s){this.$refs.invoiceClick&&this.$refs.invoiceClick.initUploadFileData(),1===s.valid?(this.allowedFunctionsId=38,this.$tools.hasBizAuth("to_receipt_invoice")?(this.orderDetailList(t,e),this.orderlistDetail=t,this.orderlistDetail.allowedFunctionsId=this.allowedFunctionsId):this.$message.error("没有收票操作权限")):this.$message.warning("暂时无法执行该操作")},receivables:function(t,e,a,s){1===s.valid?(this.allowedFunctionsId=34,this.$tools.hasBizAuth("to_collection")?(this.orderDetailList(t,e),this.orderlistDetail=t,this.orderlistDetail.allowedFunctionsId=this.allowedFunctionsId):this.$message.error("没有收款操作权限")):this.$message.warning("暂时无法执行该操作")},salesDelivery:function(t,e,a,s){1===s.valid?(this.allowedFunctionsId=35,this.$tools.hasBizAuth("to_sale_dlvy")?(this.orderDetailList(t,e),this.orderlistDetail=t,this.orderlistDetail.allowedFunctionsId=this.allowedFunctionsId):this.$message.error("没有销售交割操作权限")):this.$message.warning("暂时无法执行该操作")},ticketOpening:function(t,e,a,s){1===s.valid?(this.allowedFunctionsId=39,this.$tools.hasBizAuth("to_make_invoice")?(this.orderDetailList(t,e),this.orderlistDetail=t,this.orderlistDetail.allowedFunctionsId=this.allowedFunctionsId):this.$message.error("没有开票操作权限")):this.$message.warning("暂时无法执行该操作")},purchaseSettle:function(t,e){12!==e.approveStatus?2!==e.buySettleStatus?this.$refs.settleClick.initPurchaseView(t,e):this.$message.warning("暂时无法执行该操作"):this.$message.warning("该合同锁定中，请在修改合同要素完成后再操作")},salesSettle:function(t,e){12!==e.approveStatus?2!==e.saleSettleStatus?this.$refs.settleClick.initSaleView(t,e):this.$message.warning("暂时无法执行该操作"):this.$message.warning("该合同锁定中，请在修改合同要素完成后再操作")},getAllPageStatusCount:function(t){var e=this;this.$http.get(this.$api.order.allPageStatusCount+"?countType="+t).then(function(t){0===t.data.code&&(e.getAllPageStatusCountObj=t.data.data)}).catch(function(t){console.log(t)})}}},Pl={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderList"},[a("div",{staticClass:"search-wrapper"},[a("div",{staticClass:"search-form clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orders.id,expression:"orders.id"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.orders.id},on:{input:function(e){e.target.composing||t.$set(t.orders,"id",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orders.prodName,expression:"orders.prodName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.orders.prodName},on:{input:function(e){e.target.composing||t.$set(t.orders,"prodName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orders.businessManagerName,expression:"orders.businessManagerName"}],attrs:{type:"text",placeholder:"请输入业务操作人"},domProps:{value:t.orders.businessManagerName},on:{input:function(e){e.target.composing||t.$set(t.orders,"businessManagerName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("执行操作人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orders.executiveName,expression:"orders.executiveName"}],attrs:{type:"text",placeholder:"请输入执行操作人"},domProps:{value:t.orders.executiveName},on:{input:function(e){e.target.composing||t.$set(t.orders,"executiveName",e.target.value)}}}),t._v(" "),t.isShowSearch?t._e():a("span",{staticClass:"searchicon",on:{click:function(e){return t.search()}}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),t.isShowSearch?[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orders.sellerCompanyName,expression:"orders.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司"},domProps:{value:t.orders.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.orders,"sellerCompanyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orders.buyerCompanyName,expression:"orders.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司"},domProps:{value:t.orders.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.orders,"buyerCompanyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orders.targetCorpName,expression:"orders.targetCorpName"}],attrs:{type:"text",placeholder:"请输入我方公司"},domProps:{value:t.orders.targetCorpName},on:{input:function(e){e.target.composing||t.$set(t.orders,"targetCorpName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择业务类型"},model:{value:t.orders.bizType,callback:function(e){t.$set(t.orders,"bizType",e)},expression:"orders.bizType"}},t._l(t.$constant.bizType4CreateEss,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[t._v("创建时间")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.orders.staCreatedDate,callback:function(e){t.$set(t.orders,"staCreatedDate",e)},expression:"orders.staCreatedDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.orders.endCreatedDates,callback:function(e){t.$set(t.orders,"endCreatedDates",e)},expression:"orders.endCreatedDates"}})],1)]),t._v(" "),t.isShowSearch?a("span",{staticClass:"searchicon",on:{click:function(e){return t.search()}}},[a("i",{staticClass:"iconfont icon-search"})]):t._e()])]:t._e()],2),t._v(" "),a("span",{staticClass:"search-btn",on:{click:t.ShowSearch}},[t._v("高级搜索"),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderlist}},[a("el-table-column",{attrs:{fixed:"",label:"ID\n产品名称","show-overflow-tooltip":!0,width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"wid-overflow"},[a("span",{staticStyle:{color:"#4A90E2",cursor:"pointer"},on:{click:function(a){return t.orderClickDetail(e.row)}}},[t._v(t._s(e.row.id))]),a("br"),t._v(" "),a("span",{staticStyle:{color:"#4A90E2",cursor:"pointer"},on:{click:function(a){return t.orderClickDetail(e.row)}}},[t._v(t._s(e.row.prodName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类别",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?a("span",[t._v("采购"),a("br"),t._v("销售")]):t._e(),t._v(" "),2===e.row.contractType?a("span",[t._v("采购")]):t._e(),t._v(" "),3===e.row.contractType?a("span",[t._v("销售")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上游公司\n下游公司",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"bottom","visible-arrow":"false"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.row.sellerCompanyName)),a("br"),t._v(t._s(e.row.buyerCompanyName))]),t._v(" "),a("div",{staticClass:"wid-overflow"},[a("span",[t._v(t._s(e.row.sellerCompanyName))]),e.row.sellerCompanyName?a("br"):t._e(),t._v(" "),a("span",[t._v(t._s(e.row.buyerCompanyName))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.upstreamInfo&&e.row.upstreamInfo.operateDetailModel&&null!==e.row.upstreamInfo.operateDetailModel.orderExecuteSubStatusModel?a("span",[t._v(t._s(e.row.upstreamInfo.operateDetailModel.orderExecuteSubStatusModel.sellerMessage))]):t._e(),e.row.upstreamInfo?a("br"):t._e(),t._v(" "),e.row.downstreamInfo&&e.row.downstreamInfo.operateDetailModel&&null!==e.row.downstreamInfo.operateDetailModel.orderExecuteSubStatusModel?a("span",[t._v(t._s(e.row.downstreamInfo.operateDetailModel.orderExecuteSubStatusModel.buyerMessage))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"我方公司",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.targetCorpAbbrName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购交割日期\n销售交割日期",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.planBuyDlvyDate))]),e.row.planBuyDlvyDate?a("br"):t._e(),t._v(" "),a("span",[t._v(t._s(e.row.planSaleDlvyDate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"总金额(元)","class-name":"amount-right-el",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?[21===e.row.buySkuPriceType||22===e.row.buySkuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(e.row.buyTotal)))]),a("br")]:t._e(),t._v(" "),e.row.saleOrderId?[21===e.row.saleSkuPriceType||22===e.row.saleSkuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(e.row.saleTotal)))])]:t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"数量(吨)","class-name":"amount-right-el",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?a("span",[t._v(t._s(t._f("numToQuantity")(e.row.buySkuQuantity)))]):t._e(),e.row.purchaseOrderId?a("br"):t._e(),t._v(" "),e.row.saleOrderId?a("span",[t._v(t._s(t._f("numToQuantity")(e.row.saleSkuQuantity)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"交叉交割",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.saleCrossDeliveryFlag?a("span",{staticStyle:{display:"inline-block"}},[a("i",{staticClass:"el-icon-success",staticStyle:{color:"#4C97FC"}})]):t._e(),0===e.row.saleCrossDeliveryFlag?a("span",{staticStyle:{display:"inline-block"}},[a("i",{staticClass:"el-icon-remove-outline",staticStyle:{color:"#D9D9D9"}})]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"业务操作人",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.businessManagerName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"执行操作人",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.executiveName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"采购合同编号\n销售合同编号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.phsContractCode))]),e.row.phsContractCode?a("br"):t._e(),t._v(" "),a("span",[t._v(t._s(e.row.saleContractCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.createdDate,1)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"266"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.upstreamInfo&&null!==e.row.upstreamInfo.operateDetailModel.orderExecuteSubStatusModel?a("div",{staticStyle:{display:"inline-block",width:"100%","padding-left":"0px"}},[t._l(e.row.upstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList,function(s,i){return a("span",{key:i,staticStyle:{display:"inline-block","margin-left":"3px"}},[null!==s.statueSeller?a("button",{staticClass:"bgc",class:{notComplete:1===s.valid,notOperable:0===s.valid},staticStyle:{width:"55px"},on:{click:function(a){return t.salesClick(s.id,s,e.row)}}},[t._v(t._s(s.button)+"\n                            ")]):t._e()])}),t._v(" "),a("span",{staticStyle:{display:"inline-block","margin-left":"3px"}},[a("button",{staticClass:"bgc notComplete",class:{notComplete:1===e.row.buySettleStatus,notOperable:2===e.row.buySettleStatus},staticStyle:{width:"55px"},on:{click:function(a){return t.purchaseSettle(e.row.purchaseOrderId,e.row)}}},[t._v("采购结算")])])],2):t._e(),t._v(" "),null!==e.row.downstreamInfo&&null!==e.row.downstreamInfo.operateDetailModel.orderExecuteSubStatusModel?a("div",{staticStyle:{display:"inline-block",width:"100%","padding-left":"0px"}},[t._l(e.row.downstreamInfo.operateDetailModel.orderExecuteSubStatusModel.allowedFunctionsModelList,function(s,i){return a("span",{key:i,staticStyle:{display:"inline-block","margin-left":"3px"}},[a("button",{staticClass:"bgc",class:{notComplete:1===s.valid,notOperable:0===s.valid},staticStyle:{width:"55px"},on:{click:function(a){return t.purchaseClick(s.id,s,e.row)}}},[t._v(t._s(s.button)+"\n                            ")])])}),t._v(" "),a("span",{staticStyle:{display:"inline-block","margin-left":"3px"}},[a("button",{staticClass:"bgc notComplete",class:{notComplete:1===e.row.saleSettleStatus,notOperable:2===e.row.saleSettleStatus},staticStyle:{width:"55px"},on:{click:function(a){return t.salesSettle(e.row.saleOrderId,e.row)}}},[t._v("销售结算")])])],2):t._e()]}}])})],1),t._v(" "),a("listStatistics",{on:{toggleTabs:t.getAllPageStatusCount}},[a("div",{staticClass:"list-statistics-item"},[a("div",{staticClass:"list-statistics-item-l"},[a("span",[t._v("采购数量(吨)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.approvaledBuySkuQuantity)))])]),t._v(" "),a("div",{staticClass:"list-statistics-item-l"},[a("span",[t._v("采购交割(吨)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.approvaledBuyDeliveryQuantityCount)))])]),t._v(" "),a("div",{staticClass:"list-statistics-item-l"},[a("span",[t._v("付款金额(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.getAllPageStatusCountObj.approvaledBuyPayTotalAll)))])]),t._v(" "),a("div",{staticClass:"list-statistics-item-l"},[a("span",[t._v("销售数量(吨)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.approvaledSellSkuQuantity)))])]),t._v(" "),a("div",{staticClass:"list-statistics-item-l"},[a("span",[t._v("销售交割(吨)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.approvaledSellDeliveryQuantityCount)))])]),t._v(" "),a("div",{staticClass:"list-statistics-item-l"},[a("span",[t._v("收款金额(元)")]),a("span",{staticClass:"span-money"},[t._v(t._s(t._f("numToCash")(t.getAllPageStatusCountObj.approvaledSellPayTotalAll)))])])])])],1),t._v(" "),a("gy-payment",{ref:"paymentClick",attrs:{"order-data":t.orderBoolObj,"order-ids":t.orderlistDetail,"downstream-info":t.orderDownstreamMessage,"upstream-info":t.orderUpstreamMessage},on:{ivoiceList:t.getOrderlist}}),t._v(" "),a("gy-delivery",{ref:"deliveryClick",attrs:{"order-data":t.orderBoolObj,"order-ids":t.orderlistDetail},on:{ivoiceList:t.getOrderlist}}),t._v(" "),a("gy-invoice",{ref:"invoiceClick",attrs:{"order-data":t.orderBoolObj,"order-ids":t.orderlistDetail,"downstream-info":t.orderDownstreamMessage,"upstream-info":t.orderUpstreamMessage},on:{ivoiceList:t.getOrderlist}}),t._v(" "),a("gy-settle",{ref:"settleClick",attrs:{"order-data":t.orderBoolObj},on:{ivoiceList:t.getOrderlist}}),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.orders.pageNo,"page-size":t.orders.pageSize,total:t.total},on:{"update:currentPage":function(e){return t.$set(t.orders,"pageNo",e)},"update:current-page":function(e){return t.$set(t.orders,"pageNo",e)},"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var Al=a("C7Lr")(Ll,Pl,!1,function(t){a("FvBd"),a("j+hV")},"data-v-587962c1",null).exports,$l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"step-box box step-active",class:{active:t.isActive,double:t.doubleLength,done:t.isDone}},[a("div",{staticClass:"wrapper",class:{right:t.isRight}},[a("div",{staticClass:"text-box"},[a("div",{staticClass:"text"},[t._v(t._s(t.step))])]),t._v(" "),t.showLine?a("div",{staticClass:"line"}):t._e()]),t._v(" "),a("div",{staticClass:"step-text-box"},[t._t("default")],2)])},staticRenderFns:[]};var Ol={props:{orderDetail:{default:{upstreamInfo:{},downstreamInfo:{}}},settlementBuyList:{default:[]},settlementSellList:{default:[]}},data:function(){return{}},methods:{showDetailBuy:function(t){var e={contEssId:t.contractEssenceId,purchaseOrderId:t.purchaseOrderId,targetBizId:t.id,tabsIndex:this.$route.query.saleOrderId};this.$router.push({name:"settlementDetailBuy",query:e})},buyDownload:function(t){console.log(t);var e={orderSettleId:t.id,orderId:t.purchaseOrderId,contractEssenceId:t.contractEssenceId},a="采购结算清单-"+this.$tools.parseDate(new Date)+"-"+t.id+".xls";this.$tools.exporttoExcel(this,this.$api.settlement.purchaseReport,e,a)},sellDownload:function(t){var e={orderSettleId:t.id,orderId:t.saleOrderId,contractEssenceId:t.contractEssenceId},a="销售结算清单-"+this.$tools.parseDate(new Date)+"-"+t.id+".xls";this.$tools.exporttoExcel(this,this.$api.settlement.saleReport,e,a)},showDetailSale:function(t){var e={contEssId:t.contractEssenceId,saleOrderId:this.$route.query.id,targetBizId:t.id,tabsIndex:this.$route.query.saleOrderId};this.$router.push({name:"settlementDetailSell",query:e})}}},El={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.orderDetail.upstreamInfo?a("div",[a("div",{staticClass:"title1"},[t._v("采购结算")]),t._v(" "),a("div",{staticClass:"contract-wrapper"},[a("div",[a("span",[t._v("合同数量(吨)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.orderDetail.upstreamInfo.skuQuantity)))])]),t._v(" "),a("div",[a("span",[t._v("合同单价(元/吨)")]),t._v(" "),21===t.orderDetail.upstreamInfo.skuPriceType||22===t.orderDetail.upstreamInfo.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.orderDetail.upstreamInfo.skuPrice,!0)))])]),t._v(" "),a("div",[a("span",[t._v("合同金额(元)")]),t._v(" "),21===t.orderDetail.upstreamInfo.skuPriceType||22===t.orderDetail.upstreamInfo.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.orderDetail.upstreamInfo.totalAmount)))])])]),t._v(" "),a("div",{staticClass:"order-skjl",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"gy-table j-table"},[a("el-table",{attrs:{data:t.settlementBuyList}},[a("el-table-column",{attrs:{fixed:"",label:"编号",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}],null,!1,773642443)}),t._v(" "),a("el-table-column",{attrs:{label:"结算价(元/吨)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.settlementPrice,!0)))])]}}],null,!1,2566410562)}),t._v(" "),a("el-table-column",{attrs:{label:"结算数量(吨)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.settlementQuantity)))])]}}],null,!1,1751347052)}),t._v(" "),a("el-table-column",{attrs:{label:"结算金额(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.settlementAmount)))])]}}],null,!1,3733987705)}),t._v(" "),a("el-table-column",{attrs:{label:"已付款数量(元)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[21===e.row.skuPriceType||22===e.row.skuPriceType?a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.alreadyPaymentQuantity)))]):a("div",[t._v("--")])]}}],null,!1,980889022)}),t._v(" "),a("el-table-column",{attrs:{label:"已付款总额(元)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.hadPayAmount)))])]}}],null,!1,819850737)}),t._v(" "),a("el-table-column",{attrs:{label:"结算总金额(元)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.settleTotalAmount)))])]}}],null,!1,1695077737)}),t._v(" "),a("el-table-column",{attrs:{label:"结算差额(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.settleBalance)))])]}}],null,!1,1470942625)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("orderSettlementStatus")(e.row.settleStatus)))])]}}],null,!1,2025479043)}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.createdDate)))])]}}],null,!1,2941893791)}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.showDetailBuy(e.row)}}},[t._v("查看")]),t._v(" "),a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.buyDownload(e.row)}}},[t._v("下载")])]}}],null,!1,812223822)})],1)],1)])]):t._e(),t._v(" "),t.orderDetail.downstreamInfo?a("div",[a("div",{staticClass:"title1"},[t._v("销售结算")]),t._v(" "),a("div",{staticClass:"contract-wrapper"},[a("div",[a("span",[t._v("合同数量(吨)")]),a("span",[t._v(t._s(t._f("numToQuantity")(t.orderDetail.downstreamInfo.skuQuantity)))])]),t._v(" "),a("div",[a("span",[t._v("合同单价(元/吨)")]),t._v(" "),21===t.orderDetail.downstreamInfo.skuPriceType||22===t.orderDetail.downstreamInfo.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.orderDetail.downstreamInfo.skuPrice,!0)))])]),t._v(" "),a("div",[a("span",[t._v("合同金额(元)")]),t._v(" "),21===t.orderDetail.downstreamInfo.skuPriceType||22===t.orderDetail.downstreamInfo.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.orderDetail.downstreamInfo.totalAmount)))])])]),t._v(" "),a("div",{staticClass:"order-skjl",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"gy-table j-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.settlementSellList}},[a("el-table-column",{attrs:{fixed:"",label:"编号",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}],null,!1,773642443)}),t._v(" "),a("el-table-column",{attrs:{label:"结算价(元/吨)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.settlementPrice,!0)))])]}}],null,!1,2566410562)}),t._v(" "),a("el-table-column",{attrs:{label:"结算数量(吨)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.settlementQuantity)))])]}}],null,!1,1751347052)}),t._v(" "),a("el-table-column",{attrs:{label:"结算金额(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.settlementAmount)))])]}}],null,!1,3733987705)}),t._v(" "),a("el-table-column",{attrs:{label:"已收款数量(元)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[21===e.row.skuPriceType||22===e.row.skuPriceType?a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.alreadyPaymentQuantity)))]):a("div",[t._v("--")])]}}],null,!1,980889022)}),t._v(" "),a("el-table-column",{attrs:{label:"已收款总额(元)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.hadPayAmount)))])]}}],null,!1,819850737)}),t._v(" "),a("el-table-column",{attrs:{label:"结算总金额(元)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.settleTotalAmount)))])]}}],null,!1,1695077737)}),t._v(" "),a("el-table-column",{attrs:{label:"结算差额(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.settleBalance)))])]}}],null,!1,1470942625)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("orderSettlementStatus")(e.row.settleStatus)))])]}}],null,!1,2025479043)}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.createdDate)))])]}}],null,!1,2941893791)}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.showDetailSale(e.row)}}},[t._v("查看")]),t._v(" "),a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.sellDownload(e.row)}}},[t._v("下载")])]}}],null,!1,2582067555)})],1)],1)])]):t._e()])},staticRenderFns:[]};var Bl={name:"orderDetails",components:{dialogImg:xl,step:a("C7Lr")({name:"step-active",props:{step:"",isRight:"",isActive:"",isDone:"",doubleLength:"",showLine:{default:!1}}},$l,!1,function(t){a("+fKP")},"data-v-4a9fa40a",null).exports,contSell:Dn,contBuy:Fn,gyFileView:Ke,settlement:a("C7Lr")(Ol,El,!1,function(t){a("2Qbm")},"data-v-60e6a0c4",null).exports},data:function(){return{stampList:[],isFormula:!1,isFormulaPrice:!1,payStatus:2,stepArr:[],id:null,purchaseOrderId:null,saleOrderId:null,orderDetailList:[],paymentReceivables:[],collectionList:[],paymentRece:[],ticketCollectingInformationList:[],marketingList:[],purchaseList:[],saleList:[],collectTicketReceipt:[],collectTickets:[],applyList:{receiptVoucher:null},collectList:{receiptInvoiceUrlList:[]},paymentNwes:[],newReceiptsList:{erpCollectionFileModelList:[]},deliveryView:[],createBuyDelive:{},createSellDelive:{},creatPaymentForm:{payInfoList:[]},icon:a("GDz2"),entryoptions:[{id:0,label:"在途中"},{id:1,label:"已收到"}],entryoptionTwo:[{id:0,label:"先开销项发票"}],signUnderLineData:{invoiceModelList:[]},ComentList:{receiptList:[]},stampSearch:{pageNo:1,pageSize:10,total:null,essenceId:this.$route.query.id},homeFromFlg:0,homeBizType:0,noInvoice:!1,noCollectTickets:!1,buyunilateralTransaction:!1,saleunilateralTransaction:!1,erpCollectionFileModelList:[],tabsIndex:0,paymentShow:!1,receivablesShow:!1,invoiceShow:!1,collectTicketsShow:!1,dataRemark:null,collectTicketsInvoices:[],settlementBuyList:[],settlementSellList:[]}},mounted:function(){this.purchaseOrderId=this.$route.query.purchaseOrderId,this.saleOrderId=this.$route.query.saleOrderId,this.id=this.$route.query.id,this.orderDetail(),this.sale(),this.purchase(),this.collectTicketsSales(),this.collectTicketSreceipt(),this.paymentReceiv(),this.paymentColl(),this.getStampList(),this.getSettlementInfo()},created:function(){1!==this.$route.query.homeFromFlg&&"1"!==this.$route.query.homeFromFlg||(this.homeFromFlg=1,this.homeBizType=this.$route.query.homeBizType,this.homeBizType),this.$route.query.tabsIndex&&(this.tabsIndex=this.$route.query.tabsIndex)},methods:{tabClick:function(t){this.tabsIndex=t},lookRecelive:function(t){this.$router.push({name:"paymentSell",query:{homeBizType:5,contEssId:this.id,collId:t.id}})},gotPayInfo:function(t){this.$router.push({name:"paymentBuy",query:{homeBizType:5,doneFlg:1,contEssId:this.id,payId:t.row.id,purchaseOrderId:this.purchaseOrderId}})},InvoiceCheck:function(t){this.$router.push({name:"auditOperation",query:{purchaseOrderId:this.$route.query.purchaseOrderId,salesOrderId:this.$route.query.saleOrderId,invoiceId:t.id,id:this.$route.query.id}})},orderDetail:function(){var t=this;t.$http.get(t.$api.order.orderDetail+"/"+t.id).then(function(e){0===e.data.code&&(t.orderDetailList=e.data.data,1!==t.orderDetailList.contractType&&2!==t.orderDetailList.contractType||(t.buyunilateralTransaction=!0,21!==t.orderDetailList.upstreamInfo.skuPriceType&&22!==t.orderDetailList.upstreamInfo.skuPriceType||(t.isFormula=!0)),1!==t.orderDetailList.contractType&&3!==t.orderDetailList.contractType||(t.saleunilateralTransaction=!0,21!==t.orderDetailList.downstreamInfo.skuPriceType&&22!==t.orderDetailList.downstreamInfo.skuPriceType||(t.isFormulaPrice=!0)))})},showImgFk:function(t){this.$refs.contFileView.open4MultiFile(t)},jumps:function(t){var e={contEssId:t.contractEssenceId,todoId:t.todoId,dlvItemId:t.deliveryItemId,homeFromFlg:1,homeBizType:8,doneFlg:1};this.$router.push({name:"deliveryPurchaseView",query:e})},jump:function(t){var e={contEssId:t.contractEssenceId,todoId:t.todoId,dlvItemId:t.deliveryItemId,homeFromFlg:1,homeBizType:8,doneFlg:1};this.$router.push({name:"deliverySalesView",query:e})},paymentReceiv:function(){var t=this,e={purchaseOrderId:this.purchaseOrderId};t.$http.post(t.$api.payment.getDetail,e).then(function(e){0===e.data.code&&(t.paymentRece=e.data.data)})},paymentColl:function(){var t=this;t.$http.get(t.$api.payment.getDetailCollection+t.saleOrderId).then(function(e){0===e.data.code&&(t.collectionList=e.data.data)})},purchase:function(){var t=this;t.$http.get(t.$api.delivery.getBuyDetail+"/"+t.purchaseOrderId).then(function(e){0===e.data.code&&(t.purchaseList=e.data.data)})},sale:function(){var t=this;t.$http.get(t.$api.delivery.getSellDetail+"/"+t.saleOrderId).then(function(e){0===e.data.code&&(t.saleList=e.data.data)})},collectTicketSreceipt:function(){var t=this;null===t.purchaseOrderId&&(t.noCollectTickets=!0),null!==t.purchaseOrderId&&t.$http.get(t.$api.invoice.getDetail+"/"+t.purchaseOrderId).then(function(e){0===e.data.code&&(void 0!==e.data.data?t.collectTicketReceipt=e.data.data:t.noCollectTickets=!0)})},collectTicketsSales:function(){var t=this;null===t.saleOrderId&&(t.noInvoice=!0),null!==t.saleOrderId&&t.$http.get(t.$api.invoice.getDetails+"/"+t.saleOrderId).then(function(e){0===e.data.code&&(void 0!==e.data.data?(t.collectTickets=e.data.data,t.collectTicketsInvoices=e.data.data.invoices):t.noInvoice=!0)})},getStampList:function(){var t=this;this.$http.post(this.$api.stamp.stampList,this.stampSearch).then(function(e){if(0===e.data.code)return t.stampList=e.data.data.list,void(t.stampSearch.total=e.data.data.total);t.$message.error(e.data.message)})},handleCurrentChange:function(t){this.search.pageNo=t,this.getStampList()},lookStamp:function(t){var e={id:t,saleOrderId:this.$route.query.saleOrderId,purchaseOrderId:this.$route.query.purchaseOrderId};this.$router.push({name:"stampDetail",query:e})},goStamp:function(t){var e={orderDetailList:this.orderDetailList};this.$router.push({name:"createStamp",query:e})},imgErr:function(t){this.$message({message:t+"暂无数据",type:"warning"})},showImgs:function(t,e){switch(t){case 1:case 2:case 3:case 4:this.fileList=e;break;default:this.fileList=[]}this.$refs.contFileView.open4MultiFile(this.fileList)},showImg:function(t,e){var a=[];switch(e){case 1:this.erpCollectionFileModelList=t;break;case 3:this.erpCollectionFileModelList=this.saleList.deliveryEntityList[t].erpFileContractModelList;break;case 4:this.erpCollectionFileModelList=this.saleList.deliveryEntityList[t].erpGoodFileModelList;break;case 5:this.collectTicketReceipt.receiptInvoiceUrlList.forEach(function(t){a.push({fileUrl:t})}),this.erpCollectionFileModelList=a;break;case 6:t.split(",").forEach(function(t){a.push({fileUrl:t})}),this.erpCollectionFileModelList=a;break;case 7:this.erpCollectionFileModelList=this.collectionList.erpCollectionModelList[t].erpCollectionFileModelList;break;case 8:this.orderDetailList.upstreamInfo.fileAttachList.forEach(function(t){a.push({fileUrl:t.filepath})}),this.erpCollectionFileModelList=a;break;case 9:this.orderDetailList.upstreamInfo.fileDocUrl.forEach(function(t){a.push({fileUrl:t})}),this.erpCollectionFileModelList=a;break;case 10:this.orderDetailList.upstreamInfo.fileAttachCertifiedList.forEach(function(t){a.push({fileUrl:t.filepath})}),this.erpCollectionFileModelList=a;break;case 11:this.orderDetailList.downstreamInfo.fileAttachList.forEach(function(t){a.push({fileUrl:t.filepath})}),this.erpCollectionFileModelList=a;break;case 12:this.orderDetailList.downstreamInfo.fileDocUrl.forEach(function(t){a.push({fileUrl:t})}),this.erpCollectionFileModelList=a;break;case 13:this.orderDetailList.downstreamInfo.fileAttachCertifiedList.forEach(function(t){a.push({fileUrl:t.filepath})}),this.erpCollectionFileModelList=a;break;case 14:this.collectTickets.collectionFileList.forEach(function(t){a.push({fileUrl:t})}),this.erpCollectionFileModelList=a;break;case 15:this.erpCollectionFileModelList=this.collectionList.erpCollectionModelList[t].erpBuyerPaymentFileModelList;break;case 16:this.collectTickets.invoiceVoucherList.forEach(function(t){a.push({fileUrl:t})}),this.erpCollectionFileModelList=a;break;default:this.erpCollectionFileModelList=[]}this.$refs.contFileView.open(this.erpCollectionFileModelList)},buyLinkInvoice:function(){this.$router.push({name:"financialConfirmation",query:{id:this.id,saleOrderId:this.saleOrderId,purchaseOrderId:this.purchaseOrderId,doneFlg:1}})},sellLinkInvoice:function(){this.$router.push({name:"auditOperation",query:{id:this.id,saleOrderId:this.saleOrderId,purchaseOrderId:this.purchaseOrderId,doneFlg:1}})},getSettlementInfo:function(){var t=this,e={orderType:1,contractEssenceId:t.id,pageNo:1,pageSize:100};t.$http.post(t.$api.settlement.getSettleList,e).then(function(e){0===e.data.code?t.settlementBuyList=e.data.data.rows:t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)}),e={orderType:2,contractEssenceId:t.id,pageNo:1,pageSize:100},t.$http.post(t.$api.settlement.getSettleList,e).then(function(e){0===e.data.code?t.settlementSellList=e.data.data.rows:t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})}}},Ml={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderDetails"},[t._m(0),t._v(" "),a("div",{staticClass:"orderDetailsTop"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.id))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("执行操作人")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.executiveName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("span",[t._v(t._s(t._f("businessTradeType")(t.orderDetailList.bizType))+" "),void 0!==t.orderDetailList.contractType?a("span",{staticClass:"contractType"},[t._v(t._s(t._f("contractTradeType")(t.orderDetailList.contractType,t.orderDetailList.bizType)))]):t._e()])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.targetCorpName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.prodName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交易类型")]),t._v(" "),a("span",[t._v(t._s(t._f("contractTransactionTypeList")(t.orderDetailList.transactionType)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.businessManagerName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务组")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.organizationName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建时间")]),t._v(" "),a("span",[t._v(t._s(t._f("date")(t.orderDetailList.createdDate,1)))])])]),t._v(" "),a("div",{staticClass:"orderDetailsCenter"},[a("div",{staticClass:"orderDetailsTabs"},[a("ul",[a("li",{class:{active:0===t.tabsIndex},on:{click:function(e){return t.tabClick(0)}}},[t._v("合同要素")]),t._v(" "),a("li",{class:{active:1===t.tabsIndex},on:{click:function(e){return t.tabClick(1)}}},[t._v("合同")]),t._v(" "),a("li",{class:{active:2===t.tabsIndex},on:{click:function(e){return t.tabClick(2)}}},[t._v("收付款")]),t._v(" "),a("li",{class:{active:3===t.tabsIndex},on:{click:function(e){return t.tabClick(3)}}},[t._v("交割")]),t._v(" "),a("li",{class:{active:4===t.tabsIndex},on:{click:function(e){return t.tabClick(4)}}},[t._v("发票")]),t._v(" "),a("li",{class:{active:5===t.tabsIndex},on:{click:function(e){return t.tabClick(5)}}},[t._v("用印申请")]),t._v(" "),a("li",{class:{active:6===t.tabsIndex},on:{click:function(e){return t.tabClick(6)}}},[t._v("结算")])])]),t._v(" "),0===t.tabsIndex?a("div",[a("div",{staticClass:"pay-wrapper"},[t.buyunilateralTransaction?a("div",[a("div",{staticClass:"title1"},[t._v("采购信息")]),t._v(" "),a("cont-sell",{attrs:{list:t.orderDetailList}})],1):t._e(),t._v(" "),t.saleunilateralTransaction?a("div",[a("div",{staticClass:"title1"},[t._v("销售信息")]),t._v(" "),a("cont-buy",{attrs:{list:t.orderDetailList}})],1):t._e()])]):t._e(),t._v(" "),1===t.tabsIndex?a("div",{staticClass:"orderDetailSalesPurchase"},[a("div",{staticClass:"pay-wrapper"},[t.buyunilateralTransaction?a("div",[a("div",{staticClass:"title1"},[t._v("采购合同信息")]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("采购合同编号")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.upstreamInfo.contractCode))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("采购合同")]),t._v(" "),t.orderDetailList.upstreamInfo.fileAttachList&&0!==t.orderDetailList.upstreamInfo.fileAttachList.length?a("span",{on:{click:function(e){return t.showImg("",8)}}},[a("i",{staticClass:"iconfont icon-photo"})]):t.orderDetailList.upstreamInfo.fileDocUrl&&0!==t.orderDetailList.upstreamInfo.fileDocUrl.length?a("span",{on:{click:function(e){return t.showImg("",9)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建合同备注")]),t._v(" "),a("span",[t._v(t._s(t._f("showline")(t.orderDetailList.buyRemark)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("盖章合同")]),t._v(" "),t.orderDetailList.upstreamInfo.fileAttachCertifiedList&&0!==t.orderDetailList.upstreamInfo.fileAttachCertifiedList.length?a("span",{on:{click:function(e){return t.showImg("",10)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("盖章合同备注")]),t._v(" "),a("div",{staticClass:"text-overflow"},[t._v(t._s(t.orderDetailList.upstreamInfo.executeRemarks||"--"))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("纸质合同号")]),t._v(" "),a("span",[t._v(t._s(t._f("showline")(t.orderDetailList.upstreamInfo.planNumber)))])])]):t._e(),t._v(" "),t.saleunilateralTransaction?a("div",[a("div",{staticClass:"title1"},[t._v("销售合同信息")]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("销售合同编号")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.downstreamInfo.contractCode))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("销售合同")]),t._v(" "),t.orderDetailList.downstreamInfo.fileAttachList&&0!==t.orderDetailList.downstreamInfo.fileAttachList.length?a("span",{on:{click:function(e){return t.showImg("",11)}}},[a("i",{staticClass:"iconfont icon-photo"})]):t.orderDetailList.downstreamInfo.fileDocUrl&&0!==t.orderDetailList.downstreamInfo.fileDocUrl.length?a("span",{on:{click:function(e){return t.showImg("",12)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建合同备注")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.saleRemark||"--"))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("盖章合同")]),t._v(" "),t.orderDetailList.downstreamInfo.fileAttachCertifiedList&&0!==t.orderDetailList.downstreamInfo.fileAttachCertifiedList.length?a("span",{on:{click:function(e){return t.showImg("",13)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("盖章合同备注")]),t._v(" "),a("div",{staticClass:"text-overflow"},[t._v(t._s(t.orderDetailList.downstreamInfo.executeRemarks||"--"))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("纸质合同号")]),t._v(" "),a("span",[t._v(t._s(t._f("showline")(t.orderDetailList.downstreamInfo.planNumber)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游统计口径")]),t._v(" "),a("span",[t._v(t._s(t._f("showline")(t.orderDetailList.downstreamInfo.statisticalCaliber)))])])]):t._e()])]):t._e(),t._v(" "),2===t.tabsIndex?a("div",{staticClass:"orderDetailCollectionPayment"},[t.saleunilateralTransaction?[a("div",{staticClass:"title1"},[t._v("收款信息")]),t._v(" "),a("div",{staticClass:"order-payment-item"},[a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.buyerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同金额(元)")]),t._v(" "),t.isFormulaPrice?a("div",{staticClass:"essential-text red"},[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.collectionList.contractAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("待收金额(元)")]),t._v(" "),t.isFormulaPrice?a("div",{staticClass:"essential-text"},[t._v("--")]):a("span",[t._v(t._s(t._f("numToCash")(t.collectionList.needCollectionTotal)))])])]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"min-title"},[t._v("收款记录")]),t._v(" "),a("div",{staticClass:"order-skjl",staticStyle:{"margin-bottom":"20px"}},[a("table",{staticClass:"gy-table j-table"},[t._m(1),t._v(" "),this.collectionList.erpCollectionModelList?a("tbody",t._l(t.collectionList.erpCollectionModelList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),t._v(" "),a("td",[t._v(t._s(10===e.collectionStatus?"已创建":"已确认"))]),t._v(" "),a("td",{staticClass:"operation-styles"},[0!==e.erpCollectionFileModelList.length?a("span",{on:{click:function(e){return t.showImg(s,7)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("td",{staticClass:"operation-styles"},[0!==e.erpBuyerPaymentFileModelList.length?a("span",{on:{click:function(e){return t.showImg(s,15)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]),t._v(" "),a("td",{staticClass:"amount-right"},[t._v(t._s(t._f("numToCash")(e.collectionAmount)))]),t._v(" "),a("td",[t._v(t._s(t.$constant.collectionType[e.collectionType]))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.collectionDate)))]),t._v(" "),a("td",{staticClass:"operation-styles"},[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.lookRecelive(e)}}},[t._v("查看\n                                ")])])])}),0):a("tbody",[t._m(2)])])])]:t._e(),t._v(" "),t.buyunilateralTransaction?[a("div",{staticClass:"title2"},[t._v("付款信息")]),t._v(" "),a("div",{staticClass:"order-payment-item"},[a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("span",[t._v(t._s(t.orderDetailList.sellerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同金额(元)")]),t._v(" "),t.isFormula?a("div",{staticClass:"essential-text",staticStyle:{color:"red"}},[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.paymentRece.contractAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("待付金额(元)")]),t._v(" "),t.isFormula?a("span",[t._v("--")]):a("span",[t._v(t._s(t._f("numToCash")(t.paymentRece.needPaymentTotal)))])])]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"min-title"},[t._v("付款记录")]),t._v(" "),a("div",[a("el-table",{staticClass:"gy-table paymentRece-list",staticStyle:{width:"100%"},attrs:{data:t.paymentRece.list}},[a("el-table-column",{attrs:{label:"编号",fixed:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.id))]}}],null,!1,1140461808)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.approveStatusStr))]}}],null,!1,772036915)}),t._v(" "),a("el-table-column",{attrs:{label:"付款凭证","class-name":"picture-styles-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[3===e.row.payDesc&&1===e.row.approveType?a("span",[t._v("-")]):[e.row.paymentVoucher&&0!==e.row.paymentVoucher.length?a("span",{staticStyle:{"padding-bottom":"-2px"},on:{click:function(a){return t.showImg(e.row.paymentVoucher,6)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]]}}],null,!1,2176672173)}),t._v(" "),a("el-table-column",{attrs:{"class-name":"amount-right-el",label:"付款金额(元)",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToCash")(e.row.payTotalStr)))]}}],null,!1,3052237487)}),t._v(" "),21===t.orderDetailList.upstreamInfo.skuPriceType||22===t.orderDetailList.upstreamInfo.skuPriceType?a("el-table-column",{attrs:{label:"付款数量","class-name":"amount-right-el",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.applyQuantities))])]}}],null,!1,2068543727)}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"付款用途",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.payMethodStr))]}}],null,!1,2240909887)}),t._v(" "),a("el-table-column",{attrs:{label:"申请日期",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.createdDate)))]}}],null,!1,3164619780)}),t._v(" "),a("el-table-column",{attrs:{label:"出账日期",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[3===e.row.payDesc&&1===e.row.approveType?a("span",[t._v("-")]):[1===e.row.approveStatus?a("span",[t._v(t._s(t._f("date")(e.row.payTime)))]):t._e()]]}}],null,!1,2982064369)}),t._v(" "),a("el-table-column",{attrs:{label:"收款单位",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sellerCorpName))]}}],null,!1,1316739317)}),t._v(" "),a("el-table-column",{attrs:{label:"开户行",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sellerDepositBank))]}}],null,!1,2261496458)}),t._v(" "),a("el-table-column",{attrs:{label:"银行账号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sellerAccount))]}}],null,!1,2383790877)}),t._v(" "),a("el-table-column",{attrs:{label:"付款方式",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tradeModeStr))]}}],null,!1,3882048429)}),t._v(" "),a("el-table-column",{attrs:{label:"经办人",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.createUserName))]}}],null,!1,2246310607)}),t._v(" "),a("el-table-column",{attrs:{label:"备注",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-overflow"},[t._v(t._s(e.row.remarks))])]}}],null,!1,766530474)}),t._v(" "),a("el-table-column",{attrs:{label:"说明",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.payDescStr)+"\n                            "),a("el-popover",{attrs:{placement:"top-start",width:"360",trigger:"hover"}},[a("el-table",{staticClass:"paymentRece-list",attrs:{data:e.row.payInfoList}},[a("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"申请金额(元)",width:"120","class-name":"el-table-column-apply"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("numToCash")(e.row.payAmount)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"付款凭证","class-name":"amount-right-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.fileUrl&&0!==e.row.fileUrl.length?a("span",{on:{click:function(a){t.showImgFk(e.row.fileUrl.split(","))}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"出账日期","class-name":"amount-right-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.payTime)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{property:"description",label:"备注",width:"150"}})],1),t._v(" "),e.row.payInfoList&&e.row.payInfoList.length>0?a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("查看明细\n                                ")]):t._e()],1)]}}],null,!1,1150250098)}),t._v(" "),a("el-table-column",{attrs:{"class-name":"operation-styles-el",label:"操作",fixed:"right",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.gotPayInfo(e)}}},[t._v("查看")])]}}],null,!1,4041913235)})],1)],1)]:t._e()],2):t._e(),t._v(" "),3===t.tabsIndex?a("div",{staticClass:"orderDetailDelivery"},[t.buyunilateralTransaction?[a("div",{staticClass:"title1"},[t._v("采购交割")]),t._v(" "),a("div",{staticClass:"block clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.sellerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.deliveryWarehouseName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库地址")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.deliveryDetailedAddress))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("计划交割日")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.planDeliveryDate))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.purchaseList.skuQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("免仓期(天)")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.warehouseFreeDays))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l",staticStyle:{width:"116px"}},[t._v("待交割数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.purchaseList.surplusDeliveryQuantity)))])])]),t._v(" "),a("div",{staticClass:"min-title"},[t._v("交割记录")]),t._v(" "),a("el-table",{staticClass:"gy-table el-table-delivery",staticStyle:{width:"100%","margin-buttom":"20px"},attrs:{data:t.purchaseList.deliveryEntityList}},[a("el-table-column",{attrs:{label:"编号",fixed:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.deliveryItemId))]}}],null,!1,2231799449)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("buyDeliveryItemState")(e.row.deliveryStatus)))]}}],null,!1,2937355164)}),t._v(" "),a("el-table-column",{attrs:{label:"交割凭证","class-name":"picture-styles-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!==e.row.erpDeliveryFileModelList.length?a("span",{staticStyle:{"padding-bottom":"-2px"},on:{click:function(a){return t.showImg(e.row.erpDeliveryFileModelList,1)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,2374032047)}),t._v(" "),a("el-table-column",{attrs:{"class-name":"amount-right-el",label:"本次交割数量(吨)",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))]}}],null,!1,96521877)}),t._v(" "),a("el-table-column",{attrs:{label:"实际交割日",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.realDeliveryDate)))]}}],null,!1,3240589890)}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.createdDate,1)))]}}],null,!1,1742701625)}),t._v(" "),a("el-table-column",{attrs:{"class-name":"operation-styles-el",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view view",on:{click:function(a){return t.jumps(e.row)}}},[t._v("查看")])]}}],null,!1,744441677)})],1)]:t._e(),t._v(" "),t.saleunilateralTransaction?[null!==t.saleList||0!==t.saleList.length?a("div",[a("div",{staticClass:"title2"},[t._v("销售交割")]),t._v(" "),a("div",{staticClass:"block clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("span",[t._v(t._s(t.saleList.buyerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库")]),t._v(" "),a("span",[t._v(t._s(t.saleList.deliveryWarehouseName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库地址")]),t._v(" "),a("span",[t._v(t._s(t.saleList.deliveryDetailedAddress))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("计划交割日")]),t._v(" "),a("span",[t._v(t._s(t.saleList.planDeliveryDate))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.saleList.skuQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("免仓期(天)")]),t._v(" "),a("span",[t._v(t._s(t.saleList.warehouseFreeDays))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l",staticStyle:{width:"116px"}},[t._v("待交割数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.saleList.surplusDeliveryQuantity)))])])]),t._v(" "),a("div",{staticClass:"min-title"},[t._v("交割记录")]),t._v(" "),a("el-table",{staticClass:"gy-table",staticStyle:{width:"100%"},attrs:{data:t.saleList.deliveryEntityList}},[a("el-table-column",{attrs:{label:"编号",fixed:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.deliveryItemId))]}}],null,!1,2231799449)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("sellDeliveryItemState")(e.row.deliveryStatus)))]}}],null,!1,431737284)}),t._v(" "),a("el-table-column",{attrs:{"class-name":"operation-styles-el",label:"交割凭证",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!==e.row.erpDeliveryFileModelList.length?a("span",{on:{click:function(a){return t.showImg(e.row.erpDeliveryFileModelList,1)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,1497786798)}),t._v(" "),a("el-table-column",{attrs:{"class-name":"amount-right-el",label:"本次交割数量(吨)",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))]}}],null,!1,96521877)}),t._v(" "),a("el-table-column",{attrs:{label:"实际交割日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.realDeliveryDate)))]}}],null,!1,3240589890)}),t._v(" "),a("el-table-column",{attrs:{label:"交叉交割",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("acrossDelivery")(e.row.acrossDelivery)))]}}],null,!1,525602340)}),t._v(" "),a("el-table-column",{attrs:{label:"交叉采购合同","class-name":"operation-styles-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.acrossDelivery&&0!==e.row.erpFileContractModelList.length?a("span",{on:{click:function(a){return t.showImg(e.$index,3)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[t._v("—")])]}}],null,!1,4072548779)}),t._v(" "),a("el-table-column",{attrs:{label:"交叉采购合同编号",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.acrossDelivery?a("span",[t._v(t._s(e.row.acrossContractNo))]):a("span",[t._v("—")])]}}],null,!1,1241550308)}),t._v(" "),a("el-table-column",{attrs:{label:"换货仓库",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.productWareHouse))]}}],null,!1,45401139)}),t._v(" "),a("el-table-column",{attrs:{fixed:"right","class-name":"operation-styles-el",width:"85",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view view",on:{click:function(a){return t.jump(e.row)}}},[t._v("查看")])]}}],null,!1,2413493886)})],1)],1):t._e()]:t._e()],2):t._e(),t._v(" "),4===t.tabsIndex?a("div",{staticClass:"orderDetailSalesInvoice"},[t.buyunilateralTransaction?[a("div",{staticClass:"title1 title3"},[t._v("收票信息\n                    "),t.noCollectTickets?t._e():a("el-button",{staticClass:"linkInvoice",attrs:{type:"text"},on:{click:t.buyLinkInvoice}},[t._v("查看详情")])],1),t._v(" "),t.noCollectTickets?t._e():a("div",[a("div",{staticClass:"lll"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("span",[t._v(t._s(t.collectTicketReceipt.sellerName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("发票月份")]),t._v(" "),a("span",[t._v(t._s(t._f("invoiceMonthValue")(t.collectTicketReceipt.provideInvoiceType,t.collectTicketReceipt)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("发票总金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.collectTicketReceipt.amount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.collectTicketReceipt.quantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("单价(含税，元/吨)")]),t._v(" "),21===t.collectTicketReceipt.skuPriceType||22===t.collectTicketReceipt.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.collectTicketReceipt.productUnitPrice,!0)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("收票凭证")]),t._v(" "),a("span",[t.collectTicketReceipt.receiptInvoiceUrlList&&0!==t.collectTicketReceipt.receiptInvoiceUrlList.length?a("span",{on:{click:function(e){return t.showImg(-1,5)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])])])])]),t._v(" "),t.noCollectTickets?a("div",{staticClass:"noinvoiceStyle"},[t._v("还未收票，没有可显示的收票信息")]):t._e()]:t._e(),t._v(" "),t.saleunilateralTransaction?[a("div",{staticClass:"title2 title3"},[t._v("开票信息")]),t._v(" "),t.noInvoice?t._e():a("div",[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("span",[t._v(t._s(t.collectTickets.buyerName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("发票月份")]),t._v(" "),a("span",[t._v(t._s(t._f("invoiceMonthValue")(t.collectTickets.provideInvoiceType,t.orderDetailList.downstreamInfo)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t.collectTickets.contractNumber))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同金额(元)")]),t._v(" "),21===t.orderDetailList.downstreamInfo.skuPriceType||22===t.orderDetailList.downstreamInfo.skuPriceType?a("span",[t._v("公式计价")]):a("span",[t._v(t._s(t._f("numToCash")(t.collectTickets.contractAmount)))])]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[a("span",{staticClass:"l"},[t._v("已开票金额(元)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToCash")(t.collectTickets.makeOutInvoice)))])]),t._v(" "),a("div",{staticClass:"min-title"},[t._v("开票记录")]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-table",{staticClass:"gy-table",staticStyle:{width:"100%"},attrs:{data:t.collectTicketsInvoices}},[a("el-table-column",{attrs:{label:"编号",fixed:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.id))]}}],null,!1,1140461808)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.statusDesc))]}}],null,!1,3498627896)}),t._v(" "),a("el-table-column",{attrs:{label:"本次开票金额(元)","class-name":"amount-right-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToCash")(e.row.amount)))]}}],null,!1,2527730716)}),t._v(" "),a("el-table-column",{attrs:{label:"开票数量(吨)","class-name":"amount-right-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.quantity)))]}}],null,!1,2992436393)}),t._v(" "),a("el-table-column",{attrs:{label:"企业税号",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.buyerTaxCode))]}}],null,!1,3326248036)}),t._v(" "),a("el-table-column",{attrs:{label:"开户银行",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.buyerBankName))])]}}],null,!1,1534011710)}),t._v(" "),a("el-table-column",{attrs:{label:"银行账号",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.buyerBankAccount))]}}],null,!1,190194243)}),t._v(" "),a("el-table-column",{attrs:{"class-name":"amount-right-el",label:"转让货权总数量(吨)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.deliveredProductQuantity)))]}}],null,!1,154446374)}),t._v(" "),a("el-table-column",{attrs:{label:"商品税务编码",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.productTaxCode))]}}],null,!1,2353517654)}),t._v(" "),a("el-table-column",{attrs:{label:"进项票",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("entryTicket")(e.row.receiptInvoiceAmount,e.row.receiptInvoiceAmount)))]),t._v(" "),a("span",[t._v(t._s(t._f("entryTickets")(e.row.receiptInvoiceStatus,e.row.receiptInvoiceStatus)))])]}}],null,!1,3400912860)}),t._v(" "),a("el-table-column",{attrs:{label:"已收进项票(元)","class-name":"amount-right-el",width:"135"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToCash")(e.row.receiptInvoiceAmount)))]}}],null,!1,1407132593)}),t._v(" "),a("el-table-column",{attrs:{label:"开票凭证","class-name":"operation-styles-el",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.invoiceVoucherList&&0!==e.row.invoiceVoucherList.length?a("span",{staticStyle:{"padding-bottom":"-2px"},on:{click:function(a){return t.showImgs(1,e.row.invoiceVoucherList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,1771165824)}),t._v(" "),a("el-table-column",{attrs:{label:"收款凭证","class-name":"operation-styles-el",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.collectionFileList&&0!==e.row.collectionFileList.length?a("span",{staticStyle:{"padding-bottom":"-2px"},on:{click:function(a){return t.showImgs(2,e.row.collectionFileList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,1151310706)}),t._v(" "),a("el-table-column",{attrs:{label:"销售交割凭证","class-name":"operation-styles-el",width:"135"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.deliveredUrlList&&0!==e.row.deliveredUrlList.length?a("span",{staticStyle:{"padding-bottom":"-2px"},on:{click:function(a){return t.showImgs(3,e.row.deliveredUrlList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,3728439052)}),t._v(" "),a("el-table-column",{attrs:{label:"采购交割凭证","class-name":"operation-styles-el",width:"135"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.productSettlementBillList&&0!==e.row.productSettlementBillList.length?a("span",{staticStyle:{"padding-bottom":"-2px"},on:{click:function(a){return t.showImgs(4,e.row.productSettlementBillList)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]}}],null,!1,1328645161)}),t._v(" "),a("el-table-column",{attrs:{label:"快递单号",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.expressCode))]}}],null,!1,1692219818)}),t._v(" "),a("el-table-column",{attrs:{label:"经办人",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.operationUserName))]}}],null,!1,3306456606)}),t._v(" "),a("el-table-column",{attrs:{label:"备注",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-overflow"},[t._v(t._s(e.row.remark))])]}}],null,!1,171046041)}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.createdDate,1)))]}}],null,!1,1742701625)}),t._v(" "),a("el-table-column",{attrs:{"class-name":"operation-styles-el",label:"操作",fixed:"right",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"white"},on:{click:function(a){return t.InvoiceCheck(e.row)}}},[t._v("查看")])]}}],null,!1,150966458)})],1)],1)]),t._v(" "),t.noInvoice?a("div",{staticClass:"noinvoiceStyle"},[t._v("还未开票，没有可显示的开票信息")]):t._e()]:t._e()],2):t._e(),t._v(" "),5===t.tabsIndex?a("div",{staticClass:"stampList"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"title1"},[t._v("用印申请记录")]),t._v(" "),a("button",{staticClass:"stampbtn gy-button-extra",on:{click:t.goStamp}},[t._v("新建用印申请")])]),t._v(" "),a("div",{staticClass:"box"},[a("table",{staticClass:"gy-table"},[t._m(3),t._v(" "),t.stampList.length>0?a("tbody",t._l(t.stampList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.applyCode))]),t._v(" "),a("td",[t._v(t._s(e.stampTypeDesc))]),t._v(" "),a("td",[t._v(t._s(e.stampFileDescription))]),t._v(" "),a("td",[t._v(t._s(e.statusDesc))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.createdDate,"h")))]),t._v(" "),a("td",[t._v(t._s(t._f("date")(e.usedDate,"h")))]),t._v(" "),a("td",{staticClass:"hover operation-styles"},[null!==e.attachments&&e.attachments.length>0?a("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.showImgFk(e.attachments)}}}):a("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("附件")}}})]),t._v(" "),a("td",{staticClass:"hover operation-styles"},[null!==e.signedFiles&&e.signedFiles.length>0?a("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.showImgFk(e.signedFiles)}}}):a("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("签章文件")}}})]),t._v(" "),a("td",{staticClass:"operation-styles"},[a("button",{staticClass:"gy-button-view view",on:{click:function(a){return t.lookStamp(e.id)}}},[t._v("查看")])])])}),0):a("tbody",[t._m(4)])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.stampSearch.pageNo,"page-size":t.stampSearch.pageSize,total:t.stampSearch.total},on:{"update:currentPage":function(e){return t.$set(t.stampSearch,"pageNo",e)},"update:current-page":function(e){return t.$set(t.stampSearch,"pageNo",e)},"current-change":t.handleCurrentChange}})],1)]):t._e(),t._v(" "),a("settlement",{directives:[{name:"show",rawName:"v-show",value:6===t.tabsIndex,expression:"tabsIndex === 6"}],attrs:{"order-detail":t.orderDetailList,"settlement-buy-list":t.settlementBuyList,"settlement-sell-list":t.settlementSellList}})],1),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tempo"},[e("div",{staticClass:"title"},[this._v("基本信息")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("编号")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("th",[t._v("收款凭证")]),t._v(" "),a("th",[t._v("下游付款凭证")]),t._v(" "),a("th",[t._v("收款金额(元)")]),t._v(" "),a("th",[t._v("付款用途")]),t._v(" "),a("th",[t._v("到账日期")]),t._v(" "),a("th",[t._v("操作")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"padding-left":"400px"},attrs:{colspan:"10"}},[this._v("暂无数据")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",[t._v("申请编号")]),t._v(" "),a("th",[t._v("印章种类")]),t._v(" "),a("th",[t._v("文件名称")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("th",[t._v("申请日期")]),t._v(" "),a("th",[t._v("使用日期")]),t._v(" "),a("th",[t._v("附件")]),t._v(" "),a("th",[t._v("签章文件")]),t._v(" "),a("th",[t._v("操作")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"10"}},[this._v("没有找到可显示的数据...")])])}]};var Rl=a("C7Lr")(Bl,Ml,!1,function(t){a("8iw+"),a("2+sE")},"data-v-182a9dd4",null).exports,Ul=a("lC5x"),zl=a.n(Ul),Vl=a("J0Oq"),Ql=a.n(Vl),jl={components:{gyFileView:Ke,gyFileUpload:di},data:function(){return{disabled:!1,imgData:[],imgDataSize:null,isShowUpload:!1,total:null,isShowSearch:!1,isUploadFileDialog:!1,search:{pageNum:1,pageSize:10,orderSn:null,createTimeS:null,createTimeE:null,prodName:null,bizType:null,counterparty:null},list:[],bizTypeData:[{id:0,value:"全部"},{id:1,value:"销售合同"},{id:2,value:"采购合同"}],contractVouchersVos:[],bizType:2,type:null,fileIndex:null,th1:"",th2:"",th3:"",isShowNo:!0}},created:function(){this.init()},methods:{init:function(){this.getList(this.search)},elPlus:function(t){var e=[];e.push(t),this.$refs.contFileView.open(e)},removeImg:function(t,e){if("qz"===this.type)return this.imgData.splice(t,1),void this.onCallbackBuyFileUpload(this.imgData);this.contractVouchersVos[e].contractFileVos.splice(t,1),this.onCallbackBuyFileUpload(this.contractVouchersVos[e].contractFileVos,e)},onCallbackBuyFileUpload:function(t,e){var a=this;"qz"!==this.type?this.contractVouchersVos[e].contractFileVos=t:this.contractVouchersVos.map(function(t){t.contractFileVos=a.imgData})},getList:function(t){var e=this;this.$http.post(this.$api.order.orderNoList,t).then(function(t){if(0===t.data.code)return e.list=t.data.data.list,void(e.total=t.data.data.total);e.$message.error(t.data.message)})},handleShowImg:function(t,e){this.$refs.contFileView.open4MultiFile(t)},editFile:function(t,e,a){switch(this.type=a,a&&"qz"===a?this.isUploadFileDialog=!0:this.isShowUpload=!0,e){case 3:this.th1="交割",this.th3="交割",this.isShow1=!0;break;case 4:this.th1="申请",this.th3="发票",this.isShow1=!0;break;case-1:1===t.bizType?(this.th1="收款申请",this.th3="收款",this.isShowNo=!1):(this.th1="付款申请",this.th3="付款",this.th2="付款明细",this.isShowNo=!0);break;case 7:this.isShowNo=!1,this.th1="申请",this.th3="签章",this.isShow1=!0}-1===e&&"sf"===a&&(e=1===t.bizType?5:6),this.bizType=t.bizType;var s={bizType:t.bizType,contractEssenceId:t.contractId,orderId:t.orderId,voucherType:e};this.getImgDetail(s)},initStructure:function(){var t=this;"qz"!==this.type?this.contractVouchersVos&&this.contractVouchersVos.length>0&&this.contractVouchersVos.map(function(e,a){var s=[];e.contractFileVos&&e.contractFileVos.map(function(e,i){s.push({name:a+"k"+i,url:e.url,fileName:a+"k"+i,fileUrl:e.url,fileTypeAlias:t.$tools.getFileTypeAlias(e.url)})}),e.contractFileVos=s,e.contractFileVosSize=s.length}):this.contractVouchersVos&&this.contractVouchersVos.length>0&&this.contractVouchersVos.map(function(e,a){e.contractFileVos&&e.contractFileVos.map(function(e,s){t.imgData.push({name:a+"k"+s,url:e.url,fileName:a+"k"+s,fileUrl:e.url,fileTypeAlias:t.$tools.getFileTypeAlias(e.url)})}),t.imgDataSize=t.imgData.length})},getImgDetail:function(t){var e=this;return Ql()(zl.a.mark(function a(){var s;return zl.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.imgData=[],a.prev=1,a.next=4,e.$http.post(e.$api.order.fileDetails,t);case 4:if(0!==(s=a.sent).data.code){a.next=11;break}return e.resObj=s.data.data,e.contractVouchersVos=s.data.data.contractVouchersVos,e.initStructure(),console.log(e.contractVouchersVos),a.abrupt("return");case 11:e.$message.error(s.data.message),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),console.log(a.t0);case 17:case"end":return a.stop()}},a,e,[[1,14]])}))()},save:function(t){var e=this;return Ql()(zl.a.mark(function a(){var s;return zl.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.resObj.contractVouchersVos=e.contractVouchersVos,a.prev=1,a.next=4,e.$http.post(e.$api.order.fileUpload,e.resObj);case 4:if(0!==(s=a.sent).data.code){a.next=10;break}return"sf"===t&&(e.isShowUpload=!1),"ot"===t&&(e.isUploadFileDialog=!1),e.init(),a.abrupt("return");case 10:e.$message.error(s.data.message),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(1),console.log(a.t0);case 16:case"end":return a.stop()}},a,e,[[1,13]])}))()},onFileUpload:function(t){var e=this,a=new FormData;"qz"!==this.type&&(this.fileIndex=t.data.index),a.append("file",t.file),a.append("storage","platform-mgmt"),this.$http.post(this.$api.upload.imgUpload,a,{"Content-Type":"multipart/form-data"}).then(function(t){if(0===t.data.code){var a=t.data.data;return a.name=a.fileName,a.url=a.fileUrl,a.fileTypeAlias=e.$tools.getFileTypeAlias(a.fileUrl),void("qz"===e.type?(e.imgData.push(a),e.onCallbackBuyFileUpload(e.imgData)):(e.contractVouchersVos[e.fileIndex].contractFileVos.push(a),e.onCallbackBuyFileUpload(e.contractVouchersVos[e.fileIndex].contractFileVos,e.fileIndex)))}e.$alert(t.data.code+" "+t.data.message)})},imgErr:function(t){this.$message({message:t+"暂无数据",type:"warning"})},zip:function(t,e,a){var s={orderId:t,downType:e};this.$tools.exporttoExcel(this,this.$api.order.files,s,a+".zip")},handleCurrentChange:function(t){this.search.pageNum=t,this.getList(this.search)}}},ql={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"standingBook standingBook-upload"},[s("div",{staticClass:"search-btn"},[s("span",{staticClass:"ShowSearch",on:{click:function(e){t.isShowSearch=!t.isShowSearch}}},[t._v("高级搜索"),s("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),s("div",{staticClass:"my-search clearfix"},[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.contractId,expression:"search.contractId"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.search.contractId},on:{input:function(e){e.target.composing||t.$set(t.search,"contractId",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("合同编号")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.orderSn,expression:"search.orderSn"}],attrs:{type:"text",placeholder:"请输入合同编号"},domProps:{value:t.search.orderSn},on:{input:function(e){e.target.composing||t.$set(t.search,"orderSn",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.prodName,expression:"search.prodName"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.search.prodName},on:{input:function(e){e.target.composing||t.$set(t.search,"prodName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("时间段")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date",placeholder:"开始日期"},model:{value:t.search.createTimeS,callback:function(e){t.$set(t.search,"createTimeS",e)},expression:"search.createTimeS"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date",placeholder:"结束日期"},model:{value:t.search.createTimeE,callback:function(e){t.$set(t.search,"createTimeE",e)},expression:"search.createTimeE"}})],1)]),t._v(" "),t.isShowSearch?t._e():s("span",{staticClass:"searchicon",on:{click:function(e){return t.getList(t.search)}}},[s("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),t.isShowSearch?s("div",{staticClass:"search-form"},[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("交易对手")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.counterparty,expression:"search.counterparty"}],attrs:{type:"text",placeholder:"请输入交易对手"},domProps:{value:t.search.counterparty},on:{input:function(e){e.target.composing||t.$set(t.search,"counterparty",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("合同类型")]),t._v(" "),s("el-select",{model:{value:t.search.bizType,callback:function(e){t.$set(t.search,"bizType",e)},expression:"search.bizType"}},t._l(t.bizTypeData,function(t,e){return s("el-option",{key:e,attrs:{label:t.value,value:t.id}})}),1),t._v(" "),t.isShowSearch?s("span",{staticClass:"searchicon",on:{click:function(e){return t.getList(t.search)}}},[s("i",{staticClass:"iconfont icon-search"})]):t._e()],1)]):t._e()]),t._v(" "),s("div",{staticClass:"box"},[s("table",{staticClass:"gy-table"},[t._m(0),t._v(" "),t.list.length>0?s("tbody",t._l(t.list,function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.contractId))]),t._v(" "),s("td",{staticClass:"hover"},[t._v(t._s(e.orderContractSn))]),t._v(" "),s("td",[s("el-tooltip",{attrs:{"poper-class":"test",content:e.prodName,disabled:e.prodName&&e.prodName.replace(/[^x00-xff]/g,"aa").length>16?t.disabled:!t.disabled,placement:"bottom"}},[s("div",{staticClass:"wid-overflow",staticStyle:{width:"90px"}},[t._v("\n                            "+t._s(e.prodName)+"\n                        ")])])],1),t._v(" "),s("td",{directives:[{name:"show",rawName:"v-show",value:1===e.bizType,expression:"item.bizType === 1"}]},[t._v(t._s(e.buyCounterparty))]),t._v(" "),s("td",{directives:[{name:"show",rawName:"v-show",value:2===e.bizType,expression:"item.bizType === 2"}]},[t._v(t._s(e.sellCounterparty))]),t._v(" "),s("td",[t._v(t._s(t._f("date")(e.contractCreateDate,"h")))]),t._v(" "),s("td",{staticClass:"td-w-100 hover operation-styles"},[null!==e.signatureContractF&&e.signatureContractF.length>0?s("div",{staticClass:"showImg-hover"},[s("span",[s("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.handleShowImg(e.signatureContractF,e)}}})]),t._v(" "),e.isOnlineSignatureContract?t._e():s("span",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_create_contract",expression:"'to_create_contract'"}],staticClass:"icon-add-b-wrap",on:{click:function(a){return t.editFile(e,1,"qz")}}},[s("i",{staticClass:"iconfont icon-add-b"})])]):s("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("签章前合同")}}})]),t._v(" "),s("td",{staticClass:"td-w-100 hover operation-styles"},[null!==e.signatureContractE&&e.signatureContractE.length>0?s("div",{staticClass:"showImg-hover"},[s("span",[s("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.handleShowImg(e.signatureContractE)}}})]),t._v(" "),s("span",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_create_contract",expression:"'to_create_contract'"}],staticClass:"icon-add-b-wrap",on:{click:function(a){return t.editFile(e,2,"qz")}}},[s("i",{staticClass:"iconfont icon-add-b"})])]):s("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("签章后合同")}}})]),t._v(" "),s("td",{staticClass:"td-w-100 hover operation-styles"},[0!==e.deliveryProof.length?s("div",{staticClass:"showImg-hover"},[s("span",[s("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.handleShowImg(e.deliveryProof)}}})]),t._v(" "),s("span",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_confirm_buy_dlvy_voucher",expression:"'to_confirm_buy_dlvy_voucher'"}],staticClass:"icon-add-b-wrap",on:{click:function(a){return t.editFile(e,3)}}},[s("i",{staticClass:"iconfont icon-add-b"})])]):s("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("交割凭证")}}})]),t._v(" "),s("td",{staticClass:"td-w-100 hover operation-styles"},[0!==e.invoiceProof.length?s("div",{staticClass:"showImg-hover"},[s("span",[s("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.handleShowImg(e.invoiceProof)}}})]),t._v(" "),s("span",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_receipt_invoice,accountant_invoice",expression:"'to_receipt_invoice,accountant_invoice'"}],staticClass:"icon-add-b-wrap",on:{click:function(a){return t.editFile(e,4)}}},[s("i",{staticClass:"iconfont icon-add-b"})])]):s("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("发票")}}})]),t._v(" "),s("td",{staticClass:"td-w-100 hover operation-styles"},[0!==e.tradingProof.length?s("div",{staticClass:"showImg-hover"},[s("span",[s("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.handleShowImg(e.tradingProof)}}})]),t._v(" "),s("span",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"cashier_payment,cashier_coll_confirm",expression:"'cashier_payment,cashier_coll_confirm'"}],staticClass:"icon-add-b-wrap",on:{click:function(a){return t.editFile(e,-1,"sf")}}},[s("i",{staticClass:"iconfont icon-add-b"})])]):s("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("收付款凭证")}}})]),t._v(" "),s("td",{staticClass:"td-w-110 hover operation-styles"},[null!==e.signedFiles&&0!==e.signedFiles.length?s("div",{staticClass:"showImg-hover"},[s("span",[s("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.handleShowImg(e.signedFiles)}}})]),t._v(" "),s("span",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"createStamp",expression:"'createStamp'"}],staticClass:"icon-add-b-wrap",on:{click:function(a){return t.editFile(e,7,null)}}},[s("i",{staticClass:"iconfont icon-add-b"})])]):s("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("用印签章文件")}}})]),t._v(" "),s("td",{staticClass:"operation-styles"},[s("button",{staticClass:"gy-button-view bgcf",on:{click:function(a){return t.zip(e.orderId,3,e.orderSn)}}},[t._v("打包下载")])])])}),0):s("tbody",[t._m(1)])])]),t._v(" "),s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.search.pageNum,"page-size":t.search.pageSize,total:t.total},on:{"update:currentPage":function(e){return t.$set(t.search,"pageNum",e)},"update:current-page":function(e){return t.$set(t.search,"pageNum",e)},"current-change":t.handleCurrentChange}}),t._v(" "),s("gy-file-view",{ref:"contFileView"}),t._v(" "),s("el-dialog",{staticClass:"uploadFileDialog",attrs:{width:"550px",title:"上传文件",visible:t.isUploadFileDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.isUploadFileDialog=e}}},[s("div",{staticClass:"file-upload"},[s("div",{staticClass:"img-box"},[t._l(t.imgData,function(e,i){return[s("div",{key:i,staticClass:"contImgItem"},["img"===e.fileTypeAlias?s("img",{attrs:{src:e.url,alt:""}}):t._e(),t._v(" "),"pdf"===e.fileTypeAlias?s("img",{attrs:{src:a("lqqb")}}):t._e(),t._v(" "),"word"===e.fileTypeAlias?s("img",{attrs:{src:a("qQEj")}}):t._e(),t._v(" "),"excel"===e.fileTypeAlias?s("img",{attrs:{src:a("6DX5")}}):t._e(),t._v(" "),s("div",[s("i",{staticClass:"el-icon-zoom-in plus",on:{click:function(a){return t.elPlus(e)}}}),t._v(" "),i>t.imgDataSize-1?s("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.removeImg(i)}}}):t._e()])])]})],2),t._v(" "),s("el-upload",{staticClass:"upload-demo-tz",attrs:{action:"api",multiple:"","file-list":t.imgData,"list-type":"picture-card",drag:!0,"show-file-list":!1,"http-request":t.onFileUpload}},[s("i",{staticClass:"el-icon-upload"}),t._v(" "),s("div",{staticClass:"el-upload__text"},[t._v("拖到此处，或"),s("em",[t._v("点击上传")])])])],1),t._v(" "),s("div",{staticClass:"gy-button"},[s("button",{staticClass:"gy-button-normal",on:{click:function(e){t.isUploadFileDialog=!1}}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.save("ot")}}},[t._v("上传")])])]),t._v(" "),s("el-dialog",{staticClass:"file-upload uploadFileDialogMulti",attrs:{width:"770px",title:"上传文件",visible:t.isShowUpload,"close-on-click-modal":!1},on:{"update:visible":function(e){t.isShowUpload=e}}},[s("table",{staticClass:"gy-table"},[s("thead",[s("th",[t._v(t._s(t.th1)+"编号")]),t._v(" "),t.isShowNo?s("th",{class:{"td-w-130":"收款明细"===t.th2}},[t._v(t._s(t.th2)+"编号")]):t._e(),t._v(" "),s("th",[t._v(t._s(t.th3)+"凭证")]),t._v(" "),s("th")]),t._v(" "),s("tbody",t._l(t.contractVouchersVos,function(e,i){return s("tr",{key:i},[s("td",{staticClass:"td-w-110"},["收款"===t.th3?s("span",[t._v(t._s(e.targetId))]):s("span",[t._v(t._s(e.groupId))])]),t._v(" "),t.isShowNo?s("td",{staticClass:"td-w-100",class:{"td-w-130":"收款明细"===t.th2}},[t._v(t._s(e.targetId))]):t._e(),t._v(" "),s("td",{staticClass:"td-hidden"},[s("div",{staticClass:"file-upload"},[s("div",{staticClass:"img-box"},[t._l(e.contractFileVos,function(n,l){return[s("div",{key:l,staticClass:"contImgItem"},["img"===n.fileTypeAlias?s("img",{attrs:{src:n.url,alt:""}}):t._e(),t._v(" "),"pdf"===n.fileTypeAlias?s("img",{attrs:{src:a("lqqb")}}):t._e(),t._v(" "),"word"===n.fileTypeAlias?s("img",{attrs:{src:a("qQEj")}}):t._e(),t._v(" "),"excel"===n.fileTypeAlias?s("img",{attrs:{src:a("6DX5")}}):t._e(),t._v(" "),s("div",[s("i",{staticClass:"el-icon-zoom-in plus",on:{click:function(e){return t.elPlus(n)}}}),t._v(" "),l>e.contractFileVosSize-1?s("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.removeImg(l,i)}}}):t._e()])])]})],2)])]),t._v(" "),s("td",[s("el-upload",{staticClass:"upload-demo-tz",attrs:{action:"api",multiple:"","file-list":t.imgData,"list-type":"picture-card",drag:!0,data:{index:i},"show-file-list":!1,"http-request":t.onFileUpload}},[s("i",{staticClass:"el-icon-upload"}),t._v(" "),s("div",{staticClass:"el-upload__text"},[t._v("拖到此处，或"),s("em",[t._v("点击上传")])])])],1)])}),0)]),t._v(" "),s("div",{staticClass:"gy-button"},[s("button",{staticClass:"gy-button-normal",on:{click:function(e){t.isShowUpload=!1}}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.save("sf")}}},[t._v("上传")])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",[t._v("合同要素ID")]),t._v(" "),a("th",[t._v("合同编号")]),t._v(" "),a("th",[t._v("产品名称")]),t._v(" "),a("th",[t._v("交易对手")]),t._v(" "),a("th",[t._v("创建时间")]),t._v(" "),a("th",[t._v("签章前合同")]),t._v(" "),a("th",[t._v("签章后合同")]),t._v(" "),a("th",[t._v("交割凭证")]),t._v(" "),a("th",[t._v("发票")]),t._v(" "),a("th",[t._v("收付款凭证")]),t._v(" "),a("th",[t._v("用印签章文件")]),t._v(" "),a("th",[t._v("操作")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"10"}},[this._v("没有找到可显示的数据...")])])}]};var Wl=a("C7Lr")(jl,ql,!1,function(t){a("JCbQ"),a("LQGf"),a("j4Xg"),a("XYsR")},"data-v-7081841f",null).exports,Hl={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},Kl=a("C7Lr")(null,Hl,!1,null,null,null).exports,Xl={name:"list",data:function(){return{params:{pageSize:10,pageNo:1,strBuyPlanDeliveryDate:null,endBuyPlanDeliveryDate:null,strBuyActualDeliveryDate:null,endBuyActualDeliveryDate:null,strSellPlanDeliveryDate:null,endSellPlanDeliveryDate:null,strSellActualDeliveryDate:null,endSellActualDeliveryDate:null},isSearchs:!1,deliveryList:[],isShowSearch:!1,total:null,deliveryStatusList:[{id:null,value:"全部"},{id:0,value:"交割中"},{id:1,value:"已完成"},{id:2,value:"未交割"}],currPageSellCount:0,currPagebuyCount:0,allPageSellCount:0,allPageBuyCount:0,radio:"1",getAllPageStatusCountObj:{}}},activated:function(){this.$route.meta.isBack||(this.params={},this.getlist()),this.$route.meta.isBack=!1},mounted:function(){this.getAllPageStatusCount(1)},methods:{detail:function(t){this.$router.push({name:"deliveryDetail",query:{id:t.id,saleOrderId:t.saleOrderId,purchaseOrderId:t.purchaseOrderId}})},getlist:function(){var t=this;this.$http.post(this.$api.delivery.getlist,this.params).then(function(e){0===e.data.code?(t.deliveryList=e.data.data.rows,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},search:function(){this.getlist()},handleCurrentChange:function(t){this.params.pageNum=t,this.getlist()},getAllPageStatusCount:function(t){var e=this;this.$http.get(this.$api.order.allPageStatusCount+"?countType="+t).then(function(t){0===t.data.code&&(e.getAllPageStatusCountObj=t.data.data)}).catch(function(t){console.log(t)})}},components:{listStatistics:Ue}},Jl={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"delivery"},[s("div",{staticClass:"deliverySeachAll"},[s("div",{staticClass:"deliverySeach clearfix"},[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.id,expression:"params.id"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.params.id},on:{input:function(e){e.target.composing||t.$set(t.params,"id",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.businessManagerName,expression:"params.businessManagerName"}],attrs:{type:"text",placeholder:"请输入业务操作人"},domProps:{value:t.params.businessManagerName},on:{input:function(e){e.target.composing||t.$set(t.params,"businessManagerName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.buyerCompanyName,expression:"params.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入下游公司"},domProps:{value:t.params.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.params,"buyerCompanyName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.sellerCompanyName,expression:"params.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司"},domProps:{value:t.params.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.params,"sellerCompanyName",e.target.value)}}}),t._v(" "),t.isShowSearch?t._e():s("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[s("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),t.isShowSearch?[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("采购交割状态")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.buyDeliveryStatus,callback:function(e){t.$set(t.params,"buyDeliveryStatus",e)},expression:"params.buyDeliveryStatus"}},t._l(t.deliveryStatusList,function(t){return s("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}),1)],1),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("销售交割状态")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.sellDeliveryStatus,callback:function(e){t.$set(t.params,"sellDeliveryStatus",e)},expression:"params.sellDeliveryStatus"}},t._l(t.deliveryStatusList,function(t){return s("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}),1)],1),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.mediaCorpName,expression:"params.mediaCorpName"}],attrs:{type:"text",placeholder:"请输入我方公司"},domProps:{value:t.params.mediaCorpName},on:{input:function(e){e.target.composing||t.$set(t.params,"mediaCorpName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("采购交割日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.strBuyPlanDeliveryDate,callback:function(e){t.$set(t.params,"strBuyPlanDeliveryDate",e)},expression:"params.strBuyPlanDeliveryDate"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.endBuyPlanDeliveryDate,callback:function(e){t.$set(t.params,"endBuyPlanDeliveryDate",e)},expression:"params.endBuyPlanDeliveryDate"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("实际采购交割日")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.strBuyActualDeliveryDate,callback:function(e){t.$set(t.params,"strBuyActualDeliveryDate",e)},expression:"params.strBuyActualDeliveryDate"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.endBuyActualDeliveryDate,callback:function(e){t.$set(t.params,"endBuyActualDeliveryDate",e)},expression:"params.endBuyActualDeliveryDate"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("销售交割日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.strSellPlanDeliveryDate,callback:function(e){t.$set(t.params,"strSellPlanDeliveryDate",e)},expression:"params.strSellPlanDeliveryDate"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.endSellPlanDeliveryDate,callback:function(e){t.$set(t.params,"endSellPlanDeliveryDate",e)},expression:"params.endSellPlanDeliveryDate"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("实际销售交割日")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.strSellActualDeliveryDate,callback:function(e){t.$set(t.params,"strSellActualDeliveryDate",e)},expression:"params.strSellActualDeliveryDate"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.endSellActualDeliveryDate,callback:function(e){t.$set(t.params,"endSellActualDeliveryDate",e)},expression:"params.endSellActualDeliveryDate"}})],1)]),t._v(" "),t.isShowSearch?s("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[s("i",{staticClass:"iconfont icon-search"})]):t._e()])]:t._e(),t._v(" "),s("span",{staticClass:"advancedSearch",on:{click:t.ShowSearch}},[t._v("高级搜索"),s("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])],2)]),t._v(" "),s("div",{staticClass:"table_padding"},[s("div",{staticClass:"gy-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.deliveryList}},[s("el-table-column",{attrs:{fixed:"","show-overflow-tooltip":!0,label:"ID\n产品名称",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"wid-overflow"},[s("span",[t._v(t._s(e.row.id))]),s("br"),t._v(" "),s("span",[t._v(t._s(e.row.prodName))])])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"类别",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?s("span",[t._v("采购"),s("br"),t._v("销售")]):t._e(),t._v(" "),2===e.row.contractType?s("span",[t._v("采购")]):t._e(),t._v(" "),3===e.row.contractType?s("span",[t._v("销售")]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"上游公司\n下游公司",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tooltip",{attrs:{placement:"bottom","visible-arrow":"false"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.row.sellerCompanyName)),s("br"),t._v(t._s(e.row.buyerCompanyName))]),t._v(" "),s("div",{staticClass:"wid-overflow"},[s("span",[t._v(t._s(e.row.sellerCompanyName))]),e.row.sellerCompanyName?s("br"):t._e(),t._v(" "),s("span",[t._v(t._s(e.row.buyerCompanyName))])])])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"采购交割日期\n销售交割日期",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.buyPlanDeliveryDate))]),s("br"),t._v(" "),s("span",[t._v(t._s(e.row.sellPlanDeliveryDate))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"交割状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("deliveryState")(e.row.buyDeliveryStatus)))]),s("br"),t._v(" "),s("span",[t._v(t._s(t._f("deliveryState")(e.row.sellDeliveryStatus)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"申请交割量(吨)","class-name":"floating amount-right-el",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[1===e.row.contractType?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.buyDeliveryQuantity)))]):1!==e.row.contractType&&e.row.buyDeliveryQuantity?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.buyDeliveryQuantity)))]):t._e()]),t._v(" "),e.row.buyDeliveryItemList&&e.row.buyDeliveryItemList.length>1?[s("el-popover",{ref:"popover1-"+e.row.id,attrs:{placement:"top",width:"400",trigger:"click"}},[s("el-table",{attrs:{data:e.row.buyDeliveryItemList}},[s("el-table-column",{attrs:{property:"deliveryQuantity",label:"申请交割量(吨)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{property:"deliveryDate",label:"申请交割日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("date")(e.row.deliveryDate,0)))])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{property:"realDeliveryDate",label:"实际交割日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("date")(e.row.realDeliveryDate,0)))])]}}],null,!0)})],1),t._v(" "),s("button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")])],1)]:t._e(),s("br"),t._v(" "),s("span",[1===e.row.contractType?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.sellDeliveryQuantity)))]):1!==e.row.contractType&&e.row.sellDeliveryQuantity?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.sellDeliveryQuantity)))]):t._e()]),e.row.sellDeliveryItemList&&e.row.sellDeliveryItemList.length>1?[s("el-popover",{ref:"popover"+e.row.id,attrs:{placement:"top",width:"400",trigger:"click"}},[s("el-table",{attrs:{data:e.row.sellDeliveryItemList}},[s("el-table-column",{attrs:{property:"deliveryQuantity",label:"申请交割量(吨)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{property:"deliveryDate",label:"申请交割日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("date")(e.row.deliveryDate,0)))])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{property:"realDeliveryDate",label:"实际交割日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("date")(e.row.realDeliveryDate,0)))])]}}],null,!0)})],1),s("button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")])],1)]:t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"申请交割日",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?s("span",[e.row.buyDeliveryDate?s("span",[t._v(t._s(t._f("date")(e.row.buyDeliveryDate,0)))]):s("span",[t._v("-")])]):t._e(),t._v(" "),1!==e.row.contractType?s("span",[s("span",[t._v(t._s(t._f("date")(e.row.buyDeliveryDate,0)))])]):t._e(),t._v(" "),s("br"),t._v(" "),1===e.row.contractType?s("span",[e.row.sellDeliveryDate?s("span",[t._v(t._s(t._f("date")(e.row.sellDeliveryDate,0)))]):s("span",[t._v("-")])]):t._e(),t._v(" "),1!==e.row.contractType?s("span",[s("span",[t._v(t._s(t._f("date")(e.row.sellDeliveryDate,0)))])]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"实际交割日",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?s("span",[e.row.buyRealDeliveryDate?s("span",[t._v(t._s(t._f("date")(e.row.buyRealDeliveryDate,0)))]):s("span",[t._v("-")])]):t._e(),t._v(" "),1!==e.row.contractType?s("span",[s("span",[t._v(t._s(t._f("date")(e.row.buyRealDeliveryDate,0)))])]):t._e(),t._v(" "),s("br"),t._v(" "),1===e.row.contractType?s("span",[e.row.sellRealDeliveryDate?s("span",[t._v(t._s(t._f("date")(e.row.sellRealDeliveryDate,0)))]):s("span",[t._v("-")])]):t._e(),t._v(" "),1!==e.row.contractType?s("span",[s("span",[t._v(t._s(t._f("date")(e.row.sellRealDeliveryDate,0)))])]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"数量(吨)","class-name":"amount-right-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("numToQuantity")(e.row.skuQuantity)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"已交割数量(吨)","class-name":"amount-right-el",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.buyAlreadyDeliveryQuantity)))]):t._e(),s("br"),t._v(" "),e.row.saleOrderId?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.sellAlreadyDeliveryQuantity)))]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"采购合同编号\n销售合同编号",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.buyContractCode))]),s("br"),t._v(" "),s("span",[t._v(t._s(e.row.sellContractCode))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("date")(e.row.buyUpdatedDate,1)))]),s("br"),t._v(" "),s("span",[t._v(t._s(t._f("date")(e.row.sellUpdatedDate,1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{fixed:"right","class-name":"operation-styles-el",label:"操作",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("button",{staticClass:"gy-button-view view",on:{click:function(a){return t.detail(e.row)}}},[t._v("查看")]),t._v(" "),1===e.row.sellAlarmSign||1===e.row.buyAlarmSign?s("span",[s("img",{staticStyle:{"margin-bottom":"5px"},attrs:{src:a("N26N"),height:"19",width:"19"}})]):t._e()]}}])})],1)],1),t._v(" "),s("listStatistics",{on:{toggleTabs:t.getAllPageStatusCount}},[s("div",{staticClass:"list-statistics-item"},[s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("采购申请交割(吨)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.expectBuyDeliveryQuantityCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("采购完成交割(吨)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.approvaledBuyDeliveryQuantityCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("实时库存(吨)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.realtimeBuyDeliveryCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("销售申请交割(吨)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.expectSellDeliveryQuantityCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("销售完成交割(吨)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.approvaledSellDeliveryQuantityCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("交叉交割(吨)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.crossSellDeliveryCount)))])])])])],1),t._v(" "),s("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,total:t.total,layout:"prev, pager, next"},on:{"update:currentPage":function(e){return t.$set(t.params,"pageNo",e)},"update:current-page":function(e){return t.$set(t.params,"pageNo",e)},"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gy-form-group"},[e("span",{staticClass:"l"},[this._v("业务组")]),this._v(" "),e("input",{attrs:{type:"text",placeholder:"请输入业务组"}})])}]};var Gl=a("C7Lr")(Xl,Jl,!1,function(t){a("JT8k"),a("2wU1")},"data-v-2b8e864e",null).exports,Zl={name:"list",data:function(){return{params:{contractType:2,pageSize:10,pageNo:1,strBuyPlanDeliveryDate:null,endBuyPlanDeliveryDate:null,strBuyActualDeliveryDate:null,endBuyActualDeliveryDate:null,strSellPlanDeliveryDate:null,endSellPlanDeliveryDate:null,strSellActualDeliveryDate:null,endSellActualDeliveryDate:null},isSearchs:!1,deliveryList:[],isShowSearch:!1,total:null,deliveryStatusList:[{id:null,value:"全部"},{id:0,value:"交割中"},{id:1,value:"已完成"},{id:2,value:"未交割"}],currPageSellCount:0,currPagebuyCount:0,allPageSellCount:0,allPageBuyCount:0,radio:"1",getAllPageStatusCountObj:{}}},activated:function(){this.$route.meta.isBack||(this.params={contractType:2},this.getlist()),this.$route.meta.isBack=!1},mounted:function(){this.getAllPageStatusCount(1)},methods:{detail:function(t){this.$router.push({name:"deliveryDetail",query:{id:t.id,purchaseOrderId:t.purchaseOrderId,activeType:2}})},getlist:function(){var t=this;this.$http.post(this.$api.delivery.getlist,this.params).then(function(e){0===e.data.code?(t.deliveryList=e.data.data.rows,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},search:function(){this.getlist()},handleCurrentChange:function(t){this.params.pageNum=t,this.getlist()},getAllPageStatusCount:function(t){var e=this;this.$http.get(this.$api.order.allPageStatusCount+"?countType="+t).then(function(t){0===t.data.code&&(e.getAllPageStatusCountObj=t.data.data)}).catch(function(t){console.log(t)})}},components:{listStatistics:Ue}},Yl={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"delivery"},[s("div",{staticClass:"deliverySeachAll"},[s("div",{staticClass:"deliverySeach clearfix"},[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.id,expression:"params.id"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.params.id},on:{input:function(e){e.target.composing||t.$set(t.params,"id",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("采购交割状态")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.buyDeliveryStatus,callback:function(e){t.$set(t.params,"buyDeliveryStatus",e)},expression:"params.buyDeliveryStatus"}},t._l(t.deliveryStatusList,function(t){return s("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}),1)],1),t._v(" "),s("div",{staticClass:"gy-form-group cl"},[s("span",{staticClass:"l"},[t._v("采购交割日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.strBuyPlanDeliveryDate,callback:function(e){t.$set(t.params,"strBuyPlanDeliveryDate",e)},expression:"params.strBuyPlanDeliveryDate"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.endBuyPlanDeliveryDate,callback:function(e){t.$set(t.params,"endBuyPlanDeliveryDate",e)},expression:"params.endBuyPlanDeliveryDate"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("实际采购交割日")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.strBuyActualDeliveryDate,callback:function(e){t.$set(t.params,"strBuyActualDeliveryDate",e)},expression:"params.strBuyActualDeliveryDate"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.endBuyActualDeliveryDate,callback:function(e){t.$set(t.params,"endBuyActualDeliveryDate",e)},expression:"params.endBuyActualDeliveryDate"}})],1)]),t._v(" "),t.isShowSearch?t._e():s("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[s("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),t.isShowSearch?[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.sellerCompanyName,expression:"params.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司"},domProps:{value:t.params.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.params,"sellerCompanyName",e.target.value)}}}),t._v(" "),t.isShowSearch?t._e():s("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[s("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.mediaCorpName,expression:"params.mediaCorpName"}],attrs:{type:"text",placeholder:"请输入我方公司"},domProps:{value:t.params.mediaCorpName},on:{input:function(e){e.target.composing||t.$set(t.params,"mediaCorpName",e.target.value)}}}),t._v(" "),t.isShowSearch?s("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[s("i",{staticClass:"iconfont icon-search"})]):t._e()])]:t._e(),t._v(" "),s("span",{staticClass:"advancedSearch",on:{click:t.ShowSearch}},[t._v("高级搜索"),s("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])],2)]),t._v(" "),s("div",{staticClass:"table_padding"},[s("div",{staticClass:"gy-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.deliveryList}},[s("el-table-column",{attrs:{fixed:"",label:"ID",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.id))]),s("br")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"产品名称","show-overflow-tooltip":!0,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"wid-overflow"},[s("span",[t._v(t._s(e.row.prodName))])])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"上游公司",width:"120","class-name":"dh-over","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.sellerCompanyName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"交割状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("deliveryState")(e.row.buyDeliveryStatus)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"采购交割日期",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.buyPlanDeliveryDate))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"申请交割量(吨)","class-name":"floating amount-right-el",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[1===e.row.contractType?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.buyDeliveryQuantity)))]):1!==e.row.contractType&&e.row.buyDeliveryQuantity?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.buyDeliveryQuantity)))]):t._e()]),t._v(" "),e.row.buyDeliveryItemList&&e.row.buyDeliveryItemList.length>1?[s("el-popover",{ref:"popover1-"+e.row.id,attrs:{placement:"top",width:"400",trigger:"click"}},[s("el-table",{attrs:{data:e.row.buyDeliveryItemList}},[s("el-table-column",{attrs:{property:"deliveryQuantity",label:"申请交割量(吨)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{property:"deliveryDate",label:"申请交割日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("date")(e.row.deliveryDate,0)))])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{property:"realDeliveryDate",label:"实际交割日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("date")(e.row.realDeliveryDate,0)))])]}}],null,!0)})],1),t._v(" "),s("button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")])],1)]:t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"申请交割日",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?s("span",[e.row.buyDeliveryDate?s("span",[t._v(t._s(t._f("date")(e.row.buyDeliveryDate,0)))]):s("span",[t._v("-")])]):t._e(),t._v(" "),1!==e.row.contractType?s("span",[s("span",[t._v(t._s(t._f("date")(e.row.buyDeliveryDate,0)))])]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"实际交割日",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?s("span",[e.row.buyRealDeliveryDate?s("span",[t._v(t._s(t._f("date")(e.row.buyRealDeliveryDate,0)))]):s("span",[t._v("-")])]):t._e(),t._v(" "),1!==e.row.contractType?s("span",[s("span",[t._v(t._s(t._f("date")(e.row.buyRealDeliveryDate,0)))])]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"数量(吨)","class-name":"amount-right-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("numToQuantity")(e.row.skuQuantity)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"已交割数量(吨)","class-name":"amount-right-el",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOrderId?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.buyAlreadyDeliveryQuantity)))]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"采购合同编号",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.buyContractCode))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("date")(e.row.buyUpdatedDate,1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{fixed:"right","class-name":"operation-styles-el",label:"操作",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("button",{staticClass:"gy-button-view view",on:{click:function(a){return t.detail(e.row)}}},[t._v("查看")]),t._v(" "),1===e.row.sellAlarmSign||1===e.row.buyAlarmSign?s("span",[s("img",{staticStyle:{"margin-bottom":"5px"},attrs:{src:a("N26N"),height:"19",width:"19"}})]):t._e()]}}])})],1)],1),t._v(" "),s("listStatistics",{on:{toggleTabs:t.getAllPageStatusCount}},[s("div",{staticClass:"list-statistics-item"},[s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("采购申请交割(吨)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.expectBuyDeliveryQuantityCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("采购完成交割(吨)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.approvaledBuyDeliveryQuantityCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("实时库存(吨)")]),s("span",[t._v(t._s(t._f("numToCash")(t.getAllPageStatusCountObj.realtimeBuyDeliveryCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("交叉交割(吨)")]),s("span",[t._v(t._s(t._f("numToCash")(t.getAllPageStatusCountObj.crossSellDeliveryCount)))])])])])],1),t._v(" "),s("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,total:t.total,layout:"prev, pager, next"},on:{"update:currentPage":function(e){return t.$set(t.params,"pageNo",e)},"update:current-page":function(e){return t.$set(t.params,"pageNo",e)},"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var to=a("C7Lr")(Zl,Yl,!1,function(t){a("Csqc"),a("okzb")},"data-v-15d50cbc",null).exports,eo={name:"list",data:function(){return{params:{contractType:3,pageSize:10,pageNo:1,strBuyPlanDeliveryDate:null,endBuyPlanDeliveryDate:null,strBuyActualDeliveryDate:null,endBuyActualDeliveryDate:null,strSellPlanDeliveryDate:null,endSellPlanDeliveryDate:null,strSellActualDeliveryDate:null,endSellActualDeliveryDate:null},isSearchs:!1,deliveryList:[],isShowSearch:!1,total:null,deliveryStatusList:[{id:null,value:"全部"},{id:0,value:"交割中"},{id:1,value:"已完成"},{id:2,value:"未交割"}],currPageSellCount:0,currPagebuyCount:0,allPageSellCount:0,allPageBuyCount:0,radio:"1",getAllPageStatusCountObj:{}}},activated:function(){this.$route.meta.isBack||(this.params={contractType:3},this.getlist()),this.$route.meta.isBack=!1},mounted:function(){this.getAllPageStatusCount(1)},methods:{detail:function(t){this.$router.push({name:"deliveryDetail",query:{id:t.id,saleOrderId:t.saleOrderId,activeType:3}})},getlist:function(){var t=this;this.$http.post(this.$api.delivery.getlist,this.params).then(function(e){0===e.data.code?(t.deliveryList=e.data.data.rows,t.total=e.data.data.total):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},search:function(){this.getlist()},handleCurrentChange:function(t){this.params.pageNum=t,this.getlist()},getAllPageStatusCount:function(t){var e=this;this.$http.get(this.$api.order.allPageStatusCount+"?countType="+t).then(function(t){0===t.data.code&&(e.getAllPageStatusCountObj=t.data.data)}).catch(function(t){console.log(t)})}},components:{listStatistics:Ue}},ao={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"delivery"},[s("div",{staticClass:"deliverySeachAll"},[s("div",{staticClass:"deliverySeach clearfix"},[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.id,expression:"params.id"}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.params.id},on:{input:function(e){e.target.composing||t.$set(t.params,"id",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("销售交割状态")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.buyDeliveryStatus,callback:function(e){t.$set(t.params,"buyDeliveryStatus",e)},expression:"params.buyDeliveryStatus"}},t._l(t.deliveryStatusList,function(t){return s("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})}),1)],1),t._v(" "),s("div",{staticClass:"gy-form-group cl"},[s("span",{staticClass:"l"},[t._v("销售交割日期")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.strBuyPlanDeliveryDate,callback:function(e){t.$set(t.params,"strBuyPlanDeliveryDate",e)},expression:"params.strBuyPlanDeliveryDate"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.endBuyPlanDeliveryDate,callback:function(e){t.$set(t.params,"endBuyPlanDeliveryDate",e)},expression:"params.endBuyPlanDeliveryDate"}})],1)])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("实际销售交割日")]),t._v(" "),s("div",{staticClass:"searchDate"},[s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.params.strBuyActualDeliveryDate,callback:function(e){t.$set(t.params,"strBuyActualDeliveryDate",e)},expression:"params.strBuyActualDeliveryDate"}})],1),t._v(" "),s("div",{staticClass:"c"},[t._v("至")]),t._v(" "),s("div",{staticClass:"d"},[s("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},model:{value:t.params.endBuyActualDeliveryDate,callback:function(e){t.$set(t.params,"endBuyActualDeliveryDate",e)},expression:"params.endBuyActualDeliveryDate"}})],1)]),t._v(" "),t.isShowSearch?t._e():s("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[s("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),t.isShowSearch?[s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.sellerCompanyName,expression:"params.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入上游公司"},domProps:{value:t.params.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.params,"sellerCompanyName",e.target.value)}}}),t._v(" "),t.isShowSearch?t._e():s("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[s("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),s("div",{staticClass:"gy-form-group"},[s("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.params.mediaCorpName,expression:"params.mediaCorpName"}],attrs:{type:"text",placeholder:"请输入我方公司"},domProps:{value:t.params.mediaCorpName},on:{input:function(e){e.target.composing||t.$set(t.params,"mediaCorpName",e.target.value)}}}),t._v(" "),t.isShowSearch?s("span",{staticClass:"search",on:{click:function(e){return t.search()}}},[s("i",{staticClass:"iconfont icon-search"})]):t._e()])]:t._e(),t._v(" "),s("span",{staticClass:"advancedSearch",on:{click:t.ShowSearch}},[t._v("高级搜索"),s("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])],2)]),t._v(" "),s("div",{staticClass:"table_padding"},[s("div",{staticClass:"gy-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.deliveryList}},[s("el-table-column",{attrs:{fixed:"",label:"ID",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.id))]),s("br")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"产品名称","show-overflow-tooltip":!0,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"wid-overflow"},[s("span",[t._v(t._s(e.row.prodName))])])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"下游公司","show-overflow-tooltip":!0,width:"120","class-name":"dh-over"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.buyerCompanyName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"交割状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("deliveryState")(e.row.sellDeliveryStatus)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"销售交割日期",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.sellPlanDeliveryDate))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"申请交割量(吨)","class-name":"floating amount-right-el",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[1===e.row.contractType?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.sellDeliveryQuantity)))]):1!==e.row.contractType&&e.row.sellDeliveryQuantity?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.sellDeliveryQuantity)))]):t._e()]),e.row.sellDeliveryItemList&&e.row.sellDeliveryItemList.length>1?[s("el-popover",{ref:"popover"+e.row.id,attrs:{placement:"top",width:"400",trigger:"click"}},[s("el-table",{attrs:{data:e.row.sellDeliveryItemList}},[s("el-table-column",{attrs:{property:"deliveryQuantity",label:"申请交割量(吨)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{property:"deliveryDate",label:"申请交割日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("date")(e.row.deliveryDate,0)))])]}}],null,!0)}),t._v(" "),s("el-table-column",{attrs:{property:"realDeliveryDate",label:"实际交割日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v(t._s(t._f("date")(e.row.realDeliveryDate,0)))])]}}],null,!0)})],1),s("button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")])],1)]:t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"申请交割日",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?s("span",[e.row.sellDeliveryDate?s("span",[t._v(t._s(t._f("date")(e.row.sellDeliveryDate,0)))]):s("span",[t._v("-")])]):t._e(),t._v(" "),1!==e.row.contractType?s("span",[s("span",[t._v(t._s(t._f("date")(e.row.sellDeliveryDate,0)))])]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"实际交割日",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.contractType?s("span",[e.row.sellRealDeliveryDate?s("span",[t._v(t._s(t._f("date")(e.row.sellRealDeliveryDate,0)))]):s("span",[t._v("-")])]):t._e(),t._v(" "),1!==e.row.contractType?s("span",[s("span",[t._v(t._s(t._f("date")(e.row.sellRealDeliveryDate,0)))])]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"数量(吨)","class-name":"amount-right-el",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("numToQuantity")(e.row.skuQuantity)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"已交割数量(吨)","class-name":"amount-right-el",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.saleOrderId?s("span",[t._v(t._s(t._f("numToQuantity")(e.row.sellAlreadyDeliveryQuantity)))]):t._e()]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"销售合同编号",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.sellOrderSn))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("date")(e.row.sellUpdatedDate,1)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{fixed:"right","class-name":"operation-styles-el",label:"操作",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("button",{staticClass:"gy-button-view view",on:{click:function(a){return t.detail(e.row)}}},[t._v("查看")]),t._v(" "),1===e.row.sellAlarmSign||1===e.row.buyAlarmSign?s("span",[s("img",{staticStyle:{"margin-bottom":"5px"},attrs:{src:a("N26N"),height:"19",width:"19"}})]):t._e()]}}])})],1)],1),t._v(" "),s("listStatistics",{on:{toggleTabs:t.getAllPageStatusCount}},[s("div",{staticClass:"list-statistics-item"},[s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("实时库存(吨)")]),s("span",[t._v(t._s(t._f("numToCash")(t.getAllPageStatusCountObj.realtimeBuyDeliveryCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("销售申请交割(吨)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.expectSellDeliveryQuantityCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("销售完成交割(吨)")]),s("span",[t._v(t._s(t._f("numToQuantity")(t.getAllPageStatusCountObj.approvaledSellDeliveryQuantityCount)))])]),t._v(" "),s("div",{staticClass:"list-statistics-item-l"},[s("span",[t._v("交叉交割(吨)")]),s("span",[t._v(t._s(t._f("numToCash")(t.getAllPageStatusCountObj.crossSellDeliveryCount)))])])])])],1),t._v(" "),s("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,total:t.total,layout:"prev, pager, next"},on:{"update:currentPage":function(e){return t.$set(t.params,"pageNo",e)},"update:current-page":function(e){return t.$set(t.params,"pageNo",e)},"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]};var so=a("C7Lr")(eo,ao,!1,function(t){a("2/Bh"),a("WRv+")},"data-v-66cf181d",null).exports,io={name:"detail",components:{gyContract:ns,gyFileView:Ke},data:function(){return{saleOrderId:null,purchaseOrderId:null,purchaseList:null,saleList:null,infomation:{},id:null}},created:function(){this.saleOrderId=this.$route.query.saleOrderId,this.purchaseOrderId=this.$route.query.purchaseOrderId,this.id=this.$route.query.id;var t=Number(this.$route.query.activeType);2===t?this.purchase():3===t?this.sale():(this.purchase(),this.sale()),this.information()},methods:{isShowImg:function(t){this.$refs.contFileView.open(t)},information:function(){var t=this;t.$http.get(t.$api.order.orderDetail+"/"+t.id).then(function(e){0===e.data.code&&(t.infomation=e.data.data)}).catch(function(e){t.$message(e.data.message)})},purchase:function(){var t=this;if(null==t.purchaseOrderId||void 0===t.purchaseOrderId||""===t.purchaseOrderId||"null"===t.purchaseOrderId)return console.log("交割详情 采购订单ID为空 合同要素id="+t.id),!1;t.$http.get(t.$api.delivery.getBuyDetail+"/"+t.purchaseOrderId).then(function(e){0===e.data.code&&(t.purchaseList=e.data.data)})},jumps:function(t){var e={contEssId:t.contractEssenceId,todoId:t.todoId,dlvItemId:t.deliveryItemId,homeFromFlg:1,homeBizType:8,doneFlg:1};this.$router.push({name:"deliveryPurchaseView",query:e})},jump:function(t){var e={contEssId:t.contractEssenceId,todoId:t.todoId,dlvItemId:t.deliveryItemId,homeFromFlg:1,homeBizType:8,doneFlg:1};this.$router.push({name:"deliverySalesView",query:e})},sale:function(){var t=this;if(null==t.saleOrderId||void 0===t.saleOrderId||""===t.saleOrderId||"null"===t.saleOrderId)return console.log("交割详情 销售订单ID为空 合同要素id="+t.id),!1;t.$http.get(t.$api.delivery.getSellDetail+"/"+t.saleOrderId).then(function(e){0===e.data.code&&(t.saleList=e.data.data)})}}},no={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"deliveryDetail"},[a("gy-contract",{attrs:{query:t.infomation}}),t._v(" "),t.purchaseList?a("div",[a("div",{staticClass:"title"},[t._v("采购交割")]),t._v(" "),a("div",{staticClass:"block-wrap clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.sellerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.deliveryWarehouseName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库地址")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.deliveryDetailedAddress))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("计划交割日期")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.planDeliveryDate))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.purchaseList.skuQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("待交割数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.purchaseList.surplusDeliveryQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("免仓期(天)")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.warehouseFreeDays))])])]),t._v(" "),a("div",{staticClass:"title titleBottom"},[t._v("交割记录")]),t._v(" "),a("div",{staticClass:"deliver_padding_small"},[a("el-table",{staticClass:"gy-table",staticStyle:{width:"100%"},attrs:{data:t.purchaseList.deliveryEntityList}},[a("el-table-column",{attrs:{label:"编号",fixed:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.deliveryItemId))]}}],null,!1,2231799449)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("buyDeliveryItemState")(e.row.deliveryStatus)))]}}],null,!1,2937355164)}),t._v(" "),a("el-table-column",{attrs:{label:"交割凭证",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!==e.row.erpDeliveryFileModelList.length?a("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.isShowImg(e.row.erpDeliveryFileModelList)}}}):a("i",{staticClass:"iconfont icon-photo-null"})]}}],null,!1,4101377807)}),t._v(" "),a("el-table-column",{attrs:{label:"本次交割数量(吨)","class-name":"amount-right-el",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))]}}],null,!1,96521877)}),t._v(" "),a("el-table-column",{attrs:{label:"实际交割日",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.realDeliveryDate)))]}}],null,!1,3240589890)}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.createdDate,1)))]}}],null,!1,1742701625)}),t._v(" "),a("el-table-column",{attrs:{label:"操作","class-name":"operation-styles-el"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view view",on:{click:function(a){return t.jumps(e.row)}}},[t._v("查看")])]}}],null,!1,744441677)})],1)],1)]):t._e(),t._v(" "),t.saleList?a("div",[a("div",{staticClass:"title titleXS"},[t._v("销售交割")]),t._v(" "),a("div",{staticClass:"block-wrap clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("span",[t._v(t._s(t.saleList.buyerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库")]),t._v(" "),a("span",[t._v(t._s(t.saleList.deliveryWarehouseName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库地址")]),t._v(" "),a("span",[t._v(t._s(t.saleList.deliveryDetailedAddress))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("计划交割日期")]),t._v(" "),a("span",[t._v(t._s(t.saleList.planDeliveryDate))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.saleList.skuQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("待交割数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.saleList.surplusDeliveryQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("免仓期(天)")]),t._v(" "),a("span",[t._v(t._s(t.saleList.warehouseFreeDays))])])]),t._v(" "),a("div",{staticClass:"title titleBottom"},[t._v("交割记录")]),t._v(" "),a("div",{staticClass:"deliver_padding_small"},[a("el-table",{staticClass:"gy-table",staticStyle:{width:"100%"},attrs:{data:t.saleList.deliveryEntityList}},[a("el-table-column",{attrs:{label:"编号",fixed:"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.deliveryItemId))]}}],null,!1,2231799449)}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("sellDeliveryItemState")(e.row.deliveryStatus)))]}}],null,!1,431737284)}),t._v(" "),a("el-table-column",{attrs:{label:"交割凭证",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!==e.row.erpDeliveryFileModelList.length?a("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.isShowImg(e.row.erpDeliveryFileModelList)}}}):a("i",{staticClass:"iconfont icon-photo-null"})]}}],null,!1,4101377807)}),t._v(" "),a("el-table-column",{attrs:{label:"本次交割数量(吨)","class-name":"amount-right-el",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))]}}],null,!1,96521877)}),t._v(" "),a("el-table-column",{attrs:{label:"实际交割日",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.realDeliveryDate)))]}}],null,!1,3240589890)}),t._v(" "),a("el-table-column",{attrs:{label:"交叉交割",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.acrossDelivery?a("div",[t._v("是")]):a("div",[t._v("否")])]}}],null,!1,1615957063)}),t._v(" "),a("el-table-column",{attrs:{label:"交叉采购合同",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.acrossDelivery?a("div",[0!==e.row.erpFileContractModelList.length?a("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.isShowImg(e.row.erpFileContractModelList)}}}):a("i",{staticClass:"iconfont icon-photo-null"})]):a("div",[t._v("—")])]}}],null,!1,2192182714)}),t._v(" "),a("el-table-column",{attrs:{label:"交叉采购合同编号",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.acrossDelivery?a("div",[t._v(t._s(e.row.acrossContractNo))]):a("div",[t._v("—")])]}}],null,!1,1381778308)}),t._v(" "),a("el-table-column",{attrs:{label:"换货仓库",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.productWareHouse))]}}],null,!1,45401139)}),t._v(" "),a("el-table-column",{attrs:{fixed:"right","class-name":"operation-styles-el",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view view",on:{click:function(a){return t.jump(e.row)}}},[t._v("查看")])]}}],null,!1,2413493886)})],1)],1)]):t._e(),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[]};var lo=a("C7Lr")(io,no,!1,function(t){a("09By"),a("IXHs"),a("a1aq")},"data-v-2c1dd00e",null).exports,oo={name:"purchaseView",components:{gyContract:ns,gyFileView:Ke,gyFileUpload:aa,gyOperationHistory:oa},data:function(){return{realDeliveryDate:null,icon:a("PPOd"),remarks:"",imgList:[],purchaseList:{},detailsOfPurchaseDeliveryDetailsId:20,newReceiptsList:[],createBuyDelive:{erpDeliveryFileModelList:[]},isAuth:null,doneFlg:null,form:{}}},mounted:function(){this.detailsOfPurchaseDelivery(),this.doneFlg=Number(this.$route.query.doneFlg),this.contrtactBase()},methods:{contrtactBase:function(){var t=this;t.$http.get(t.$api.order.orderDetail+"/"+t.$route.query.contEssId).then(function(e){0===e.data.code&&(t.form=e.data.data)})},handleShowImg:function(t){this.$refs.contFileView.open(t)},detailsOfPurchaseDelivery:function(){var t=this;t.$http.get(t.$api.delivery.detailsOfPurchaseDeliveryDetails+t.$route.query.dlvItemId).then(function(e){if(0===e.data.code){t.purchaseList=e.data.data,t.realDeliveryDate=t.purchaseList.realDeliveryDate?t.purchaseList.realDeliveryDate:t.purchaseList.deliveryDate,t.purchaseList.erpDeliveryFileModelList.forEach(function(e){0===e.fileType&&t.imgList.push(e)}),t.purchaseViewHistory(t.$route.query.dlvItemId);var a={targetId:t.$route.query.dlvItemId,targetType:7};t.isAuth=0,t.$http.post(t.$api.apprProc.hasApproveAuth,a).then(function(e){0===e.data.code&&(t.isAuth=1)})}else t.$message({message:e.data.message,type:"warning"})})},onCallbackBuyFileUpload:function(t){var e=this;this.createBuyDelive.erpDeliveryFileModelList=[],t.forEach(function(t){e.createBuyDelive.erpDeliveryFileModelList.push({fileUrl:t.fileUrl})})},subUploadDeliveryFile:function(){var t=this;if(t.realDeliveryDate)if(0!==t.createBuyDelive.erpDeliveryFileModelList.length){var e={passFlag:1,realDeliveryDate:t.realDeliveryDate,todoId:t.$route.query.todoId,deliveryItemId:t.$route.query.dlvItemId,erpDeliveryFileModelList:t.createBuyDelive.erpDeliveryFileModelList,allowedFunctionsId:36};t.$http.post(t.$api.delivery.uploadDeliveryFile,e).then(function(e){0===e.data.code?(t.$message({message:"保存成功",type:"success"}),t.$router.go(-1)):t.$message({message:e.data.message,type:"warning"})}).catch(function(t){console.log(t)})}else t.$message({message:"请先上传凭证",type:"warning"});else t.$message({message:"请选择实际交割日",type:"warning"})},rejUploadDeliveryFile:function(){var t=this,e={passFlag:2,todoId:t.$route.query.todoId,deliveryItemId:t.$route.query.dlvItemId,erpDeliveryFileModelList:t.newReceiptsList,allowedFunctionsId:36};t.$http.post(t.$api.delivery.uploadDeliveryFile,e).then(function(e){0===e.data.code?(t.$message({message:"驳回成功",type:"success"}),t.$router.go(-1)):t.$message({message:e.data.message,type:"warning"})}).catch(function(t){console.log(t)})},approveSub:function(t){var e=this,a={todoId:e.$route.query.todoId,contEssId:e.$route.query.contEssId,deliveryItemId:e.$route.query.dlvItemId,operaType:t,remarks:e.remarks};e.$http.post(e.$api.apprProc.flowApprove,a).then(function(t){0===t.data.code?e.$message({message:"操作成功",type:"success"}):e.$message({message:t.data.message,type:"warning"}),e.$router.go(-1)}).catch(function(t){console.log(t)})},approveReject:function(){var t=this;this.$confirm("确认驳回?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.approveSub(2)})},purchaseViewHistory:function(t){var e={};e.targetId=t,e.targetType=7,this.$refs.operationHis.display(this.$api.contract.approve1History,e)}},watch:{remarks:function(t){t.length>2500&&(this.$message({message:"审批备注最多可填写2500字",type:"warning"}),this.remarks=this.remarks.substr(0,2500))}}},ro={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-dalesView"},[a("gy-contract",{attrs:{query:t.form}}),t._v(" "),a("div",{staticClass:"title"},[t._v("采购交割信息")]),t._v(" "),a("div",{staticClass:"block-wrap clearfix"},[a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[t._v("交割库")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.deliveryWarehouseName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库地址")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.deliveryDetailedAddress))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.sellerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("免仓期(天)")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.warehouseFreeDays)+"   自 "+t._s(t._f("date")(t.purchaseList.freeWarehouseDate))+" 起仓储费由收货单位承担")])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.purchaseList.skuQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("待交割数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.purchaseList.surplusDeliveryQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("计划交割日")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.planDeliveryDate))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("本次交割数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.purchaseList.deliveryQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请交割日")]),t._v(" "),a("span",[t._v(t._s(t._f("date")(t.purchaseList.deliveryDate)))])]),t._v(" "),3===t.purchaseList.deliveryStatus?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("实际交割日")]),t._v(" "),t.purchaseList.realDeliveryDate?a("span",[t._v(t._s(t._f("date")(t.purchaseList.realDeliveryDate)))]):a("span",[t._v("-")])]):t._e(),t._v(" "),0!==t.doneFlg||1!==t.purchaseList.deliveryStatus&&4!==t.purchaseList.deliveryStatus?t._e():a("div",{staticClass:"gy-form-group"},[t._m(0),t._v(" "),a("div",{staticClass:"d input-date"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"实际交割日"},model:{value:t.realDeliveryDate,callback:function(e){t.realDeliveryDate=e},expression:"realDeliveryDate"}})],1)]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建时间")]),t._v(" "),a("span",[t._v(t._s(t._f("date")(t.purchaseList.createdDate,1)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建人")]),t._v(" "),a("span",[t._v(t._s(t.purchaseList.createdName))])]),t._v(" "),0!==t.doneFlg||1!==t.purchaseList.deliveryStatus&&4!==t.purchaseList.deliveryStatus?t._e():a("div",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_confirm_buy_dlvy_voucher",expression:"'to_confirm_buy_dlvy_voucher'"}],staticClass:"gy-form-group"},[t._m(1),t._v(" "),a("gy-file-upload",{ref:"pFileUpload",on:{callbackFileUpload:t.onCallbackBuyFileUpload}})],1),t._v(" "),3===t.purchaseList.deliveryStatus?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割凭证")]),t._v(" "),0!==this.imgList.length?a("i",{staticClass:"iconfont icon-photo",on:{click:function(e){return t.handleShowImg(t.imgList)}}}):a("i",{staticClass:"iconfont icon-photo-null",staticStyle:{color:"red"}})]):t._e()]),t._v(" "),a("gy-file-view",{ref:"contFileView"}),t._v(" "),5===t.purchaseList.deliveryStatus&&1===t.isAuth?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("审批备注")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"gy-textarea",attrs:{placeholder:"请填写审批备注",cols:"30",rows:"10"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])])])]):t._e(),t._v(" "),a("div",{staticClass:"button-wrap"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.back(-1)}}},[t._v("返回")]),t._v(" "),5===t.purchaseList.deliveryStatus&&1===t.isAuth?[a("button",{staticClass:"gy-button-normal",on:{click:t.approveReject}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.approveSub(1)}}},[t._v("通过")])]:t._e(),t._v(" "),0!==t.doneFlg||1!==t.purchaseList.deliveryStatus&&4!==t.purchaseList.deliveryStatus?t._e():a("span",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_confirm_buy_dlvy_voucher",expression:"'to_confirm_buy_dlvy_voucher'"}]},[a("button",{staticClass:"gy-button-normal",on:{click:t.rejUploadDeliveryFile}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:t.subUploadDeliveryFile}},[t._v("保存")])])],2),t._v(" "),a("gy-operation-history",{ref:"operationHis"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("i",{staticStyle:{color:"red"}},[this._v("*")]),this._v("实际交割日")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("i",{staticStyle:{color:"red"}},[this._v("*")]),this._v("交割凭证")])}]};var co=a("C7Lr")(oo,ro,!1,function(t){a("Hr1n"),a("4NS/")},"data-v-1e998cb4",null).exports,uo={name:"salesView",components:{gyContract:ns,gyFileView:Ke,gyFileUpload:aa,gyOperationHistory:oa},data:function(){return{realDeliveryDate:null,remarks:"",saleList:{},voucherList:[],isAuth:null,newReceiptsList:[],doneFlg:null,form:{}}},mounted:function(){this.detailsOfSalesDelivery(),this.doneFlg=Number(this.$route.query.doneFlg),this.contrtactBase()},methods:{contrtactBase:function(){var t=this;this.$http.get(this.$api.order.orderDetail+"/"+this.$route.query.contEssId).then(function(e){0===e.data.code&&(t.form=e.data.data)})},onCallbackSaleFileUpload:function(t){var e=this;this.newReceiptsList=[],t.forEach(function(t){e.newReceiptsList.push({fileUrl:t.fileUrl})})},salesDetailClick:function(){this.$router.push({name:"paymentDetail",query:{id:this.$route.query.contEssId,sellerOrderId:this.saleList.saleOrderId,purchaseOrderId:this.saleList.purchaseOrderId}})},detailsOfSalesDelivery:function(){var t=this;this.$http.get(this.$api.delivery.detailsOfSalesDeliveryDetails+this.$route.query.dlvItemId).then(function(e){0===e.data.code&&(t.saleList=e.data.data,t.realDeliveryDate=t.saleList.deliveryDate,t.salesViewHistory(t.saleList.deliveryItemId),t.init())})},init:function(){var t=this,e={targetId:this.saleList.deliveryItemId,targetType:8};this.isAuth=0,this.$http.post(this.$api.apprProc.hasApproveAuth,e).then(function(e){0===e.data.code&&(t.isAuth=1)})},salesViewHistory:function(t){var e={};e.targetId=t,e.targetType=8,this.$refs.operationHis.display(this.$api.contract.approve1History,e)},openDidalog:function(t){this.$refs.contFileView.open(t)},approveSub:function(t){var e=this,a={todoId:this.$route.query.todoId,contEssId:this.$route.query.contEssId,deliveryItemId:this.$route.query.dlvItemId,operaType:t,remarks:this.remarks};this.$http.post(this.$api.apprProc.flowApprove,a).then(function(t){0===t.data.code?(e.$message({message:"操作成功",type:"warning"}),e.$router.go(-1)):e.$message({message:t.data.message,type:"warning"})})},approveReject:function(){var t=this;this.$confirm("确认驳回?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.approveSub(2)})},subUploadDeliveryFile:function(){var t=this,e=this;if(this.realDeliveryDate)if(0!==this.newReceiptsList.length){var a={passFlag:1,realDeliveryDate:this.realDeliveryDate,todoId:this.$route.query.todoId,deliveryItemId:this.$route.query.dlvItemId,erpDeliveryFileModelList:this.newReceiptsList,allowedFunctionsId:35};this.$http.post(this.$api.delivery.uploadDeliveryFile,a).then(function(a){0===a.data.code?(e.$message({message:"保存成功",type:"success"}),e.$router.go(-1)):t.$message({message:a.data.message,type:"warning"})}).catch(function(t){console.log(t)})}else this.$message({message:"请先上传凭证",type:"warning"});else this.$message({message:"请选择实际交割日",type:"warning"})},rejUploadDeliveryFile:function(){var t=this,e=this,a={passFlag:2,todoId:this.$route.query.todoId,deliveryItemId:this.$route.query.dlvItemId,erpDeliveryFileModelList:this.newReceiptsList,allowedFunctionsId:35};this.$http.post(this.$api.delivery.uploadDeliveryFile,a).then(function(a){0===a.data.code?(e.$message({message:"驳回成功",type:"success"}),e.$router.go(-1)):t.$message({message:a.data.message,type:"warning"})}).catch(function(t){console.log(t)})}},watch:{remarks:function(t){t.length>2500&&(this.$message({message:"审批备注最多可填写2500字",type:"warning"}),this.remarks=this.remarks.substr(0,2500))}}},po={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-dalesView"},[a("gy-contract",{attrs:{query:t.form}}),t._v(" "),a("div",{staticClass:"title"},[a("span",[t._v("销售交割信息")]),t._v(" "),a("span",{staticStyle:{"font-weight":"100",float:"right",color:"#4a90e2","font-size":"14px",cursor:"pointer"},on:{click:t.salesDetailClick}},[t._v("查看收款详情>")])]),t._v(" "),a("div",{staticClass:"block-wrap clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库")]),t._v(" "),a("span",[t._v(t._s(t.saleList.deliveryWarehouseName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库地址")]),t._v(" "),a("span",[t._v(t._s(t.saleList.deliveryDetailedAddress))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司名称")]),t._v(" "),a("span",[t._v(t._s(t.saleList.buyerCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.saleList.skuQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("已交割数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.saleList.alreadyDeliveryQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("待交割数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.saleList.surplusDeliveryQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("免仓期(天)")]),t._v(" "),a("span",[t._v(t._s(t.saleList.warehouseFreeDays)+"   自 "+t._s(t._f("date")(t.saleList.freeWarehouseDate))+" 起仓储费由收货单位承担")])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("计划交割日")]),t._v(" "),a("span",[t._v(t._s(t.saleList.planDeliveryDate))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("本次交割数量(吨)")]),t._v(" "),a("span",[t._v(t._s(t._f("numToQuantity")(t.saleList.deliveryQuantity)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请交割日")]),t._v(" "),a("span",[t._v(t._s(t._f("date")(t.saleList.deliveryDate)))])]),t._v(" "),a("div",{staticClass:"gy-form-group form_height"},[a("span",{staticClass:"l"},[t._v("换货仓库")]),t._v(" "),a("span",[t._v(t._s(t.saleList.productWareHouse||"-"))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交叉交割")]),t._v(" "),a("span",[t._v(t._s(t._f("acrossDelivery")(t.saleList.acrossDelivery)))])]),t._v(" "),a("div",{staticClass:"gy-form-group form_height"},[a("span",{staticClass:"l"},[t._v("货权单凭证")]),t._v(" "),t.saleList.erpGoodFileModelList&&0!==t.saleList.erpGoodFileModelList.length?a("i",{staticClass:"iconfont icon-photo",on:{click:function(e){return t.openDidalog(t.saleList.erpGoodFileModelList)}}}):a("i",{staticClass:"iconfont icon-photo-null"})]),t._v(" "),3===t.saleList.deliveryStatus?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("实际交割日")]),t._v(" "),t.saleList.realDeliveryDate?a("span",[t._v(t._s(t._f("date")(t.saleList.realDeliveryDate)))]):a("span",[t._v("-")])]):t._e(),t._v(" "),0!==t.doneFlg||1!==t.saleList.deliveryStatus&&4!==t.saleList.deliveryStatus?t._e():a("div",{staticClass:"gy-form-group"},[t._m(0),t._v(" "),a("div",{staticClass:"d input-date"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"实际交割日"},model:{value:t.realDeliveryDate,callback:function(e){t.realDeliveryDate=e},expression:"realDeliveryDate"}})],1)]),t._v(" "),1==t.saleList.acrossDelivery?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交叉采购合同")]),t._v(" "),t.saleList.erpFileContractModelList&&0!==t.saleList.erpFileContractModelList.length?a("i",{staticClass:"iconfont icon-photo",on:{click:function(e){return t.openDidalog(t.saleList.erpFileContractModelList)}}}):a("i",{staticClass:"iconfont icon-photo-null"})]):t._e(),t._v(" "),3===t.saleList.deliveryStatus?a("div",{staticClass:"gy-form-group form_height"},[a("span",{staticClass:"l"},[t._v("交割凭证")]),t._v(" "),t.saleList.erpDeliveryFileModelList&&0!==t.saleList.erpDeliveryFileModelList.length?a("i",{staticClass:"iconfont icon-photo",on:{click:function(e){return t.openDidalog(t.saleList.erpDeliveryFileModelList)}}}):a("i",{staticClass:"iconfont icon-photo-null"})]):t._e(),t._v(" "),0!==t.doneFlg||1!==t.saleList.deliveryStatus&&4!==t.saleList.deliveryStatus?t._e():a("div",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_upload_dlvy_voucher",expression:"'to_upload_dlvy_voucher'"}],staticClass:"gy-form-group"},[t._m(1),t._v(" "),a("gy-file-upload",{ref:"sFileUpload",on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1),t._v(" "),1==t.saleList.acrossDelivery?a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[t._v("交叉采购合同号")]),t._v(" "),a("span",[t._v(t._s(t.saleList.acrossContractNo))])]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("创建人")]),t._v(" "),a("span",[t._v(t._s(t.saleList.createdName))])]),t._v(" "),a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[t._v("创建时间")]),t._v(" "),a("span",[t._v(t._s(t._f("date")(t.saleList.createdDate,1)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("状态")]),t._v(" "),a("span",[t._v(t._s(t._f("sellDeliveryItemState")(t.saleList.deliveryStatus)))])]),t._v(" "),t.saleList.overdueReason?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("备注")]),t._v(" "),a("span",[t._v(t._s(t.saleList.overdueReason))])]):t._e()]),t._v(" "),5===t.saleList.deliveryStatus&&1===t.isAuth?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("审批备注")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"gy-textarea",attrs:{placeholder:"请填写审批备注",cols:"30",rows:"10"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])])])]):t._e(),t._v(" "),a("gy-file-view",{ref:"contFileView"}),t._v(" "),a("div",{staticClass:"button-wrap"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.back(-1)}}},[t._v("返回")]),t._v(" "),5===t.saleList.deliveryStatus&&1===t.isAuth?[a("button",{staticClass:"gy-button-normal",on:{click:t.approveReject}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.approveSub(1)}}},[t._v("通过")])]:t._e(),t._v(" "),0!==t.doneFlg||1!==t.saleList.deliveryStatus&&4!==t.saleList.deliveryStatus?t._e():a("span",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"to_upload_dlvy_voucher",expression:"'to_upload_dlvy_voucher'"}]},[a("button",{staticClass:"gy-button-normal",on:{click:t.rejUploadDeliveryFile}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:t.subUploadDeliveryFile}},[t._v("保存")])])],2),t._v(" "),a("gy-operation-history",{ref:"operationHis"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("i",{staticStyle:{color:"red"}},[this._v("*")]),this._v("实际交割日")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("i",{staticStyle:{color:"red"}},[this._v("*")]),this._v("上传交割凭证")])}]};var vo=a("C7Lr")(uo,po,!1,function(t){a("RvHm"),a("mxyE")},"data-v-4bf86650",null).exports,mo={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},ho=a("C7Lr")(null,mo,!1,null,null,null).exports,yo={name:"upstream",data:function(){return{total:null,tableData:[],title:null,isDialog:!1,dialogData:[],dialogObj:{title:"序号",num:"",date:""}}},props:{searchForm:{type:Object,defalult:{}}},created:function(){this.init(this.searchForm)},methods:{init:function(t){var e=this;this.$http.post(this.$api.statement.dailyUp,t).then(function(t){0===t.data.code&&(e.total=t.data.data.total,e.tableData=t.data.data.purchaseContractDtos)})},popoverShow:function(t,e){var a=this;1===e?this.$http.post(this.$api.statement.deliveries,{id:t}).then(function(t){0===t.data.code&&(a.dialogData=t.data.data)}):this.$http.post(this.$api.statement.payments,{id:t}).then(function(t){0===t.data.code&&(a.dialogData=t.data.data)})},excel:function(t){var e="日报-上游采购合同-"+this.$tools.parseDate((new Date).getTime())+".xls";this.$tools.exporttoExcel(this,this.$api.statement.dailyUptoExcel,t,e)},turnPage:function(t){this.searchForm.pageNum=t,this.init(this.searchForm)}}},fo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-box table-wrap"},[a("table",{staticClass:"gy-table"},[t._m(0),t._v(" "),0!==t.tableData.length?a("tbody",t._l(t.tableData,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.bizGrpName?e.bizGrpName:"-"))]),t._v(" "),a("td",[t._v(t._s(e.operation?e.operation:"-"))]),t._v(" "),a("td",[e.bizType?a("span",[t._v(t._s(t._f("businessTradeType")(e.bizType)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[e.contSignDate?a("span",[t._v(t._s(t._f("date")(e.contSignDate)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[t._v(t._s(e.contractSn?e.contractSn:"-"))]),t._v(" "),a("td",[t._v(t._s(e.companyName?e.companyName:"-"))]),t._v(" "),a("td",[t._v(t._s(e.sellerCorpName?e.sellerCorpName:"-"))]),t._v(" "),a("td",[t._v(t._s(e.grade?e.grade:"-"))]),t._v(" "),a("td",[t._v(t._s(e.saleContractSn?e.saleContractSn:"-"))]),t._v(" "),a("td",[t._v(t._s(e.productName?e.productName:"-"))]),t._v(" "),a("td",[t._v(t._s(e.unit?e.unit:"-"))]),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.buyQuantity?e.buyQuantity:"-")))]),t._v(" "),a("td",{staticClass:"text-r"},[e.buyPrice?a("span",[t._v(t._s(t._f("numToCash")(e.buyPrice,!0)))]):a("span",[t._v("-")])]),t._v(" "),a("td",{staticClass:"text-r"},[e.totalAmount?a("span",[t._v(t._s(t._f("numToCash")(e.totalAmount)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[e.staDeliveryDate?a("span",[t._v(t._s(t._f("date")(e.staDeliveryDate)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[e.endDeliveryDate?a("span",[t._v(t._s(t._f("date")(e.endDeliveryDate)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[t._v(t._s(e.depositRatio))]),t._v(" "),a("td",[t._v(t._s(e.marginCall))]),t._v(" "),a("td",[e.paymentTypeStr?a("span",[t._v(t._s(e.paymentTypeStr))]):a("span",[t._v("-")])]),t._v(" "),a("td",[e.deliveryType?a("span",[t._v(t._s(t._f("deliveryType")(e.deliveryType)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[t._v(t._s(e.dlvyWarehouse?e.dlvyWarehouse:"-"))]),t._v(" "),a("td",[t._v(t._s(parseInt(100*e.contProgress))+"%")]),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.actbuyPrice?e.actbuyPrice:"-",!0)))]),t._v(" "),a("td",{staticClass:"text-r"},[e.actBuyQuantity?a("span",[t._v(t._s(t._f("numToQuantity")(e.actBuyQuantity)))]):a("span",[t._v("-")])]),t._v(" "),a("td",{staticClass:"text-r"},[e.actContracrPrice?a("span",[t._v(t._s(t._f("numToCash")(e.actContracrPrice,!0)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[t._v(t._s(e.actDlvyWarehouse?e.actDlvyWarehouse:"-"))]),t._v(" "),a("td",{staticClass:"text-r"},[t._v("\n                    "+t._s(t._f("numToQuantity")(e.totalDlvyQty?e.totalDlvyQty:"-"))+"\n                      "),a("el-popover",{attrs:{placement:"top-start",width:"430",trigger:"click"},on:{show:function(a){return t.popoverShow(e.id,1)}}},[a("el-table",{attrs:{data:t.dialogData}},[a("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"交割数量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"交割时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.deliveryDate)))]}}],null,!0)})],1),t._v(" "),e.totalDlvyQty?a("el-button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")]):t._e()],1)],1),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.unDlvyQty?e.unDlvyQty:"-")))]),t._v(" "),a("td",{staticClass:"text-r"},[t._v("\n                    "+t._s(t._f("numToCash")(e.totalPayAmount))+"\n                      "),a("el-popover",{attrs:{placement:"top-start",width:"430",trigger:"click"},on:{show:function(a){return t.popoverShow(e.id,2)}}},[a("el-table",{attrs:{data:t.dialogData}},[a("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{property:"payTotal",label:"付款金额(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToCash")(e.row.payTotal)))]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"付款时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.payTime)))]}}],null,!0)})],1),t._v(" "),e.totalPayAmount?a("el-button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")]):t._e()],1)],1),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.needPayAmount)))]),t._v(" "),a("td",[t._v(t._s(e.invoiceStatusStr?e.invoiceStatusStr:"-"))]),t._v(" "),a("td",[e.remarks?a("el-popover",{attrs:{placement:"top-start",title:"备注",width:"430",trigger:"hover",content:e.remarks}},[a("div",{staticStyle:{height:"300px","overflow-y":"scroll"}},[t._v(t._s(e.remarks?e.remarks:"-"))]),t._v(" "),a("div",{staticClass:"text-overflow",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t._f("cutstring")(e.remarks?e.remarks:"-",20)))])]):a("div",[t._v("-")])],1)])}),0):a("tbody",[t._m(1)])])]),t._v(" "),a("div",{staticClass:"departmentName"},[t._v("共 "+t._s(t.total)+" 条记录")]),t._v(" "),a("el-pagination",{staticStyle:{margin:"20px 0 30px 0"},attrs:{background:"",total:t.total,layout:"prev, pager, next"},on:{"current-change":t.turnPage}}),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.isDialog,width:"30%"},on:{"update:visible":function(e){t.isDialog=e}}},[0!==t.dialogData?a("el-table",{attrs:{data:t.dialogData}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{property:"num",label:t.dialogObj.num}}),t._v(" "),a("el-table-column",{attrs:{property:"date",label:t.dialogObj.date}})],1):a("div",{staticStyle:{"text-align":"center"}},[t._v("\n        暂无数据...\n    ")])],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("业务组")]),t._v(" "),a("th",[t._v("业务操作人")]),t._v(" "),a("th",[t._v("业务类型")]),t._v(" "),a("th",[t._v("合同签订日期")]),t._v(" "),a("th",[t._v("采购合同编号")]),t._v(" "),a("th",[t._v("我方公司")]),t._v(" "),a("th",[t._v("上游公司")]),t._v(" "),a("th",[t._v("评级")]),t._v(" "),a("th",[t._v("对应下游销售合同编号")]),t._v(" "),a("th",[t._v("品名")]),t._v(" "),a("th",[t._v("单位")]),t._v(" "),a("th",[t._v("采购数量(吨)")]),t._v(" "),a("th",[t._v("采购单价(元/吨)")]),t._v(" "),a("th",[t._v("合同金额(元)")]),t._v(" "),a("th",[t._v("合同交割起始日")]),t._v(" "),a("th",[t._v("合同交割终止日")]),t._v(" "),a("th",[t._v("保证金比例")]),t._v(" "),a("th",[t._v("追保比例")]),t._v(" "),a("th",[t._v("结算方式")]),t._v(" "),a("th",[t._v("交割方式")]),t._v(" "),a("th",[t._v("货物交割库")]),t._v(" "),a("th",[t._v("合同履行进度")]),t._v(" "),a("th",[t._v("实际结算单价(元)")]),t._v(" "),a("th",[t._v("实际结算数量(吨)")]),t._v(" "),a("th",[t._v("实际合同结算价格(元)")]),t._v(" "),a("th",[t._v("实际交割库")]),t._v(" "),a("th",[t._v("累计交割数量(吨)")]),t._v(" "),a("th",[t._v("未交割数量(吨)")]),t._v(" "),a("th",[t._v("累计付款金额(元)")]),t._v(" "),a("th",[t._v("应付款余额(元)")]),t._v(" "),a("th",[t._v("发票开具情况")]),t._v(" "),a("th",[t._v("备注")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"null-td",staticStyle:{"text-align":"center"},attrs:{colspan:"15"}},[this._v("没有找到可显示的数据...")])])}]};var _o=a("C7Lr")(yo,fo,!1,function(t){a("2NUA")},"data-v-fa5d0ea2",null).exports,go={name:"downstream",data:function(){return{total:null,tableData:[]}},props:{searchForm:{type:Object,defalult:{}}},created:function(){this.init(this.searchForm)},methods:{init:function(t){var e=this;this.$http.post(this.$api.statement.dailyDown,t).then(function(t){e.total=t.data.data.total,e.tableData=t.data.data.list})},excel:function(t){var e="日报-下游销售合同-"+this.$tools.parseDate((new Date).getTime())+".xls";this.$tools.exporttoExcel(this,this.$api.statement.dailyDowntoExcel,t,e)},turnPage:function(t){this.searchForm.pageNum=t,this.init(this.searchForm)}}},Co={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-box table-wrap"},[a("table",{staticClass:"gy-table"},[t._m(0),t._v(" "),0!==t.tableData.length?a("tbody",t._l(t.tableData,function(e,s){return a("tr",{key:s},[a("td",{staticClass:"wid150"},[t._v(t._s(e.organizationName?e.organizationName:"-"))]),t._v(" "),a("td",[t._v(t._s(e.businessManagerName?e.businessManagerName:"-"))]),t._v(" "),a("td",[e.bizType?a("span",[t._v(t._s(t._f("businessTradeType")(e.bizType)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[e.signedDate?a("span",[t._v(t._s(t._f("date")(e.signedDate)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[t._v(t._s(e.salesContractCode?e.salesContractCode:"-"))]),t._v(" "),a("td",[t._v(t._s(e.intermediaryCorpName?e.intermediaryCorpName:"-"))]),t._v(" "),a("td",[t._v(t._s(e.customerName?e.customerName:"-"))]),t._v(" "),a("td",[t._v(t._s(e.customerGrade?e.customerGrade:"-"))]),t._v(" "),a("td",[t._v(t._s(e.purchaseContractCode?e.purchaseContractCode:"-"))]),t._v(" "),a("td",[t._v(t._s(e.productName?e.productName:"-"))]),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.salesQuantity?e.salesQuantity:"-")))]),t._v(" "),a("td",{staticClass:"text-r"},[e.salesUnitPrice?a("span",[t._v(t._s(t._f("numToCash")(e.salesUnitPrice,!0)))]):a("span",[t._v("-")])]),t._v(" "),a("td",{staticClass:"text-r"},[e.contractAmount?a("span",[t._v(t._s(t._f("numToCash")(e.contractAmount)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[e.deliveryDateStart?a("span",[t._v(t._s(t._f("date")(e.deliveryDateStart)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[e.deliveryDateEnd?a("span",[t._v(t._s(t._f("date")(e.deliveryDateEnd)))]):a("span",[t._v("-")])]),t._v(" "),e.depositRatio?a("td",[t._v(t._s(e.depositRatio)+"%")]):a("td",[t._v("无")]),t._v(" "),e.depositRatioSubstract&&e.depositRatioAppend?a("td",[t._v("跌"+t._s(e.depositRatioSubstract)+"%补"+t._s(e.depositRatioAppend)+"%")]):a("td",[t._v("无")]),t._v(" "),a("td",[e.paymentType?a("span",[t._v(t._s(t._f("paymentType")(e.paymentType)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[e.deliveryType?a("span",[t._v(t._s(t._f("deliveryType")(e.deliveryType)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[t._v(t._s(e.deliveryWarehouseName?e.deliveryWarehouseName:"-"))]),t._v(" "),a("td",[t._v(t._s(parseInt(100*e.contractProcess))+"%")]),t._v(" "),a("td",{staticClass:"text-r"},[e.realPrice?a("span",[t._v(t._s(t._f("numToCash")(e.realPrice,!0)))]):a("span",[t._v("-")])]),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.realQuantity?e.realQuantity:"-")))]),t._v(" "),a("td",{staticClass:"text-r"},[e.realContractPrice?a("span",[t._v(t._s(t._f("numToCash")(e.realContractPrice,!0)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[t._v(t._s(e.realDeliveryWarehouseName?e.realDeliveryWarehouseName:"-"))]),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.deliveriedQuantity?e.deliveriedQuantity:"-")))]),t._v(" "),a("td",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.undeliveriedQuantity?e.undeliveriedQuantity:"-")))]),t._v(" "),a("td",{staticClass:"text-r"},[e.receivedAmount?a("span",[t._v(t._s(t._f("numToCash")(e.receivedAmount)))]):a("span",[t._v("-")])]),t._v(" "),a("td",{staticClass:"text-r"},[e.unreceivedAmount?a("span",[t._v(t._s(t._f("numToCash")(e.unreceivedAmount)))]):a("span",[t._v("-")])]),t._v(" "),a("td",[t._v(t._s(e.invoiceStatusValue?e.invoiceStatusValue:"-"))]),t._v(" "),a("td",[e.remark?a("el-popover",{attrs:{placement:"top-start",title:"备注",width:"430",trigger:"hover",content:e.remark}},[a("div",{staticStyle:{height:"300px","overflow-y":"scroll"}},[t._v(t._s(e.remark?e.remark:"-"))]),t._v(" "),a("div",{staticClass:"text-overflow",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t._f("cutstring")(e.remark?e.remark:"-",20)))])]):a("div",[t._v("-")])],1)])}),0):a("tbody",[t._m(1)])])]),t._v(" "),a("div",{staticClass:"departmentName"},[t._v("共 "+t._s(t.total)+" 条记录")]),t._v(" "),a("el-pagination",{staticStyle:{margin:"20px 0 30px 0"},attrs:{background:"",total:t.total,layout:"prev, pager, next"},on:{"current-change":t.turnPage}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("业务组")]),t._v(" "),a("th",[t._v("业务操作人")]),t._v(" "),a("th",[t._v("业务类型")]),t._v(" "),a("th",[t._v("合同签订日期")]),t._v(" "),a("th",[t._v("销售合同编号")]),t._v(" "),a("th",[t._v("我方合同主体")]),t._v(" "),a("th",[t._v("客户名称")]),t._v(" "),a("th",[t._v("评级")]),t._v(" "),a("th",[t._v("对应上游采购合同编号")]),t._v(" "),a("th",[t._v("品名")]),t._v(" "),a("th",[t._v("销售数量(吨)")]),t._v(" "),a("th",[t._v("销售单价(元/吨)")]),t._v(" "),a("th",[t._v("合同金额(元)")]),t._v(" "),a("th",[t._v("合同交割起始日")]),t._v(" "),a("th",[t._v("合同交割终止日")]),t._v(" "),a("th",[t._v("保证金比例")]),t._v(" "),a("th",[t._v("追保比例")]),t._v(" "),a("th",[t._v("结算方式")]),t._v(" "),a("th",[t._v("交割方式")]),t._v(" "),a("th",[t._v("货物交割库")]),t._v(" "),a("th",[t._v("合同履行进度")]),t._v(" "),a("th",[t._v("实际结算单价(元)")]),t._v(" "),a("th",[t._v("实际结算数量(吨)")]),t._v(" "),a("th",[t._v("实际合同结算价格(元)")]),t._v(" "),a("th",[t._v("实际交割库")]),t._v(" "),a("th",[t._v("累计交割数量(吨)")]),t._v(" "),a("th",[t._v("未交割数量(吨)")]),t._v(" "),a("th",[t._v("累计收款金额(元)")]),t._v(" "),a("th",[t._v("应付款余额(元)")]),t._v(" "),a("th",[t._v("发票开具情况")]),t._v(" "),a("th",[t._v("备注")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"null-td",staticStyle:{"text-align":"center"},attrs:{colspan:"15"}},[this._v("没有找到可显示的数据...")])])}]};var bo={components:{gyUpstream:_o,gyDownstream:a("C7Lr")(go,Co,!1,function(t){a("iTlG")},"data-v-b0e71684",null).exports},data:function(){return{total:30,checkAll:!1,isIndeterminate:!0,value:1,dialogVisible:!1,isShowSearch:!1,search:{pageNum:1,pageSize:10,contractSignedDateStart:null,contractSignedDateEnd:null,usrOrganizationName:null,usrOrganizationId:null,bizType:null,bizTypeName:null,operationUserName:null,deliveryWarehouseName:null,realDeliveryWarehouseName:null,contractDeliveredStartDateStart:null,contractDeliveredStartDateEnd:null,contractDeliveredEndDateStart:null,contractDeliveredEndDateEnd:null,ourCompanyName:null},tabs:[{id:"",value:"上游采购合同",data:null},{id:1,value:"下游销售合同",data:null}],activeId:0,deliveryNamesData:[],organizationDate:[]}},created:function(){this.init()},methods:{init:function(){var t=this;this.$http.post(this.$api.statement.deliveryNames,{}).then(function(e){if(0===e.data.code){var a=e.data.data;a.forEach(function(t){t.value=t.deliveryWarehouseName}),t.deliveryNamesData=a}}),this.$http.get(this.$api.statement.organization).then(function(e){if(0===e.data.code){var a=e.data.data;a.forEach(function(t){t.label=t.name,t.value=t.id}),t.organizationDate=a}})},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},tabClick:function(t){this.activeId=t,console.log(this.activeId)},excel:function(){0===this.activeId?this.$refs.upstream.excel(this.search):this.$refs.downstream.excel(this.search)},submit:function(){0===this.activeId?this.$refs.upstream.init(this.search):this.$refs.downstream.init(this.search)}}},wo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"standingBook"},[a("div",{staticClass:"search-btn"},[a("span",{staticClass:"search-h",on:{click:t.ShowSearch}},[t._v("高级搜索"),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticClass:"my-search clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同签订日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期"},model:{value:t.search.contractSignedDateStart,callback:function(e){t.$set(t.search,"contractSignedDateStart",e)},expression:"search.contractSignedDateStart"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期"},model:{value:t.search.contractSignedDateEnd,callback:function(e){t.$set(t.search,"contractSignedDateEnd",e)},expression:"search.contractSignedDateEnd"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group",class:{"last-active":!t.isShowSearch}},[a("span",{staticClass:"l"},[t._v("业务组")]),t._v(" "),a("el-select",{model:{value:t.search.usrOrganizationId,callback:function(e){t.$set(t.search,"usrOrganizationId",e)},expression:"search.usrOrganizationId"}},t._l(t.organizationDate,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.id}})}),1)],1),t._v(" "),t.isShowSearch?a("div",{staticClass:"search-form"},[a("div",{staticClass:"gy-form-group cl"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("el-select",{model:{value:t.search.bizType,callback:function(e){t.$set(t.search,"bizType",e)},expression:"search.bizType"}},t._l(t.$constant.businessType4Erp,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.operationUserName,expression:"search.operationUserName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.operationUserName},on:{input:function(e){e.target.composing||t.$set(t.search,"operationUserName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("交割库")]),t._v(" "),a("el-select",{model:{value:t.search.deliveryWarehouseName,callback:function(e){t.$set(t.search,"deliveryWarehouseName",e)},expression:"search.deliveryWarehouseName"}},t._l(t.deliveryNamesData,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.value}})}),1)],1),t._v(" "),0===this.activeId?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.sellerCompanyName,expression:"search.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"sellerCompanyName",e.target.value)}}})]):t._e(),t._v(" "),1===this.activeId?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.buyerCompanyName,expression:"search.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"buyerCompanyName",e.target.value)}}})]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("实际交割库")]),t._v(" "),a("el-select",{model:{value:t.search.realDeliveryWarehouseName,callback:function(e){t.$set(t.search,"realDeliveryWarehouseName",e)},expression:"search.realDeliveryWarehouseName"}},t._l(t.deliveryNamesData,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同交割起始日")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期"},model:{value:t.search.contractDeliveredStartDateStart,callback:function(e){t.$set(t.search,"contractDeliveredStartDateStart",e)},expression:"search.contractDeliveredStartDateStart"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期"},model:{value:t.search.contractDeliveredStartDateEnd,callback:function(e){t.$set(t.search,"contractDeliveredStartDateEnd",e)},expression:"search.contractDeliveredStartDateEnd"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同交割终止日")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期"},model:{value:t.search.contractDeliveredEndDateStart,callback:function(e){t.$set(t.search,"contractDeliveredEndDateStart",e)},expression:"search.contractDeliveredEndDateStart"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期"},model:{value:t.search.contractDeliveredEndDateEnd,callback:function(e){t.$set(t.search,"contractDeliveredEndDateEnd",e)},expression:"search.contractDeliveredEndDateEnd"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group",class:{"last-active":t.isShowSearch}},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.ourCompanyName,expression:"search.ourCompanyName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.ourCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"ourCompanyName",e.target.value)}}})])]):t._e(),t._v(" "),a("span",{staticClass:"searchicon",on:{click:function(e){return t.submit()}}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"tabs cl"},[a("ul",t._l(t.tabs,function(e,s){return a("li",{key:s,class:{active:s===t.activeId},on:{click:function(e){return t.tabClick(s)}}},[a("span",[t._v(t._s(e.value))])])}),0),t._v(" "),a("div",{staticClass:"button-wrap"},[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.excel()}}},[t._v("下载Excel")])])]),t._v(" "),a("div",{staticClass:"div"},[a("div",{staticClass:"my-table"},[0===t.activeId?a("gy-upstream",{ref:"upstream",attrs:{searchForm:t.search}}):t._e(),t._v(" "),1===t.activeId?a("gy-downstream",{ref:"downstream",attrs:{searchForm:t.search}}):t._e()],1)])])},staticRenderFns:[]};var Io=a("C7Lr")(bo,wo,!1,function(t){a("alHQ"),a("4zvb")},"data-v-5fec07c4",null).exports,ko={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search-wrapper"},[a("div",{staticClass:"search-form"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司名称")]),t._v(" "),a("input",{attrs:{type:"text",placeholder:"请输入上游公司名称"}}),t._v(" "),t.isShowSearch?t._e():a("span",{staticClass:"searchicon"},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),t.isShowSearch?[t._m(3),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期"},model:{value:t.search.payDateStart,callback:function(e){t.$set(t.search,"payDateStart",e)},expression:"search.payDateStart"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期"},model:{value:t.search.payDateEnd,callback:function(e){t.$set(t.search,"payDateEnd",e)},expression:"search.payDateEnd"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("input",{attrs:{type:"text",placeholder:"请选择"}}),t._v(" "),t.isShowSearch?a("span",{staticClass:"searchicon"},[a("i",{staticClass:"iconfont icon-search"})]):t._e()])]:t._e(),t._v(" "),a("div",{staticClass:"clearfix"})],2),t._v(" "),a("span",{staticClass:"search-btn",on:{click:t.ShowSearch}},[t._v("高级搜索"),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),t._m(4)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gy-form-group"},[e("span",{staticClass:"l"},[this._v("合同编号")]),this._v(" "),e("input",{attrs:{type:"text",placeholder:"请输入合同编号"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gy-form-group"},[e("span",{staticClass:"l"},[this._v("商品编号")]),this._v(" "),e("input",{attrs:{type:"text",placeholder:"请输入商品名称"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gy-form-group"},[e("span",{staticClass:"l"},[this._v("交割库")]),this._v(" "),e("input",{attrs:{type:"text",placeholder:"请输入交割库名称"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gy-form-group"},[e("span",{staticClass:"l"},[this._v("下游公司名称")]),this._v(" "),e("input",{attrs:{type:"text",placeholder:"请输入下游公司名称"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th",[t._v("签订月份")]),t._v(" "),a("th",[t._v("主体")]),t._v(" "),a("th",[t._v("品名")]),t._v(" "),a("th",[t._v("采购合同编号")]),t._v(" "),a("th",[t._v("销售合同编号")]),t._v(" "),a("th",[t._v("供应商")]),t._v(" "),a("th",[t._v("采购合同数量(吨)")]),t._v(" "),a("th",[t._v("采购结算数量(吨)")]),t._v(" "),a("th",[t._v("采购单价(元/吨)")]),t._v(" "),a("th",[t._v("结算单价(元/吨)")]),t._v(" "),a("th",[t._v("采购合同总额(元)")]),t._v(" "),a("th",[t._v("付款总金额(元)")]),t._v(" "),a("th",[t._v("付款金额1")]),t._v(" "),a("th",[t._v("付款时间")]),t._v(" "),a("th",[t._v("付款金额2")]),t._v(" "),a("th",[t._v("付款时间")]),t._v(" "),a("th",[t._v("上游交割期")]),t._v(" "),a("th",[t._v("上游实际交割日")]),t._v(" "),a("th",[t._v("开票日期")]),t._v(" "),a("th",[t._v("销售合同编号")]),t._v(" "),a("th",[t._v("客户")]),t._v(" "),a("th",[t._v("销售合同数量(吨)")]),t._v(" "),a("th",[t._v("销售结算数量(吨)")]),t._v(" "),a("th",[t._v("销售单价(元/吨)")]),t._v(" "),a("th",[t._v("销售结算单价(元/吨)")]),t._v(" "),a("th",[t._v("销售总金额")]),t._v(" "),a("th",[t._v("收款总金额")]),t._v(" "),a("th",[t._v("收款金额1")]),t._v(" "),a("th",[t._v("收款时间")]),t._v(" "),a("th",[t._v("收款金额2")]),t._v(" "),a("th",[t._v("收款时间")]),t._v(" "),a("th",[t._v("下游交割时间")]),t._v(" "),a("th",[t._v("下游实际交割日")]),t._v(" "),a("th",[t._v("开票日期")]),t._v(" "),a("th",[t._v("交割完成月")]),t._v(" "),a("th",[t._v("发票完成月")]),t._v(" "),a("th",[t._v("毛利")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td")])])])])}]};var xo=a("C7Lr")({data:function(){return{isShowSearch:!1,search:{payDateStart:null,payDateEnd:null}}},methods:{ShowSearch:function(){this.isShowSearch=!this.isShowSearch}}},ko,!1,function(t){a("jY0T")},"data-v-6347a334",null).exports,Do={data:function(){return{total:0,checkAll:!1,tableData:[],payTotalAll:[],value:1,tabName:"first",dialogVisible:!1,showFlagsDiaAll:!1,showFlagsDiaExe:!1,payTotalAllDia:!1,isShowSearch:!1,businessManagerGroup:[],buyOrderPayTotals:[],sellOrderPayTotals:[],buyDeliveryDates:[],sellDeliveryDates:[],acrossDeliverys:[],search:{pageNum:1,pageSize:10,bizType:null,usrOrganizationId:null,usrOrganizationName:null,buyerCompanyName:null,sellerCompanyName:null,buyDeliveryWarehouseName:null,sellDeliveryWarehouseName:null,buyDeliveryDateS:null,buyDeliveryDateE:null,sellDeliveryDateS:null,sellDeliveryDateE:null,usrCompanyName:null,contractCreateDateS:null,contractCreateDateE:null,activeId:0},tabs:[{id:0,value:"全部",data:null},{id:4,value:"执行台账",data:null},{id:5,value:"业务台账",data:null},{id:6,value:"风控台账",data:null},{id:8,value:"财务台账",data:null}],minTabActiveId:6,tabsChildren:[{id:6,value:"上游合同",data:null},{id:7,value:"下游合同",data:null}],activeId:0,a:null,checkAllTag:!0,showFlags:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],showFlagsdb:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],showFlagsdbExe:[!0,!0,!0,!0,!1,!1,!0,!0,!0,!0,!0,!0,!1,!0,!0,!1,!0,!1,!0,!0,!1,!1,!1,!1,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!0,!0,!0,!1,!1,!0,!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!1,!0,!0,!1,!1,!1,!0,!1,!1,!1,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],showFlagsExc:[!1,!1,!0,!0,!1,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],showFlagsdbExcExe:[!0,!0,!0,!0,!1,!1,!0,!0,!0,!0,!0,!0,!1,!0,!0,!1,!0,!0,!0,!0,!1,!1,!1,!1,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!0,!1,!1,!1,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],payTotalAllTit:{title:"付款金额明细",payTotal:"付款金额",createdDate:"付款时间"}}},created:function(){this.initShowFlags(),this.init(),this.getUserOrganization()},methods:{init:function(){var t=this;this.$http.post(this.$api.statement.standingBook,this.search).then(function(e){var a=e.data.data.list;1===a.length&&null===a[0]?t.tableData=null:t.tableData=a,t.total=e.data.data.total}).catch(function(t){console.log(t)})},turnPage:function(t){this.search.pageNum=t,this.init()},prevClick:function(t){this.search.pageNum=t,this.init()},nextClick:function(t){this.search.pageNum=t,this.init()},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},tabClick:function(t){switch(this.activeId=t.id,this.search.activeId=t.id,t.id){case 0:this.initShowFlags();break;case 4:this.initShowFlagsExe();break;case 5:this.showFlags=this.showFlagsExc.concat(),this.showFlags[26]=!0,this.showFlags[3]=!0,this.showFlags[39]=!0,this.showFlags[16]=!0,this.showFlags[17]=!0,this.showFlags[6]=!0,this.showFlags[30]=!0,this.showFlags[8]=!0,this.showFlags[9]=!0,this.showFlags[67]=!0,this.showFlags[59]=!0,this.showFlags[60]=!0,this.showFlags[19]=!0,this.showFlags[69]=!0,this.showFlags[24]=!0,this.showFlags[36]=!0,this.showFlags[33]=!0,this.showFlags[34]=!0,this.showFlags[81]=!0,this.showFlags[82]=!0,this.showFlags[83]=!0,this.showFlags[84]=!0;break;case 6:this.showFlags=this.showFlagsExc.concat(),this.showFlags[26]=!0,this.showFlags[1]=!0,this.showFlags[37]=!0,this.showFlags[70]=!0,this.showFlags[3]=!0,this.showFlags[71]=!0,this.showFlags[39]=!0,this.showFlags[27]=!0,this.showFlags[2]=!0,this.showFlags[16]=!0,this.showFlags[74]=!0,this.showFlags[28]=!0,this.showFlags[3]=!0,this.showFlags[40]=!0,this.showFlags[6]=!0,this.showFlags[30]=!0,this.showFlags[7]=!0,this.showFlags[41]=!0,this.showFlags[42]=!0,this.showFlags[43]=!0,this.showFlags[44]=!0,this.showFlags[45]=!0,this.showFlags[46]=!0,this.showFlags[13]=!0,this.showFlags[14]=!0,this.showFlags[48]=!0,this.showFlags[49]=!0,this.showFlags[8]=!0,this.showFlags[50]=!0,this.showFlags[72]=!0,this.showFlags[35]=!0,this.showFlags[81]=!0,this.showFlags[82]=!0;break;case 7:this.showFlags=this.showFlagsExc.concat(),this.showFlags[26]=!0,this.showFlags[1]=!0,this.showFlags[37]=!0,this.showFlags[70]=!0,this.showFlags[3]=!0,this.showFlags[71]=!0,this.showFlags[51]=!0,this.showFlags[28]=!0,this.showFlags[2]=!0,this.showFlags[17]=!0,this.showFlags[75]=!0,this.showFlags[27]=!0,this.showFlags[3]=!0,this.showFlags[40]=!0,this.showFlags[9]=!0,this.showFlags[29]=!0,this.showFlags[10]=!0,this.showFlags[52]=!0,this.showFlags[53]=!0,this.showFlags[54]=!0,this.showFlags[55]=!0,this.showFlags[56]=!0,this.showFlags[57]=!0,this.showFlags[18]=!0,this.showFlags[19]=!0,this.showFlags[59]=!0,this.showFlags[60]=!0,this.showFlags[11]=!0,this.showFlags[61]=!0,this.showFlags[73]=!0,this.showFlags[35]=!0,this.showFlags[83]=!0,this.showFlags[84]=!0;break;case 8:this.showFlags=this.showFlagsExc.concat(),this.showFlags[26]=!0,this.showFlags[37]=!0,this.showFlags[39]=!0,this.showFlags[1]=!0,this.showFlags[36]=!0,this.showFlags[80]=!0,this.showFlags[2]=!0,this.showFlags[3]=!0,this.showFlags[40]=!0,this.showFlags[71]=!0,this.showFlags[27]=!0,this.showFlags[0]=!0,this.showFlags[16]=!0,this.showFlags[30]=!0,this.showFlags[6]=!0,this.showFlags[7]=!0,this.showFlags[8]=!0,this.showFlags[50]=!0,this.showFlags[32]=!0,this.showFlags[43]=!0,this.showFlags[44]=!0,this.showFlags[45]=!0,this.showFlags[62]=!0,this.showFlags[63]=!0,this.showFlags[12]=!0,this.showFlags[72]=!0,this.showFlags[33]=!0,this.showFlags[64]=!0,this.showFlags[5]=!0,this.showFlags[22]=!0,this.showFlags[23]=!0,this.showFlags[28]=!0,this.showFlags[4]=!0,this.showFlags[17]=!0,this.showFlags[28]=!0,this.showFlags[9]=!0,this.showFlags[10]=!0,this.showFlags[11]=!0,this.showFlags[61]=!0,this.showFlags[54]=!0,this.showFlags[55]=!0,this.showFlags[56]=!0,this.showFlags[65]=!0,this.showFlags[66]=!0,this.showFlags[21]=!0,this.showFlags[73]=!0,this.showFlags[34]=!0,this.showFlags[38]=!0,this.showFlags[25]=!0,this.showFlags[31]=!0,this.showFlags[47]=!0,this.showFlags[24]=!0,this.showFlags[58]=!0,this.showFlags[29]=!0,this.showFlags[81]=!0,this.showFlags[82]=!0,this.showFlags[83]=!0,this.showFlags[84]=!0}},saveShowFlagsdb:function(){this.showFlags=this.showFlagsdb.concat(),window.localStorage.setItem("showFlags",Xn()(this.showFlags)),this.showFlagsDiaAll=!1},saveShowFlagsdbExe:function(){this.showFlags=this.showFlagsdbExe.concat(),window.localStorage.setItem("showFlagsExe",Xn()(this.showFlags)),this.showFlagsDiaExe=!1},initShowFlags:function(){var t=window.localStorage.getItem("showFlags");null!=t&&(this.showFlags=JSON.parse(t),this.showFlagsdb=this.showFlags.concat()),null==t&&(this.showFlags=new Array(90).fill(!0))},initShowFlagsExe:function(){var t=window.localStorage.getItem("showFlagsExe");null!=t&&(this.showFlags=JSON.parse(t),this.showFlagsdbExe=this.showFlags.concat()),null==t&&(this.showFlags=this.showFlagsdbExcExe.concat())},getUserOrganization:function(){var t=this;this.$http.get(this.$api.contract.getUserOrganization).then(function(e){t.businessManagerGroup=e.data.data}).catch(function(t){console.log(t)})},exportExcel:function(){this.$tools.exporttoExcel(this,this.$api.statement.standingBookReportExport,this.search,null,6e4)},aCheckAll:function(t){t&&(this.showFlagsdb=new Array(90).fill(!0)),t||(this.showFlagsdb=this.showFlagsExc.concat())},aCheckAllExe:function(t){t&&(this.showFlagsdbExe=this.showFlagsdbExcExe.concat()),t||(this.showFlagsdbExe=this.showFlagsExc.concat())},checkShowFlagsDiag:function(){0===this.activeId&&(this.showFlagsDiaAll=!0),4===this.activeId&&(this.showFlagsDiaExe=!0)},handleClick:function(t,e){this.minTabActiveId=e,this.tabClick(this.tabsChildren[t])}}},So={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"standingBook"},[a("div",{staticClass:"search-btn"},[a("span",{staticClass:"search-h",on:{click:t.ShowSearch}},[t._v("高级搜索"),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticClass:"my-search clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.search.essenceId,expression:"search.essenceId",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入合同要素ID"},domProps:{value:t.search.essenceId},on:{input:function(e){e.target.composing||t.$set(t.search,"essenceId",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务组")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.search.usrOrganizationName,expression:"search.usrOrganizationName",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入业务组"},domProps:{value:t.search.usrOrganizationName},on:{input:function(e){e.target.composing||t.$set(t.search,"usrOrganizationName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{clear:"both"}},[a("span",{staticClass:"l",staticStyle:{width:"120px"}},[t._v("合同签订月份")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"开始日期"},model:{value:t.search.contractCreateDateS,callback:function(e){t.$set(t.search,"contractCreateDateS",e)},expression:"search.contractCreateDateS"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"结束日期"},model:{value:t.search.contractCreateDateE,callback:function(e){t.$set(t.search,"contractCreateDateE",e)},expression:"search.contractCreateDateE"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("el-select",{model:{value:t.search.bizType,callback:function(e){t.$set(t.search,"bizType",e)},expression:"search.bizType"}},t._l(t.$constant.businessType4Erp,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),t.isShowSearch?t._e():a("span",{staticClass:"searchicon",on:{click:function(e){return t.init()}}},[a("i",{staticClass:"iconfont icon-search"})])],1),t._v(" "),t.isShowSearch?a("div",{staticClass:"search-form",attrs:{clearable:""}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.search.buyerCompanyName,expression:"search.buyerCompanyName",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"buyerCompanyName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.search.sellerCompanyName,expression:"search.sellerCompanyName",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"sellerCompanyName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",class:{"last-active":t.isShowSearch}},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.search.usrCompanyName,expression:"search.usrCompanyName",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.usrCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"usrCompanyName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("span",{staticClass:"searchicon",on:{click:function(e){return t.init()}}},[a("i",{staticClass:"iconfont icon-search"})])])]):t._e()]),t._v(" "),a("div",{staticClass:"tabs cl"},[a("ul",t._l(t.tabs,function(e,s){return a("li",{key:s,class:{active:e.id===t.activeId||7===t.activeId&&6===e.id},on:{click:function(a){return t.tabClick(e)}}},[a("span",[t._v(t._s(e.value))])])}),0),t._v(" "),a("div",{staticClass:"button-wrap"},[0===t.activeId||4===t.activeId?a("button",{staticClass:"gy-button-extra mr10",on:{click:t.checkShowFlagsDiag}},[t._v("自定义列表项")]):t._e(),t._v(" "),0===t.activeId||4===t.activeId?a("button",{staticClass:"gy-button-normal",on:{click:t.exportExcel}},[t._v("下载Excel")]):t._e()])]),t._v(" "),6===t.activeId||7===t.activeId?a("div",[a("ul",{staticClass:"tabs"},t._l(t.tabsChildren,function(e,s){return a("li",{key:s,class:{"min-tab-active":e.id===t.minTabActiveId},on:{click:function(a){return t.handleClick(s,e.id)}}},[a("span",[t._v(t._s(e.value))])])}),0)]):t._e(),t._v(" "),a("div",{staticClass:"div"},[a("div",{staticClass:"gy-table my-table"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[t.showFlags[26]?a("el-table-column",{key:"contractCode",attrs:{prop:"contractCode",fixed:"",label:"合同要素ID",width:"120"}}):t._e(),t._v(" "),t.showFlags[37]?a("el-table-column",{key:"bizTypeDesc",attrs:{label:"业务类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.bizType?a("div",[t._v(t._s(t._f("businessTradeType")(e.row.bizType)))]):a("div",[t._v("-")])]}}],null,!1,1774005154)}):t._e(),t._v(" "),t.showFlags[39]?a("el-table-column",{key:"transactionType",attrs:{label:"交易类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.transactionType?a("div",[t._v(t._s(t.$constant.contractTradeTypeList[e.row.transactionType-1].name))]):a("div",[t._v("-")])]}}],null,!1,2079288970)}):t._e(),t._v(" "),t.showFlags[1]?a("el-table-column",{key:"organizationName",attrs:{label:"业务组",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.organizationName?e.row.organizationName:"-"))])]}}],null,!1,1241791718)}):t._e(),t._v(" "),t.showFlags[36]?a("el-table-column",{key:"businessManagerName",attrs:{label:"业务操作人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.businessManagerName?e.row.businessManagerName:"-"))])]}}],null,!1,4246015014)}):t._e(),t._v(" "),t.showFlags[80]?a("el-table-column",{key:"executiveName",attrs:{label:"执行操作人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.executiveName?e.row.executiveName:"-"))])]}}],null,!1,4125863238)}):t._e(),t._v(" "),t.showFlags[2]?a("el-table-column",{key:"usrCompanyName",attrs:{label:"我方公司",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.usrCompanyName?e.row.usrCompanyName:"-"))])]}}],null,!1,2385527526)}):t._e(),t._v(" "),t.showFlags[3]?a("el-table-column",{key:"prodName",attrs:{label:"品名",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.prodName?e.row.prodName:"-"))])]}}],null,!1,3308208358)}):t._e(),t._v(" "),t.showFlags[40]?a("el-table-column",{key:"standard",attrs:{label:"规格",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.standard?e.row.standard:"-"))])]}}],null,!1,3178131558)}):t._e(),t._v(" "),t.showFlags[71]?a("el-table-column",{key:"orderExecuteStatus",attrs:{label:"执行状态",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.buyOrderExecuteStatus||e.row.sellOrderExecuteStatus?a("div",[t._v("\n                "+t._s(e.row.buyOrderExecuteStatus)+"\n                "+t._s(e.row.sellOrderExecuteStatus)+"\n              ")]):a("div",[t._v("-")])]}}],null,!1,2886447324)}):t._e(),t._v(" "),t.showFlags[27]?a("el-table-column",{key:"buyContractCode",attrs:{label:"采购合同编号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyContractCode?e.row.buyContractCode:"-"))])]}}],null,!1,136801798)}):t._e(),t._v(" "),t.showFlags[0]?a("el-table-column",{key:"buySealPassingTime",attrs:{label:"上游签订日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buySealPassingTime?e.row.buySealPassingTime:"-"))])]}}],null,!1,1560670374)}):t._e(),t._v(" "),t.showFlags[76]?a("el-table-column",{key:"buyPlanNumber",attrs:{label:"采购纸质合同号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyPlanNumber?e.row.buyPlanNumber:"-"))])]}}],null,!1,3601002662)}):t._e(),t._v(" "),t.showFlags[77]?a("el-table-column",{key:"buyStatisticalCaliber",attrs:{label:"上游统计口径",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyStatisticalCaliber?e.row.buyStatisticalCaliber:"-"))])]}}],null,!1,3341243174)}):t._e(),t._v(" "),t.showFlags[16]?a("el-table-column",{key:"sellerCompanyName",attrs:{label:"上游公司",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyerCompanyName?e.row.buyerCompanyName:"-"))])]}}],null,!1,2864697254)}):t._e(),t._v(" "),t.showFlags[74]?a("el-table-column",{key:"buyGrade",attrs:{label:"上游公司评级",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyGrade?e.row.buyGrade:"-"))])]}}],null,!1,1652706278)}):t._e(),t._v(" "),t.showFlags[30]?a("el-table-column",{key:"buySkuQuantity",attrs:{label:"采购合同数量(吨)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.buySkuQuantity)))])]}}],null,!1,2509829282)}):t._e(),t._v(" "),t.showFlags[6]?a("el-table-column",{key:"buySkuPrice",attrs:{prop:"buySkuPrice",label:"采购单价(元/吨)",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.buySkuPrice,!0)))])]}}],null,!1,2240981644)}):t._e(),t._v(" "),t.showFlags[7]?a("el-table-column",{key:"buyTotalAmount",attrs:{label:"采购合同总金额(元)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.buyTotalAmount)))])]}}],null,!1,2263225816)}):t._e(),t._v(" "),t.showFlags[8]?a("el-table-column",{key:"buyPayTotalAll",attrs:{label:"付款总金额(元)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!=e.row.buyPayTotalAll?a("div",{staticClass:"text-r"},[a("span",[t._v(t._s(t._f("numToCash")(e.row.buyPayTotalAll)))]),t._v(" "),e.row.buyOrderPayTotals.length>1?a("el-popover",{attrs:{placement:"top-start",width:"430",trigger:"click"}},[a("el-table",{attrs:{data:e.row.buyOrderPayTotals}},[a("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{property:"payTotal",label:"付款金额(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("numToCash")(e.row.payTotal)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{property:"createdDate",label:"付款日期",width:"180"}})],1),t._v(" "),e.row.buyOrderPayTotals.length>1?a("el-button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")]):t._e()],1):t._e()],1):a("div",{staticClass:"text-r"},[t._v("0.00")])]}}],null,!1,3379924435)}):t._e(),t._v(" "),t.showFlags[50]?a("el-table-column",{key:"buyRemainPaymentPay",attrs:{prop:"buyRemainPaymentPay",label:"应付款余额(元)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.buyRemainPaymentPay)))])]}}],null,!1,1822692921)}):t._e(),t._v(" "),t.showFlags[32]?a("el-table-column",{key:"remarks2",attrs:{label:"单边保证金(元)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.buyDepositAmount?e.row.buyDepositAmount:"0")))])]}}],null,!1,3810060178)}):t._e(),t._v(" "),t.showFlags[43]?a("el-table-column",{key:"buyDepositRatio",attrs:{prop:"buyDepositRatio",label:"上游保证金比例",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.buyDepositRatioDesc))]}}],null,!1,3262639763)}):t._e(),t._v(" "),t.showFlags[44]?a("el-table-column",{key:"buyDepositRatioSubtract",attrs:{prop:"buyDepositRatioSubtract",label:"上游追保比例",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.buyDepositRatioSADesc)+" ")]}}],null,!1,3002857194)}):t._e(),t._v(" "),t.showFlags[45]?a("el-table-column",{key:"buyPaymentTypeDesc",attrs:{label:"上游结算方式",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyPaymentTypeDesc?e.row.buyPaymentTypeDesc:"-"))])]}}],null,!1,2225815206)}):t._e(),t._v(" "),t.showFlags[46]?a("el-table-column",{key:"buyIsBatchDeliveryDesc",attrs:{label:"上游交割方式",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyDeliveryTypeDesc?e.row.buyDeliveryTypeDesc:"-"))])]}}],null,!1,1771564806)}):t._e(),t._v(" "),t.showFlags[13]?a("el-table-column",{key:"buyDeliveryWarehouseName",attrs:{label:"上游实际交割库",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyDeliveryWarehouseName?e.row.buyDeliveryWarehouseName:"-"))])]}}],null,!1,2243741222)}):t._e(),t._v(" "),t.showFlags[15]?a("el-table-column",{key:"planDeliveryDate",attrs:{label:"上游交割日",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyPlanDeliveryDateStr))])]}}],null,!1,759898225)}):t._e(),t._v(" "),t.showFlags[14]?a("el-table-column",{key:"buyDeliveryDate",attrs:{prop:"buyDeliveryDate",label:"上游实际交割日",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.buyDeliveryDates.length>0?a("div",[a("span",[t._v(t._s(t._f("date")(e.row.buyDeliveryDates[0].deliveryDate)))]),t._v(" "),e.row.buyDeliveryDates.length>1?a("el-popover",{attrs:{placement:"top-start",width:"450",trigger:"click"}},[a("el-table",{attrs:{data:e.row.buyDeliveryDates}},[a("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"上游实际交割数量(吨)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{property:"deliveryDate",label:"上游实际交割日期",width:"180"}})],1),t._v(" "),e.row.buyDeliveryDates.length>0?a("el-button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")]):t._e()],1):t._e()],1):a("div",[t._v("-")])]}}],null,!1,1019465366)}):t._e(),t._v(" "),t.showFlags[48]?a("el-table-column",{key:"buyAlreadyDeliveryQuantityCount",attrs:{prop:"buyAlreadyDeliveryQuantityCount",label:"累计提货数量(吨)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.buyAlreadyDeliveryQuantityCount)))])]}}],null,!1,1871442007)}):t._e(),t._v(" "),t.showFlags[49]?a("el-table-column",{key:"buyNotAlreadyDeliveryQuantityCount",attrs:{prop:"buyNotAlreadyDeliveryQuantityCount",label:"未提货数量(吨)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.buyNotAlreadyDeliveryQuantityCount)))])]}}],null,!1,3106779202)}):t._e(),t._v(" "),t.showFlags[62]?a("el-table-column",{key:"buyInvoiceReceiptAmount",attrs:{prop:"buyInvoiceReceiptAmount",label:"进项发票总金额(元)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.buyInvoiceReceiptAmount)))])]}}],null,!1,2034086262)}):t._e(),t._v(" "),t.showFlags[63]?a("el-table-column",{key:"buyInvoiceReceiptQuantity",attrs:{prop:"buyInvoiceReceiptQuantity",label:"进项发票总吨数(吨)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.buyInvoiceReceiptQuantity)))])]}}],null,!1,1402722467)}):t._e(),t._v(" "),t.showFlags[12]?a("el-table-column",{key:"buyReceiptDate",attrs:{label:"进项收票日",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyReceiptDate?e.row.buyReceiptDate:"-"))])]}}],null,!1,3103607718)}):t._e(),t._v(" "),t.showFlags[72]?a("el-table-column",{key:"orderInvoiceExist",attrs:{prop:"orderInvoiceExist",label:"上游收票情况",width:"150"}}):t._e(),t._v(" "),t.showFlags[33]?a("el-table-column",{key:"remarks7",attrs:{label:"采购合同要素备注",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.buyRemarks?a("el-popover",{attrs:{placement:"top-start",width:"500",trigger:"hover"}},[a("div",{staticStyle:{height:"300px","overflow-y":"scroll"}},[t._v(t._s(e.row.buyRemarks?e.row.buyRemarks:"-"))]),t._v(" "),a("div",{staticClass:"text-overflow",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t._f("cutstring")(e.row.buyRemarks?e.row.buyRemarks:"-",20)))])]):a("div",[t._v("-")])]}}],null,!1,2282965597)}):t._e(),t._v(" "),t.showFlags[64]?a("el-table-column",{key:"remarks6",attrs:{label:"采购合约编号",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyLongtermContractOrderId?e.row.buyLongtermContractOrderId:"-"))])]}}],null,!1,2139489574)}):t._e(),t._v(" "),t.showFlags[81]?a("el-table-column",{key:"buyChattingCompanyName",attrs:{label:"采购撮合公司",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.buyChattingCompanyName?e.row.buyChattingCompanyName:"-"))])]}}],null,!1,3198438502)}):t._e(),t._v(" "),t.showFlags[82]?a("el-table-column",{key:"buyChattingAmount",attrs:{label:"采购撮合费用",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("numToCash")(e.row.buyChattingAmount)))])]}}],null,!1,589776340)}):t._e(),t._v(" "),t.showFlags[5]?a("el-table-column",{key:"remarksa5",attrs:{label:"上游结算单价(元/吨)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.upSettlementPrice,!0)))])]}}],null,!1,3347762215)}):t._e(),t._v(" "),t.showFlags[22]?a("el-table-column",{key:"remarksa22",attrs:{label:"上游结算数量(吨)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.upSettlementQuantity)))])]}}],null,!1,2119664585)}):t._e(),t._v(" "),t.showFlags[23]?a("el-table-column",{key:"remarksa23",attrs:{label:"上游结算金额(元)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.upSettlementAmount)))])]}}],null,!1,4154752156)}):t._e(),t._v(" "),t.showFlags[28]?a("el-table-column",{key:"sellContractCode",attrs:{label:"销售合同编号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.sellContractCode?e.row.sellContractCode:"-"))])]}}],null,!1,3539578598)}):t._e(),t._v(" "),t.showFlags[4]?a("el-table-column",{key:"sellSealPassingTime",attrs:{label:"下游签订日",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.sellSealPassingTime?e.row.sellSealPassingTime:"-"))])]}}],null,!1,3027507206)}):t._e(),t._v(" "),t.showFlags[78]?a("el-table-column",{key:"sellPlanNumber",attrs:{label:"销售纸质合同号",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.sellPlanNumber?e.row.sellPlanNumber:"-"))])]}}],null,!1,2062357542)}):t._e(),t._v(" "),t.showFlags[79]?a("el-table-column",{key:"sellStatisticalCaliber",attrs:{label:"下游统计口径",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.sellStatisticalCaliber?e.row.sellStatisticalCaliber:"-"))])]}}],null,!1,2468015430)}):t._e(),t._v(" "),t.showFlags[17]?a("el-table-column",{key:"buyerCompanyName",attrs:{label:"下游公司",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.sellerCompanyName?e.row.sellerCompanyName:"-"))])]}}],null,!1,2165756934)}):t._e(),t._v(" "),t.showFlags[75]?a("el-table-column",{key:"sellGrade",attrs:{label:"下游公司评级",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.sellGrade?e.row.sellGrade:"-"))])]}}],null,!1,604802822)}):t._e(),t._v(" "),t.showFlags[29]?a("el-table-column",{key:"sellSkuQuantity",attrs:{label:"销售合同数量(吨)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.sellSkuQuantity?e.row.sellSkuQuantity:"-")))])]}}],null,!1,2853507693)}):t._e(),t._v(" "),t.showFlags[9]?a("el-table-column",{key:"sellSkuPrice",attrs:{prop:"sellSkuPrice",label:"销售单价(元/吨)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.sellSkuPrice,!0)))])]}}],null,!1,347740756)}):t._e(),t._v(" "),t.showFlags[10]?a("el-table-column",{key:"sellTotalAmount",attrs:{prop:"sellTotalAmount",label:"销售合同总金额(元)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.sellTotalAmount)))])]}}],null,!1,1829854848)}):t._e(),t._v(" "),t.showFlags[11]?a("el-table-column",{key:"sellPayTotalAll",attrs:{label:"收款总金额(元)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.sellPayTotalAll))+"\n                "),e.row.sellOrderPayTotals.length>1?a("el-popover",{attrs:{placement:"top-start",width:"430",trigger:"click"}},[a("el-table",{attrs:{data:e.row.sellOrderPayTotals}},[a("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{property:"payTotal",label:"收款金额(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("numToCash")(e.row.payTotal)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{property:"createdDate",label:"收款日期",width:"180"}})],1),t._v(" "),a("el-button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")])],1):t._e()],1)]}}],null,!1,2986105838)}):t._e(),t._v(" "),t.showFlags[61]?a("el-table-column",{key:"sellRemainPaymentPay",attrs:{prop:"sellRemainPaymentPay",label:"应收款余额(元)",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.sellRemainPaymentPay)))])]}}],null,!1,901358401)}):t._e(),t._v(" "),t.showFlags[54]?a("el-table-column",{key:"sellDepositRatio",attrs:{prop:"sellDepositRatio",label:"下游保证金比例",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sellDepositRatioDesc))]}}],null,!1,1586736555)}):t._e(),t._v(" "),t.showFlags[55]?a("el-table-column",{key:"sellDepositRatioSubtract",attrs:{label:"下游追保比例 ",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sellDepositRatioSADesc))]}}],null,!1,1423394329)}):t._e(),t._v(" "),t.showFlags[56]?a("el-table-column",{key:"sellPaymentTypeDesc",attrs:{label:"下游结算方式 ",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(null!=e.row.sellPaymentTypeDesc?e.row.sellPaymentTypeDesc:"-")+"\n            ")]}}],null,!1,3791144845)}):t._e(),t._v(" "),t.showFlags[57]?a("el-table-column",{key:"sellIsBatchDeliveryDesc",attrs:{label:"下游交割方式",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(null!=e.row.sellDeliveryTypeDesc?e.row.sellDeliveryTypeDesc:"-")+"\n            ")]}}],null,!1,3732576141)}):t._e(),t._v(" "),t.showFlags[18]?a("el-table-column",{key:"sellDeliveryWarehouseName",attrs:{label:"下游实际交割库",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(null!=e.row.sellDeliveryWarehouseName?e.row.sellDeliveryWarehouseName:"-")+"\n            ")]}}],null,!1,3614835309)}):t._e(),t._v(" "),t.showFlags[20]?a("el-table-column",{key:"sellPlanDeliveryDate",attrs:{label:"下游交割日",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.sellPlanDeliveryDateStr))])]}}],null,!1,2639000905)}):t._e(),t._v(" "),t.showFlags[19]?a("el-table-column",{key:"sellDeliveryDate",attrs:{prop:"sellDeliveryDate",label:"下游实际交割日",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.sellDeliveryDates.length>0?a("div",[a("span",[t._v(t._s(t._f("date")(e.row.sellDeliveryDates[0].deliveryDate)))]),t._v(" "),a("el-popover",{attrs:{placement:"top-start",width:"450",trigger:"click"}},[a("el-table",{attrs:{data:e.row.sellDeliveryDates}},[a("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"下游实际交割数量(吨)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("numToQuantity")(e.row.deliveryQuantity)))]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{property:"deliveryDate",label:"下游实际交割日期",width:"180"}})],1),t._v(" "),e.row.sellDeliveryDates.length>0?a("el-button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")]):t._e()],1)],1):a("div",[t._v("-")])]}}],null,!1,3981271742)}):t._e(),t._v(" "),t.showFlags[59]?a("el-table-column",{key:"sellAlreadyDeliveryQuantityCount",attrs:{prop:"sellAlreadyDeliveryQuantityCount",label:"累计交货数量(吨)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.sellAlreadyDeliveryQuantityCount)))])]}}],null,!1,143381423)}):t._e(),t._v(" "),t.showFlags[60]?a("el-table-column",{key:"sellNotAlreadyDeliveryQuantityCount",attrs:{prop:"sellNotAlreadyDeliveryQuantityCount",label:"未交货数量(吨)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.sellNotAlreadyDeliveryQuantityCount)))])]}}],null,!1,4151780314)}):t._e(),t._v(" "),t.showFlags[65]?a("el-table-column",{key:"sellInvoiceReceiptAmount",attrs:{prop:"sellInvoiceReceiptAmount",label:"销项发票总金额(元)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.sellInvoiceReceiptAmount)))])]}}],null,!1,2465040622)}):t._e(),t._v(" "),t.showFlags[66]?a("el-table-column",{key:"sellInvoiceReceiptQuantity",attrs:{prop:"sellInvoiceReceiptQuantity",label:"销项发票总吨数(吨)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.sellInvoiceReceiptQuantity)))])]}}],null,!1,2885511131)}):t._e(),t._v(" "),t.showFlags[21]?a("el-table-column",{key:"invoiceCreatedDate",attrs:{prop:"invoiceCreatedDate",label:"销项开票日",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.invoiceCreatedDate?e.row.invoiceCreatedDate:"-"))])]}}],null,!1,443726758)}):t._e(),t._v(" "),t.showFlags[35]?a("el-table-column",{key:"remarks5",attrs:{label:"交叉交割",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.acrossDeliverys.length>0?a("div",[a("el-popover",{attrs:{placement:"top-start",width:"450",trigger:"click"}},[a("el-table",{attrs:{data:e.row.acrossDeliverys}},[a("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{property:"acrossContractNo",label:"交叉采购合同编号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{property:"deliveryDate",label:"交割时间",width:"180"}})],1),t._v(" "),e.row.acrossDeliverys.length>0?a("el-button",{staticClass:"gy-button-view",attrs:{slot:"reference"},slot:"reference"},[t._v("明细")]):t._e(),t._v(" "),e.row.acrossDeliverys.length<=0?a("span",{attrs:{slot:"reference"},slot:"reference"},[t._v("-")]):t._e()],1)],1):a("div",[t._v("-")])]}}],null,!1,1516113405)}):t._e(),t._v(" "),t.showFlags[73]?a("el-table-column",{key:"invoiceVoucherExist",attrs:{prop:"invoiceVoucherExist",label:"下游开票情况",width:"130"}}):t._e(),t._v(" "),t.showFlags[34]?a("el-table-column",{key:"remarks4",attrs:{label:"销售合同要素备注",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.sellRemarks?a("el-popover",{attrs:{placement:"top-start",width:"500",trigger:"hover"}},[a("div",{staticStyle:{height:"300px","overflow-y":"scroll"}},[t._v(t._s(e.row.sellRemarks?e.row.sellRemarks:"-"))]),t._v(" "),a("div",{staticClass:"text-overflow",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t._f("cutstring")(e.row.sellRemarks?e.row.sellRemarks:"-",20)))])]):a("div",[t._v("-")])]}}],null,!1,1800899077)}):t._e(),t._v(" "),t.showFlags[38]?a("el-table-column",{key:"remarks3",attrs:{label:"销售合约编号",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.sellLongtermContractOrderId?e.row.sellLongtermContractOrderId:"-"))])]}}],null,!1,1039911878)}):t._e(),t._v(" "),t.showFlags[83]?a("el-table-column",{key:"sellChattingCompanyName",attrs:{label:"销售撮合公司",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.sellChattingCompanyName?e.row.sellChattingCompanyName:"-"))])]}}],null,!1,3411426214)}):t._e(),t._v(" "),t.showFlags[84]?a("el-table-column",{key:"sellChattingAmount",attrs:{label:"销售撮合费用",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t._f("numToCash")(e.row.sellChattingAmount)))])]}}],null,!1,18220684)}):t._e(),t._v(" "),t.showFlags[25]?a("el-table-column",{key:"remarksa25",attrs:{label:"下游结算单价(元/吨)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.downSettlementPrice,!0)))])]}}],null,!1,866005744)}):t._e(),t._v(" "),t.showFlags[31]?a("el-table-column",{key:"remarksa31",attrs:{label:"下游结算数量(吨)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToQuantity")(e.row.downSettlementQuantity)))])]}}],null,!1,2250126238)}):t._e(),t._v(" "),t.showFlags[47]?a("el-table-column",{key:"remarksa47",attrs:{label:"下游结算金额(元)",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.downSettlementAmount)))])]}}],null,!1,3343711691)}):t._e(),t._v(" "),t.showFlags[24]?a("el-table-column",{key:"payTotalAll",attrs:{label:"合同利润(元)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v(t._s(t._f("numToCash")(e.row.profit)))])]}}],null,!1,4090634670)}):t._e(),t._v(" "),t.showFlags[58]?a("el-table-column",{key:"payTotalAll58",attrs:{label:"结算利润(元)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-r"},[t._v("-")])]}}],null,!1,4074440074)}):t._e()],1)]],2),t._v(" "),a("div",{staticClass:"departmentName"},[t._v("共 "+t._s(t.total)+" 条记录")])]),t._v(" "),a("el-pagination",{staticStyle:{margin:"20px 0 30px 0"},attrs:{background:"",total:t.total,layout:"prev, pager, next"},on:{"current-change":t.turnPage,"prev-click":t.prevClick,"next-click":t.nextClick}}),t._v(" "),a("el-dialog",{staticClass:"cstSelItemDlg",attrs:{width:"50%",title:"自定义列表项",visible:t.showFlagsDiaAll},on:{"update:visible":function(e){t.showFlagsDiaAll=e}}},[a("div",{staticClass:"common"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{on:{change:t.aCheckAll},model:{value:t.checkAllTag,callback:function(e){t.checkAllTag=e},expression:"checkAllTag"}},[t._v("全选")])],1),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}})],1),t._v(" "),a("div",[t._v("公共")]),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[37],callback:function(e){t.$set(t.showFlagsdb,37,e)},expression:"showFlagsdb[37]"}},[t._v("业务类型")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[70],callback:function(e){t.$set(t.showFlagsdb,70,e)},expression:"showFlagsdb[70]"}},[t._v("交易模式")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[1],callback:function(e){t.$set(t.showFlagsdb,1,e)},expression:"showFlagsdb[1]"}},[t._v("业务组")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[36],callback:function(e){t.$set(t.showFlagsdb,36,e)},expression:"showFlagsdb[36]"}},[t._v("业务操作人")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[80],callback:function(e){t.$set(t.showFlagsdb,80,e)},expression:"showFlagsdb[80]"}},[t._v("执行操作人")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[40],callback:function(e){t.$set(t.showFlagsdb,40,e)},expression:"showFlagsdb[40]"}},[t._v("规格")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[24],callback:function(e){t.$set(t.showFlagsdb,24,e)},expression:"showFlagsdb[24]"}},[t._v("合同利润")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[71],callback:function(e){t.$set(t.showFlagsdb,71,e)},expression:"showFlagsdb[71]"}},[t._v("执行状态")])],1)],1)],1),t._v(" "),a("div",{staticClass:"sell"},[a("div",[t._v("卖方")]),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[27],callback:function(e){t.$set(t.showFlagsdb,27,e)},expression:"showFlagsdb[27]"}},[t._v("采购合同编号")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[0],callback:function(e){t.$set(t.showFlagsdb,0,e)},expression:"showFlagsdb[0]"}},[t._v("上游签订日")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[76],callback:function(e){t.$set(t.showFlagsdb,76,e)},expression:"showFlagsdb[76]"}},[t._v("采购纸质合同号")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[77],callback:function(e){t.$set(t.showFlagsdb,77,e)},expression:"showFlagsdb[77]"}},[t._v("上游统计口径")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[74],callback:function(e){t.$set(t.showFlagsdb,74,e)},expression:"showFlagsdb[74]"}},[t._v("上游公司评级")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[30],callback:function(e){t.$set(t.showFlagsdb,30,e)},expression:"showFlagsdb[30]"}},[t._v("采购合同数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[6],callback:function(e){t.$set(t.showFlagsdb,6,e)},expression:"showFlagsdb[6]"}},[t._v("采购单价(元/吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[7],callback:function(e){t.$set(t.showFlagsdb,7,e)},expression:"showFlagsdb[7]"}},[t._v("采购合同总金额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[8],callback:function(e){t.$set(t.showFlagsdb,8,e)},expression:"showFlagsdb[8]"}},[t._v("付款总金额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[50],callback:function(e){t.$set(t.showFlagsdb,50,e)},expression:"showFlagsdb[50]"}},[t._v("应付款余额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[32],callback:function(e){t.$set(t.showFlagsdb,32,e)},expression:"showFlagsdb[32]"}},[t._v("单边保证金(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[43],callback:function(e){t.$set(t.showFlagsdb,43,e)},expression:"showFlagsdb[43]"}},[t._v("上游保证金比例")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[44],callback:function(e){t.$set(t.showFlagsdb,44,e)},expression:"showFlagsdb[44]"}},[t._v("上游追保比例")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[45],callback:function(e){t.$set(t.showFlagsdb,45,e)},expression:"showFlagsdb[45]"}},[t._v("上游结算方式")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[46],callback:function(e){t.$set(t.showFlagsdb,46,e)},expression:"showFlagsdb[46]"}},[t._v("上游交割方式")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[13],callback:function(e){t.$set(t.showFlagsdb,13,e)},expression:"showFlagsdb[13]"}},[t._v("上游实际交割库")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[15],callback:function(e){t.$set(t.showFlagsdb,15,e)},expression:"showFlagsdb[15]"}},[t._v("上游交割日")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[14],callback:function(e){t.$set(t.showFlagsdb,14,e)},expression:"showFlagsdb[14]"}},[t._v("上游实际交割日")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[12],callback:function(e){t.$set(t.showFlagsdb,12,e)},expression:"showFlagsdb[12]"}},[t._v("进项收票日")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[48],callback:function(e){t.$set(t.showFlagsdb,48,e)},expression:"showFlagsdb[48]"}},[t._v("累计提货数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[49],callback:function(e){t.$set(t.showFlagsdb,49,e)},expression:"showFlagsdb[49]"}},[t._v("未提货数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[62],callback:function(e){t.$set(t.showFlagsdb,62,e)},expression:"showFlagsdb[62]"}},[t._v("进项发票总金额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[63],callback:function(e){t.$set(t.showFlagsdb,63,e)},expression:"showFlagsdb[63]"}},[t._v("进项发票总吨数(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[72],callback:function(e){t.$set(t.showFlagsdb,72,e)},expression:"showFlagsdb[72]"}},[t._v("上游收票情况")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[33],callback:function(e){t.$set(t.showFlagsdb,33,e)},expression:"showFlagsdb[33]"}},[t._v("采购合同要素备注")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[64],callback:function(e){t.$set(t.showFlagsdb,64,e)},expression:"showFlagsdb[64]"}},[t._v("采购合约编号")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[81],callback:function(e){t.$set(t.showFlagsdb,81,e)},expression:"showFlagsdb[81]"}},[t._v("采购撮合公司")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[82],callback:function(e){t.$set(t.showFlagsdb,82,e)},expression:"showFlagsdb[82]"}},[t._v("采购撮合费用")])],1)],1)],1),t._v(" "),a("div",{staticClass:"buy"},[a("div",[t._v("买方")]),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[28],callback:function(e){t.$set(t.showFlagsdb,28,e)},expression:"showFlagsdb[28]"}},[t._v("销售合同编号")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[4],callback:function(e){t.$set(t.showFlagsdb,4,e)},expression:"showFlagsdb[4]"}},[t._v("下游签订日")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[78],callback:function(e){t.$set(t.showFlagsdb,78,e)},expression:"showFlagsdb[78]"}},[t._v("销售纸质合同号")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[79],callback:function(e){t.$set(t.showFlagsdb,79,e)},expression:"showFlagsdb[79]"}},[t._v("下游统计口径")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[75],callback:function(e){t.$set(t.showFlagsdb,75,e)},expression:"showFlagsdb[75]"}},[t._v("下游公司评级")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[29],callback:function(e){t.$set(t.showFlagsdb,29,e)},expression:"showFlagsdb[29]"}},[t._v("销售合同数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[9],callback:function(e){t.$set(t.showFlagsdb,9,e)},expression:"showFlagsdb[9]"}},[t._v("销售单价(元/吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[10],callback:function(e){t.$set(t.showFlagsdb,10,e)},expression:"showFlagsdb[10]"}},[t._v("销售合同总金额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[11],callback:function(e){t.$set(t.showFlagsdb,11,e)},expression:"showFlagsdb[11]"}},[t._v("收款总金额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[61],callback:function(e){t.$set(t.showFlagsdb,61,e)},expression:"showFlagsdb[61]"}},[t._v("应收款余额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[54],callback:function(e){t.$set(t.showFlagsdb,54,e)},expression:"showFlagsdb[54]"}},[t._v("下游保证金比例")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[55],callback:function(e){t.$set(t.showFlagsdb,55,e)},expression:"showFlagsdb[55]"}},[t._v("下游追保比例")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[56],callback:function(e){t.$set(t.showFlagsdb,56,e)},expression:"showFlagsdb[56]"}},[t._v("下游结算方式")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[57],callback:function(e){t.$set(t.showFlagsdb,57,e)},expression:"showFlagsdb[57]"}},[t._v("下游交割方式")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[18],callback:function(e){t.$set(t.showFlagsdb,18,e)},expression:"showFlagsdb[18]"}},[t._v("下游实际交割库")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[20],callback:function(e){t.$set(t.showFlagsdb,20,e)},expression:"showFlagsdb[20]"}},[t._v("下游交割日")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[19],callback:function(e){t.$set(t.showFlagsdb,19,e)},expression:"showFlagsdb[19]"}},[t._v("下游实际交割日")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[21],callback:function(e){t.$set(t.showFlagsdb,21,e)},expression:"showFlagsdb[21]"}},[t._v("销项开票日")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[59],callback:function(e){t.$set(t.showFlagsdb,59,e)},expression:"showFlagsdb[59]"}},[t._v("累计交货数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[60],callback:function(e){t.$set(t.showFlagsdb,60,e)},expression:"showFlagsdb[60]"}},[t._v("未交货数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[65],callback:function(e){t.$set(t.showFlagsdb,65,e)},expression:"showFlagsdb[65]"}},[t._v("销项发票总金额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[66],callback:function(e){t.$set(t.showFlagsdb,66,e)},expression:"showFlagsdb[66]"}},[t._v("销项发票总吨数(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[35],callback:function(e){t.$set(t.showFlagsdb,35,e)},expression:"showFlagsdb[35]"}},[t._v("交叉交割")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[73],callback:function(e){t.$set(t.showFlagsdb,73,e)},expression:"showFlagsdb[73]"}},[t._v("下游开票情况")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[34],callback:function(e){t.$set(t.showFlagsdb,34,e)},expression:"showFlagsdb[34]"}},[t._v("销售合同要素备注")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[38],callback:function(e){t.$set(t.showFlagsdb,38,e)},expression:"showFlagsdb[38]"}},[t._v("销售合约编号")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[83],callback:function(e){t.$set(t.showFlagsdb,83,e)},expression:"showFlagsdb[83]"}},[t._v("销售撮合公司")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdb[84],callback:function(e){t.$set(t.showFlagsdb,84,e)},expression:"showFlagsdb[84]"}},[t._v("销售撮合费用")])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-extra confirmations",on:{click:t.saveShowFlagsdb}},[t._v("确定")])])]),t._v(" "),a("el-dialog",{attrs:{title:t.payTotalAllTit.title,visible:t.payTotalAllDia,width:"30%"},on:{"update:visible":function(e){t.payTotalAllDia=e}}},[a("el-table",{attrs:{data:t.payTotalAll}},[a("el-table-column",{attrs:{label:"序号",width:"60",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{property:"payTotal",label:t.payTotalAllTit.payTotal,width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"createdDate",label:t.payTotalAllTit.createdDate}})],1)],1),t._v(" "),a("el-dialog",{staticClass:"cstSelItemDlg",attrs:{width:"50%",title:"自定义列表项",visible:t.showFlagsDiaExe},on:{"update:visible":function(e){t.showFlagsDiaExe=e}}},[a("div",{staticClass:"common"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{on:{change:t.aCheckAllExe},model:{value:t.checkAllTag,callback:function(e){t.checkAllTag=e},expression:"checkAllTag"}},[t._v("全选")])],1),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}})],1),t._v(" "),a("div",[t._v("公共")]),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[1],callback:function(e){t.$set(t.showFlagsdbExe,1,e)},expression:"showFlagsdbExe[1]"}},[t._v("业务组")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[36],callback:function(e){t.$set(t.showFlagsdbExe,36,e)},expression:"showFlagsdbExe[36]"}},[t._v("业务操作人")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[37],callback:function(e){t.$set(t.showFlagsdbExe,37,e)},expression:"showFlagsdbExe[37]"}},[t._v("业务类型")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[40],callback:function(e){t.$set(t.showFlagsdbExe,40,e)},expression:"showFlagsdbExe[40]"}},[t._v("规格")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[24],callback:function(e){t.$set(t.showFlagsdbExe,24,e)},expression:"showFlagsdbExe[24]"}},[t._v("合同利润")])],1)],1)],1),t._v(" "),a("div",{staticClass:"sell"},[a("div",[t._v("卖方")]),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[27],callback:function(e){t.$set(t.showFlagsdbExe,27,e)},expression:"showFlagsdbExe[27]"}},[t._v("采购合同编号")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[30],callback:function(e){t.$set(t.showFlagsdbExe,30,e)},expression:"showFlagsdbExe[30]"}},[t._v("采购合同数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[6],callback:function(e){t.$set(t.showFlagsdbExe,6,e)},expression:"showFlagsdbExe[6]"}},[t._v("采购单价(元/吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[7],callback:function(e){t.$set(t.showFlagsdbExe,7,e)},expression:"showFlagsdbExe[7]"}},[t._v("采购合同总金额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[43],callback:function(e){t.$set(t.showFlagsdbExe,43,e)},expression:"showFlagsdbExe[43]"}},[t._v("上游保证金比例")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[44],callback:function(e){t.$set(t.showFlagsdbExe,44,e)},expression:"showFlagsdbExe[44]"}},[t._v("上游追保比例")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[45],callback:function(e){t.$set(t.showFlagsdbExe,45,e)},expression:"showFlagsdbExe[45]"}},[t._v("上游结算方式")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[46],callback:function(e){t.$set(t.showFlagsdbExe,46,e)},expression:"showFlagsdbExe[46]"}},[t._v("上游交割方式")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[13],callback:function(e){t.$set(t.showFlagsdbExe,13,e)},expression:"showFlagsdbExe[13]"}},[t._v("上游实际交割库")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[48],callback:function(e){t.$set(t.showFlagsdbExe,48,e)},expression:"showFlagsdbExe[48]"}},[t._v("累计提货数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[49],callback:function(e){t.$set(t.showFlagsdbExe,49,e)},expression:"showFlagsdbExe[49]"}},[t._v("未提货数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[62],callback:function(e){t.$set(t.showFlagsdbExe,62,e)},expression:"showFlagsdbExe[62]"}},[t._v("进项发票总金额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[63],callback:function(e){t.$set(t.showFlagsdbExe,63,e)},expression:"showFlagsdbExe[63]"}},[t._v("进项发票总吨数(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[64],callback:function(e){t.$set(t.showFlagsdbExe,64,e)},expression:"showFlagsdbExe[64]"}},[t._v("采购合约编号")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[81],callback:function(e){t.$set(t.showFlagsdbExe,81,e)},expression:"showFlagsdbExe[81]"}},[t._v("采购撮合公司")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[82],callback:function(e){t.$set(t.showFlagsdbExe,82,e)},expression:"showFlagsdbExe[82]"}},[t._v("采购撮合费用")])],1)],1)],1),t._v(" "),a("div",{staticClass:"buy"},[a("div",[t._v("买方")]),t._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[28],callback:function(e){t.$set(t.showFlagsdbExe,28,e)},expression:"showFlagsdbExe[28]"}},[t._v("销售合同编号")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[29],callback:function(e){t.$set(t.showFlagsdbExe,29,e)},expression:"showFlagsdbExe[29]"}},[t._v("销售合同数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[9],callback:function(e){t.$set(t.showFlagsdbExe,9,e)},expression:"showFlagsdbExe[9]"}},[t._v("销售单价(元/吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[10],callback:function(e){t.$set(t.showFlagsdbExe,10,e)},expression:"showFlagsdbExe[10]"}},[t._v("销售合同总金额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[61],callback:function(e){t.$set(t.showFlagsdbExe,61,e)},expression:"showFlagsdbExe[61]"}},[t._v("应收款余额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[54],callback:function(e){t.$set(t.showFlagsdbExe,54,e)},expression:"showFlagsdbExe[54]"}},[t._v("下游保证金比例")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[55],callback:function(e){t.$set(t.showFlagsdbExe,55,e)},expression:"showFlagsdbExe[55]"}},[t._v("下游追保比例")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[56],callback:function(e){t.$set(t.showFlagsdbExe,56,e)},expression:"showFlagsdbExe[56]"}},[t._v("下游结算方式")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[57],callback:function(e){t.$set(t.showFlagsdbExe,57,e)},expression:"showFlagsdbExe[57]"}},[t._v("下游交割方式")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[18],callback:function(e){t.$set(t.showFlagsdbExe,18,e)},expression:"showFlagsdbExe[18]"}},[t._v("下游实际交割库")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[59],callback:function(e){t.$set(t.showFlagsdbExe,59,e)},expression:"showFlagsdbExe[59]"}},[t._v("累计交货数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[60],callback:function(e){t.$set(t.showFlagsdbExe,60,e)},expression:"showFlagsdbExe[60]"}},[t._v("未交货数量(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[65],callback:function(e){t.$set(t.showFlagsdbExe,65,e)},expression:"showFlagsdbExe[65]"}},[t._v("销项发票总金额(元)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[66],callback:function(e){t.$set(t.showFlagsdbExe,66,e)},expression:"showFlagsdbExe[66]"}},[t._v("销项发票总吨数(吨)")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[35],callback:function(e){t.$set(t.showFlagsdbExe,35,e)},expression:"showFlagsdbExe[35]"}},[t._v("交叉交割")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[38],callback:function(e){t.$set(t.showFlagsdbExe,38,e)},expression:"showFlagsdbExe[38]"}},[t._v("销售合约编号")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[83],callback:function(e){t.$set(t.showFlagsdbExe,83,e)},expression:"showFlagsdbExe[83]"}},[t._v("销售撮合公司")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-checkbox",{model:{value:t.showFlagsdbExe[84],callback:function(e){t.$set(t.showFlagsdbExe,84,e)},expression:"showFlagsdbExe[84]"}},[t._v("销售撮合费用")])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-extra confirmations",on:{click:t.saveShowFlagsdbExe}},[t._v("确定")])])])],1)},staticRenderFns:[]};var To=a("C7Lr")(Do,So,!1,function(t){a("FoBu"),a("RbfU")},"data-v-9e8be740",null).exports,Fo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"standingBook control"},[a("div",{staticClass:"search-btn"},[a("span",{staticClass:"search-h",on:{click:t.ShowSearch}},[t._v("高级搜索"),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticClass:"my-search clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("下游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.buyerCompanyName,expression:"search.buyerCompanyName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.buyerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"buyerCompanyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",class:{"last-active":!t.isShowSearch}},[a("span",{staticClass:"l"},[t._v("上游公司")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.sellerCompanyName,expression:"search.sellerCompanyName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.sellerCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"sellerCompanyName",e.target.value)}}})]),t._v(" "),t.isShowSearch?a("div",{staticClass:"search-form"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("销售合同编号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.purchaseContractCode,expression:"search.purchaseContractCode"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.purchaseContractCode},on:{input:function(e){e.target.composing||t.$set(t.search,"purchaseContractCode",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("采购合同编号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.saleContractCode,expression:"search.saleContractCode"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.saleContractCode},on:{input:function(e){e.target.composing||t.$set(t.search,"saleContractCode",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("销售交割库")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.purchaseDeliveryWarehouseName,expression:"search.purchaseDeliveryWarehouseName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.purchaseDeliveryWarehouseName},on:{input:function(e){e.target.composing||t.$set(t.search,"purchaseDeliveryWarehouseName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("采购交割库")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.saleContractDate,expression:"search.saleContractDate"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.saleContractDate},on:{input:function(e){e.target.composing||t.$set(t.search,"saleContractDate",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("销售合同日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.saleContractStartDate,callback:function(e){t.$set(t.search,"saleContractStartDate",e)},expression:"search.saleContractStartDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},on:{change:function(e){return t.change(t.search.saleContractEndDate,1)}},model:{value:t.search.saleContractEndDate,callback:function(e){t.$set(t.search,"saleContractEndDate",e)},expression:"search.saleContractEndDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("采购合同日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"开始日期"},model:{value:t.search.purchaseContractStartDate,callback:function(e){t.$set(t.search,"purchaseContractStartDate",e)},expression:"search.purchaseContractStartDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"结束日期"},on:{change:function(e){return t.change(t.search.purchaseContractEndDate,2)}},model:{value:t.search.purchaseContractEndDate,callback:function(e){t.$set(t.search,"purchaseContractEndDate",e)},expression:"search.purchaseContractEndDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.stuName,expression:"search.stuName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.stuName},on:{input:function(e){e.target.composing||t.$set(t.search,"stuName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",class:{"last-active":t.isShowSearch}},[a("span",{staticClass:"l"},[t._v("业务操作人")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.businessManagerName,expression:"search.businessManagerName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.businessManagerName},on:{input:function(e){e.target.composing||t.$set(t.search,"businessManagerName",e.target.value)}}})])]):t._e(),t._v(" "),a("span",{staticClass:"searchicon",on:{click:function(e){return t.init(9)}}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"tabs cl"},[a("ul",t._l(t.tabs,function(e,s){return a("li",{key:s,class:{active:s===t.activeId},on:{click:function(e){return t.tabClick(s)}}},[a("span",[t._v(t._s(e.value))])])}),0)]),t._v(" "),a("div",{staticClass:"box"},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th",{attrs:{width:"80px"}},[t._v("合同要素ID")]),t._v(" "),a("th",{attrs:{width:"120px"}},[t._v("合同编号")]),t._v(" "),a("th",{attrs:{width:"80px"}},[t._v("合同日期")]),t._v(" "),a("th",{attrs:{width:"60px"}},[t._v("品名")]),t._v(" "),a("th",{attrs:{width:"180px"}},[t._v("上游公司")]),t._v(" "),a("th",{attrs:{width:"180px"}},[t._v("下游公司")]),t._v(" "),a("th",{attrs:{width:"110px"}},[t._v("交货地点")]),t._v(" "),a("th",{directives:[{name:"show",rawName:"v-show",value:3!==this.activeId,expression:"this.activeId !== 3"}],attrs:{width:"80px"}},[t._v("保证金比例")]),t._v(" "),a("th",{directives:[{name:"show",rawName:"v-show",value:0===this.activeId||1===this.activeId,expression:"this.activeId === 0 || this.activeId === 1"}],attrs:{width:"100px"}},[t._v("涨跌约定")]),t._v(" "),a("th",{directives:[{name:"show",rawName:"v-show",value:0===this.activeId||2===this.activeId||3===this.activeId,expression:"this.activeId === 0 || this.activeId === 2 || this.activeId === 3"}],attrs:{width:"100px"}},[t._v("合同完成进度")]),t._v(" "),a("th",{directives:[{name:"show",rawName:"v-show",value:0===this.activeId||3===this.activeId,expression:"this.activeId === 0 || this.activeId === 3"}],attrs:{width:"100px"}},[t._v("盈亏计算(元)")]),t._v(" "),a("th",{attrs:{width:"80px"}},[t._v("数量(吨)")]),t._v(" "),a("th",{attrs:{width:"120px"}},[t._v("交易单价(元/吨)")]),t._v(" "),a("th",{attrs:{width:"130px"}},[t._v("采购合同总金额(元)")]),t._v(" "),a("th",{attrs:{width:"130px"}},[t._v("销售合同总金额(元)")]),t._v(" "),a("th",{attrs:{width:"120px"}},[t._v("业务组")])])]),t._v(" "),0!==this.tableData.length?a("tbody",t._l(t.tableData,function(e,s){return a("tr",{key:s},[a("td",{attrs:{width:"80px"}},[a("router-link",{attrs:{to:{name:"orderDetails",query:{id:e.id}}}},[a("em",{staticStyle:{color:"#409EFF"}},[t._v(t._s(e.id))])])],1),t._v(" "),a("td",{attrs:{width:"120px"}},[e.purchaseContractCode||e.saleContractCode?a("span",[t._v(t._s(e.purchaseContractCode)),a("br"),t._v(t._s(e.saleContractCode))]):a("span",[t._v("-")])]),t._v(" "),a("td",{attrs:{width:"80px"}},[e.purchaseContractDate||e.saleContractDate?a("span",[t._v(t._s(t._f("date")(e.purchaseContractDate))),a("br"),t._v(t._s(t._f("date")(e.saleContractDate)))]):a("span",[t._v("-")])]),t._v(" "),a("td",{attrs:{width:"60px"}},[t._v(t._s(e.stuName?e.stuName:"-"))]),t._v(" "),a("td",{attrs:{width:"180px"}},[t._v(t._s(e.sellerCompanyName?e.sellerCompanyName:"-"))]),t._v(" "),a("td",{attrs:{width:"180px"}},[t._v(t._s(e.buyerCompanyName?e.buyerCompanyName:"-"))]),t._v(" "),a("td",{attrs:{width:"200px"}},[e.purchaseDeliveryWarehouseName||e.saleDeliveryWarehouseName?a("span",[t._v(t._s(e.purchaseDeliveryWarehouseName)),a("br"),t._v(t._s(e.saleDeliveryWarehouseName))]):a("span",[t._v("-")])]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:3!==t.activeId,expression:"activeId !== 3"}],attrs:{width:"80px"}},[e.purchaseContractCode?a("span",[t._v(t._s(e.purchaseDepositAmount?e.purchaseDepositAmount:"0")+"%")]):t._e(),a("br"),t._v(" "),e.saleContractCode?a("span",[t._v(t._s(e.saleDepositAmount?e.saleDepositAmount:"0")+"%")]):t._e()]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:0===t.activeId||1===t.activeId,expression:"activeId === 0 || activeId === 1"}],attrs:{width:"100px"}},[e.purchaseDepositRatio||e.saleDepositRatio?a("span",[t._v(t._s(e.purchaseDepositRatio)),a("br"),t._v(t._s(e.saleDepositRatio))]):a("span",[t._v("跌 0% 补 0 %")])]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:0===t.activeId||2===t.activeId||3===t.activeId,expression:"activeId === 0 || activeId === 2 || activeId === 3"}],attrs:{width:"100px"}},[e.purchaseContractCode?a("span",[t._v(t._s(parseInt(100*e.purchaseContractSchedule))+"%")]):t._e(),a("br"),t._v(" "),e.saleContractCode?a("span",[t._v(t._s(parseInt(100*e.saleContractSchedule))+"%")]):t._e()]),t._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:0===t.activeId||3===t.activeId,expression:"activeId === 0 || activeId === 3"}],staticClass:"text-r",attrs:{width:"100px"}},[e.purchaseProfitLossAccount?a("span",[t._v(t._s(t._f("numToCash")(e.purchaseProfitLossAccount)))]):a("span",[t._v("-")])]),t._v(" "),a("td",{staticClass:"text-r",attrs:{width:"80px"}},[e.purchaseContractCode?a("span",[t._v(t._s(t._f("numToQuantity")(e.purchaseSkuQuantity)))]):t._e(),a("br"),t._v(" "),e.saleContractCode?a("span",[t._v(t._s(t._f("numToQuantity")(e.saleSkuQuantity)))]):t._e()]),t._v(" "),a("td",{staticClass:"text-r",attrs:{width:"120px"}},[e.purchaseContractCode?a("span",[t._v(t._s(t._f("numToCash")(e.purchaseSkuPrice,!0)))]):t._e(),a("br"),t._v(" "),e.saleContractCode?a("span",[t._v(t._s(t._f("numToCash")(e.saleSkuPrice,!0)))]):t._e()]),t._v(" "),a("td",{staticClass:"text-r",attrs:{width:"130px"}},[t._v(t._s(t._f("numToCash")(e.purchaseTotalAmount)))]),t._v(" "),a("td",{staticClass:"text-r",attrs:{width:"130px"}},[t._v(t._s(t._f("numToCash")(e.saleTotalAmount)))]),t._v(" "),a("td",{attrs:{width:"120px"}},[t._v(t._s(e.usrOrganization?e.usrOrganization:"-"))])])}),0):a("tbody",[t._m(0)])])]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticStyle:{width:"120px"}},[t._v("所有页合计")]),t._v("采购数量(吨):"),a("span",{staticStyle:{width:"150px"}},[t._v(t._s(t._f("numToQuantity")(t.all.purchaseSkuQuantityTotal)))]),t._v("采购合同总金额(元):"),a("span",[t._v(t._s(t._f("numToCash")(t.all.purchaseTotalAmountTotal)))])])]),t._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticStyle:{width:"120px"}},[t._v(" ")]),t._v("销售数量(吨):"),a("span",{staticStyle:{width:"150px"}},[t._v(t._s(t._f("numToQuantity")(t.all.saleSkuQuantityTotal)))]),t._v("销售合同总金额(元):"),a("span",[t._v(t._s(t._f("numToCash")(t.all.saleTotalAmountTotal)))])])])],1),t._v(" "),a("div",{staticClass:"departmentName"},[t._v("共 "+t._s(t.total)+" 条记录")]),t._v(" "),a("el-pagination",{staticStyle:{margin:"20px 0 30px 0"},attrs:{background:"",total:t.total,layout:"prev, pager, next"},on:{"current-change":t.turnPage}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"8"}},[this._v("没有找到可显示的数据...")])])}]};var No=a("C7Lr")({data:function(){return{total:30,tableData:[],value:1,dialogVisible:!1,isShowSearch:!1,all:{},search:{pageNo:1,pageSize:10,purchaseContractCode:null,saleContractCode:null,stuName:null,purchaseDeliveryWarehouseName:null,saleContractDate:null,buyerCompanyName:null,sellerCompanyName:null,purchaseContractStartDate:null,purchaseContractEndDate:null,saleContractStartDate:null,saleContractEndDate:null,businessManagerName:null},tabs:[{id:"",value:"合同总控表",data:null},{id:1,value:"保证金监控表",data:null},{id:2,value:"交割监控表",data:null},{id:3,value:"盈亏监控表",data:null}],activeId:0}},created:function(){this.init()},methods:{init:function(){var t=this;this.$http.post(this.$api.statement.control,this.search).then(function(e){var a=e.data.data;t.total=a.total,t.tableData=a.rows,t.all.purchaseSkuQuantityTotal=a.purchaseSkuQuantityTotal,t.all.purchaseTotalAmountTotal=a.purchaseTotalAmountTotal,t.all.saleSkuQuantityTotal=a.saleSkuQuantityTotal,t.all.saleTotalAmountTotal=a.saleTotalAmountTotal})},change:function(t,e){1===e?this.search.saleContractEndDate=t+86399e3:this.search.purchaseContractEndDate=t+86399e3},turnPage:function(t){this.search.pageNo=t,this.init()},ShowSearch:function(){this.isShowSearch=!this.isShowSearch},tabClick:function(t){this.activeId=t}}},Fo,!1,function(t){a("n2TF")},"data-v-39a0732a",null).exports,Lo={name:"login",data:function(){return{errMsg:"",userName:"",password:"",loading:!1,userList:[{userName:"WangManager",userId:1,groupId:0}]}},methods:{clearMsg:function(){this.errMsg=""},toSubmit:function(){var t=this;if(this.errMsg="",!this.userName)return this.errMsg="请输入用户名",!1;var e={account:this.userName,password:this.password};this.$http.post(this.$api.login.login,e).then(function(e){if(0===e.data.code){var a=e.data.data;return e.data.data&&(a.menuList[0]||t.$alert("未配置访问权限，请联系运营","登录出错"),localStorage.setItem("userInfo",Xn()(a))),void t.$router.push({name:"home"})}t.$alert(e.data.message,"出错了")}).catch(function(){t.$router.push({name:"login"})})}}},Po={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-login",attrs:{id:"login"}},[a("div",{staticClass:"m-login",class:{loading:t.loading}},[t._m(0),t._v(" "),a("div",[t.errMsg?a("div",{staticClass:"m-tips error",on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(t.errMsg))]):t._e(),t._v(" "),a("div",{staticClass:"m-form",on:{click:t.clearMsg,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toSubmit(e)}}},[a("div",{staticClass:"form-group"},[a("label",[t._v("用户名")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticStyle:{width:"100%","line-height":"25px"},attrs:{type:"text"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("密码")]),a("br"),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticStyle:{width:"100%","line-height":"25px"},attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),t.loading?t._e():a("div",[a("button",{staticClass:"gy-button-normal",staticStyle:{width:"100%"},on:{click:function(e){return e.stopPropagation(),t.toSubmit(e)}}},[t._v("登录")])]),t._v(" "),t.loading?a("div",{staticClass:"g-loading"},[a("div",{staticClass:"bar"})]):t._e()])])]),t._v(" "),a("div",{staticClass:"foot"},[t._v("\n        © Copyright 2018 FastMall Rong360\n    ")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("h1",[this._v("ERP系统")]),this._v(" "),e("h2",[this._v("用户中心")]),this._v(" "),e("span",[this._v("LOGIN IN")])])}]};var Ao=a("C7Lr")(Lo,Po,!1,function(t){a("6I0K")},"data-v-0b3e3206",null).exports,$o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("router-view")],1)},staticRenderFns:[]},Oo=a("C7Lr")(null,$o,!1,null,null,null).exports,Eo={data:function(){return{params:{pageNo:1,pageSize:20,bizType:"",keywords:null},itemTotal:0,apprRuleList:[]}},activated:function(){this.$route.meta.isBack||(this.params={},this.search()),this.$route.meta.isBack=!1},created:function(){},methods:{edit:function(t){var e=1;2===t.canAddNodeFlg&&(e=0),this.$router.push({name:"flowDetail",query:{apprRuleId:t.id,canEdit:e}})},convertStatus:function(t){var e=this;if(t.forbidden)return!1;var a=null;a=!0===t.applyStatus?"确定要启用该审批流程("+t.processName+")吗？":"确定要停用该审批流程("+t.processName+")吗？",this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={};a.id=t.id,a.applyStatus=!0===t.applyStatus?1:0,e.$http.post(e.$api.apprProc.saveApproveInfo,a).then(function(t){0===t.data.code?e.$message({message:"设置成功",type:"success"}):e.$alert(t.data.code+" "+t.data.message)})}).catch(function(){!0===t.applyStatus?t.applyStatus=!1:t.applyStatus=!0})},changeSelect:function(t){this.params.pageNo=t,this.search()},search:function(){var t=this;this.$http.post(this.$api.apprProc.getApprProcList,this.params).then(function(e){if(0===e.data.code){t.apprRuleList=e.data.data.rows;for(var a=0;a<t.apprRuleList.length;a++)1===t.apprRuleList[a].applyStatus&&(t.apprRuleList[a].applyStatus=!0),2===t.apprRuleList[a].applyStatus?t.apprRuleList[a].forbidden=!0:t.apprRuleList[a].forbidden=!1;t.itemTotal=e.data.data.total}else t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})}}},Bo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-list"},[t._m(0),t._v(" "),a("el-form",{staticClass:"clearfix my-form demo-form-inline search",attrs:{inline:!0,model:t.params}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.params.bizType,callback:function(e){t.$set(t.params,"bizType",e)},expression:"params.bizType"}},t._l(t.$constant.businessType4Top,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group last-active"},[a("span",{staticClass:"l"},[t._v("流程名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.params.keywords,expression:"params.keywords",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.params.keywords},on:{input:function(e){e.target.composing||t.$set(t.params,"keywords",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("span",{staticClass:"searchicon",on:{click:t.search}},[a("i",{staticClass:"iconfont icon-search"})])])]),t._v(" "),a("div",{staticClass:"add-wrap"}),t._v(" "),a("div",{staticClass:"div"},[a("table",{staticClass:"gy-table"},[t._m(1),t._v(" "),a("tbody",t._l(t.apprRuleList,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(t._f("businessTradeType")(e.bizTradeType)))]),t._v(" "),a("td",[t._v(t._s(t._f("apprProcType")(e.processType)))]),t._v(" "),a("td",[t._v(t._s(e.processName))]),t._v(" "),a("td",[t._v(t._s(e.processExpress))]),t._v(" "),a("td",[a("el-switch",{attrs:{"active-color":"#13ce66",disabled:e.forbidden},on:{change:function(a){return t.convertStatus(e)}},model:{value:e.applyStatus,callback:function(a){t.$set(e,"applyStatus",a)},expression:"item.applyStatus"}})],1),t._v(" "),a("td",{staticClass:"caoz"},[a("button",{staticClass:"gy-button-view edit",on:{click:function(a){return t.edit(e)}}},[t._v("详情")])])])}),0)])]),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,total:t.itemTotal,layout:"prev, pager, next"},on:{"update:currentPage":function(e){return t.$set(t.params,"pageNo",e)},"update:current-page":function(e){return t.$set(t.params,"pageNo",e)},"current-change":t.changeSelect}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"title"},[this._v("流程定义列表")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("业务类型")]),t._v(" "),a("th",[t._v("类别")]),t._v(" "),a("th",[t._v("详情")]),t._v(" "),a("th",[t._v("匹配条件")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("th",[t._v("操作")])])])}]};var Mo=a("C7Lr")(Eo,Bo,!1,function(t){a("eDnr")},"data-v-50efc569",null).exports,Ro=a("4YfN"),Uo=a.n(Ro),zo=a("7TBA"),Vo=a.n(zo),Qo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-list"},[a("el-dialog",{attrs:{width:"800px",title:"请选择岗位",visible:t.isShowUser,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(e){t.isShowUser=e}}},[a("div",{staticClass:"search-block"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("岗位名称")]),t._v(" "),a("el-input",{attrs:{placeholder:"岗位名称"},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}}),t._v(" "),a("span",{staticClass:"searchicon",on:{click:t.getRoles}},[a("i",{staticClass:"iconfont icon-search"})])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userList,"highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{property:"id",label:"No.",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"岗位名称"}})],1),t._v(" "),a("br"),t._v(" "),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"",layout:"prev, pager, next",total:t.userTotal},on:{"current-change":function(e){return t.currentChange("user",e)}}}),t._v(" "),a("el-row",{staticClass:"elRow",attrs:{gutter:20}},[a("el-col",{attrs:{span:12,offset:16}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.changeXrefUser(0)}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(e){return t.changeXrefUser(1)}}},[t._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var jo={components:{userList:Pn,roleList:a("C7Lr")({data:function(){return{isShowUser:!1,userList:[],userTotal:0,currXrefUser:{innerVisibleRole:null,userName:null,usrUserId:null,organizationId:null},searchForm:{pageNum:1,pageSize:10,name:null}}},methods:{getRoles:function(){var t=this;this.isShowUser=!0,this.$http.post(this.$api.contract.getRoleList,this.searchForm).then(function(e){0===e.data.code?(t.userList=e.data.data.list,t.userTotal=e.data.data.total):(t.userList=[],t.userTotal=0,t.$alert(e.data.code+" "+e.data.message))})},handleNodeClick:function(t){this.currentTreeNode=t.name,this.searchForm.organizationId=t.id},changeXrefUser:function(t){if(this.isShowUser=!1,0===t)return!1;this.currXrefUser.type=t,this.$emit("affirmRole",this.currXrefUser)},handleCurrentChange:function(t){this.currXrefUser=t},currentChange:function(t,e){this.searchForm.pageNum=e,this.getRoles()}}},Qo,!1,function(t){a("HU4n")},"data-v-3899e5cb",null).exports},directives:{clickOutside:{bind:function(t,e){function a(a){if(t.contains(a.target))return!1;e.expression&&e.value(a)}t.vueClickOutside=a,document.addEventListener("click",a)},unbind:function(t){document.removeEventListener("click",t.vueClickOutside),delete t.vueClickOutside}}},data:function(){return{ref:null,conditionType:["productId","executorId","operatorId","targetCorpId","bizTradeType"],outerVisible:!1,checked:!1,categoryList:this.$constant.apprProcTypeCateList,showAddRuleBtn:0,editDisableRule:!0,apprData:{},dialogTableVisible:!1,userList:[],userTotal:0,addUsrFlg:0,userform:{pageNum:1,pageSize:10,userName:""},currSelUser:null,currSelRowIdx:null,currSelEntryIdx:null,defaultNameVal:"默认为审批流程发起人",canEdit:1,addDele:null,apprLength:null,hasNextProc:!1,nextProcObj:null,idxKey:null,conditionPerType:null,dialogProduct:!1,productChked:null,productSearch:{pageNo:1,pageSize:10,productName:null,keywords:null,total:0},productList:[]}},created:function(){this.canEdit=this.$route.query.canEdit,this.getApproveInfo()},methods:{currentChange:function(t){this.productSearch.pageNo=t,this.getProduct()},productClose:function(){this.conditionPerType=null,this.currSelRowIdx=null,this.currSelEntryIdx=null,this.idxKey=null,this.productChked=null,this.dialogProduct=!1},productChange:function(t,e,a,s){this.conditionPerType=s,this.currSelRowIdx=t,this.currSelEntryIdx=e,this.idxKey=a,this.productSearch={pageNo:1,pageSize:10,productName:null,keywords:null,total:0},this.dialogProduct=!0,this.getProduct()},productCheck:function(t){this.productChked=t},productChk:function(){if(this.productChked){if("nextProcObj"===this.currSelRowIdx){if(this.nextProcObj.entryList[this.currSelEntryIdx].condition[this.conditionPerType].includes(this.productChked.productId))return void this.$message("该产品已添加");this.nextProcObj.entryList[this.currSelEntryIdx].condition[this.conditionPerType].push(this.productChked.productId),this.nextProcObj.entryList[this.currSelEntryIdx].condition.productNames.push(this.productChked.productName)}else{if(this.apprData.itemList[this.currSelRowIdx].entryList[this.currSelEntryIdx].condition[this.conditionPerType].includes(this.productChked.productId))return void this.$message("该产品已添加");this.apprData.itemList[this.currSelRowIdx].entryList[this.currSelEntryIdx].condition[this.conditionPerType].push(this.productChked.productId),this.apprData.itemList[this.currSelRowIdx].entryList[this.currSelEntryIdx].condition.productNames.push(this.productChked.productName)}this.productClose()}else this.$message.error("请先选择产品")},getProduct:function(){var t=this;this.$http.post(this.$api.workbench.getProdList,this.productSearch).then(function(e){0===e.data.code&&(t.productList=e.data.data.rows,t.productSearch.total=e.data.data.total)}).catch(function(t){console.log(t)})},listHide:function(){this.ref&&(document.getElementById(this.ref).style.display="none",this.ref=null)},listShow:function(t){this.listHide(),document.getElementById(t).style.display="block",this.ref=t},changeConditionVal:function(t,e,a,s){if("nextProcObj"===t)switch(s){case"productId":this.nextProcObj.entryList[e].condition.productId.includes(a.id)?(this.nextProcObj.entryList[e].condition.productId=Vo()(this.nextProcObj.entryList[e].condition.productId,function(t){return t!==a.id}),this.nextProcObj.entryList[e].condition.productNames=Vo()(this.nextProcObj.entryList[e].condition.productNames,function(t){return t!==a.name})):(this.nextProcObj.entryList[e].condition.productId.push(a.id),this.nextProcObj.entryList[e].condition.productNames.push(a.name));break;case"executorId":case"operatorId":break;case"targetCorpId":this.nextProcObj.entryList[e].condition.targetCorpId.includes(a.id)?(this.nextProcObj.entryList[e].condition.targetCorpId=Vo()(this.nextProcObj.entryList[e].condition.targetCorpId,function(t){return t!==a.id}),this.nextProcObj.entryList[e].condition.targetCorpNames=Vo()(this.nextProcObj.entryList[e].condition.targetCorpNames,function(t){return t!==a.name})):(this.nextProcObj.entryList[e].condition.targetCorpId.push(a.id),this.nextProcObj.entryList[e].condition.targetCorpNames.push(a.name));break;case"bizTradeType":this.nextProcObj.entryList[e].condition.bizTradeType.includes(a.id)?(this.nextProcObj.entryList[e].condition.bizTradeType=Vo()(this.nextProcObj.entryList[e].condition.bizTradeType,function(t){return t!==a.id}),this.nextProcObj.entryList[e].condition.bizTradeTypeNames=Vo()(this.nextProcObj.entryList[e].condition.bizTradeTypeNames,function(t){return t!==a.name})):(this.nextProcObj.entryList[e].condition.bizTradeType.push(a.id),this.nextProcObj.entryList[e].condition.bizTradeTypeNames.push(a.name))}else switch(s){case"productId":this.apprData.itemList[t].entryList[e].condition.productId.includes(a.id)?(this.apprData.itemList[t].entryList[e].condition.productId=Vo()(this.apprData.itemList[t].entryList[e].condition.productId,function(t){return t!==a.id}),this.apprData.itemList[t].entryList[e].condition.productNames=Vo()(this.apprData.itemList[t].entryList[e].condition.productNames,function(t){return t!==a.name})):(this.apprData.itemList[t].entryList[e].condition.productId.push(a.id),this.apprData.itemList[t].entryList[e].condition.productNames.push(a.name));break;case"executorId":case"operatorId":break;case"targetCorpId":this.apprData.itemList[t].entryList[e].condition.targetCorpId.includes(a.id)?(this.apprData.itemList[t].entryList[e].condition.targetCorpId=Vo()(this.apprData.itemList[t].entryList[e].condition.targetCorpId,function(t){return t!==a.id}),this.apprData.itemList[t].entryList[e].condition.targetCorpNames=Vo()(this.apprData.itemList[t].entryList[e].condition.targetCorpNames,function(t){return t!==a.name})):(this.apprData.itemList[t].entryList[e].condition.targetCorpId.push(a.id),this.apprData.itemList[t].entryList[e].condition.targetCorpNames.push(a.name));break;case"bizTradeType":this.apprData.itemList[t].entryList[e].condition.bizTradeType.includes(a.id)?(this.apprData.itemList[t].entryList[e].condition.bizTradeType=Vo()(this.apprData.itemList[t].entryList[e].condition.bizTradeType,function(t){return t!==a.id}),this.apprData.itemList[t].entryList[e].condition.bizTradeTypeNames=Vo()(this.apprData.itemList[t].entryList[e].condition.bizTradeTypeNames,function(t){return t!==a.name})):(this.apprData.itemList[t].entryList[e].condition.bizTradeType.push(a.id),this.apprData.itemList[t].entryList[e].condition.bizTradeTypeNames.push(a.name))}},deleteNameKey:function(t,e,a,s){if("nextProcObj"===t)switch(this.nextProcObj.entryList[e].condition[s].splice(a,1),s){case"productId":this.nextProcObj.entryList[e].condition.productNames.splice(a,1);break;case"executorId":this.nextProcObj.entryList[e].condition.executorNames.splice(a,1);break;case"operatorId":this.nextProcObj.entryList[e].condition.operatorNames.splice(a,1);break;case"targetCorpId":this.nextProcObj.entryList[e].condition.targetCorpNames.splice(a,1);break;case"bizTradeType":this.nextProcObj.entryList[e].condition.bizTradeTypeNames.splice(a,1)}else switch(this.apprData.itemList[t].entryList[e].condition[s].splice(a,1),s){case"productId":this.apprData.itemList[t].entryList[e].condition.productNames.splice(a,1);break;case"executorId":this.apprData.itemList[t].entryList[e].condition.executorNames.splice(a,1);break;case"operatorId":this.apprData.itemList[t].entryList[e].condition.operatorNames.splice(a,1);break;case"targetCorpId":this.apprData.itemList[t].entryList[e].condition.targetCorpNames.splice(a,1);break;case"bizTradeType":this.apprData.itemList[t].entryList[e].condition.bizTradeTypeNames.splice(a,1)}},changeConditionKey:function(t,e,a,s){},doAddConditionKey:function(t,e){"nextProcObj"===t?(this.nextProcObj.entryList[e].condition.val=null,this.nextProcObj.entryList[e].haveCondition.push("")):(this.apprData.itemList[t].entryList[e].condition.val=null,this.apprData.itemList[t].entryList[e].haveCondition.push(""))},doDeleteConditionKey:function(t,e,a,s){if("nextProcObj"===t)switch(this.nextProcObj.entryList[e].haveCondition.splice(a,1),s){case"productId":this.nextProcObj.entryList[e].condition.productId=[],this.nextProcObj.entryList[e].condition.productNames=[];break;case"executorId":this.nextProcObj.entryList[e].condition.executorId=[],this.nextProcObj.entryList[e].condition.executorNames=[];break;case"operatorId":this.nextProcObj.entryList[e].condition.operatorId=[],this.nextProcObj.entryList[e].condition.operatorNames=[];break;case"targetCorpId":this.nextProcObj.entryList[e].condition.targetCorpId=[],this.nextProcObj.entryList[e].condition.targetCorpNames=[];break;case"bizTradeType":this.nextProcObj.entryList[e].condition.bizTradeType=[],this.nextProcObj.entryList[e].condition.bizTradeTypeNames=[]}else switch(this.apprData.itemList[t].entryList[e].haveCondition.splice(a,1),s){case"productId":this.apprData.itemList[t].entryList[e].condition.productId=[],this.apprData.itemList[t].entryList[e].condition.productNames=[];break;case"executorId":this.apprData.itemList[t].entryList[e].condition.executorId=[],this.apprData.itemList[t].entryList[e].condition.executorNames=[];break;case"operatorId":this.apprData.itemList[t].entryList[e].condition.operatorId=[],this.apprData.itemList[t].entryList[e].condition.operatorNames=[];break;case"targetCorpId":this.apprData.itemList[t].entryList[e].condition.targetCorpId=[],this.apprData.itemList[t].entryList[e].condition.targetCorpNames=[];break;case"bizTradeType":this.apprData.itemList[t].entryList[e].condition.bizTradeType=[],this.apprData.itemList[t].entryList[e].condition.bizTradeTypeNames=[]}},onInter:function(t){this.addDele=t},onOut:function(t){this.addDele=t+999},onChangeMatchType:function(t,e){if(3===parseInt(t)&&(void 0!==e.entryList&&null!==e.entryList||(e.entryList=[]),0===e.entryList.length)){e.entryList.push({condition:{productId:[],productNames:[],executorId:[],executorNames:[],operatorId:[],operatorNames:[],targetCorpId:[],targetCorpNames:[],bizTradeType:[],bizTradeTypeNames:[]},haveCondition:[""],userIds:[],userNames:[]})}},deleCondition:function(t,e,a){if(a.splice(e,1),0===a.length){a.push({condition:"",userIds:[],userNames:[]})}},addCondition:function(t,e,a){null===a&&(a=[]);a.push({condition:{productId:[],productNames:[],executorId:[],executorNames:[],operatorId:[],operatorNames:[],targetCorpId:[],targetCorpNames:[],bizTradeType:[],bizTradeTypeNames:[]},haveCondition:[""],userIds:[],userNames:[]})},affirmUser:function(t){if(0===t.type)return!1;switch(this.addUsrFlg){case 0:null!==this.apprData.itemList[this.currSelRowIdx].userIds&&void 0!==this.apprData.itemList[this.currSelRowIdx].userIds||(this.apprData.itemList[this.currSelRowIdx].userIds=[]),this.apprData.itemList[this.currSelRowIdx].userIds.pop(),this.apprData.itemList[this.currSelRowIdx].userIds.push(t.usrUserId),null!==this.apprData.itemList[this.currSelRowIdx].userNames&&void 0!==this.apprData.itemList[this.currSelRowIdx].userNames||(this.apprData.itemList[this.currSelRowIdx].userNames=[]),this.apprData.itemList[this.currSelRowIdx].userNames.pop(),this.apprData.itemList[this.currSelRowIdx].userNames.push(t.userName);break;case 1:var e={userId:t.usrUserId,userName:t.userName};null!=this.apprData.ccList&&void 0!==this.apprData.ccList||(this.apprData.ccList=[]),null!==e.userId&&null!==e.userName&&this.apprData.ccList.push(e);break;case 2:this.apprData.itemList[this.currSelRowIdx].entryList[this.currSelEntryIdx].userIds.push(t.usrUserId),this.apprData.itemList[this.currSelRowIdx].entryList[this.currSelEntryIdx].userNames.push(t.userName);break;case 3:if(this.apprData.itemList[this.currSelRowIdx].entryList[this.currSelEntryIdx].condition["executorId"===this.conditionPerType?"executorId":"operatorId"].includes(t.usrUserId))return;this.apprData.itemList[this.currSelRowIdx].entryList[this.currSelEntryIdx].condition["executorId"===this.conditionPerType?"executorId":"operatorId"].push(t.usrUserId),this.apprData.itemList[this.currSelRowIdx].entryList[this.currSelEntryIdx].condition["executorId"===this.conditionPerType?"executorNames":"operatorNames"].push(t.userName);break;case 4:this.nextProcObj.entryList[this.currSelEntryIdx].userNames.push(t.userName),this.nextProcObj.entryList[this.currSelEntryIdx].userIds.push(t.usrUserId);break;case 5:if(this.nextProcObj.entryList[this.currSelEntryIdx].condition["executorId"===this.conditionPerType?"executorId":"operatorId"].includes(t.usrUserId))return;this.nextProcObj.entryList[this.currSelEntryIdx].condition["executorId"===this.conditionPerType?"executorId":"operatorId"].push(t.usrUserId),this.nextProcObj.entryList[this.currSelEntryIdx].condition["executorId"===this.conditionPerType?"executorNames":"operatorNames"].push(t.userName)}},affirmRole:function(t){if(0===t.type)return!1;null!==this.apprData.itemList[this.currSelRowIdx].roleIds&&void 0!==this.apprData.itemList[this.currSelRowIdx].roleIds||(this.apprData.itemList[this.currSelRowIdx].roleIds=[]),this.apprData.itemList[this.currSelRowIdx].roleIds.pop(),this.apprData.itemList[this.currSelRowIdx].roleIds.push(t.id),null!==this.apprData.itemList[this.currSelRowIdx].roleNames&&void 0!==this.apprData.itemList[this.currSelRowIdx].roleNames||(this.apprData.itemList[this.currSelRowIdx].roleNames=[]),this.apprData.itemList[this.currSelRowIdx].roleNames.pop(),this.apprData.itemList[this.currSelRowIdx].roleNames.push(t.name)},checkCopy:function(t){this.checked=t},checkNextProc:function(t){t&&this.hasNextProc&&(null==this.nextProcObj||void 0===this.nextProcObj)&&(this.nextProcObj={},this.nextProcObj.entryList=[])},openUsrSelDlg:function(t,e,a,s,i,n){if(0===this.canEdit)return!1;if(this.userform.userName=null,1===t)this.addUsrFlg=1;else if(0===t){if(1!==parseInt(a))return!1;this.addUsrFlg=0,this.currSelRowIdx=e}else if(2===t){if(3!==parseInt(a))return!1;this.addUsrFlg=2,this.currSelRowIdx=e,this.currSelEntryIdx=s}else if(3===t)this.addUsrFlg=3,this.conditionPerType=n,this.currSelRowIdx=e,this.currSelEntryIdx=s,this.idxKey=i;else if(4===t){if(3!==parseInt(a))return!1;this.addUsrFlg=4,this.currSelRowIdx=e,this.currSelEntryIdx=s}else if(5===t){if(3!==parseInt(a))return!1;this.addUsrFlg=5,this.conditionPerType=n,this.currSelRowIdx=e,this.currSelEntryIdx=s,this.idxKey=i}this.$refs.myUserDlg.getUsers()},openRoleSelDlg:function(t,e,a){return 0!==this.canEdit&&(2===parseInt(a)&&(this.currSelRowIdx=e,void this.$refs.myRoleDlg.getRoles()))},add:function(t){var e={ruleName:"",nodeType:0};-1===t?this.apprData.itemList.push(e):this.apprData.itemList.splice(t,0,e),this.showAddRuleBtn=0},dele:function(t){this.apprData.itemList.splice(t,1),0===this.apprData.itemList.length&&(this.showAddRuleBtn=1)},getApproveInfo:function(){var t=this;this.$http.get(this.$api.apprProc.getApproveInfo+this.$route.query.apprRuleId).then(function(e){if(0===e.data.code){t.apprData=e.data.data;var a=[],s={bizTradeType:[],bizTradeTypeNames:[],executorId:[],executorNames:[],operatorId:[],operatorNames:[],productId:[],productNames:[],targetCorpId:[],targetCorpNames:[]};t.apprData.itemList.map(function(t){var e=[];t.entryList&&t.entryList.map(function(t){e.push(Uo()({},t,{condition:_s()({},s,t.condition)}))}),a.push(Uo()({},t,{entryList:e}))}),t.apprData.itemList=a,t.nextProcObj=t.apprData.nextNode;var i=[];t.nextProcObj.entryList.map(function(t){i.push(Uo()({},t,{condition:_s()({},s,t.condition)}))}),t.nextProcObj.entryList=i,t.nextProcObj&&t.nextProcObj.matchFlg&&(t.hasNextProc=!0),t.apprData.itemList&&(t.apprLength=t.apprData.itemList.length,t.apprData.itemList.forEach(function(t){t.matchFlg=String(t.matchFlg),t.showOptBtn=0})),1===t.apprData.ccFlg&&(0===t.apprData.itemList.length&&(t.showAddRuleBtn=1),t.checked=!0)}else t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},saveApprInfo:function(){var t=this;t.$confirm("确定修改流程定义？此操作不可恢复，请确认。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=[];t.apprData.itemList.map(function(t){var a=[];t.entryList.map(function(t){var e={};t.haveCondition.map(function(a){switch(a){case"productId":e.productId=t.condition.productId,e.productNames=t.condition.productNames;break;case"executorId":e.executorId=t.condition.executorId,e.executorNames=t.condition.executorNames;break;case"operatorId":e.operatorId=t.condition.operatorId,e.operatorNames=t.condition.operatorNames;break;case"targetCorpId":e.targetCorpId=t.condition.targetCorpId,e.targetCorpNames=t.condition.targetCorpNames;break;case"bizTradeType":e.bizTradeType=t.condition.bizTradeType,e.bizTradeTypeNames=t.condition.bizTradeTypeNames}}),a.push(Uo()({},t,{haveCondition:t.haveCondition,condition:e}))}),e.push(Uo()({},t,{entryList:a}))}),t.apprData.itemList=e;var a=[];t.nextProcObj.entryList.map(function(t){var e={};t.haveCondition.map(function(a){switch(a){case"productId":e.productId=t.condition.productId,e.productNames=t.condition.productNames;break;case"executorId":e.executorId=t.condition.executorId,e.executorNames=t.condition.executorNames;break;case"operatorId":e.operatorId=t.condition.operatorId,e.operatorNames=t.condition.operatorNames;break;case"targetCorpId":e.targetCorpId=t.condition.targetCorpId,e.targetCorpNames=t.condition.targetCorpNames;break;case"bizTradeType":e.bizTradeType=t.condition.bizTradeType,e.bizTradeTypeNames=t.condition.bizTradeTypeNames}}),a.push(Uo()({},t,{haveCondition:t.haveCondition,condition:e}))}),t.nextProcObj.entryList=a,t.apprData.nextNode=t.nextProcObj,t.$http.post(t.$api.apprProc.saveApproveInfo,t.apprData).then(function(e){0===e.data.code?t.$message({message:"保存成功",type:"success"}):t.$alert(e.data.code+" "+e.data.message)})})},deleCC:function(t){this.apprData.ccList.splice(t,1)},changeXrefUser:function(){if(1===this.addUsrFlg){if(this.currSelUser){var t={userId:this.currSelUser.usrUserId,userName:this.currSelUser.userName};null!=this.apprData.ccList&&void 0!==this.apprData.ccList||(this.apprData.ccList=[]),this.apprData.ccList.push(t)}}else null!==this.apprData.itemList[this.currSelRowIdx].userIds&&void 0!==this.apprData.itemList[this.currSelRowIdx].userIds||(this.apprData.itemList[this.currSelRowIdx].userIds=[]),this.apprData.itemList[this.currSelRowIdx].userIds.pop(),this.apprData.itemList[this.currSelRowIdx].userIds.push(this.currSelUser.usrUserId),null!==this.apprData.itemList[this.currSelRowIdx].userNames&&void 0!==this.apprData.itemList[this.currSelRowIdx].userNames||(this.apprData.itemList[this.currSelRowIdx].userNames=[]),this.apprData.itemList[this.currSelRowIdx].userNames.pop(),this.apprData.itemList[this.currSelRowIdx].userNames.push(this.currSelUser.userName);this.dialogTableVisible=!1},openNewConditionTypeDlg:function(t){this.outerVisible=!0},setNewConditionType:function(t){this.outerVisible=!1}}},qo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-detail"},[a("div",{staticClass:"base clearfix"},[a("div",{staticClass:"title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("类别")]),t._v(" "),a("el-select",{attrs:{disabled:t.editDisableRule},model:{value:t.apprData.processType,callback:function(e){t.$set(t.apprData,"processType",e)},expression:"apprData.processType"}},t._l(t.categoryList,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("详情")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.apprData.processName,expression:"apprData.processName"}],staticClass:"gy-input",attrs:{type:"text"},domProps:{value:t.apprData.processName},on:{input:function(e){e.target.composing||t.$set(t.apprData,"processName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("匹配条件")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.apprData.processExpress,expression:"apprData.processExpress"}],staticClass:"gy-input",attrs:{type:"text"},domProps:{value:t.apprData.processExpress},on:{input:function(e){e.target.composing||t.$set(t.apprData,"processExpress",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("备注")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.apprData.remarks,expression:"apprData.remarks"}],staticClass:"gy-input",attrs:{type:"text"},domProps:{value:t.apprData.remarks},on:{input:function(e){e.target.composing||t.$set(t.apprData,"remarks",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"approval clearfix"},[a("div",{staticClass:"title"},[t._v("执行流程")]),t._v(" "),a("ul",[t._l(t.apprData.itemList,function(e,s){return a("li",{key:s,staticClass:"clearfix",on:{mouseover:function(e){return t.onInter(s)},mouseout:function(e){return t.onOut(s)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.addDele===s,expression:"addDele === index"}],staticClass:"add-step"},[0==e.nodeType?a("button",{staticClass:"gy-button-normal delect-style",on:{click:function(e){return t.dele(s)}}},[t._v("删除步骤")]):t._e(),t._v(" "),0==e.nodeType||1==e.canAddBefNodeFlg?a("button",{staticClass:"gy-button-normal add-style",on:{click:function(e){return t.add(s)}}},[t._v("新增步骤")]):t._e()]),t._v(" "),a("div",{staticClass:"gy-form-group gy-execution-process",staticStyle:{width:"100%"}},[a("span",{staticClass:"l executionProcess"},[t._v("第"+t._s(s+1)+"步：")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruleName,expression:"items.ruleName"}],staticStyle:{width:"50%"},attrs:{type:"text",placeholder:"请输入执行环节描述"},domProps:{value:e.ruleName},on:{input:function(a){a.target.composing||t.$set(e,"ruleName",a.target.value)}}})]),t._v(" "),0!==s?a("div",{staticClass:"gy-form-group gy-approval"},[1!=e.nodeType?a("span",{staticClass:"l"},[a("el-select",{on:{change:function(a){return t.onChangeMatchType(a,e)}},model:{value:e.matchFlg,callback:function(a){t.$set(e,"matchFlg",a)},expression:"items.matchFlg"}},[a("el-option",{attrs:{label:"请选择",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"指定人员",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"按岗位",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"条件匹配",value:"3"}})],1)],1):t._e(),t._v(" "),1==e.matchFlg?a("input",{staticClass:"gy-input r",attrs:{type:"text",placeholder:"请选择人员"},domProps:{value:e.userNames},on:{click:function(e){return t.openUsrSelDlg(0,s,1)}}}):t._e(),t._v(" "),2==e.matchFlg&&2!=e.nodeType?a("input",{staticClass:"gy-input r",attrs:{type:"text",placeholder:"请选择岗位"},domProps:{value:e.roleNames},on:{click:function(e){return t.openRoleSelDlg(0,s,2)}}}):t._e()]):t._e(),t._v(" "),t._l(e.entryList,function(i,n){return 3==e.matchFlg&&0!==s?a("div",{key:n,staticClass:"matching-item"},[t._l(i.haveCondition,function(l,o){return a("div",{key:o,staticClass:"gy-form-group gy-approvaled matching-conditions-wrapper"},[0===o?a("div",{staticClass:"l"},[t._v("条件"+t._s(n+1))]):t._e(),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"matching-conditions"},[a("div",{staticClass:"c mr-20"},[a("el-select",{on:{change:function(e){return t.changeConditionKey(e,s,n,o)}},model:{value:i.haveCondition[o],callback:function(e){t.$set(i.haveCondition,o,e)},expression:"vals.haveCondition[idxKey]"}},[a("el-option",{attrs:{label:"请选择匹配规则",value:"0"}}),t._v(" "),i.haveCondition.includes("productId")&&"productId"!==l?t._e():a("el-option",{attrs:{label:"按商品划分",value:"productId"}}),t._v(" "),i.haveCondition.includes("executorId")&&"executorId"!==l?t._e():a("el-option",{attrs:{label:"按执行人员分组",value:"executorId"}}),t._v(" "),i.haveCondition.includes("operatorId")&&"operatorId"!==l?t._e():a("el-option",{attrs:{label:"按业务人员分组",value:"operatorId"}}),t._v(" "),i.haveCondition.includes("targetCorpId")&&"targetCorpId"!==l?t._e():a("el-option",{attrs:{label:"按我方公司划分",value:"targetCorpId"}}),t._v(" "),i.haveCondition.includes("bizTradeType")&&"bizTradeType"!==l?t._e():a("el-option",{attrs:{label:"按业务类型划分",value:"bizTradeType"}})],1)],1),t._v(" "),a("div",{staticClass:"c w"},["targetCorpId"===l?a("div",{staticClass:"el-select nameKey-content selects",on:{click:function(a){return a.stopPropagation(),t.listShow(""+e.id+n+o)}}},[a("div",{staticStyle:{"line-height":"1"}},t._l(i.condition.targetCorpNames,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.stopPropagation(),t.deleteNameKey(s,n,i,"targetCorpId")}}})])}),0),t._v(" "),a("div",{directives:[{name:"clickOutside",rawName:"v-clickOutside",value:t.listHide,expression:"listHide"}],staticClass:"el-select-dropdown el-popper is-multiple gy-ul",staticStyle:{display:"none"},attrs:{id:""+e.id+n+o}},[a("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list"},t._l(t.apprData.conditionValue.targetCorp,function(e){return a("li",{key:e.id,staticClass:"el-select-dropdown__item",class:{selected:i.condition.targetCorpId.includes(e.id)},on:{click:function(a){return t.changeConditionVal(s,n,e,"targetCorpId")}}},[a("span",[t._v(t._s(e.name))])])}),0)])]):"bizTradeType"===l?a("div",{staticClass:"el-select nameKey-content selects",on:{click:function(a){return a.stopPropagation(),t.listShow(""+e.id+n+o)}}},[a("div",{staticStyle:{"line-height":"1"}},t._l(i.condition.bizTradeTypeNames,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.stopPropagation(),t.deleteNameKey(s,n,i,"bizTradeType")}}})])}),0),t._v(" "),a("div",{directives:[{name:"clickOutside",rawName:"v-clickOutside",value:t.listHide,expression:"listHide"}],staticClass:"el-select-dropdown el-popper is-multiple gy-ul",staticStyle:{display:"none"},attrs:{id:""+e.id+n+o}},[a("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list"},t._l(t.apprData.conditionValue.bizTradeType,function(e){return a("li",{key:e.id,staticClass:"el-select-dropdown__item",class:{selected:i.condition.bizTradeType.includes(e.id)},on:{click:function(a){return t.changeConditionVal(s,n,e,"bizTradeType")}}},[a("span",[t._v(t._s(e.name))])])}),0)])]):"productId"===l?a("div",{staticClass:"el-select nameKey-content",on:{click:function(e){return t.productChange(s,n,o,"productId")}}},[a("div",{staticStyle:{"line-height":"1"}},t._l(i.condition.productNames,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.stopPropagation(),t.deleteNameKey(s,n,i,"productId")}}})])}),0)]):"executorId"===l?a("div",{staticClass:"el-select nameKey-content",on:{click:function(e){return t.openUsrSelDlg(3,s,3,n,o,"executorId")}}},[a("div",{staticStyle:{"line-height":"1"}},t._l(i.condition.executorNames,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.stopPropagation(),t.deleteNameKey(s,n,i,"executorId")}}})])}),0)]):"operatorId"===l?a("div",{staticClass:"el-select nameKey-content",on:{click:function(e){return t.openUsrSelDlg(3,s,3,n,o,"operatorId")}}},[a("div",{staticStyle:{"line-height":"1"}},t._l(i.condition.operatorNames,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.stopPropagation(),t.deleteNameKey(s,n,i,"operatorId")}}})])}),0)]):a("el-select",{model:{value:i.condition.val,callback:function(e){t.$set(i.condition,"val",e)},expression:"vals.condition.val"}})],1),t._v(" "),i.haveCondition.length>1?a("i",{staticClass:"iconfont icon-dele icon-del-span",on:{click:function(e){return t.doDeleteConditionKey(s,n,o,l)}}}):t._e()]),t._v(" "),o===i.haveCondition.length-1?a("i",{staticClass:"iconfont icon-add icon-add-span",on:{click:function(e){return t.doAddConditionKey(s,n)}}}):t._e()])])}),t._v(" "),a("div",{staticClass:"gy-form-group gy-approvaled"},[a("div",{staticClass:"l"},[t._v("审批人")]),t._v(" "),a("div",{staticClass:"examiner"},[a("div",{staticClass:"c w"},[a("input",{directives:[{name:"model",rawName:"v-model",value:i.userNames,expression:"vals.userNames"}],staticStyle:{"padding-left":"20px"},attrs:{type:"text",placeholder:"请选择人员"},domProps:{value:i.userNames},on:{click:function(e){return t.openUsrSelDlg(2,s,3,n)},input:function(e){e.target.composing||t.$set(i,"userNames",e.target.value)}}})])]),t._v(" "),e.entryList.length>1?a("i",{staticClass:"iconfont icon-del1 icon-del-span",on:{click:function(a){return t.deleCondition(s,n,e.entryList)}}}):t._e(),t._v(" "),e.entryList.length==n+1?a("i",{staticClass:"iconfont icon-add1 icon-add-span",on:{click:function(a){return t.addCondition(s,n,e.entryList)}}}):t._e()])],2):t._e()})],2)}),t._v(" "),1===t.apprData.canAddNodeFlg?a("li",{staticClass:"clearfix"},[a("div",{staticClass:"gy-form-group"}),t._v(" "),a("div",{staticClass:"gy-form-group add-step"},[a("button",{staticClass:"gy-button-normal add-style",on:{click:function(e){return t.add(-1)}}},[t._v("新增步骤")])])]):t._e()],2),t._v(" "),t.showAddRuleBtn?a("div",{staticClass:"add clearfix",on:{click:function(e){return t.add()}}},[a("i",{staticClass:"iconfont icon-add",staticStyle:{"margin-left":"8px","margin-right":"8px"}}),t._v("添加审批环节")]):t._e(),t._v(" "),1==t.canEdit?a("div",{staticClass:"copy",staticStyle:{"margin-top":"25px"}},[a("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("流程审批通过后抄送以下人员")]),t._v(" "),t.checked?a("div",{staticClass:"sele"},[a("div",{staticStyle:{"max-width":"1009px","margin-top":"5px"}},[a("span",[t._l(t.apprData.ccList,function(e,s){return a("span",{key:s,staticClass:"el-tag el-tag--info el-tag--small",staticStyle:{"margin-left":"5px"}},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e.userName))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return t.deleCC(s)}}})])}),t._v(" "),a("div",{staticClass:"iconfont icon-add",staticStyle:{color:"#4C97FC","margin-left":"2px"},on:{click:function(e){return t.openUsrSelDlg(1)}}},[a("span",{staticStyle:{"font-size":"small","margin-left":"8px"}},[t._v("添加抄送人")])])],2)])]):t._e()],1):t._e(),t._v(" "),1==t.canEdit?a("div",{staticClass:"copy",staticStyle:{"margin-top":"25px"}},[a("el-checkbox",{on:{change:t.checkNextProc},model:{value:t.hasNextProc,callback:function(e){t.hasNextProc=e},expression:"hasNextProc"}},[t._v("指派下一个关联流程的执行发起人")]),t._v(" "),t.hasNextProc?a("div",{staticClass:"sele checkNextProc"},[a("div",{staticClass:"gy-form-group gy-approval"},[a("span",{staticClass:"l"},[a("el-select",{on:{change:function(e){return t.onChangeMatchType(e,t.nextProcObj,!0)}},model:{value:t.nextProcObj.matchFlg,callback:function(e){t.$set(t.nextProcObj,"matchFlg",e)},expression:"nextProcObj.matchFlg"}},t._l(t.$constant.distMatchTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),1==t.nextProcObj.matchFlg?a("input",{staticClass:"gy-input r",attrs:{type:"text",placeholder:"请选择人员"},domProps:{value:t.nextProcObj.userNames},on:{click:function(e){return t.openUsrSelDlg(0,1)}}}):t._e(),t._v(" "),2==t.nextProcObj.matchFlg?a("input",{staticClass:"gy-input r",attrs:{type:"text",placeholder:"请选择岗位"},domProps:{value:t.nextProcObj.roleNames},on:{click:function(e){return t.openRoleSelDlg(0,2)}}}):t._e()]),t._v(" "),t._l(t.nextProcObj.entryList,function(e,s){return 3==t.nextProcObj.matchFlg?a("div",{key:s},[t._l(e.haveCondition,function(i,n){return a("div",{key:n,staticClass:"gy-form-group gy-approvaled matching-conditions-wrapper"},[0===n?a("div",{staticClass:"l"},[t._v("条件"+t._s(s+1))]):t._e(),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"matching-conditions"},[a("div",{staticClass:"c mr-20"},[a("el-select",{on:{change:function(e){return t.changeConditionKey(e,-1,s,n)}},model:{value:e.haveCondition[n],callback:function(a){t.$set(e.haveCondition,n,a)},expression:"vals.haveCondition[idxKey]"}},[a("el-option",{attrs:{label:"请选择匹配规则",value:"0"}}),t._v(" "),e.haveCondition.includes("productId")&&"productId"!==i?t._e():a("el-option",{attrs:{label:"按商品划分",value:"productId"}}),t._v(" "),e.haveCondition.includes("executorId")&&"executorId"!==i?t._e():a("el-option",{attrs:{label:"按执行人员分组",value:"executorId"}}),t._v(" "),e.haveCondition.includes("operatorId")&&"operatorId"!==i?t._e():a("el-option",{attrs:{label:"按业务人员分组",value:"operatorId"}}),t._v(" "),e.haveCondition.includes("targetCorpId")&&"targetCorpId"!==i?t._e():a("el-option",{attrs:{label:"按我方公司划分",value:"targetCorpId"}}),t._v(" "),e.haveCondition.includes("bizTradeType")&&"bizTradeType"!==i?t._e():a("el-option",{attrs:{label:"按业务类型划分",value:"bizTradeType"}})],1)],1),t._v(" "),a("div",{staticClass:"c w"},["targetCorpId"===i?a("div",{staticClass:"el-select nameKey-content selects",on:{click:function(e){return e.stopPropagation(),t.listShow("nextProcObj"+s+n)}}},[a("div",{staticStyle:{"line-height":"1"}},t._l(e.condition.targetCorpNames,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.stopPropagation(),t.deleteNameKey("nextProcObj",s,i,"targetCorpId")}}})])}),0),t._v(" "),a("div",{directives:[{name:"clickOutside",rawName:"v-clickOutside",value:t.listHide,expression:"listHide"}],staticClass:"el-select-dropdown el-popper is-multiple gy-ul",staticStyle:{display:"none"},attrs:{id:"nextProcObj"+s+n}},[a("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list"},t._l(t.apprData.conditionValue.targetCorp,function(i){return a("li",{key:i.id,staticClass:"el-select-dropdown__item",class:{selected:e.condition.targetCorpId.includes(i.id)},on:{click:function(e){return t.changeConditionVal("nextProcObj",s,i,"targetCorpId")}}},[a("span",[t._v(t._s(i.name))])])}),0)])]):"bizTradeType"===i?a("div",{staticClass:"el-select nameKey-content selects",on:{click:function(e){return e.stopPropagation(),t.listShow("nextProcObj"+s+n)}}},[a("div",{staticStyle:{"line-height":"1"}},t._l(e.condition.bizTradeTypeNames,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.stopPropagation(),t.deleteNameKey("nextProcObj",s,i,"bizTradeType")}}})])}),0),t._v(" "),a("div",{directives:[{name:"clickOutside",rawName:"v-clickOutside",value:t.listHide,expression:"listHide"}],staticClass:"el-select-dropdown el-popper is-multiple gy-ul",staticStyle:{display:"none"},attrs:{id:"nextProcObj"+s+n}},[a("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list"},t._l(t.apprData.conditionValue.bizTradeType,function(i){return a("li",{key:i.id,staticClass:"el-select-dropdown__item",class:{selected:e.condition.bizTradeType.includes(i.id)},on:{click:function(e){return t.changeConditionVal("nextProcObj",s,i,"bizTradeType")}}},[a("span",[t._v(t._s(i.name))])])}),0)])]):"productId"===i?a("div",{staticClass:"el-select nameKey-content",on:{click:function(e){return t.productChange("nextProcObj",s,n,"productId")}}},[a("div",{staticStyle:{"line-height":"1"}},t._l(e.condition.productNames,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.stopPropagation(),t.deleteNameKey("nextProcObj",s,i,"productId")}}})])}),0)]):"executorId"===i?a("div",{staticClass:"el-select nameKey-content",on:{click:function(e){return t.openUsrSelDlg(5,-1,3,s,n,"executorId")}}},[a("div",{staticStyle:{"line-height":"1"}},t._l(e.condition.executorNames,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.stopPropagation(),t.deleteNameKey("nextProcObj",s,i,"executorId")}}})])}),0)]):"operatorId"===i?a("div",{staticClass:"el-select nameKey-content",on:{click:function(e){return t.openUsrSelDlg(5,-1,3,s,n,"operatorId")}}},[a("div",{staticStyle:{"line-height":"1"}},t._l(e.condition.operatorNames,function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small el-tag--light"},[a("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e))]),a("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(e){return e.stopPropagation(),t.deleteNameKey("nextProcObj",s,i,"operatorId")}}})])}),0)]):a("el-select",{model:{value:e.condition.val,callback:function(a){t.$set(e.condition,"val",a)},expression:"vals.condition.val"}})],1),t._v(" "),e.haveCondition.length>1?a("i",{staticClass:"iconfont icon-dele icon-del-span",on:{click:function(e){return t.doDeleteConditionKey("nextProcObj",s,n,i)}}}):t._e()]),t._v(" "),n===e.haveCondition.length-1?a("i",{staticClass:"iconfont icon-add icon-add-span",on:{click:function(e){return t.doAddConditionKey("nextProcObj",s)}}}):t._e()])])}),t._v(" "),a("div",{staticClass:"gy-form-group gy-approvaled"},[a("div",{staticClass:"l"},[t._v("审批人")]),t._v(" "),a("div",{staticClass:"examiner"},[a("div",{staticClass:"c w"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userNames,expression:"vals.userNames"}],staticStyle:{"padding-left":"20px"},attrs:{type:"text",placeholder:"请选择人员"},domProps:{value:e.userNames},on:{click:function(e){return t.openUsrSelDlg(4,-1,3,s)},input:function(a){a.target.composing||t.$set(e,"userNames",a.target.value)}}})])])])],2):t._e()})],2):t._e()],1):t._e()]),t._v(" "),a("div",{staticClass:"submit-wrap clearfix"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:t.saveApprInfo}},[t._v("保存")])]),t._v(" "),a("userList",{ref:"myUserDlg",on:{affirmUser:t.affirmUser}}),t._v(" "),a("roleList",{ref:"myRoleDlg",on:{affirmRole:t.affirmRole}}),t._v(" "),a("el-dialog",{attrs:{title:"请选择规则类型",visible:t.outerVisible,width:"450px"},on:{"update:visible":function(e){t.outerVisible=e}}},[a("div",{staticStyle:{"margin-left":"30px"}},[a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setNewConditionType(1)}}},[t._v("1、商品名称")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setNewConditionType(2)}}},[t._v("2、按执行人员分组")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setNewConditionType(3)}}},[t._v("3、按业务人员分组")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setNewConditionType(4)}}},[t._v("4、不限制人员分组")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setNewConditionType(5)}}},[t._v("5、我方公司")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setNewConditionType(6)}}},[t._v("6、业务类型")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setNewConditionType(7)}}},[t._v("7、固定表达式(目前仅用于无进项票的开票审批)")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.setNewConditionType(8)}}},[t._v("8、直接输入表达式")])],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"选择产品",visible:t.dialogProduct,width:"600px"},on:{"update:visible":function(e){t.dialogProduct=e}}},[a("div",[a("div",[a("div",{staticClass:"gy-form-group gy-form-group1"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.productSearch.productName,expression:"productSearch.productName"}],staticClass:"gy-input",attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.productSearch.productName},on:{input:function(e){e.target.composing||t.$set(t.productSearch,"productName",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"gy-form-group gy-form-group1"},[a("span",{staticClass:"l"},[t._v("关键字")]),t._v(" "),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.productSearch.keywords,expression:"productSearch.keywords"}],staticClass:"gy-input",attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.productSearch.keywords},on:{input:function(e){e.target.composing||t.$set(t.productSearch,"keywords",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"gy-table",staticStyle:{clear:"both"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.productList,"highlight-current-row":""},on:{"current-change":t.productCheck}},[a("el-table-column",{attrs:{property:"productId",label:"产品ID",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"productName",label:"产品名称"}})],1)],1),t._v(" "),a("div",[a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"",layout:"prev, pager, next",total:t.productSearch.total},on:{"current-change":t.currentChange}})],1),t._v(" "),a("div",{staticClass:"gy-btn-group"},[a("button",{staticClass:"gy-button-normal",attrs:{type:"button"},on:{click:t.productClose}},[t._v("取消")]),a("button",{staticClass:"gy-button-extra",staticStyle:{"margin-left":"10px"},attrs:{type:"button"},on:{click:t.productChk}},[t._v("确定")])])])])],1)},staticRenderFns:[]};var Wo=a("C7Lr")(jo,qo,!1,function(t){a("zNnh")},"data-v-f47cd352",null).exports,Ho={components:{gyOperationHistory:oa,gyFileView:Ke,gyCommentRemark:da},data:function(){return{commentDiog:{dialogVisibleRemark:!1},contractDetailCommpany:{targetType:2,subSysType:0,targetId:null,refFunc:{}},approveData:{},formList:[],remarks:null,isPass:!1}},mounted:function(){this.getDetail(),this.getApproveHistory()},methods:{getDetail:function(){var t=this;this.$http.post(this.$api.apprProc.getApprReqInfo,{todoId:this.$route.query.todoId}).then(function(e){0===e.data.code?(t.approveData=e.data.data,Array.isArray(t.approveData)?t.formList=t.approveData:t.approveData.formList&&Array.isArray(t.approveData.formList)?t.formList=t.approveData.formList:t.approveData.dataList&&Array.isArray(t.approveData.dataList)&&t.formList.push(t.approveData),t.approveJurisdiction()):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},getApproveHistory:function(){var t={targetId:this.$route.query.bizId,targetType:this.$route.query.bizType,subSysType:this.$route.query.subSysType,affiliatedCompanyId:this.$route.query.companyId};this.$refs.operationHis.display(this.$api.contract.approve1History,t)},approveJurisdiction:function(){var t=this,e={targetId:this.$route.query.bizId,targetType:this.$route.query.bizType,subSysType:this.$route.query.subSysType};t.isPass=!1,this.$http.post(this.$api.apprProc.hasApproveAuth,e).then(function(e){0===e.data.code&&(t.isPass=!0)}).catch(function(t){console.log(t)})},reject:function(){var t=this;this.$confirm('<span><i class="iconfont icon-message-warning"></i>确认驳回?</span>',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then(function(){t.approveSub(2)})},approveSub:function(t){var e=this,a={todoId:this.$route.query.todoId,operaType:t,remarks:this.remarks};this.$http.post(this.$api.apprProc.doApprove,a).then(function(t){0===t.data.code?(e.$message({message:"操作成功",type:"success"}),e.$router.go(-1)):e.$alert(t.data.code+" "+t.data.message)}).catch(function(t){console.log(t)})},comment:function(){this.commentDiog.dialogVisibleRemark=!0,this.contractDetailCommpany.targetId=Number(this.$route.query.bizId),this.contractDetailCommpany.targetType=Number(this.$route.query.bizType),this.contractDetailCommpany.refFunc=this.$refs.operationHis.display,this.contractDetailCommpany.refParam={targetId:this.$route.query.bizId,targetType:this.$route.query.bizType}},showImgs:function(t){var e=JSON.parse(t);this.$refs.contFileView.open4MultiFile(e)}},watch:{remarks:function(t){t.length>2500&&(this.$message({message:"审批备注最多可填写2500字",type:"warning"}),this.remarks=this.remarks.substr(0,2500))}}},Ko={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paydetail-wrapper my-payment"},[t._l(t.formList,function(e,s){return a("div",{key:s,staticClass:"receivables-information"},[a("p",{staticClass:"paydetail-title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"essential-wrapper pay-detail essential-row-float"},t._l(e.dataList,function(e,s){return a("div",{key:s,staticClass:"essential-item"},[a("div",{staticClass:"essential-title"},[t._v(t._s(e.itemName))]),t._v(" "),"text"===e.itemType?a("div",{staticClass:"essential-text"},[t._v(t._s(e.itemValue||"--"))]):t._e(),t._v(" "),"file"===e.itemType?a("div",{staticClass:"essential-text",staticStyle:{width:"100%"}},[e.itemValue&&0!==e.itemValue.length?a("span",{on:{click:function(a){return t.showImgs(e.itemValue)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]):t._e()])}),0)])}),t._v(" "),t.isPass?a("div",{staticClass:"essential-information"},[a("p",{staticClass:"paydetail-title"},[t._v("审批备注")]),t._v(" "),a("div",{staticClass:"essential-wrapper"},[a("div",{staticClass:"essential-row"},[a("div",{staticClass:"essential-item"},[a("div",{staticClass:"essential-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remarks,expression:"remarks"}],staticClass:"gy-textarea",attrs:{placeholder:"请填写审批备注",cols:"30",rows:"10"},domProps:{value:t.remarks},on:{input:function(e){e.target.composing||(t.remarks=e.target.value)}}})])])])])]):t._e(),t._v(" "),a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),t.isPass?[a("button",{staticClass:"gy-button-normal",on:{click:function(e){return t.reject()}}},[t._v("驳回")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",on:{click:function(e){return t.approveSub(1)}}},[t._v("通过")])]:t._e()],2),t._v(" "),0==this.$route.query.subSysType?a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.comment()}}},[t._v("评论")])]):t._e(),t._v(" "),a("gy-operation-history",{ref:"operationHis"}),t._v(" "),!0===t.commentDiog.dialogVisibleRemark?a("gy-comment-remark",{attrs:{dialog:t.commentDiog,invoice:t.contractDetailCommpany}}):t._e(),t._v(" "),a("gy-file-view",{ref:"contFileView"})],2)},staticRenderFns:[]};var Xo=a("C7Lr")(Ho,Ko,!1,function(t){a("C1AH"),a("DiLR")},"data-v-ab92502e",null).exports,Jo={data:function(){return{formInline:{pageNum:1,pageSize:10,prodName:"",createdFlg:!0,executiveFlg:!1,executiveName:""},essenceList:null,total:0}},activated:function(){this.$route.meta.isBack||(this.formInline={pageNum:1,pageSize:10,prodName:"",createdFlg:!0,executiveFlg:!1,executiveName:""},this.search()),this.$route.meta.isBack=!1},created:function(){},filters:{changeDistributeType:function(t){return 1===t?"自动分配":"手动分配"}},methods:{currentChange:function(t){this.formInline.pageNum=t,this.search()},search:function(){var t=this;this.$http.post(this.$api.contractEssence.essenceList,this.formInline).then(function(e){t.essenceList=e.data.data.data.list,t.total=e.data.data.data.total}).catch(function(t){console.log(t)})},clickItem:function(t){this.$router.push({name:"executionAllocation",query:{homeFromFlg:0,id:t}})}}},Go={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-list cont my-cont-list"},[t._m(0),t._v(" "),a("el-form",{staticClass:"clearfix demo-form-inline search",attrs:{inline:!0,model:t.formInline}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formInline.prodName,expression:"formInline.prodName",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.formInline.prodName},on:{input:function(e){e.target.composing||t.$set(t.formInline,"prodName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("执行人员")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formInline.executiveName,expression:"formInline.executiveName",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入执行人员"},domProps:{value:t.formInline.executiveName},on:{input:function(e){e.target.composing||t.$set(t.formInline,"executiveName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("el-checkbox",{attrs:{label:"只查询合同创建阶段数据"},model:{value:t.formInline.createdFlg,callback:function(e){t.$set(t.formInline,"createdFlg",e)},expression:"formInline.createdFlg"}})],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("el-checkbox",{attrs:{label:"未分配执行人员"},model:{value:t.formInline.executiveFlg,callback:function(e){t.$set(t.formInline,"executiveFlg",e)},expression:"formInline.executiveFlg"}}),t._v(" "),a("span",{staticClass:"searchicon",on:{click:t.search}},[a("i",{staticClass:"iconfont icon-search"})])],1)]),t._v(" "),a("div",{staticClass:"add-wrap"}),t._v(" "),a("div",{staticClass:"div"},[a("el-table",{staticClass:"gy-table",staticStyle:{width:"1200"},attrs:{data:t.essenceList}},[a("el-table-column",{attrs:{label:"ID",fixed:"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.essenceId))]),a("br"),t._v(" "),a("span",[t._v(t._s(e.row.prodName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上游公司\n下游公司",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sellerCompanyName))]),a("br"),t._v(" "),a("span",[t._v(t._s(e.row.buyerCompanyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"业务操作人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.businessManagerName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"执行人员",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.executiveName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合同要素创建时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.createdDate)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分配类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("changeDistributeType")(e.row.distributeType)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","class-name":"amount-right-el",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view edit",attrs:{type:"button"},on:{click:function(a){return t.clickItem(e.row.essenceId)}}},[t._v("详情")])]}}])})],1)],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":function(e){return t.currentChange(e)},"prev-click":function(e){return t.prevClick("essence",e)},"next-click":function(e){return t.nextClick("essence",e)}}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"title"},[this._v("合同执行人员分配")])])}]};var Zo=a("C7Lr")(Jo,Go,!1,function(t){a("A0YG"),a("KIBe")},"data-v-a1577c5c",null).exports,Yo={components:{userList:Pn},data:function(){return{querForm:{pageNo:1,pageSize:10,bizType:null,productId:null,userName:null},addUserForm:{bizType:null,productId:null,userId:null,userName:"",queryUserName:""},quyUserForm:{pageNo:1,pageSize:10,organizationId:2,username:null},bizProductXrefList:null,currEssenceId:null,currXrefUser:null,total:0,outerVisible:!1,currBusinessType:null,products:[],currProductId:null,propTitle:"选择用户",formLabelWidth:"120px"}},created:function(){this.search()},methods:{openUsrSelDlg:function(){this.$refs.myUserDlg.getUsers(null,this.addUserForm.userId)},affirmUser:function(t){1===t.type&&(this.addUserForm.userName=t.userName,this.addUserForm.userId=t.usrUserId)},currentChange:function(t,e){this.changePage(t,e)},search:function(){var t=this;this.$http.post(this.$api.contractEssence.bizProductXrefList,this.querForm).then(function(e){t.bizProductXrefList=e.data.data.rows,t.total=e.data.data.total}).catch(function(t){console.log(t)})},changePage:function(t,e){"xref"===t&&(this.querForm.pageNo=e,this.search())},addBiz:function(){this.outerVisible=!0,this.quyUserForm.username=null,this.addUserForm.bizType=null,this.addUserForm.productId=null,this.addUserForm.userName=null},changeBizType4List:function(){var t=this;this.$http.get(this.$api.contract.getBizTradeProdList+"?bizId="+this.querForm.bizType).then(function(e){t.products=e.data.data}).catch(function(t){console.log(t)})},changeBizType4Add:function(){var t=this;this.$http.get(this.$api.contract.getBizTradeProdList+"?bizId="+this.addUserForm.bizType).then(function(e){t.products=e.data.data}).catch(function(t){console.log(t)})},dele:function(t){var e=this;this.$confirm("此操作将删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(e.$api.contractEssence.delbizXrefUsers,{id:t}).then(function(t){0===t.data.code&&(e.$message({type:"success",message:"删除成功!"}),e.search()),0!==t.data.code&&(e.$message({type:"error",message:"删除失败"}),console.log("删除失败"))}).catch(function(t){e.$message({type:"error",message:"网络异常"}),console.log(t)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addXref:function(){var t=this;if(!this.check())return!1;this.$http.post(this.$api.contractEssence.addbizXrefUsers,this.addUserForm).then(function(e){0===e.data.code&&(t.outerVisible=!1,t.search()),0!==e.data.code&&console.log("添加失败")}).catch(function(t){console.log(t)})},check:function(){return this.addUserForm.bizType?this.addUserForm.productId?!!this.addUserForm.userName||(this.$message({message:"请选择执行人员",type:"error"}),!1):(this.$message({message:"请选择商品",type:"error"}),!1):(this.$message({message:"请选择业务类型",type:"error"}),!1)}}},tr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-list"},[t._m(0),t._v(" "),a("el-form",{staticClass:"clearfix demo-form-inline search",attrs:{inline:!0,model:t.querForm}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(e){return t.changeBizType4List()}},model:{value:t.querForm.bizType,callback:function(e){t.$set(t.querForm,"bizType",e)},expression:"querForm.bizType"}},t._l(t.$constant.businessType4Erp,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("商品")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.querForm.productId,callback:function(e){t.$set(t.querForm,"productId",e)},expression:"querForm.productId"}},t._l(t.products,function(t){return a("el-option",{key:t.prodId,attrs:{label:t.prodName,value:t.prodId}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务人员")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.querForm.userName,expression:"querForm.userName"}],attrs:{type:"text",placeholder:"请输入业务人员"},domProps:{value:t.querForm.userName},on:{input:function(e){e.target.composing||t.$set(t.querForm,"userName",e.target.value)}}}),t._v(" "),a("span",{staticClass:"searchicon",on:{click:t.search}},[a("i",{staticClass:"iconfont icon-search"})])])]),t._v(" "),a("div",{staticClass:"add-wrap"},[a("button",{staticClass:"gy-button-extra",attrs:{type:"button"},on:{click:t.addBiz}},[t._v("添加")])]),t._v(" "),a("div",{staticClass:"div"},[a("table",{staticClass:"gy-table"},[t._m(1),t._v(" "),a("tbody",t._l(t.bizProductXrefList,function(e,s){return a("tr",{key:s},[a("td",[a("span",[t._v(t._s(s+1))])]),t._v(" "),a("td",[a("span",[t._v(t._s(t._f("businessTradeType")(e.bizType)))])]),t._v(" "),a("td",[a("span",[t._v(t._s(e.productName))])]),t._v(" "),a("td",[a("span",[t._v(t._s(e.userName))]),a("br")]),a("td",{staticClass:"caoz"},[a("button",{staticClass:"gy-button-view edit",on:{click:function(a){return t.dele(e.id)}}},[t._v("删除")])])])}),0)])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":function(e){return t.currentChange("xref",e)},"prev-click":function(e){return t.prevClick("xref",e)},"next-click":function(e){return t.nextClick("xref",e)}}}),t._v(" "),a("el-dialog",{staticClass:"addBizDlg",attrs:{title:"添加",visible:t.outerVisible,width:"450px"},on:{"update:visible":function(e){t.outerVisible=e}}},[a("el-form",{attrs:{model:t.addUserForm}},[a("el-form-item",{staticClass:"el-form-item",attrs:{label:"业务类型","label-width":t.formLabelWidth}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(e){return t.changeBizType4Add()}},model:{value:t.addUserForm.bizType,callback:function(e){t.$set(t.addUserForm,"bizType",e)},expression:"addUserForm.bizType"}},t._l(t.$constant.bizType4CreateEss,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{staticClass:"el-form-item ",attrs:{label:"商品","label-width":t.formLabelWidth}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.addUserForm.productId,callback:function(e){t.$set(t.addUserForm,"productId",e)},expression:"addUserForm.productId"}},t._l(t.products,function(t){return a("el-option",{key:t.prodId,attrs:{label:t.prodName,value:t.prodId}})}),1)],1),t._v(" "),a("el-form-item",{staticClass:"el-form-item",attrs:{label:"人员","label-width":t.formLabelWidth}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addUserForm.userName,expression:"addUserForm.userName"}],attrs:{type:"text",placeholder:"请点击选择人员"},domProps:{value:t.addUserForm.userName},on:{click:function(e){return t.openUsrSelDlg()},input:function(e){e.target.composing||t.$set(t.addUserForm,"userName",e.target.value)}}})])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.outerVisible=!1}}},[t._v("取 消")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:t.addXref}},[t._v("确 定")])])],1),t._v(" "),a("userList",{ref:"myUserDlg",on:{affirmUser:t.affirmUser}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"title"},[this._v("产品-业务人员关系")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("业务类型")]),t._v(" "),a("th",[t._v("产品")]),t._v(" "),a("th",[t._v("业务员")]),t._v(" "),a("th",[t._v("操作")])])])}]};var er=a("C7Lr")(Yo,tr,!1,function(t){a("2ZXC"),a("9WIN")},"data-v-40881944",null).exports,ar={components:{userList:Pn},data:function(){return{querForm:{pageNo:1,pageSize:10,bizType:null,productId:null,userName:null},exeProductXrefList:null,currEssenceId:null,currXrefUser:null,total:0,currBusinessType:null,products:[],currProductId:null,formLabelWidth:"120px",cacheLoading:!1,propTitle:"选择用户",outerVisible:!1,addUserForm:{bizType:null,productId:null,userId:null,userName:null,queryUserName:null}}},created:function(){this.search()},methods:{openUsrSelDlg:function(){this.$refs.myUserDlg.getUsers()},affirmUser:function(t){1===t.type&&(this.addUserForm.userName=t.userName,this.addUserForm.userId=t.usrUserId)},currentChange:function(t,e){this.changePage(t,e)},search:function(){var t=this;this.$http.post(this.$api.contractEssence.exeProductXrefList,this.querForm).then(function(e){t.exeProductXrefList=e.data.data.rows,t.total=e.data.data.total}).catch(function(t){console.log(t)})},changePage:function(t,e){"xref"===t&&(this.querForm.pageNo=e,this.search())},addBiz:function(){this.outerVisible=!0,this.addUserForm.bizType=null,this.addUserForm.productId=null,this.addUserForm.userName=null},changeBizType4List:function(){var t=this;this.$http.get(this.$api.contract.getBizTradeProdList+"?bizId="+this.querForm.bizType).then(function(e){t.products=e.data.data}).catch(function(t){console.log(t)})},changeBizType4Add:function(){var t=this;this.$http.get(this.$api.contract.getBizTradeProdList+"?bizId="+this.addUserForm.bizType).then(function(e){t.products=e.data.data}).catch(function(t){console.log(t)})},dele:function(t){var e=this;this.$confirm("此操作将删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(e.$api.contractEssence.delexeXrefUsers,t).then(function(t){0===t.data.code&&(e.$message({type:"success",message:"删除成功!"}),e.search()),0!==t.data.code&&(e.$message({type:"error",message:"删除失败"}),console.log("删除失败"))}).catch(function(t){e.$message({type:"error",message:"网络异常"}),console.log(t)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},addXref:function(){var t=this;if(!this.check())return!1;this.$http.post(this.$api.contractEssence.addexeXrefUsers,this.addUserForm).then(function(e){0===e.data.code&&(t.outerVisible=!1,t.search()),0!==e.data.code&&console.log("添加失败")}).catch(function(t){console.log(t)})},syncCache:function(){var t=this;this.cacheLoading=!0,this.$http.post(this.$api.contractEssence.syncCached).then(function(e){0===e.data.code&&t.$message({message:"同步缓存成功",type:"success"}),0!==e.data.code&&t.$message({message:"同步缓存失败",type:"error"}),t.cacheLoading=!1}).catch(function(e){t.cacheLoading=!1,t.$message({message:"网络异常",type:"error"})})},check:function(){return this.addUserForm.bizType?this.addUserForm.productId?!!this.addUserForm.userName||(this.$message({message:"请选择执行人员",type:"error"}),!1):(this.$message({message:"请选择商品",type:"error"}),!1):(this.$message({message:"请选择业务类型",type:"error"}),!1)}}},sr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-list"},[t._m(0),t._v(" "),a("el-form",{staticClass:"clearfix demo-form-inline search",attrs:{inline:!0,model:t.querForm}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(e){return t.changeBizType4List()}},model:{value:t.querForm.bizType,callback:function(e){t.$set(t.querForm,"bizType",e)},expression:"querForm.bizType"}},t._l(t.$constant.businessType4Erp,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("商品")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.querForm.productId,callback:function(e){t.$set(t.querForm,"productId",e)},expression:"querForm.productId"}},t._l(t.products,function(t){return a("el-option",{key:t.prodId,attrs:{label:t.prodName,value:t.prodId}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("执行人员")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.querForm.userName,expression:"querForm.userName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.querForm.userName},on:{input:function(e){e.target.composing||t.$set(t.querForm,"userName",e.target.value)}}}),t._v(" "),a("span",{staticClass:"searchicon",on:{click:function(e){return t.search()}}},[a("i",{staticClass:"iconfont icon-search"})])])]),t._v(" "),a("div",{staticClass:"add-wrap"},[a("el-button",{staticClass:"gy-button-extra",attrs:{type:"primary",loading:t.cacheLoading},on:{click:t.syncCache}},[t._v("同步到缓存中 ")]),t._v(" "),a("button",{staticClass:"gy-button-normal",attrs:{type:"button"},on:{click:t.addBiz}},[t._v("添加")])],1),t._v(" "),a("div",{staticClass:"div"},[a("table",{staticClass:"gy-table"},[t._m(1),t._v(" "),a("tbody",t._l(t.exeProductXrefList,function(e,s){return a("tr",{key:s},[a("td",[a("span",[t._v(t._s(s+1))])]),t._v(" "),a("td",[a("span",[t._v(t._s(t._f("businessTradeType")(e.bizType)))])]),t._v(" "),a("td",[a("span",[t._v(t._s(e.productName))])]),t._v(" "),a("td",[a("span",[t._v(t._s(e.userName))]),a("br")]),a("td",{staticClass:"caoz"},[a("button",{staticClass:"gy-button-view edit",on:{click:function(a){return t.dele(e)}}},[t._v("删除")])])])}),0)])]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":function(e){return t.currentChange("xref",e)},"prev-click":function(e){return t.prevClick("xref",e)},"next-click":function(e){return t.nextClick("xref",e)}}}),t._v(" "),a("el-dialog",{staticClass:"addBizDlg",attrs:{title:"添加",visible:t.outerVisible,width:"450px"},on:{"update:visible":function(e){t.outerVisible=e}}},[a("el-form",{attrs:{model:t.addUserForm}},[a("el-form-item",{staticClass:"el-form-item",attrs:{label:"业务类型","label-width":t.formLabelWidth}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:function(e){return t.changeBizType4Add()}},model:{value:t.addUserForm.bizType,callback:function(e){t.$set(t.addUserForm,"bizType",e)},expression:"addUserForm.bizType"}},t._l(t.$constant.bizType4CreateEss,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{staticClass:"el-form-item ",attrs:{label:"商品","label-width":t.formLabelWidth}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.addUserForm.productId,callback:function(e){t.$set(t.addUserForm,"productId",e)},expression:"addUserForm.productId"}},t._l(t.products,function(t){return a("el-option",{key:t.prodId,attrs:{label:t.prodName,value:t.prodId}})}),1)],1),t._v(" "),a("el-form-item",{staticClass:"el-form-item ",attrs:{label:"人员","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请点击选择人员"},on:{focus:function(e){return t.openUsrSelDlg()}},model:{value:t.addUserForm.userName,callback:function(e){t.$set(t.addUserForm,"userName",e)},expression:"addUserForm.userName"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.outerVisible=!1}}},[t._v("取 消")]),t._v(" "),a("button",{staticClass:"gy-button-extra",on:{click:t.addXref}},[t._v("确 定")])])],1),t._v(" "),a("userList",{ref:"myUserDlg",on:{affirmUser:t.affirmUser}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"title"},[this._v("产品-执行人员关系")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("业务类型")]),t._v(" "),a("th",[t._v("产品")]),t._v(" "),a("th",[t._v("执行员")]),t._v(" "),a("th",[t._v("操作")])])])}]};var ir=a("C7Lr")(ar,sr,!1,function(t){a("R8T+"),a("M77l")},"data-v-79f45c4a",null).exports,nr={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},lr=a("C7Lr")(null,nr,!1,null,null,null).exports,or={components:{gyFileUpload:aa,userList:Pn},data:function(){return{disabled:!1,createStampList:null,total:null,companyName:null,activeIndex:null,dialogVisible:!1,documentDirection:[],proType:[],documentDirectionDesc:null,seleForm:{business:null,stamp:null,company:null,document:null,ourCompany:null},addFrom:{orderId:null,productId:null,productName:null,contractType:null,businessType:null,businessTypeDesc:null,stampType:null,stampTypeDesc:null,companyId:null,companyName:null,documentType:null,documentTypeDesc:null,stampFileDescription:null,documentDirection:[],documentDirectionDesc:null,usedDate:(new Date).getTime(),userId:JSON.parse(localStorage.getItem("userInfo")).id,userName:JSON.parse(localStorage.getItem("userInfo")).username,userDepartmentId:JSON.parse(localStorage.getItem("userInfo")).organizationId,userDepartmentName:JSON.parse(localStorage.getItem("userInfo")).orgName,essenceId:null,ourCompanyId:null,ourCompanyName:null,othersideCompanyId:null,othersideCompanyName:null,contractCode:null,businessProgress:null,businessUserId:null,remark:null,stampApplicationFiles:[]},dialogSearch:{pageNo:1,pageSize:10,contractType:null,essenceId:null,customerName:null,targetCorpName:null,prodName:null},dialogCompanyList:[],relatedCompanyList:[],relatedCompany:null,product:null,stampCompany:null,businessPersonnel:null,businessUser:null,businessManager:[],businessData:[{id:1,value:"新业务"},{id:2,value:"现有业务-ERP合同"},{id:3,value:"现有业务-非ERP合同"}],stampData:[{id:1,value:"合同章"},{id:2,value:"提货章"}],progressData:[{id:1,value:"已签约"},{id:2,value:"已收款"},{id:3,value:"已付款"}],contractData:[{id:2,value:"采购合同"},{id:3,value:"销售合同"}],documentData:[{id:1,value:"提货单据"},{id:2,value:"货转单据"},{id:3,value:"银行证明"},{id:4,value:"其他"}],Verification:[{name:"businessType",msg:"请先选择业务类型"},{name:"stampType",msg:"请先选择印章类型"},{name:"companyId",msg:"请先选择用印单位"},{name:"documentType",msg:"请先选择单据类型"},{name:"stampFileDescription",msg:"请先填写用印文件名称"},{name:"usedDate",msg:"请先选择使用日期"},{name:"contractType",msg:"请先选择合同类型"},{name:"othersideCompanyName",msg:"请先填写客户公司名称"},{name:"productName",msg:"请先选择产品名称"}]}},mounted:function(){this.createStampList=this.$route.query.orderDetailList,this.getRelatedCompany(),this.getGoodsList(),this.suring()},methods:{suring:function(){console.log(this.$route.query.orderDetailList),this.$route.query.orderDetailList&&(this.seleForm.business={id:2,value:"现有业务-ERP合同"},this.addFrom.businessType=2,this.addFrom.businessTypeDesc="现有业务-ERP合同",this.seleForm.company={targetCorpId:this.createStampList.targetCorpId,targetCorpName:this.createStampList.targetCorpName},this.addFrom.companyId=this.createStampList.targetCorpId,this.addFrom.companyName=this.createStampList.targetCorpName,this.seleForm.ourCompany={targetCorpId:this.createStampList.targetCorpId,targetCorpName:this.createStampList.targetCorpName},this.addFrom.ourCompanyId=this.createStampList.targetCorpId,this.addFrom.ourCompanyName=this.createStampList.targetCorpName,2===this.createStampList.contractType&&(this.addFrom.contractType=this.createStampList.contractType,this.addFrom.othersideCompanyId=this.createStampList.sellerCompanyId,this.addFrom.othersideCompanyName=this.createStampList.sellerCompanyName),3===this.createStampList.contractType&&(this.addFrom.contractType=this.createStampList.contractType,this.addFrom.othersideCompanyId=this.createStampList.buyerCompanyId,this.addFrom.othersideCompanyName=this.createStampList.buyerCompanyName),this.product=this.createStampList.prodName,this.addFrom.productName=this.createStampList.prodName,this.addFrom.productId=this.createStampList.productId,this.businessUser=this.createStampList.businessManagerName,this.addFrom.businessUserId=this.createStampList.businessManagerId,this.addFrom.essenceId=this.createStampList.id)},getRelatedCompany:function(){var t=this;this.$http.get(this.$api.contract.getRelatedCompany).then(function(e){t.relatedCompanyList=e.data.data.targetCorpList}).catch(function(t){console.log(t)})},getGoodsList:function(){var t=this;this.$http.post(this.$api.workbench.getProdList).then(function(e){t.proType=e.data.data.rows}).catch(function(t){console.log(t)})},getContract:function(){var t=this,e=this;e.$http.post(e.$api.stamp.selectContract,e.dialogSearch).then(function(a){console.log(a),e.dialogCompanyList=a.data.data.list,t.total=a.data.data.total}).catch(function(t){console.log(t)})},assignment:function(t,e,a){this.addFrom[e]=t.id,this.addFrom[a]=t.value,4===this.addFrom.documentType&&(this.addFrom.documentTypeDesc=null)},assignment1:function(t,e,a){console.log(t),this.addFrom[e]=t.targetCorpId,this.addFrom[a]=t.targetCorpName},changeProduct:function(t){console.log(t),this.addFrom.productId=t.productId,this.addFrom.productName=t.productName},contracType:function(t){console.log(t),this.createStampList?1===this.createStampList.contractType&&(2===t&&(this.addFrom.othersideCompanyId=this.createStampList.sellerCompanyId,this.addFrom.othersideCompanyName=this.createStampList.sellerCompanyName,this.addFrom.orderId=this.createStampList.purchaseOrderId),3===t&&(this.addFrom.othersideCompanyId=this.createStampList.buyerCompanyId,this.addFrom.othersideCompanyName=this.createStampList.buyerCompanyName,this.addFrom.orderId=this.createStampList.saleOrderId)):(this.activeIndex=null,this.seleForm.ourCompany=null,this.addFrom.essenceId=null,this.addFrom.ourCompanyName=null,this.addFrom.ourCompanyId=null,this.addFrom.othersideCompanyId=null,this.addFrom.othersideCompanyName=null)},handleCurrentChange:function(t){this.dialogSearch.pageNo=t,this.getContract()},checkContract:function(t){null!==this.addFrom.contractType&&""!==this.addFrom.contractType?(this.dialogVisible=!0,this.dialogSearch.contractType=t,this.getContract()):this.$message.error("请先选择合同类型")},checked:function(t){this.activeIndex=t},checkSales:function(){null!==this.activeIndex?(console.log(this.dialogCompanyList[this.activeIndex]),this.seleForm.ourCompany=this.dialogCompanyList[this.activeIndex].targetCorpName,this.addFrom.essenceId=this.dialogCompanyList[this.activeIndex].essenceId,this.addFrom.ourCompanyName=this.dialogCompanyList[this.activeIndex].targetCorpName,this.addFrom.ourCompanyId=this.dialogCompanyList[this.activeIndex].targetCorpId,this.addFrom.othersideCompanyName=this.dialogCompanyList[this.activeIndex].customerName,this.addFrom.othersideCompanyId=this.dialogCompanyList[this.activeIndex].customerId,this.product=this.dialogCompanyList[this.activeIndex].prodName,this.addFrom.productId=this.dialogCompanyList[this.activeIndex].prodId,this.addFrom.productName=this.dialogCompanyList[this.activeIndex].prodName,this.businessUser=this.dialogCompanyList[this.activeIndex].businessManagerName,this.addFrom.businessManagerId=this.dialogCompanyList[this.activeIndex].businessManagerId,2===this.addFrom.contractType&&(this.addFrom.orderId=this.dialogCompanyList[this.activeIndex].purchaseOrderId),3===this.addFrom.contractType&&(this.addFrom.orderId=this.dialogCompanyList[this.activeIndex].saleOrderId),this.dialogVisible=!1):this.$message({message:"请先选择公司",type:"error"})},onCallbackSaleFileUpload:function(t){var e=this;console.log(t),this.addFrom.stampApplicationFiles=[],t.forEach(function(t){e.addFrom.stampApplicationFiles.push(t.fileUrl)})},affirmUser:function(t){if(0===t.type)return!1;this.businessUser=t.userName,this.addFrom.businessUserId=t.usrUserId,console.log(t)},openUsrSelDlg:function(t,e,a,s){this.$refs.myUserDlg.getUsers()},onsubmit:function(){var t=this;return console.log(this.addFrom),!!this.testForm(this.Verification)&&(!!this.check()&&void this.$http.post(this.$api.stamp.createStamp,this.addFrom).then(function(e){0===e.data.code?(t.$message({message:"创建成功",type:"success"}),t.$route.query.orderDetailList?t.$router.push({name:"orderDetails",query:{id:t.createStampList.id,saleOrderId:t.createStampList.saleOrderId,purchaseOrderId:t.createStampList.purchaseOrderId,tabsIndex:5}}):t.$router.push({name:"stampApplyList"})):t.$message({message:e.data.message,type:"error"})}))},testForm:function(t){for(var e=this.addFrom,a=0;a<t.length;a++)if(null===e[t[a].name]||""===e[t[a].name])return this.$message({message:t[a].msg,type:"error"}),!1;return!0},check:function(){if(0===this.documentDirection.length)return this.$message.error("请先选择单据去向"),!1;if(-1!==this.documentDirection.indexOf("其他")){if(!this.documentDirectionDesc)return this.$message.error("请先输入单据去向"),!1;this.addFrom.documentDirection=this.documentDirection.toString(),this.addFrom.documentDirection=this.addFrom.documentDirection.replace("^,*|,*$","").replace(/其他/,this.documentDirectionDesc),console.log(this.addFrom.documentDirection),this.addFrom.documentDirectionDesc=this.addFrom.documentDirection}else-1!==this.documentDirection.indexOf("第三方仓库")?(this.addFrom.documentDirection=this.documentDirection.toString(),this.documentDirectionDesc&&(this.addFrom.documentDirection=this.addFrom.documentDirection+","+this.documentDirectionDesc),console.log(this.addFrom.documentDirection),this.addFrom.documentDirectionDesc=this.addFrom.documentDirection):(this.addFrom.documentDirection=this.documentDirection.toString(),this.addFrom.documentDirectionDesc=this.addFrom.documentDirection);return console.log(this.addFrom),0===this.addFrom.stampApplicationFiles.length?(this.$message.error("请先选择附件"),!1):this.addFrom.companyName!==this.addFrom.ourCompanyName?(this.$message.error("用印单位和我方公司不一致,请修改"),!1):1===this.addFrom.businessType||this.addFrom.businessProgress?!!this.businessUser||(this.$message.error("业务人员不能为空"),!1):(this.$message.error("请先选择业务进度"),!1)}}},rr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-stamp"},[a("div",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"gy-form"},[a("div",{staticClass:"gy-form-group"},[t._m(0),t._v(" "),a("el-select",{on:{change:function(e){return t.assignment(t.seleForm.business,"businessType","businessTypeDesc")}},model:{value:t.seleForm.business,callback:function(e){t.$set(t.seleForm,"business",e)},expression:"seleForm.business"}},t._l(t.businessData,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(1),t._v(" "),a("el-select",{on:{change:function(e){return t.assignment(t.seleForm.stamp,"stampType","stampTypeDesc")}},model:{value:t.seleForm.stamp,callback:function(e){t.$set(t.seleForm,"stamp",e)},expression:"seleForm.stamp"}},t._l(t.stampData,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(2),t._v(" "),a("el-select",{attrs:{"value-key":"targetCorpName"},on:{change:function(e){return t.assignment1(t.seleForm.company,"companyId","companyName")}},model:{value:t.seleForm.company,callback:function(e){t.$set(t.seleForm,"company",e)},expression:"seleForm.company"}},t._l(t.relatedCompanyList,function(t,e){return a("el-option",{key:e,attrs:{label:t.targetCorpName,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{height:"auto"}},[t._m(3),t._v(" "),a("div",[a("el-select",{on:{change:function(e){return t.assignment(t.seleForm.document,"documentType","documentTypeDesc")}},model:{value:t.seleForm.document,callback:function(e){t.$set(t.seleForm,"document",e)},expression:"seleForm.document"}},t._l(t.documentData,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t}})}),1),t._v(" "),4==t.addFrom.documentType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.addFrom.documentTypeDesc,expression:"addFrom.documentTypeDesc"}],attrs:{type:"text",maxlength:"50",placeholder:"请输入"},domProps:{value:t.addFrom.documentTypeDesc},on:{input:function(e){e.target.composing||t.$set(t.addFrom,"documentTypeDesc",e.target.value)}}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(4),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addFrom.stampFileDescription,expression:"addFrom.stampFileDescription"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.addFrom.stampFileDescription},on:{input:function(e){e.target.composing||t.$set(t.addFrom,"stampFileDescription",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group",staticStyle:{height:"auto"}},[t._m(5),t._v(" "),a("div",[a("el-checkbox-group",{model:{value:t.documentDirection,callback:function(e){t.documentDirection=e},expression:"documentDirection"}},[a("el-checkbox",{attrs:{label:"第三方仓库"}}),t._v(" "),a("el-checkbox",{attrs:{label:"卖方"}}),t._v(" "),a("el-checkbox",{attrs:{label:"买方"}}),t._v(" "),a("el-checkbox",{attrs:{label:"其他"}})],1),t._v(" "),-1!==t.documentDirection.indexOf("其他")||-1!==t.documentDirection.indexOf("第三方仓库")?a("input",{directives:[{name:"model",rawName:"v-model",value:t.documentDirectionDesc,expression:"documentDirectionDesc"}],attrs:{type:"text",maxlength:"50",placeholder:"请输入"},domProps:{value:t.documentDirectionDesc},on:{input:function(e){e.target.composing||(t.documentDirectionDesc=e.target.value)}}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(6),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"日期"},model:{value:t.addFrom.usedDate,callback:function(e){t.$set(t.addFrom,"usedDate",e)},expression:"addFrom.usedDate"}})],1)]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(7),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addFrom.userName,expression:"addFrom.userName"}],attrs:{type:"text",placeholder:"请输入",disabled:""},domProps:{value:t.addFrom.userName},on:{input:function(e){e.target.composing||t.$set(t.addFrom,"userName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(8),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addFrom.userDepartmentName,expression:"addFrom.userDepartmentName"}],attrs:{type:"text",placeholder:"请输入",disabled:""},domProps:{value:t.addFrom.userDepartmentName},on:{input:function(e){e.target.composing||t.$set(t.addFrom,"userDepartmentName",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"paydetail-title"},[t._v("业务信息")]),t._v(" "),a("div",{staticClass:"gy-form"},[a("div",{staticClass:"gy-form-group"},[t._m(9),t._v(" "),a("el-select",{on:{change:function(e){return t.contracType(t.addFrom.contractType)}},model:{value:t.addFrom.contractType,callback:function(e){t.$set(t.addFrom,"contractType",e)},expression:"addFrom.contractType"}},t._l(t.contractData,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.id}})}),1)],1),t._v(" "),null===t.addFrom.businessType||2===t.addFrom.businessType?[a("div",{staticClass:"gy-form-group"},[t._m(10),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addFrom.essenceId,expression:"addFrom.essenceId"}],attrs:{type:"text",placeholder:"请选择合同要素ID",disabled:!!this.$route.query.orderDetailList},domProps:{value:t.addFrom.essenceId},on:{click:function(e){return t.checkContract(t.addFrom.contractType)},input:function(e){e.target.composing||t.$set(t.addFrom,"essenceId",e.target.value)}}})])]:t._e(),t._v(" "),1==t.addFrom.businessType||3==t.addFrom.businessType?[a("div",{staticClass:"gy-form-group"},[t._m(11),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addFrom.contractCode,expression:"addFrom.contractCode"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.addFrom.contractCode},on:{input:function(e){e.target.composing||t.$set(t.addFrom,"contractCode",e.target.value)}}})])]:t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(12),t._v(" "),a("el-select",{attrs:{"value-key":"targetCorpName"},on:{change:function(e){return t.assignment1(t.seleForm.ourCompany,"ourCompanyId","ourCompanyName")}},model:{value:t.seleForm.ourCompany,callback:function(e){t.$set(t.seleForm,"ourCompany",e)},expression:"seleForm.ourCompany"}},t._l(t.relatedCompanyList,function(t,e){return a("el-option",{key:e,attrs:{label:t.targetCorpName,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(13),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addFrom.othersideCompanyName,expression:"addFrom.othersideCompanyName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.addFrom.othersideCompanyName},on:{input:function(e){e.target.composing||t.$set(t.addFrom,"othersideCompanyName",e.target.value)}}})]),t._v(" "),1!==t.addFrom.businessType?a("div",{staticClass:"gy-form-group"},[t._m(14),t._v(" "),a("el-select",{model:{value:t.addFrom.businessProgress,callback:function(e){t.$set(t.addFrom,"businessProgress",e)},expression:"addFrom.businessProgress"}},t._l(t.progressData,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.value}})}),1)],1):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(15),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.businessUser,expression:"businessUser"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.businessUser},on:{click:function(e){return t.openUsrSelDlg()},input:function(e){e.target.composing||(t.businessUser=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[t._m(16),t._v(" "),a("el-select",{attrs:{placeholder:"请选择","value-key":"productName"},on:{change:function(e){return t.changeProduct(t.product)}},model:{value:t.product,callback:function(e){t.product=e},expression:"product"}},t._l(t.proType,function(t,e){return a("el-option",{key:e,attrs:{label:t.productName,value:t}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("备注")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addFrom.remark,expression:"addFrom.remark"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.addFrom.remark},on:{input:function(e){e.target.composing||t.$set(t.addFrom,"remark",e.target.value)}}})])],2),t._v(" "),a("div",{staticClass:"paydetail-title"},[t._v("附件信息")]),t._v(" "),a("div",{staticClass:"gy-form"},[a("div",{staticClass:"gy-form-group",staticStyle:{width:"100%"}},[t._m(17),t._v(" "),a("gy-file-upload",{ref:"sFileUpload",on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1)]),t._v(" "),a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-extra confirmations",attrs:{type:"button"},on:{click:t.onsubmit}},[t._v("提交")])]),t._v(" "),a("userList",{ref:"myUserDlg",on:{affirmUser:t.affirmUser}}),t._v(" "),t.dialogVisible?a("el-dialog",{staticClass:"addDialog",attrs:{width:"900px",title:"选择合同",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("div",[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.dialogSearch.essenceId,expression:"dialogSearch.essenceId"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.dialogSearch.essenceId},on:{input:function(e){e.target.composing||t.$set(t.dialogSearch,"essenceId",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("客户名称")]),t._v(" "),a("div",[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.dialogSearch.customerName,expression:"dialogSearch.customerName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.dialogSearch.customerName},on:{input:function(e){e.target.composing||t.$set(t.dialogSearch,"customerName",e.target.value)}}})]),t._v(" "),a("span",{staticClass:"search1",on:{click:t.getContract}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("div",[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.dialogSearch.targetCorpName,callback:function(e){t.$set(t.dialogSearch,"targetCorpName",e)},expression:"dialogSearch.targetCorpName"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.relatedCompanyList,function(t,e){return a("el-option",{key:e,attrs:{label:t.targetCorpName,value:t.targetCorpName}})})],2)],1)]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("div",[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.dialogSearch.prodName,callback:function(e){t.$set(t.dialogSearch,"prodName",e)},expression:"dialogSearch.prodName"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.proType,function(t,e){return a("el-option",{key:e,attrs:{label:t.productName,value:t.productName}})})],2)],1)]),t._v(" "),a("div",{staticClass:"dialog-table"},[a("table",{staticClass:"gy-table"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("合同要素ID")]),t._v(" "),a("th",[t._v("类别")]),t._v(" "),a("th",[t._v("品类")]),t._v(" "),a("th",[t._v("合同数量(吨)")]),t._v(" "),a("th",[t._v("我方公司")]),t._v(" "),a("th",[t._v("客户名称")]),t._v(" "),a("th",[t._v("合同编号")]),t._v(" "),a("th",[t._v("创建时间")])])]),t._v(" "),a("tbody",[t._l(t.dialogCompanyList,function(e,s){return a("tr",{key:s},[a("td",{staticStyle:{width:"50px"}},[a("span",{staticClass:"el-radio__input",class:s===t.activeIndex?"is-checked":"",on:{click:function(e){return t.checked(s)}}},[a("span",{staticClass:"el-radio__inner"})])]),t._v(" "),a("td",{staticStyle:{width:"360px"}},[t._v(t._s(e.essenceId))]),t._v(" "),a("td",{staticStyle:{width:"240px"}},[t._v(t._s(e.contractTypeDesc))]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"poper-class":"test",content:e.prodName,disabled:e.prodName&&e.prodName.replace(/[^x00-xff]/g,"aa").length>16?t.disabled:!t.disabled,placement:"bottom"}},[a("div",{staticClass:"wid-overflow",staticStyle:{width:"85px"}},[t._v("\n                                    "+t._s(e.prodName)+"\n                                ")])])],1),t._v(" "),a("td",{staticStyle:{width:"358px","text-align":"right"}},[t._v(t._s(t._f("numToQuantity")(e.contractNumber)))]),t._v(" "),a("td",[a("el-tooltip",{attrs:{"poper-class":"test",content:e.targetCorpName,placement:"top"}},[a("span",{staticClass:"conceal"},[t._v(t._s(e.targetCorpName||"--"))])])],1),t._v(" "),a("td",[a("el-tooltip",{attrs:{"poper-class":"test",content:e.customerName,placement:"top"}},[a("span",{staticClass:"conceal"},[t._v(t._s(e.customerName||"--"))])])],1),t._v(" "),a("td",[a("span",{staticClass:"conceal"},[t._v(t._s(e.contractCode||"--"))])]),t._v(" "),a("td",{staticStyle:{width:"358px"}},[t._v(t._s(e.createdDate||"--"))])])}),t._v(" "),0==t.dialogCompanyList.length?a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"9"}},[t._v("暂无数据")])]):t._e()],2)]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.dialogSearch.pageNum,"page-size":t.dialogSearch.pageSize,total:t.total},on:{"update:currentPage":function(e){return t.$set(t.dialogSearch,"pageNum",e)},"update:current-page":function(e){return t.$set(t.dialogSearch,"pageNum",e)},"current-change":t.handleCurrentChange}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"gy-button-normal",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"gy-button-extra confirmations",staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.checkSales()}}},[t._v("确定")])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("业务类型")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("印章种类")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("用印单位")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("单据类型")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("用印文件名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("单据去向")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("使用日期")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("申请人员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("所在部门")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("合同类型")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("合同要素ID")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("合同编号")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("我方公司")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("客户名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("业务进度")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("业务人员")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("产品名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("附件")])}]};var cr=a("C7Lr")(or,rr,!1,function(t){a("oFMk"),a("+fiI")},"data-v-7db0cba7",null).exports,dr={components:{gyFileView:Ke},data:function(){return{total:null,isShowSearch:!1,search:{pageNo:1,pageSize:10,companyName:null,status:null,othersideCompanyName:null,userName:null,applyStartDate:null,applyEndDate:null,usedStartDate:null,usedEndDate:null,stampType:null,essenceId:null,applyCode:null},stampList:[],approvalStatus:[{value:"全部"},{id:1,value:"审批中"},{id:2,value:"审批通过"},{id:3,value:"已完成"},{id:4,value:"已驳回"}],stampData:[{value:"全部"},{id:1,value:"合同章"},{id:2,value:"提货章"}]}},activated:function(){this.$route.meta.isBack||(this.search={},this.getList()),this.$route.meta.isBack=!1},created:function(){this.init()},methods:{init:function(){this.getList()},getList:function(){var t=this;this.$http.post(this.$api.stamp.stampList,this.search).then(function(e){if(0===e.data.code)return t.stampList=e.data.data.list,void(t.total=e.data.data.total);t.$message.error(e.data.message)})},handleShowImg:function(t){this.$refs.contFileView.open4MultiFile(t)},imgErr:function(t){this.$message({message:t+"暂无数据",type:"warning"})},lookStamp:function(t){var e={id:t};this.$router.push({name:"stampDetail",query:e})},handleCurrentChange:function(t){this.search.pageNo=t,this.getList()}}},ur={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"standingBook stampList"},[a("div",{staticClass:"search-btn"},[a("span",{staticClass:"ShowSearch",on:{click:function(e){t.isShowSearch=!t.isShowSearch}}},[t._v("高级搜索"),a("i",{staticClass:"el-input__icon",class:t.isShowSearch?"el-icon-arrow-up":"el-icon-arrow-down"})])]),t._v(" "),a("div",{staticClass:"my-search clearfix"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("用印单位")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.companyName,expression:"search.companyName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.companyName},on:{input:function(e){e.target.composing||t.$set(t.search,"companyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("状态")]),t._v(" "),a("el-select",{model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},t._l(t.approvalStatus,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("客户名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.othersideCompanyName,expression:"search.othersideCompanyName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.othersideCompanyName},on:{input:function(e){e.target.composing||t.$set(t.search,"othersideCompanyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请人员")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.userName,expression:"search.userName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.userName},on:{input:function(e){e.target.composing||t.$set(t.search,"userName",e.target.value)}}}),t._v(" "),t.isShowSearch?t._e():a("span",{staticClass:"searchicon",on:{click:function(e){return t.getList()}}},[a("i",{staticClass:"iconfont icon-search"})])]),t._v(" "),t.isShowSearch?a("div",{staticClass:"search-form"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"申请开始日期"},model:{value:t.search.applyStartDate,callback:function(e){t.$set(t.search,"applyStartDate",e)},expression:"search.applyStartDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"申请结束日期"},model:{value:t.search.applyEndDate,callback:function(e){t.$set(t.search,"applyEndDate",e)},expression:"search.applyEndDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("使用日期")]),t._v(" "),a("div",{staticClass:"searchDate"},[a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"使用开始日期"},model:{value:t.search.usedStartDate,callback:function(e){t.$set(t.search,"usedStartDate",e)},expression:"search.usedStartDate"}})],1),t._v(" "),a("div",{staticClass:"c"},[t._v("至")]),t._v(" "),a("div",{staticClass:"d"},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp",placeholder:"使用结束日期"},model:{value:t.search.usedEndDate,callback:function(e){t.$set(t.search,"usedEndDate",e)},expression:"search.usedEndDate"}})],1)])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("印章种类")]),t._v(" "),a("el-select",{model:{value:t.search.stampType,callback:function(e){t.$set(t.search,"stampType",e)},expression:"search.stampType"}},t._l(t.stampData,function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("关联合同")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.essenceId,expression:"search.essenceId"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.essenceId},on:{input:function(e){e.target.composing||t.$set(t.search,"essenceId",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请编号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.applyCode,expression:"search.applyCode"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.search.applyCode},on:{input:function(e){e.target.composing||t.$set(t.search,"applyCode",e.target.value)}}}),t._v(" "),t.isShowSearch?a("span",{staticClass:"searchicon",on:{click:function(e){return t.getList()}}},[a("i",{staticClass:"iconfont icon-search"})]):t._e()])]):t._e()]),t._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"gy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stampList}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"用印单位",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.companyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.statusDesc))]),t._v(" "),t._l(e.row.toDoUserList,function(e,s){return a("span",{key:s},[t._v(t._s(e.username))])})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"申请日期",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.createdDate,2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"申请人员",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.userName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"关联合同",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.essenceId||"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"文件名称",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stampFileDescription))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"印章种类",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.stampTypeDesc))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"使用日期",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("date")(e.row.usedDate)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"附件",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[null!==e.row.attachments&&e.row.attachments.length>0?a("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.handleShowImg(e.row.attachments)}}}):a("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("附件")}}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"签章文件",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[null!==e.row.signedFiles&&e.row.signedFiles.length>0?a("i",{staticClass:"iconfont icon-photo",on:{click:function(a){return t.handleShowImg(e.row.signedFiles)}}}):a("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("签章文件")}}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"申请编号",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.applyCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("button",{staticClass:"gy-button-view",staticStyle:{"background-color":"#fff"},on:{click:function(a){return t.lookStamp(e.row.id)}}},[t._v("查看")])]}}])})],1)],1)]),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.search.pageNo,"page-size":t.search.pageSize,total:t.total},on:{"update:currentPage":function(e){return t.$set(t.search,"pageNo",e)},"update:current-page":function(e){return t.$set(t.search,"pageNo",e)},"current-change":t.handleCurrentChange}}),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[]};var pr=a("C7Lr")(dr,ur,!1,function(t){a("RDab")},"data-v-42b35d9c",null).exports,vr={components:{gyOperationHistory:oa,gyCommentRemark:da,gyFileUpload:aa,gyFileView:Ke},data:function(){return{userName:JSON.parse(localStorage.getItem("userInfo")).username,userDepartmentName:JSON.parse(localStorage.getItem("userInfo")).orgName,progressData:["","已签约","已收款","已付款"],stampApplyId:this.$route.query.id,showCommentBtn:!0,commentDiog:{dialogVisibleRemark:!1},contractDetailCommpany:{targetType:30,subSysType:0,targetId:null,refFunc:{}},detailList:{},addFrom:{id:this.$route.query.id,todoId:this.$route.query.todoId,stampApplicationFiles:[]},homeFromFlg:null}},mounted:function(){this.getStampDetail(),this.approve1History(),this.$route.query.homeFromFlg&&(this.homeFromFlg=Number(this.$route.query.homeFromFlg))},methods:{approve1History:function(){var t={targetId:Number(this.stampApplyId),targetType:30};this.$refs.operationHis.display(this.$api.contract.approve1History,t)},comment:function(){this.commentDiog.dialogVisibleRemark=!0,this.contractDetailCommpany.targetId=Number(this.stampApplyId),this.contractDetailCommpany.targetType=30,this.contractDetailCommpany.subSysType=0,this.contractDetailCommpany.refFunc=this.$refs.operationHis.display,this.contractDetailCommpany.refParam={targetId:this.stampApplyId,targetType:30}},getStampDetail:function(){var t=this;this.$http.get(this.$api.stamp.stampDetail+this.stampApplyId).then(function(e){0===e.data.code?(console.log(e),t.detailList=e.data.data):t.$alert(e.data.code+" "+e.data.message)}).catch(function(t){console.log(t)})},checkHistory:function(){this.showCommentBtn=!1},goback:function(){this.$route.query.saleOrderId?this.$router.push({name:"orderDetails",query:{id:this.detailList.essenceId,saleOrderId:this.$route.query.saleOrderId,purchaseOrderId:this.$route.query.purchaseOrderId,tabsIndex:5}}):this.$router.go(-1)},handleShowImg:function(t){this.$refs.contFileView.open4MultiFile(t)},imgErr:function(t){this.$message({message:t+"暂无数据",type:"warning"})},onCallbackSaleFileUpload:function(t){var e=this;console.log(t),this.addFrom.stampApplicationFiles=[],t.forEach(function(t){e.addFrom.stampApplicationFiles.push(t.fileUrl)})},onsubmit:function(){var t=this;if(!this.check())return!1;this.$http.post(this.$api.stamp.completeStamp,this.addFrom).then(function(e){0===e.data.code?(t.$message({message:"创建成功",type:"success"}),t.$router.go(-1)):t.$message({message:e.data.message,type:"error"})})},check:function(){return 0!==this.addFrom.stampApplicationFiles.length||(this.$message.error("请先上传签章文件"),!1)}}},mr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stamp-detail"},[a("div",{staticClass:"paydetail-title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"gy-form"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务类型")]),t._v(" "),a("span",[t._v(t._s(t.detailList.businessTypeDesc))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("印章种类")]),t._v(" "),a("span",[t._v(t._s(t.detailList.stampTypeDesc))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("用印单位")]),t._v(" "),a("span",[t._v(t._s(t.detailList.companyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("单据类型")]),t._v(" "),a("span",[t._v(t._s(t.detailList.documentTypeDesc))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("用印文件名称")]),t._v(" "),a("span",[t._v(t._s(t.detailList.stampFileDescription))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("单据去向")]),t._v(" "),a("span",[t._v(t._s(t.detailList.documentDirectionDesc))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("使用日期")]),t._v(" "),a("span",[t._v(t._s(t._f("date")(t.detailList.usedDate)))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("用印申请编号")]),t._v(" "),a("span",[t._v(t._s(t.detailList.applyCode))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("申请人员")]),t._v(" "),a("span",[t._v(t._s(t.userName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("所在部门")]),t._v(" "),a("span",[t._v(t._s(t.userDepartmentName))])])]),t._v(" "),a("div",{staticClass:"paydetail-title"},[t._v("业务信息")]),t._v(" "),a("div",{staticClass:"gy-form"},[null===t.detailList.businessType||2===t.detailList.businessType?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同要素ID")]),t._v(" "),a("span",[t._v(t._s(t.detailList.essenceId))])]):t._e(),t._v(" "),1==t.detailList.businessType||3==t.detailList.businessType?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("合同编号")]),t._v(" "),a("span",[t._v(t._s(t.detailList.contractCode))])]):t._e(),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("我方公司")]),t._v(" "),a("span",[t._v(t._s(t.detailList.ourCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("客户名称")]),t._v(" "),a("span",[t._v(t._s(t.detailList.othersideCompanyName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务进度")]),t._v(" "),a("span",[t._v(t._s(t.detailList.businessProgress))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("业务人员")]),t._v(" "),a("span",[t._v(t._s(t.detailList.businessUserName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("产品名称")]),t._v(" "),a("span",[t._v(t._s(t.detailList.productName))])]),t._v(" "),a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("备注")]),t._v(" "),a("span",[t._v(t._s(t.detailList.remark||"--"))])])]),t._v(" "),a("div",{staticClass:"paydetail-title"},[t._v("附件信息")]),t._v(" "),a("div",{staticClass:"gy-form"},[a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("附件")]),t._v(" "),t.detailList.attachments&&0!==t.detailList.attachments.length?a("span",{on:{click:function(e){return t.handleShowImg(t.detailList.attachments)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null",on:{click:function(e){return t.imgErr("附件")}}})])]),t._v(" "),1==t.homeFromFlg&&2===t.detailList.status?a("div",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"createStamp",expression:"'createStamp'"}]},[t.detailList.signedFiles&&0===t.detailList.signedFiles.length?a("div",{staticClass:"gy-form-group"},[t._m(0),t._v(" "),a("gy-file-upload",{ref:"sFileUpload",on:{callbackFileUpload:t.onCallbackSaleFileUpload}})],1):t._e()]):t._e(),t._v(" "),3==t.detailList.status?a("div",[t.detailList.signedFiles&&0!==t.detailList.signedFiles.length?a("div",{staticClass:"gy-form-group"},[a("span",{staticClass:"l"},[t._v("签章文件")]),t._v(" "),t.detailList.signedFiles&&0!==t.detailList.signedFiles.length?a("span",{on:{click:function(e){return t.handleShowImg(t.detailList.signedFiles)}}},[a("i",{staticClass:"iconfont icon-photo"})]):a("span",[a("i",{staticClass:"iconfont icon-photo-null"})])]):t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"foot"},[a("button",{staticClass:"gy-button-normal",on:{click:t.goback}},[t._v("返回")]),t._v(" "),1==t.homeFromFlg&&2===t.detailList.status?a("button",{directives:[{name:"gy-auth",rawName:"v-gy-auth",value:"createStamp",expression:"'createStamp'"}],staticClass:"gy-button-extra",on:{click:t.onsubmit}},[t._v("保存")]):t._e()]),t._v(" "),1==t.homeFromFlg||2==t.homeFromFlg?a("div",{staticClass:"button-wrap"},[a("button",{staticClass:"gy-button-extra",on:{click:function(e){return t.comment()}}},[t._v("评论")])]):t._e(),t._v(" "),t.showCommentBtn?a("gy-operation-history",{ref:"operationHis",on:{checkHistory:t.checkHistory}}):t._e(),t._v(" "),!0===t.commentDiog.dialogVisibleRemark?a("gy-comment-remark",{attrs:{dialog:t.commentDiog,invoice:t.contractDetailCommpany}}):t._e(),t._v(" "),a("gy-file-view",{ref:"contFileView"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"l"},[e("strong",[this._v("*")]),this._v("上传签章文件")])}]};var hr=a("C7Lr")(vr,mr,!1,function(t){a("hvnI"),a("ZugI")},"data-v-62012810",null).exports,yr=[{path:"*",redirect:Ao},{path:"/login",name:"login",component:Ao,meta:{title:"登录"}},{path:"/menu",name:"menu",component:_e,meta:{title:""},children:[{path:"contactmenu",name:"contactmenuIndex",component:ys,meta:{title:"合同要素管理"},children:[{path:"detailmenu",name:"contEssDetailmenu",component:zn,meta:{title:"合同要素详情",type:"detail",keepAlive:!1}},{path:"modifyContractView",name:"modifyContractView",component:sl,meta:{title:"合同要素详情"},children:[{path:"modifyContract",name:"modifyContract",component:ll,meta:{title:"修改合同"}}]},{path:"Cdetailmenu",name:"contractDetailmenu",component:jn,meta:{title:"合同详情"}},{path:"CRevise",name:"creatEssRevise",component:Zn,meta:{title:"合同要素修改",type:"revise"}},{path:"contactlist",name:"contEssList",component:In,meta:{title:"合同要素列表",isBack:!1,keepAlive:!0}}]},{path:"paymentlist",component:Be,meta:{title:"收付款查询"},children:[{path:"payment/list",name:"paymentList",component:Qe,meta:{title:"收付款列表",isBack:!1,keepAlive:!0}},{path:"payment/receiptList",name:"payReceiptList",component:ga,meta:{title:"收款列表",isBack:!1,keepAlive:!0}},{path:"payment/paymentList",name:"payPaymentList",component:wa,meta:{title:"付款列表",isBack:!1,keepAlive:!0}},{path:"detail",name:"paymentDetail",component:Ge,meta:{title:"收付款详情",type:"detail",keepAlive:!1}}]},{path:"settlement",component:le,meta:{title:"结算管理"},children:[{path:"listbuy",name:"buySettleList",component:xa,meta:{title:"采购结算列表",isBack:!1,keepAlive:!0}},{path:"listsell",name:"saleSettleList",component:Ta,meta:{title:"销售结算列表",isBack:!1,keepAlive:!0}},{path:"detailbuy",name:"settlementDetailBuy",component:Ra,meta:{title:"结算详情",type:"detail",keepAlive:!1}},{path:"detailsell",name:"settlementDetailSell",component:Va,meta:{title:"结算详情",type:"detail",keepAlive:!1}},{path:"detailapproval",name:"settlementApproval",component:qa,meta:{title:"结算审批",type:"detail",keepAlive:!1}}]},{path:"orderlist",component:ul,meta:{title:"合同管理"},children:[{path:"order/NoList",name:"orderNoList",component:Wl,meta:{title:"合同票据列表"}},{path:"order/list",name:"orderList",component:Al,meta:{title:"合同列表",isBack:!1,keepAlive:!0}},{path:"order/details",name:"orderDetails",component:Rl,meta:{title:"交易详情",type:"detail",keepAlive:!1}}]},{path:"deliverylist",component:Kl,meta:{title:"交割查询"},children:[{path:"delivery/list",name:"deliveryList",component:Gl,meta:{title:"交割列表",isBack:!1,keepAlive:!0}},{path:"delivery/dlvyBuyList",name:"dlvyBuyList",component:to,meta:{title:"采购交割列表",isBack:!1,keepAlive:!0}},{path:"delivery/dlvySaleList",name:"dlvySaleList",component:so,meta:{title:"销售交割列表",isBack:!1,keepAlive:!0}},{path:"details",name:"deliveryDetail",component:lo,meta:{title:"交割详情",type:"detail",keepAlive:!1}}]},{path:"invoicelist",component:Ha,meta:{title:"发票查询"},children:[{path:"invoice/list",name:"invoiceList",component:Ja,meta:{title:"发票列表",isBack:!1,keepAlive:!0}},{path:"invoice/receiptList",name:"invoiceReceiptList",component:Ya,meta:{title:"收票列表",isBack:!1,keepAlive:!0}},{path:"invoice/applyList",name:"invoiceApplyList",component:as,meta:{title:"开票列表",isBack:!1,keepAlive:!0}},{path:"detail",name:"invoiceDetail",component:rs,meta:{title:"发票详情",type:"detail",keepAlive:!1}}]},{path:"stampView",component:lr,meta:{title:"用印申请管理"},children:[{path:"createStamp",name:"createStamp",component:cr,meta:{title:"新建用印申请"}},{path:"stamp/list",name:"stampApplyList",component:pr,meta:{title:"用印申请列表",isBack:!1,keepAlive:!0}},{path:"stamp/detail",name:"stampDetail",component:hr,meta:{title:"用印申请详情",type:"detail",keepAlive:!1}}]},{path:"transaction",component:ho,meta:{title:"业务报表"},children:[{path:"daily",name:"transactionDaily",component:Io,meta:{title:"业务日报"}},{path:"ledger",name:"transactionLedger",component:xo,meta:{title:"台账"}},{path:"standingBook",name:"transactionStanding",component:To,meta:{title:"台账"}},{path:"transaction/control",name:"control",component:No,meta:{title:"交易管控表"}}]},{path:"flow",name:"flowView",component:Oo,meta:{title:"流程管理"},children:[{path:"list",name:"flowList",component:Mo,meta:{title:"流程审批列表",isBack:!1,keepAlive:!0}},{path:"detail",name:"flowDetail",component:Wo,meta:{title:"流程规则新增",type:"detail",keepAlive:!1}},{path:"apprCreate",name:"apprCreate",component:Xo,meta:{title:"发起审批流程",type:"detail",keepAlive:!1}},{path:"contDist/list",name:"contDistList",component:Zo,meta:{title:"合同执行分配",isBack:!1,keepAlive:!0}},{path:"bizProductXref",name:"bizProductXref",component:er,meta:{title:"产品-业务人员关系"}},{path:"exeProductXref",name:"exeProductXref",component:ir,meta:{title:"产品-执行人员关系"}}]}]},{path:"/index",name:"index",component:_e,meta:{title:""},children:[{path:"/home",name:"home",component:we,meta:{title:"工作台"}},{path:"/changePassword",name:"changePassword",component:Pe,meta:{title:"修改密码"}},{path:"home/moreTodoList",name:"homeMoreTodoList",component:xe,meta:{title:"工作台-更多事项",isBack:!1,keepAlive:!0}},{path:"home/moreMsgList",name:"homeMoreMsgList",component:Se,meta:{title:"工作台-更多消息",isBack:!1,keepAlive:!0}},{path:"home/moreAlarmList",name:"homeMoreAlarmList",component:Ne,meta:{title:"工作台-预警消息",isBack:!1,keepAlive:!0}},{path:"payment/buy",name:"paymentBuy",component:va,meta:{title:"付款审批"}},{path:"payment/sell",name:"paymentSell",component:ya,meta:{title:"收款确认"}},{path:"invoice/approve",name:"auditOperation",component:us,meta:{title:"开票查询-审核",type:"detail",keepAlive:!1}},{path:"invoice/financialConfirmation",name:"financialConfirmation",component:ms,meta:{title:"收票查询-财务确认"}},{path:"delivery/purchaseView",name:"deliveryPurchaseView",component:co,meta:{title:"采购交割查看"}},{path:"delivery/salesView",name:"deliverySalesView",component:vo,meta:{title:"销售交割查看"}},{path:"addContEss",name:"createEss",component:Cn,meta:{title:"新建合同要素"}},{path:"detail",name:"contEssDetail",component:zn,meta:{title:"合同要素审批"}},{path:"create",name:"createContract",component:Hn,meta:{title:"创建合同"}},{path:"Cdetail",name:"contractDetail",component:jn,meta:{title:"合同审批",type:"detail"}},{path:"executionAllocation",name:"executionAllocation",component:el,meta:{title:"执行分配",type:"detail",keepAlive:!1}},{path:"addOfflineContract",name:"addOfflineContract",component:cl,meta:{title:"添加线下合同"}},{path:"addUser",name:"addUser",component:Oe,meta:{title:"添加erp用户"}},{path:"stampApproval",name:"stampApproval",component:hr,meta:{title:"用印申请审批",type:"detail",keepAlive:!1}}]}],fr={state:{showLoading:!1,breadcrumb:String,userInfo:{}},mutations:{setShowLoading:function(t){t.showLoading=!0},setHideLoading:function(t){t.showLoading=!1},setUserinfo:function(t,e){t.userInfo=e},updateBreadcrumb:function(t,e){t.breadcrumb=e}},getters:{showLoading:function(t){return t.showLoading},breadcrumb:function(t){return t.breadcrumb},getUserinfo:function(t){var e=t.userInfo;return e||(e=JSON.parse(window.localStorage.getItem("userInfo")||null)),e}}};n.default.use(te.a);var _r=new te.a.Store({modules:{mutations:fr},actions:{setShowLoading:function(t){t.commit("setShowLoading")},setHideLoading:function(t){t.commit("setHideLoading")}}});n.default.use(ie.a);var gr=new ie.a({routes:yr});gr.beforeEach(function(t,e,a){t.meta.title&&(document.title=t.meta.title),"detail"===e.meta.type?t.meta.isBack=!0:t.meta.isBack=!1,a()}),gr.afterEach(function(t,e,a){_r.commit("updateBreadcrumb",t.name)});var Cr=gr,br=a("rVsN"),wr=a.n(br),Ir=a("84iU"),kr=a.n(Ir);n.default.prototype.$http=kr.a,kr.a.defaults.withCredentials=!0,kr.a.defaults.timeout=1e4,kr.a.defaults.baseURL="http://192.168.10.132:8095",kr.a.interceptors.request.use(function(t){return _r.dispatch("setShowLoading"),t},function(t){return wr.a.reject(t)}),kr.a.interceptors.response.use(function(t){return _r.dispatch("setHideLoading"),401===t.data.code?(localStorage.removeItem("userInfo"),void R.a.alert(t.data.message,"提示").then(function(){location.href="/erp/#/login"})):t},function(t){return wr.a.reject(t)});var xr={payment:{getlist:"/erp/payment/v1/paymentAndCollection/list",getDetail:"/erp/payment/v1/paymentInfo",getDetailCollection:"/erp/order/v1/collection/searchByOrderId/",getDetailCollectionById:"/erp/order/v1/collection/searchByCollectionId/",buy:"/erp/payment/v1/approvePayment",voucher:"/erp/payment/v1/updatePayment",sale:"/erp/order/v1/collection/confirmCollection",newBank:"/erp/bank/info/list",daliyCollections:"/erp/order/v1/collection/daliyCollections",addBankInfo:"/erp/account/v1/companies/addBankInfo",allPageStatusCount:"/erp/payment/v1/paymentAndCollection/list/allPageStatusCount",paymentApplicationAmount:"/erp/order/v1/collection/paymentInfo/query",rejectPayment:"/erp/payment/v1/rejectPayment",exportPaymentApplication:"/erp/payment/v1/report/payment/application",saveErpPaymentInfo:"/erp/payment/v1/saveErpPaymentInfo",updateErpPaymentInfo:"/erp/payment/v1/updateErpPaymentInfo",downloadPayment:"/erp/payment/v1/report/settlement/payment",collectionPaymentCount:"/erp/payment/v1/paymentAndCollection/list/collectionPaymentCount"},contract:{turnDown:"/erp/contract/v1/contract/reject",addContract:"/erp/contract/v1/essence/save",getCompany:"/erp/common/v1/contract/getGoodsAndTrader4BizTypeAll",getRelatedCompany:"/erp/common/v1/contract/getRelatedTraderList",getCompanyGrade:"/erp/common/v1/contract/getTradeCounterpartyGrade",getProdPropCompList:"/erp/common/v1/contract/prod/prop/compList",getGrade:"/erp/common/v1/contract/user/list",getRoleList:"/erp/user/v1/roles/list",getUserOrganization:"/erp/common/v1/contract/organization/by/userid",getlist:"/erp/contract/v1/essence/list",approve:"/erp/contract/v1/essence/approve",approve1:"/erp/contract/v1/contract/approve",approve1History:"/erp/common/v1/approve/history/list",addContract1:"/erp/contract/v1/contract/create",attach:"/erp/common/v1/upload/contract/certified/attach",getBizTradeTypeList:"/erp/common/v1/contract/biztrade/type/list",getBizTradeProdList:"/erp/common/v1/contract/biztrade/prod/list",essenceUpdate:"/erp/contract/v1/essence/update",rejectContEss:"/erp/contract/v1/essence/reject",essenceTest:"/erp/contract/v1/essence/checkPlanNumber",addOfflineContract:"/erp/contract/v1/essence/addOfflineContract",allPageStatusCount:"/erp/contract/v1/order/essenceCount"},login:{login:"/erp/user/v1/login",logout:"/erp/user/v1/logout"},invoice:{getlist:"/erp/v1/invoice/list",getDetail:"/erp/v1/invoice/receipt",getDetails:"/erp/v1/invoice/sales",applyInvoices:"/erp/v1/invoice/detail",applyInvoice:"/erp/v1/invoice/create",createCollect:"/erp/v1/invoice/receipt/create",createCollectView:"/erp/order/v1/collection/createCollectionView",approveSure:"/erp/v1/invoice/approve",financialSure:"/erp/v1/invoice/receipt/confirm",commodityCode:"/erp/catelogue/v1/products/getProductTaxCode",pageBringInData:"/erp/v1/invoice/info/4/creation/",uploadInvoice:"/erp/v1/invoice/upload/confirm",courierNumber:"/erp/v1/invoice/express/enter",allPageStatusCount:"/erp/v1/invoice/list/allPageStatusCount",getInvoiceDeliveryCollection:"/erp/v1/invoice/delivery/collection/list",getInvoiceHistory:"/erp/common/v1/approve/history/list",exportInvoiceApplication:"/erp/invoice/v1/report/invoice/application"},delivery:{getlist:"/erp/order/v1/delivery/deliveryList",getBuyDetail:"/erp/order/v1/delivery/searchBuyDelivery",getSellDetail:"/erp/order/v1/delivery/searchSellDelivery",createDeliveryView:"/erp/order/v1/delivery/createDeliveryView",createBuyDelivery:"/erp/order/v1/delivery/createBuyDelivery",createSellDelivery:"/erp/order/v1/delivery/createSellDelivery",detailsOfSalesDeliveryDetails:"/erp/order/v1/delivery/searchSellDeliveryItem/",detailsOfPurchaseDeliveryDetails:"/erp/order/v1/delivery/searchBuyDeliveryItem/",salesConfirmation:"/erp/order/v1/delivery/confirmSellDelivery",crossContract:"/erp/order/v1/delivery/searchRelationOrder",crossContracts:"/erp/order/v1/delivery/searchPurchaseOrder",allPageStatusCount:"/erp/order/v1/delivery/deliveryList/allPageStatusCount",deliveryContract:"/erp/order/v1/delivery/searchBuyDeliveryFile",uploadDeliveryFile:"/erp/order/v1/delivery/uploadDeliveryFile",getWarehouseList:"/erp/common/v1/contract/getWarehouseList4Product"},order:{orderList:"/erp/contract/v1/order/list",orderNoList:"/erp/common/v1/contract/order/downs/list",files:"/erp/common/v1/contract/order/down/files",orderDetail:"/erp/contract/v1/essences",newPayment:"/erp/payment/v1/savePayment",createReceipts:"/erp/order/v1/collection/createCollection",allPageStatusCount:"/erp/contract/v1/order/list/allPageStatusCount",getSettlementOrder:"/erp/order/v1/settlement/getSettlementOrder",createSettlementOrder:"/erp/order/v1/settlement/createSettlementOrder",fileDetails:"/erp/common/v1/contract/order/file/details",fileUpload:"/erp/common/v1/contract/order/file/upload"},upload:{imgUpload:"/erp/order/v1/delivery/deliveryUpload"},workbench:{getWbTodoList:"/erp/workbench/v1/todoList",getWbMsgList:"/erp/workbench/v1/msgList",getProdList:"/erp/workbench/v1/biz/getProdList",countWbMsgList:"/erp/workbench/v1/warnCount"},apprProc:{getApprProcList:"/erp/flow/v1/approve/list",getApproveInfo:"/erp/flow/v1/approve/getInfo/",saveApproveInfo:"/erp/flow/v1/approve/saveInfo",hasBizPermission:"/erp/flow/v1/biz/opration/hasAuth",hasApproveAuth:"/erp/flow/v1/approve/hasAuth",doApprove:"/erp/flow/v1/biz/opration/approve/do",getApprReqInfo:"/erp/flow/v1/biz/opration/getApprReqInfo",flowApprove:"/erp/flow/v1/process"},contractEssence:{essenceList:"/erp/essence/v1/contract/list",updateEssence:"/erp/essence/v1/contract/update",bizProductXrefList:"/erp/setting/v1/userbizprod/list",exeProductXrefList:"/erp/setting/v1/userexeprod/list",addbizXrefUsers:"/erp/setting/v1/userbizprod/add",addexeXrefUsers:"/erp/setting/v1/userexeprod/add",delbizXrefUsers:"/erp/setting/v1/userbizprod/delete",delexeXrefUsers:"/erp/setting/v1/userexeprod/delete",syncCached:"/erp/setting/v1/userexeprod/syncCached"},statement:{dailyUp:"/erp/report/v1/hft/daily/purchaseContract",deliveries:"/erp/report/v1/hft/daily/purchaseContract/deliveries",payments:"/erp/report/v1/hft/daily/purchaseContract/payments",dailyUptoExcel:"/erp/report/v1/hft/daily/purchaseContract/toExcel",dailyDown:"/erp/report/v1/hft/daily/saleContract",dailyDowntoExcel:"/erp/report/v1/hft/daily/saleContract/toExcel",control:"/erp/report/v1/managerControl/totalControl",standingBook:"/report/v1/hft/standingBookReport",orderPayTotalDetails:"/report/v1/hft/orderPayTotalDetails",standingBookReportExport:"/report/v1/hft/standingBookReport/export",deliveryNames:"/erp/report/v1/hft/daily/purchaseContract/deliveryNames",organization:"/erp/common/v1/contract/organization/list"},organization:{list:"/erp/common/v1/contract/organization/list/tree"},user:{modify:"/erp/user/v1/password/modify"},commentsRematk:{add:"/erp/comment/v1/flow/add",staff:"/erp/common/v1/approve/getOperatorlist"},stamp:{createStamp:"/erp/stamp/v1/application/creation",stampList:"/erp/stamp/v1/application/list",stampDetail:"/erp/stamp/v1/application/detail/",selectContract:"/erp/stamp/v1/application/selectContract",completeStamp:"/erp/stamp/v1/application/complete"},settlement:{getSettlementOrder:"/erp/order/v1/settlement/getSettlementOrder",getSettleList:"/erp/order/v1/settlement/list",getSettleChargeList:"/erp/order/v1/settlement/charge/list/",saleReport:"/erp/order/v1/settlement/sale/report",purchaseReport:"/erp/order/v1/settlement/purchase/report",updateSettleInfo:"/erp/order/v1/settlement/update"}},Dr={paymentStatusSell:[{name:"全部",status:null},{name:"未收款",status:0},{name:"收款中",status:1},{name:"已完成",status:2}],paymentStatusBuy:[{name:"全部",status:null},{name:"未付款",status:0},{name:"付款中",status:1},{name:"已完成",status:2}],orderStatus:["","合同要素已创建","合同要素审核中","合同要素已审核通过","合同已创建","合同审核中","合同已审核通过","合同要素审核驳回","合同审核驳回","已上传签章合同","创建合同时驳回","分配执行时驳回","合同已锁定","合同要素修改完成"],orderStatusList:[{name:"全部",id:null},{name:"合同要素审核中",id:2},{name:"合同要素已审核通过",id:3},{name:"合同审核中",id:5},{name:"合同已审核通过",id:6},{name:"合同要素审核驳回",id:7},{name:"合同审核驳回",id:8},{name:"已上传签章合同",id:9},{name:"创建合同时驳回",id:10},{name:"分配执行时驳回",id:11},{name:"合同已锁定",id:12},{name:"合同要素修改完成",id:13}],contractTypeList:[{name:"双边合同",id:1},{name:"单边采购合同",id:2},{name:"单边销售合同",id:3}],bizType4CreateEss:[{name:"高频交易",id:1},{name:"准现货-现货",id:4},{name:"准现货-长约",id:6}],contractTradeTypeList:[{name:"过单",id:1},{name:"高频",id:2},{name:"流量",id:3},{name:"现货",id:4},{name:"合约",id:5}],businessType4Top:[{name:"全部",id:null},{name:"高频交易",id:1},{name:"集采分销",id:2},{name:"准现货",id:3}],businessType4Erp:[{name:"全部",id:null},{name:"高频交易",id:1},{name:"准现货",id:3},{name:"准现货-现货",id:4},{name:"准现货-长约",id:6}],businessType4All:[{name:"全部",id:null},{name:"高频交易",id:1},{name:"集采分销",id:2},{name:"准现货",id:3},{name:"准现货-现货",id:4},{name:"准现货-长约",id:6},{name:"用印",id:7}],sourceGoods:[{name:"进口"},{name:"国产"},{name:"自定义"}],qualityStandards:[{name:"国标"},{name:"生产商标准"},{name:"符合GBT 4649-2018聚酯级标准"}],baselineRecovery:[{name:"安讯思"},{name:"CCF"},{name:"卓创"},{name:"隆众网"}],address:[{name:"华东地区"},{name:"华南地区"}],downstreamLongTerm:[{name:"长合约",id:1},{name:"非长合约",id:2}],paymentType:[{name:"先款后货",id:0},{name:"先货后款",id:1},{name:"先货后款带票交割",id:2},{name:"先款后货，等通知卸货",id:3},{name:"先款后货，指定日期付款",id:4}],paymentType4Buy:[{name:"先款后货",id:0},{name:"先货后款",id:1}],paymentTypeArr:["先款后货","先货后款","先货后款带票交割"],paymentType1:[{name:"电汇",id:1},{name:"银行承兑",id:2},{name:"国内信用证",id:3}],paymentTypeArr1:["","电汇","银行承兑","国内信用证"],deliveryList:[{name:"买方自提",id:1},{name:"卖方送到",id:2},{name:"第三方仓库，CA交割",id:3},{name:"第三方仓库，货权转移",id:4},{name:"需方自提，出库交割",id:5},{name:"供方送达，入库交割",id:6}],deliveryCreateEssList:[{name:"第三方仓库，CA交割",id:3},{name:"第三方仓库，货权转移",id:4},{name:"需方自提，出库交割",id:5},{name:"供方送达，入库交割",id:6}],deliveryDateFlag:[{id:1,name:"交割时间段"},{id:2,name:"截止日期"}],paymentDateFlag:[{id:1,name:"付款时间段"},{id:2,name:"截止日期"}],packagingStandard:["散水","桶装","袋装"],approveType:["未审批","审批通过","审批驳回","已创建","已上传","未执行","已执行","已支付","已开票","未分配","已分配","已驳回","已锁定","执行中","付款中","已结清"],provideInvoice:["","交割月","交割次月","交割后"],collectionType:["","货款","保证金","结算","运费","追补保证金"],apprProcTypeCateList:[{id:1,value:"合同要素审批"},{id:2,value:"合同审批"},{id:3,value:"付款审批"},{id:4,value:"开票审批"},{id:5,value:"收款"},{id:6,value:"收发票"},{id:7,value:"采购交割"},{id:8,value:"销售交割"},{id:21,value:"物流合同审批"},{id:23,value:"结算审批"},{id:24,value:"物流结算审批"},{id:30,value:"用印申请审批"}],imgType:["jpg","jpeg","png","gif"],fileType:["doc","docx"],distMatchTypeList:[{value:0,label:"请选择"},{value:1,label:"指定人员"},{value:2,label:"按岗位"},{value:3,label:"条件匹配"}],alarmTypeList:[{value:0,label:"请选择"},{value:40,label:"商品总库存超限报警"},{value:41,label:"高频交易商品总库存超限报警"},{value:46,label:"准现货交易商品总库存超限报警"},{value:42,label:"临时库存保存时间报警"},{value:43,label:"已过交割期报警"},{value:44,label:"已过收款期报警"}],odrSettlementStatus:[{name:"全部",status:null},{name:"复核中",status:30},{name:"驳回",status:40},{name:"待结款",status:50},{name:"结算完成",status:60}]},Sr={formatNumber:function(t,e,a){var s="";if(null!==(t=parseFloat(t))&&void 0!==t&&""!==t&&0!==t&&!0!==t&&t){var i=0;t<0&&(i=1,t*=-1);var n=(t=t.toFixed(e)).split(".")[1],l=t.split(".")[0],o=[];(l=l.split("").reverse()).map(function(e,a){o.push(e),a%3==2&&a!==t.length-1&&a!==l.length-1&&o.push(",")}),l=o.reverse().join(""),i&&(l="-"+l),s=l+"."+n}else s=(t=0).toFixed(e);if(a&&s.indexOf(".")>0){for(;s.lastIndexOf("0")===s.length-1;)s=s.substring(0,s.length-1);s.lastIndexOf(".")===s.length-1&&(s=s.substring(0,s.length-1))}return s},parseDate:function(t){if(""===t||null==t)return"";var e=new Date(t),a=1900+e.getYear(),s="0"+(e.getMonth()+1),i="0"+e.getDate();return a+"-"+s.substring(s.length-2,s.length)+"-"+i.substring(i.length-2,i.length)},formatDate:function(t,e){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()},s=e;for(var i in/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+i+")").test(s)&&(s=s.replace(RegExp.$1,1===RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return s},verifyMobile:function(t){return!!/^1[3456789]\d{9}$/.test(t)},toFixedFn:function(t,e){for(var a="",s=0;s<e;s++)a+="0";var i=1+a,n="."+a,l=Math.round(parseFloat(t)*i)/i,o=l.toString().split(".");return 1===o.length?l=l.toString()+n:o.length>1?(o[1].length<2&&(l=l.toString()+"0"),l):void 0},verifyIdCard:function(t){return!!/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t)},exporttoExcel:function(t,e,a,s,i){var n={responseType:"blob"};i&&(n.timeout=i),t.$http.post(e,a,n).then(function(e){if(0===e.data.type.indexOf("application/json")){var a=new Blob([e.data]),i=new FileReader;return i.readAsText(a,"utf-8"),void(i.onload=function(e){var a=JSON.parse(i.result);t.$message.error("下载文件时出错:  "+a.message+"(errCode="+a.code+")")})}if(e.data.size>0){null!=s&&void 0!==s||(s=decodeURI(e.headers.filename));var n=new Blob([e.data]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(n,s);else{var l=window.URL.createObjectURL(n),o=document.createElement("a");o.style.display="none",o.href=l,o.setAttribute("download",s),document.body.appendChild(o),o.click()}}else t.$message.error("没有文件可下载")})},hasBizAuth:function(t){var e=localStorage.getItem("userInfo");if(null==e||void 0===e)return console.log("hasBizAuth 用户未登录"),!1;var a=JSON.parse(e);if(a&&a.permissions){if(t.indexOf(",")>0){var s=t.split(",");for(var i in s)if(a.permissions.indexOf(s[i])>-1)return!0}else if(a.permissions.indexOf(t)>-1)return!0;console.log("hasBizAuth 用户无权限 account="+a.account)}else console.log("hasBizAuth 用户无登录信息 "+e);return!1},getFileTypeAlias:function(t){var e=t.toLowerCase();return e.lastIndexOf(".pdf")>1?"pdf":e.lastIndexOf(".doc")>1||e.lastIndexOf(".docx")>1?"word":e.lastIndexOf(".xls")>1||e.lastIndexOf(".xlsx")>1?"excel":"img"}},Tr={minute2hour:function(t){return t%60==0?t/60:(t/60).toFixed(1)},cutstring:function(t,e){return t.length>e?t.substring(0,e)+" ...":t},date:function(t,e){if(!t)return"";var a,s,i,n,l,o,r,c=void 0,d=void 0;return c=new Date(t),a=c.getFullYear(),s=c.getMonth()+1,i=c.getDate(),n=c.getHours(),l=c.getMinutes(),o=c.getSeconds(),r=a+"-"+u(s)+"-"+u(i),d=2===e?u(n)+":"+u(l):u(n)+":"+u(l)+":"+u(o),e?r+" "+d:r;function u(t){return parseInt(t)<10&&(t="0"+t),t}},deliveryState:function(t){var e=parseInt(t);return 0===e?"交割中":1===e?"已完成":2===e?"未交割":""},buyDeliveryItemState:function(t){var e=parseInt(t);return 0===e?"已创建":1===e?"已审核":2===e?"已驳回":3===e?"已完成":4===e?"已创建":5===e?"审核中":""},sellDeliveryItemState:function(t){var e=parseInt(t);return 0===e?"已创建":1===e?"已审核":2===e?"已驳回":3===e?"已完成":4===e?"已创建":5===e?"审核中":""},packagingStandard:function(t){var e=parseInt(t);return 0===e?"散装":1===e?"桶装货":2===e?"袋装":3===e?"槽车":void 0},paymentType:function(t,e){var a=parseInt(t),s=null;return 0===a&&(s="先款后货"),1===a&&(s="先货后款"),2===a&&(s="先货后款带票交割"),3===a&&(s="先款后货，等通知卸货"),4===a&&(s="先款后货，指定日期付款"),e&&(s+=" "+Dr.paymentTypeArr1[e]),s},deliveryType:function(t){var e=parseInt(t);if(0===e)return"全部支持";for(var a=0,s=Dr.deliveryList.length;a<s;a++){var i=Dr.deliveryList[a];if(i.id===e)return i.name}return""},priceType:function(t){switch(t){case 1:return"固定价";case 21:return"公式计价-以合同为准";case 22:return"公式计价-暂定价";default:return"-"}},contractType:function(t){var e=parseInt(t);return 1===e?"双边合同":2===e?"采购合同":3===e?"销售合同":void 0},contractTradeType:function(t,e){var a=parseInt(e),s=parseInt(t);if(1===a||4===a||5===a||6===a){if(2===s)return"(上游交易)";if(3===s)return"(下游交易)"}if(2===a){if(2===s)return"(采购)";if(3===s)return"(销售)"}},businessTradeType:function(t){for(var e=parseInt(t),a=0,s=Dr.businessType4All.length;a<s;a++){var i=Dr.businessType4All[a];if(i.id===e)return i.name}return""},apprProcType:function(t){var e=parseInt(t);return 1===e?"合同要素审批":2===e?"合同审批":3===e||27===e?"付款审批":4===e?"开票审批":5===e?"收款":6===e?"收发票":7===e?"采购交割":8===e?"销售交割":21===e?"物流合同审批":23===e?"结算审批":24===e?"物流结算审批":30===e?"用印申请审批":void 0},orderState:function(t){var e=parseInt(t);return 1===e?"合同要素已创建":2===e?"合同要素审核中":3===e?"合同要素已审核通过":4===e?"合同已创建":5===e?"合同审核中":6===e?"合同已审核通过":7===e?"合同要素审核驳回":8===e?"合同审核驳回":9===e?"已上传签章合同":void 0},acrossDelivery:function(t){var e=parseInt(t);return 0===e||void 0===e||isNaN(e)?"否":1===e?"是":void 0},entryTicket:function(t){var e=parseInt(t);return 0===e?"无进项票":1===e?"有进项票":void 0},entryTickets:function(t){var e=parseInt(t);return 0===e?"在途中":1===e?"已收到":2===e?"先开销项发票":void 0},payDescStr:function(t){var e=parseInt(t);return 1===e?"本笔资金支出为正常交割，我司需垫资":2===e?"本笔资金支出需先收到下家款项，我司无需垫资":3===e?"分批付款，以付款明细表为准":"-"},approveType:function(t){var e=parseInt(t);return 1===e?"一次审批":2===e?"批次审批":"-"},bizType:function(t){var e=parseInt(t);return 1===e?"高频交易":4===e?"准现货-现货":6===e?"准现货-长约":"-"},deliveryStatus:function(t){var e=parseInt(t);return 0===e?"已提交":1===e?"已审核":2===e?"已驳回":void 0},numToQuantity:function(t){return Sr.formatNumber(t,3,!0)},numToCash:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Sr.formatNumber(t,2,e)},invoiceMonthValue:function(t,e,a){if(null===t||void 0===t)return"";var s=parseInt(t);if(2===a){if(0===s)return"交割当月";if(1===s)return"交割次月";if(2===s)return null===e||void 0===e?"":e.provideInvoiceDays}else{if(1===s)return"交割月";if(2===s)return"交割次月";if(3===s)return null===e||void 0===e?"":"交割后"+e.provideInvoiceDays+"工作日"}},guaranteeAgreementValue:function(t,e){return null===t||void 0===t||null===e||void 0===e||0===t||0===e?"--":"跌 "+e+"% 补 "+t+"%"},shownull:function(t){return t||"-"},alarmTypeList:function(t){for(var e=0,a=Dr.alarmTypeList.length;e<a;e++){var s=Dr.alarmTypeList[e];if(s.value===t)return s.label}return""},contractTransactionTypeList:function(t){for(var e=0,a=Dr.contractTradeTypeList.length;e<a;e++){var s=Dr.contractTradeTypeList[e];if(s.id===t)return s.name}return""},incomeInvoice:function(t,e){return 1===t?0===e?"有进项票, 在途中":1===e?"有进项票, 已收到":"有进项票":0===t?2===e?"无进项票, 先开销项发票":"无进项票":""},resultCode:function(t,e){var a=Dr.approveType[t];return 3===e&&(a=Dr.approveType[12]),a},showline:function(t){return t||"--"},priceDisplay:function(t,e,a){if(null==e||void 0===e)return"--";var s=parseInt(e);return 1===s&&t?"固定价　"+Sr.formatNumber(t,2,!0):21===s?a?"公式计价-以合同为准,　"+a:"公式计价-以合同为准":22===s&&t?"公式计价-暂定价　"+Sr.formatNumber(t,2,!0):"--"},depositDisplay:function(t,e,a){if(null==e||void 0===e)return"--";var s=parseInt(e);return 1===s&&t?"按比例　"+Sr.formatNumber(t,3,!0)+"%":2===s&&a?"按金额　"+Sr.formatNumber(a,2,!0)+"元":"--"},orderSettlementStatus:function(t){var e=parseInt(t);if(0===e)return"";for(var a=0,s=Dr.odrSettlementStatus.length;a<s;a++){var i=Dr.odrSettlementStatus[a];if(i.status===e)return i.name}return""},tradeMode:function(t){var e=parseInt(t);return 1===e?"在线支付":21===e?"银行转账":22===e?"银行电汇":23===e?"银行承兑汇票":24===e?"商业承兑汇票":25===e?"支票":26===e?"承兑汇票":"-"},paymentBillStatus:function(t,e){var a=parseInt(t);return e.uploadFileStatus?"付款已完成":0===a||3===a?"审批中":1===a?3===e.payDesc&&1===e.approveType&&30===e.payStatus?"付款中(分批)":"已审批通过":2===a?"审批驳回":3===a?"已取消":"-"},collectionBillStatus:function(t){var e=parseInt(t);return 10===e?"确认中":20===e?"已确认":"-"}},Fr=function t(e,a,s){for(var i=0;i<e.length;i++){for(var n=e[i],l=a[n.propKey],o=n.validateList,r=0;r<o.length;r++)if("must"===o[r].type){if(void 0===l||null===l||""===l)return o[r].msg+s;if(l.constructor===Array&&0===l.length)return o[r].msg+s}else if("number"===o[r].type){if(void 0===l||null===l||""===l)continue;if(!/^(((\d*).\d+)|(\d+.(\d*)|\d+))$/.test(l))return o[r].msg+s}var c=n.subValidateList;if(void 0!==c&&null!==c&&0!==c.length)for(var d=0;d<c.length;d++)if(c[d].value===l)return t(c[d].validateList,a,s)}},Nr=function(t){return null==t?0:("string"!=typeof t&&(t+=""),t.replace(/[^x00-xff]/g,"01").length)},Lr={checkInputItem:function(t,e,a){if(null==t||void 0===t||0===t.length)return"请先选择交易产品";for(var s=0;s<t.length;s++)if(null!=t[s]&&void 0!==t[s]&&0!==t[s].isNecessary){var i=t[s].validateInfo;if(null!=i&&void 0!==i&&0!==i.length){var n=Fr(i,e,a);if(void 0!==n)return n}}return null},checkRelatedInputItem:function(t,e){if("未评级"===t.grade)return e+"交易公司未做准入，请先提交准入申请！";if(1===t.skuPriceType||22===t.skuPriceType){if(!t.skuPrice)return"单价不能为空"+e;if(0===Number(t.skuPrice))return"单价不能为0"+e}if(21===t.skuPriceType&&1===t.depositType)return"公式计价-以合同为准情况下，保证金不能选择按比例"+e;if(0===t.depositType&&(t.depositRatio=0,t.depositAmount=0),1===t.depositType){if(!t.depositRatio)return"保证金比例不能为空"+e;if(0===Number(t.depositRatio))return"保证金比例不能为0"+e}if(t["depositType === 2"]){if(!t.depositAmount)return"保证金金额不能为空"+e;if(0===Number(t.depositAmount))return"保证金金额不能为0"+e}return t.deliveryDateFlag?t.deliveryBeginDate?1!==t.deliveryDateFlag||t.deliveryEndDate?3!==t.provideInvoiceType||null!==t.provideInvoiceDays&&""!==t.provideInvoiceDays?t.priceOfWeight&&(!t.chattingCompanyName||Nr(t.chattingCompanyName)>50)?"请填写下游撮合公司且长度不能超过50字符"+e:null:"请填写发票日期"+e:"请选择结束日期"+e:"请选择"+(2===t.deliveryDateFlag?"截止日期":"开始日期")+e:"请先选择交割日期"+e},checkFieldUpdated:function(t,e,a,s){t&&t.length>0&&t.forEach(function(t,i){var n=t.varNameList;if(null!=n&&void 0!==n&&0!==n.length)for(var l=0;l<n.length&&(a[n[l]]===e[n[l]]||"break"!==function(){var i={key:t.propKey,varList:[]};return n.forEach(function(t){var s={key:t};s.oldVal=a[t],s.newVal=e[t],i.varList.push(s)}),s.push(i),"break"}());l++);})}};n.default.prototype.$api=xr,n.default.prototype.$store=_r,n.default.prototype.$constant=Dr,n.default.prototype.$tools=Sr,n.default.prototype.$inputCheckFunc=Lr,n.default.prototype.$filters=Tr,n.default.directive("focus",{inserted:function(t){t.focus()}}),i()(Tr).forEach(function(t){n.default.filter(t,Tr[t])}),n.default.directive("gyAuth",{bind:function(t,e){Sr.hasBizAuth(e.value)||(t.style.display="none")}}),new n.default({router:Cr,axios:{},elementUi:{},store:_r,babelPolyfill:o.a,el:"#gyerp",render:function(t){return t(se)}})},jY0T:function(t,e){},jjHM:function(t,e){},kxHj:function(t,e){},lg2u:function(t,e){},lqqb:function(t,e){t.exports="data:image/png;base64,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"},"m+e/":function(t,e){},mDgW:function(t,e){},mxyE:function(t,e){},myjZ:function(t,e){},n1cg:function(t,e){},n2TF:function(t,e){},ni07:function(t,e){},oEJ1:function(t,e){},oFMk:function(t,e){},okzb:function(t,e){},"pB2+":function(t,e){},pkXS:function(t,e){},q5Ai:function(t,e){},qBNC:function(t,e){},qQEj:function(t,e){t.exports="data:image/png;base64,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"},qkjf:function(t,e){},rxZW:function(t,e){},"t+lM":function(t,e){},tEOF:function(t,e){},tN1K:function(t,e){},"tY/5":function(t,e){},"v+BL":function(t,e){},v6Z8:function(t,e){},vzOQ:function(t,e){},wMPM:function(t,e){},wuaR:function(t,e){},"z/hq":function(t,e){},zNnh:function(t,e){},zPsg:function(t,e){},zV09:function(t,e){},zfRy:function(t,e){}},["jSQi"]);
//# sourceMappingURL=app.678cbe7715395e3a41e1.js.map